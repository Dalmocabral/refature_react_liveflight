function wA(e,t){for(var r=0;r<t.length;r++){const a=t[r];if(typeof a!="string"&&!Array.isArray(a)){for(const l in a)if(l!=="default"&&!(l in e)){const d=Object.getOwnPropertyDescriptor(a,l);d&&Object.defineProperty(e,l,d.get?d:{enumerable:!0,get:()=>a[l]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const d of l)if(d.type==="childList")for(const f of d.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&a(f)}).observe(document,{childList:!0,subtree:!0});function r(l){const d={};return l.integrity&&(d.integrity=l.integrity),l.referrerPolicy&&(d.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?d.credentials="include":l.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function a(l){if(l.ep)return;l.ep=!0;const d=r(l);fetch(l.href,d)}})();var SA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function zg(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var LC={exports:{}},Rg={},DC={exports:{}},wr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lf=Symbol.for("react.element"),CA=Symbol.for("react.portal"),EA=Symbol.for("react.fragment"),TA=Symbol.for("react.strict_mode"),PA=Symbol.for("react.profiler"),IA=Symbol.for("react.provider"),kA=Symbol.for("react.context"),MA=Symbol.for("react.forward_ref"),AA=Symbol.for("react.suspense"),zA=Symbol.for("react.memo"),RA=Symbol.for("react.lazy"),Ew=Symbol.iterator;function LA(e){return e===null||typeof e!="object"?null:(e=Ew&&e[Ew]||e["@@iterator"],typeof e=="function"?e:null)}var FC={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},OC=Object.assign,BC={};function eh(e,t,r){this.props=e,this.context=t,this.refs=BC,this.updater=r||FC}eh.prototype.isReactComponent={};eh.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};eh.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function NC(){}NC.prototype=eh.prototype;function _1(e,t,r){this.props=e,this.context=t,this.refs=BC,this.updater=r||FC}var x1=_1.prototype=new NC;x1.constructor=_1;OC(x1,eh.prototype);x1.isPureReactComponent=!0;var Tw=Array.isArray,$C=Object.prototype.hasOwnProperty,b1={current:null},jC={key:!0,ref:!0,__self:!0,__source:!0};function VC(e,t,r){var a,l={},d=null,f=null;if(t!=null)for(a in t.ref!==void 0&&(f=t.ref),t.key!==void 0&&(d=""+t.key),t)$C.call(t,a)&&!jC.hasOwnProperty(a)&&(l[a]=t[a]);var u=arguments.length-2;if(u===1)l.children=r;else if(1<u){for(var S=Array(u),T=0;T<u;T++)S[T]=arguments[T+2];l.children=S}if(e&&e.defaultProps)for(a in u=e.defaultProps,u)l[a]===void 0&&(l[a]=u[a]);return{$$typeof:Lf,type:e,key:d,ref:f,props:l,_owner:b1.current}}function DA(e,t){return{$$typeof:Lf,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function w1(e){return typeof e=="object"&&e!==null&&e.$$typeof===Lf}function FA(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Pw=/\/+/g;function Iv(e,t){return typeof e=="object"&&e!==null&&e.key!=null?FA(""+e.key):t.toString(36)}function Cm(e,t,r,a,l){var d=typeof e;(d==="undefined"||d==="boolean")&&(e=null);var f=!1;if(e===null)f=!0;else switch(d){case"string":case"number":f=!0;break;case"object":switch(e.$$typeof){case Lf:case CA:f=!0}}if(f)return f=e,l=l(f),e=a===""?"."+Iv(f,0):a,Tw(l)?(r="",e!=null&&(r=e.replace(Pw,"$&/")+"/"),Cm(l,t,r,"",function(T){return T})):l!=null&&(w1(l)&&(l=DA(l,r+(!l.key||f&&f.key===l.key?"":(""+l.key).replace(Pw,"$&/")+"/")+e)),t.push(l)),1;if(f=0,a=a===""?".":a+":",Tw(e))for(var u=0;u<e.length;u++){d=e[u];var S=a+Iv(d,u);f+=Cm(d,t,r,S,l)}else if(S=LA(e),typeof S=="function")for(e=S.call(e),u=0;!(d=e.next()).done;)d=d.value,S=a+Iv(d,u++),f+=Cm(d,t,r,S,l);else if(d==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return f}function Zp(e,t,r){if(e==null)return e;var a=[],l=0;return Cm(e,a,"","",function(d){return t.call(r,d,l++)}),a}function OA(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var no={current:null},Em={transition:null},BA={ReactCurrentDispatcher:no,ReactCurrentBatchConfig:Em,ReactCurrentOwner:b1};function UC(){throw Error("act(...) is not supported in production builds of React.")}wr.Children={map:Zp,forEach:function(e,t,r){Zp(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Zp(e,function(){t++}),t},toArray:function(e){return Zp(e,function(t){return t})||[]},only:function(e){if(!w1(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};wr.Component=eh;wr.Fragment=EA;wr.Profiler=PA;wr.PureComponent=_1;wr.StrictMode=TA;wr.Suspense=AA;wr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=BA;wr.act=UC;wr.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=OC({},e.props),l=e.key,d=e.ref,f=e._owner;if(t!=null){if(t.ref!==void 0&&(d=t.ref,f=b1.current),t.key!==void 0&&(l=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(S in t)$C.call(t,S)&&!jC.hasOwnProperty(S)&&(a[S]=t[S]===void 0&&u!==void 0?u[S]:t[S])}var S=arguments.length-2;if(S===1)a.children=r;else if(1<S){u=Array(S);for(var T=0;T<S;T++)u[T]=arguments[T+2];a.children=u}return{$$typeof:Lf,type:e.type,key:l,ref:d,props:a,_owner:f}};wr.createContext=function(e){return e={$$typeof:kA,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:IA,_context:e},e.Consumer=e};wr.createElement=VC;wr.createFactory=function(e){var t=VC.bind(null,e);return t.type=e,t};wr.createRef=function(){return{current:null}};wr.forwardRef=function(e){return{$$typeof:MA,render:e}};wr.isValidElement=w1;wr.lazy=function(e){return{$$typeof:RA,_payload:{_status:-1,_result:e},_init:OA}};wr.memo=function(e,t){return{$$typeof:zA,type:e,compare:t===void 0?null:t}};wr.startTransition=function(e){var t=Em.transition;Em.transition={};try{e()}finally{Em.transition=t}};wr.unstable_act=UC;wr.useCallback=function(e,t){return no.current.useCallback(e,t)};wr.useContext=function(e){return no.current.useContext(e)};wr.useDebugValue=function(){};wr.useDeferredValue=function(e){return no.current.useDeferredValue(e)};wr.useEffect=function(e,t){return no.current.useEffect(e,t)};wr.useId=function(){return no.current.useId()};wr.useImperativeHandle=function(e,t,r){return no.current.useImperativeHandle(e,t,r)};wr.useInsertionEffect=function(e,t){return no.current.useInsertionEffect(e,t)};wr.useLayoutEffect=function(e,t){return no.current.useLayoutEffect(e,t)};wr.useMemo=function(e,t){return no.current.useMemo(e,t)};wr.useReducer=function(e,t,r){return no.current.useReducer(e,t,r)};wr.useRef=function(e){return no.current.useRef(e)};wr.useState=function(e){return no.current.useState(e)};wr.useSyncExternalStore=function(e,t,r){return no.current.useSyncExternalStore(e,t,r)};wr.useTransition=function(){return no.current.useTransition()};wr.version="18.3.1";DC.exports=wr;var L=DC.exports;const nn=zg(L),Lg=wA({__proto__:null,default:nn},[L]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NA=L,$A=Symbol.for("react.element"),jA=Symbol.for("react.fragment"),VA=Object.prototype.hasOwnProperty,UA=NA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,HA={key:!0,ref:!0,__self:!0,__source:!0};function HC(e,t,r){var a,l={},d=null,f=null;r!==void 0&&(d=""+r),t.key!==void 0&&(d=""+t.key),t.ref!==void 0&&(f=t.ref);for(a in t)VA.call(t,a)&&!HA.hasOwnProperty(a)&&(l[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps,t)l[a]===void 0&&(l[a]=t[a]);return{$$typeof:$A,type:e,key:d,ref:f,props:l,_owner:UA.current}}Rg.Fragment=jA;Rg.jsx=HC;Rg.jsxs=HC;LC.exports=Rg;var qe=LC.exports,b0={},qC={exports:{}},qo={},WC={exports:{}},GC={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(ge,Fe){var Be=ge.length;ge.push(Fe);e:for(;0<Be;){var Ve=Be-1>>>1,Ze=ge[Ve];if(0<l(Ze,Fe))ge[Ve]=Fe,ge[Be]=Ze,Be=Ve;else break e}}function r(ge){return ge.length===0?null:ge[0]}function a(ge){if(ge.length===0)return null;var Fe=ge[0],Be=ge.pop();if(Be!==Fe){ge[0]=Be;e:for(var Ve=0,Ze=ge.length,gt=Ze>>>1;Ve<gt;){var st=2*(Ve+1)-1,St=ge[st],Et=st+1,Lt=ge[Et];if(0>l(St,Be))Et<Ze&&0>l(Lt,St)?(ge[Ve]=Lt,ge[Et]=Be,Ve=Et):(ge[Ve]=St,ge[st]=Be,Ve=st);else if(Et<Ze&&0>l(Lt,Be))ge[Ve]=Lt,ge[Et]=Be,Ve=Et;else break e}}return Fe}function l(ge,Fe){var Be=ge.sortIndex-Fe.sortIndex;return Be!==0?Be:ge.id-Fe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var d=performance;e.unstable_now=function(){return d.now()}}else{var f=Date,u=f.now();e.unstable_now=function(){return f.now()-u}}var S=[],T=[],M=1,A=null,I=3,G=!1,N=!1,q=!1,Z=typeof setTimeout=="function"?setTimeout:null,V=typeof clearTimeout=="function"?clearTimeout:null,F=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function H(ge){for(var Fe=r(T);Fe!==null;){if(Fe.callback===null)a(T);else if(Fe.startTime<=ge)a(T),Fe.sortIndex=Fe.expirationTime,t(S,Fe);else break;Fe=r(T)}}function Y(ge){if(q=!1,H(ge),!N)if(r(S)!==null)N=!0,ke(ne);else{var Fe=r(T);Fe!==null&&Se(Y,Fe.startTime-ge)}}function ne(ge,Fe){N=!1,q&&(q=!1,V(_e),_e=-1),G=!0;var Be=I;try{for(H(Fe),A=r(S);A!==null&&(!(A.expirationTime>Fe)||ge&&!ze());){var Ve=A.callback;if(typeof Ve=="function"){A.callback=null,I=A.priorityLevel;var Ze=Ve(A.expirationTime<=Fe);Fe=e.unstable_now(),typeof Ze=="function"?A.callback=Ze:A===r(S)&&a(S),H(Fe)}else a(S);A=r(S)}if(A!==null)var gt=!0;else{var st=r(T);st!==null&&Se(Y,st.startTime-Fe),gt=!1}return gt}finally{A=null,I=Be,G=!1}}var fe=!1,ie=null,_e=-1,be=5,Pe=-1;function ze(){return!(e.unstable_now()-Pe<be)}function We(){if(ie!==null){var ge=e.unstable_now();Pe=ge;var Fe=!0;try{Fe=ie(!0,ge)}finally{Fe?Ce():(fe=!1,ie=null)}}else fe=!1}var Ce;if(typeof F=="function")Ce=function(){F(We)};else if(typeof MessageChannel<"u"){var Ie=new MessageChannel,Ke=Ie.port2;Ie.port1.onmessage=We,Ce=function(){Ke.postMessage(null)}}else Ce=function(){Z(We,0)};function ke(ge){ie=ge,fe||(fe=!0,Ce())}function Se(ge,Fe){_e=Z(function(){ge(e.unstable_now())},Fe)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ge){ge.callback=null},e.unstable_continueExecution=function(){N||G||(N=!0,ke(ne))},e.unstable_forceFrameRate=function(ge){0>ge||125<ge?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):be=0<ge?Math.floor(1e3/ge):5},e.unstable_getCurrentPriorityLevel=function(){return I},e.unstable_getFirstCallbackNode=function(){return r(S)},e.unstable_next=function(ge){switch(I){case 1:case 2:case 3:var Fe=3;break;default:Fe=I}var Be=I;I=Fe;try{return ge()}finally{I=Be}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(ge,Fe){switch(ge){case 1:case 2:case 3:case 4:case 5:break;default:ge=3}var Be=I;I=ge;try{return Fe()}finally{I=Be}},e.unstable_scheduleCallback=function(ge,Fe,Be){var Ve=e.unstable_now();switch(typeof Be=="object"&&Be!==null?(Be=Be.delay,Be=typeof Be=="number"&&0<Be?Ve+Be:Ve):Be=Ve,ge){case 1:var Ze=-1;break;case 2:Ze=250;break;case 5:Ze=1073741823;break;case 4:Ze=1e4;break;default:Ze=5e3}return Ze=Be+Ze,ge={id:M++,callback:Fe,priorityLevel:ge,startTime:Be,expirationTime:Ze,sortIndex:-1},Be>Ve?(ge.sortIndex=Be,t(T,ge),r(S)===null&&ge===r(T)&&(q?(V(_e),_e=-1):q=!0,Se(Y,Be-Ve))):(ge.sortIndex=Ze,t(S,ge),N||G||(N=!0,ke(ne))),ge},e.unstable_shouldYield=ze,e.unstable_wrapCallback=function(ge){var Fe=I;return function(){var Be=I;I=Fe;try{return ge.apply(this,arguments)}finally{I=Be}}}})(GC);WC.exports=GC;var qA=WC.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WA=L,Vo=qA;function it(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ZC=new Set,tf={};function bc(e,t){Vu(e,t),Vu(e+"Capture",t)}function Vu(e,t){for(tf[e]=t,e=0;e<t.length;e++)ZC.add(t[e])}var Ss=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),w0=Object.prototype.hasOwnProperty,GA=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Iw={},kw={};function ZA(e){return w0.call(kw,e)?!0:w0.call(Iw,e)?!1:GA.test(e)?kw[e]=!0:(Iw[e]=!0,!1)}function KA(e,t,r,a){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function XA(e,t,r,a){if(t===null||typeof t>"u"||KA(e,t,r,a))return!0;if(a)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function io(e,t,r,a,l,d,f){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=l,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=d,this.removeEmptyString=f}var Ei={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ei[e]=new io(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ei[t]=new io(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ei[e]=new io(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ei[e]=new io(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ei[e]=new io(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ei[e]=new io(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ei[e]=new io(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ei[e]=new io(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ei[e]=new io(e,5,!1,e.toLowerCase(),null,!1,!1)});var S1=/[\-:]([a-z])/g;function C1(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(S1,C1);Ei[t]=new io(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(S1,C1);Ei[t]=new io(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(S1,C1);Ei[t]=new io(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ei[e]=new io(e,1,!1,e.toLowerCase(),null,!1,!1)});Ei.xlinkHref=new io("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ei[e]=new io(e,1,!1,e.toLowerCase(),null,!0,!0)});function E1(e,t,r,a){var l=Ei.hasOwnProperty(t)?Ei[t]:null;(l!==null?l.type!==0:a||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(XA(t,r,l,a)&&(r=null),a||l===null?ZA(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):l.mustUseProperty?e[l.propertyName]=r===null?l.type===3?!1:"":r:(t=l.attributeName,a=l.attributeNamespace,r===null?e.removeAttribute(t):(l=l.type,r=l===3||l===4&&r===!0?"":""+r,a?e.setAttributeNS(a,t,r):e.setAttribute(t,r))))}var Ps=WA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Kp=Symbol.for("react.element"),xu=Symbol.for("react.portal"),bu=Symbol.for("react.fragment"),T1=Symbol.for("react.strict_mode"),S0=Symbol.for("react.profiler"),KC=Symbol.for("react.provider"),XC=Symbol.for("react.context"),P1=Symbol.for("react.forward_ref"),C0=Symbol.for("react.suspense"),E0=Symbol.for("react.suspense_list"),I1=Symbol.for("react.memo"),nl=Symbol.for("react.lazy"),JC=Symbol.for("react.offscreen"),Mw=Symbol.iterator;function xd(e){return e===null||typeof e!="object"?null:(e=Mw&&e[Mw]||e["@@iterator"],typeof e=="function"?e:null)}var Dn=Object.assign,kv;function Ld(e){if(kv===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);kv=t&&t[1]||""}return`
`+kv+e}var Mv=!1;function Av(e,t){if(!e||Mv)return"";Mv=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(T){var a=T}Reflect.construct(e,[],t)}else{try{t.call()}catch(T){a=T}e.call(t.prototype)}else{try{throw Error()}catch(T){a=T}e()}}catch(T){if(T&&a&&typeof T.stack=="string"){for(var l=T.stack.split(`
`),d=a.stack.split(`
`),f=l.length-1,u=d.length-1;1<=f&&0<=u&&l[f]!==d[u];)u--;for(;1<=f&&0<=u;f--,u--)if(l[f]!==d[u]){if(f!==1||u!==1)do if(f--,u--,0>u||l[f]!==d[u]){var S=`
`+l[f].replace(" at new "," at ");return e.displayName&&S.includes("<anonymous>")&&(S=S.replace("<anonymous>",e.displayName)),S}while(1<=f&&0<=u);break}}}finally{Mv=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Ld(e):""}function JA(e){switch(e.tag){case 5:return Ld(e.type);case 16:return Ld("Lazy");case 13:return Ld("Suspense");case 19:return Ld("SuspenseList");case 0:case 2:case 15:return e=Av(e.type,!1),e;case 11:return e=Av(e.type.render,!1),e;case 1:return e=Av(e.type,!0),e;default:return""}}function T0(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case bu:return"Fragment";case xu:return"Portal";case S0:return"Profiler";case T1:return"StrictMode";case C0:return"Suspense";case E0:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case XC:return(e.displayName||"Context")+".Consumer";case KC:return(e._context.displayName||"Context")+".Provider";case P1:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case I1:return t=e.displayName||null,t!==null?t:T0(e.type)||"Memo";case nl:t=e._payload,e=e._init;try{return T0(e(t))}catch{}}return null}function YA(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return T0(t);case 8:return t===T1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function xl(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function YC(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function QA(e){var t=YC(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var l=r.get,d=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return l.call(this)},set:function(f){a=""+f,d.call(this,f)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return a},setValue:function(f){a=""+f},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Xp(e){e._valueTracker||(e._valueTracker=QA(e))}function QC(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),a="";return e&&(a=YC(e)?e.checked?"true":"false":e.value),e=a,e!==r?(t.setValue(e),!0):!1}function Gm(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function P0(e,t){var r=t.checked;return Dn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Aw(e,t){var r=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;r=xl(t.value!=null?t.value:r),e._wrapperState={initialChecked:a,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function eE(e,t){t=t.checked,t!=null&&E1(e,"checked",t,!1)}function I0(e,t){eE(e,t);var r=xl(t.value),a=t.type;if(r!=null)a==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?k0(e,t.type,r):t.hasOwnProperty("defaultValue")&&k0(e,t.type,xl(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function zw(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function k0(e,t,r){(t!=="number"||Gm(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Dd=Array.isArray;function Du(e,t,r,a){if(e=e.options,t){t={};for(var l=0;l<r.length;l++)t["$"+r[l]]=!0;for(r=0;r<e.length;r++)l=t.hasOwnProperty("$"+e[r].value),e[r].selected!==l&&(e[r].selected=l),l&&a&&(e[r].defaultSelected=!0)}else{for(r=""+xl(r),t=null,l=0;l<e.length;l++){if(e[l].value===r){e[l].selected=!0,a&&(e[l].defaultSelected=!0);return}t!==null||e[l].disabled||(t=e[l])}t!==null&&(t.selected=!0)}}function M0(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(it(91));return Dn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Rw(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(it(92));if(Dd(r)){if(1<r.length)throw Error(it(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:xl(r)}}function tE(e,t){var r=xl(t.value),a=xl(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),a!=null&&(e.defaultValue=""+a)}function Lw(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function rE(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function A0(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?rE(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Jp,nE=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,a,l){MSApp.execUnsafeLocalFunction(function(){return e(t,r,a,l)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Jp=Jp||document.createElement("div"),Jp.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Jp.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function rf(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var $d={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},e3=["Webkit","ms","Moz","O"];Object.keys($d).forEach(function(e){e3.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),$d[t]=$d[e]})});function iE(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||$d.hasOwnProperty(e)&&$d[e]?(""+t).trim():t+"px"}function oE(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var a=r.indexOf("--")===0,l=iE(r,t[r],a);r==="float"&&(r="cssFloat"),a?e.setProperty(r,l):e[r]=l}}var t3=Dn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function z0(e,t){if(t){if(t3[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(it(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(it(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(it(61))}if(t.style!=null&&typeof t.style!="object")throw Error(it(62))}}function R0(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var L0=null;function k1(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var D0=null,Fu=null,Ou=null;function Dw(e){if(e=Of(e)){if(typeof D0!="function")throw Error(it(280));var t=e.stateNode;t&&(t=Ng(t),D0(e.stateNode,e.type,t))}}function aE(e){Fu?Ou?Ou.push(e):Ou=[e]:Fu=e}function sE(){if(Fu){var e=Fu,t=Ou;if(Ou=Fu=null,Dw(e),t)for(e=0;e<t.length;e++)Dw(t[e])}}function lE(e,t){return e(t)}function cE(){}var zv=!1;function uE(e,t,r){if(zv)return e(t,r);zv=!0;try{return lE(e,t,r)}finally{zv=!1,(Fu!==null||Ou!==null)&&(cE(),sE())}}function nf(e,t){var r=e.stateNode;if(r===null)return null;var a=Ng(r);if(a===null)return null;r=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(it(231,t,typeof r));return r}var F0=!1;if(Ss)try{var bd={};Object.defineProperty(bd,"passive",{get:function(){F0=!0}}),window.addEventListener("test",bd,bd),window.removeEventListener("test",bd,bd)}catch{F0=!1}function r3(e,t,r,a,l,d,f,u,S){var T=Array.prototype.slice.call(arguments,3);try{t.apply(r,T)}catch(M){this.onError(M)}}var jd=!1,Zm=null,Km=!1,O0=null,n3={onError:function(e){jd=!0,Zm=e}};function i3(e,t,r,a,l,d,f,u,S){jd=!1,Zm=null,r3.apply(n3,arguments)}function o3(e,t,r,a,l,d,f,u,S){if(i3.apply(this,arguments),jd){if(jd){var T=Zm;jd=!1,Zm=null}else throw Error(it(198));Km||(Km=!0,O0=T)}}function wc(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function hE(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Fw(e){if(wc(e)!==e)throw Error(it(188))}function a3(e){var t=e.alternate;if(!t){if(t=wc(e),t===null)throw Error(it(188));return t!==e?null:e}for(var r=e,a=t;;){var l=r.return;if(l===null)break;var d=l.alternate;if(d===null){if(a=l.return,a!==null){r=a;continue}break}if(l.child===d.child){for(d=l.child;d;){if(d===r)return Fw(l),e;if(d===a)return Fw(l),t;d=d.sibling}throw Error(it(188))}if(r.return!==a.return)r=l,a=d;else{for(var f=!1,u=l.child;u;){if(u===r){f=!0,r=l,a=d;break}if(u===a){f=!0,a=l,r=d;break}u=u.sibling}if(!f){for(u=d.child;u;){if(u===r){f=!0,r=d,a=l;break}if(u===a){f=!0,a=d,r=l;break}u=u.sibling}if(!f)throw Error(it(189))}}if(r.alternate!==a)throw Error(it(190))}if(r.tag!==3)throw Error(it(188));return r.stateNode.current===r?e:t}function dE(e){return e=a3(e),e!==null?fE(e):null}function fE(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=fE(e);if(t!==null)return t;e=e.sibling}return null}var pE=Vo.unstable_scheduleCallback,Ow=Vo.unstable_cancelCallback,s3=Vo.unstable_shouldYield,l3=Vo.unstable_requestPaint,qn=Vo.unstable_now,c3=Vo.unstable_getCurrentPriorityLevel,M1=Vo.unstable_ImmediatePriority,mE=Vo.unstable_UserBlockingPriority,Xm=Vo.unstable_NormalPriority,u3=Vo.unstable_LowPriority,gE=Vo.unstable_IdlePriority,Dg=null,Za=null;function h3(e){if(Za&&typeof Za.onCommitFiberRoot=="function")try{Za.onCommitFiberRoot(Dg,e,void 0,(e.current.flags&128)===128)}catch{}}var Ca=Math.clz32?Math.clz32:p3,d3=Math.log,f3=Math.LN2;function p3(e){return e>>>=0,e===0?32:31-(d3(e)/f3|0)|0}var Yp=64,Qp=4194304;function Fd(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Jm(e,t){var r=e.pendingLanes;if(r===0)return 0;var a=0,l=e.suspendedLanes,d=e.pingedLanes,f=r&268435455;if(f!==0){var u=f&~l;u!==0?a=Fd(u):(d&=f,d!==0&&(a=Fd(d)))}else f=r&~l,f!==0?a=Fd(f):d!==0&&(a=Fd(d));if(a===0)return 0;if(t!==0&&t!==a&&!(t&l)&&(l=a&-a,d=t&-t,l>=d||l===16&&(d&4194240)!==0))return t;if(a&4&&(a|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=a;0<t;)r=31-Ca(t),l=1<<r,a|=e[r],t&=~l;return a}function m3(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function g3(e,t){for(var r=e.suspendedLanes,a=e.pingedLanes,l=e.expirationTimes,d=e.pendingLanes;0<d;){var f=31-Ca(d),u=1<<f,S=l[f];S===-1?(!(u&r)||u&a)&&(l[f]=m3(u,t)):S<=t&&(e.expiredLanes|=u),d&=~u}}function B0(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function yE(){var e=Yp;return Yp<<=1,!(Yp&4194240)&&(Yp=64),e}function Rv(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Df(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ca(t),e[t]=r}function y3(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<r;){var l=31-Ca(r),d=1<<l;t[l]=0,a[l]=-1,e[l]=-1,r&=~d}}function A1(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var a=31-Ca(r),l=1<<a;l&t|e[a]&t&&(e[a]|=t),r&=~l}}var on=0;function vE(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var _E,z1,xE,bE,wE,N0=!1,em=[],dl=null,fl=null,pl=null,of=new Map,af=new Map,ol=[],v3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Bw(e,t){switch(e){case"focusin":case"focusout":dl=null;break;case"dragenter":case"dragleave":fl=null;break;case"mouseover":case"mouseout":pl=null;break;case"pointerover":case"pointerout":of.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":af.delete(t.pointerId)}}function wd(e,t,r,a,l,d){return e===null||e.nativeEvent!==d?(e={blockedOn:t,domEventName:r,eventSystemFlags:a,nativeEvent:d,targetContainers:[l]},t!==null&&(t=Of(t),t!==null&&z1(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,l!==null&&t.indexOf(l)===-1&&t.push(l),e)}function _3(e,t,r,a,l){switch(t){case"focusin":return dl=wd(dl,e,t,r,a,l),!0;case"dragenter":return fl=wd(fl,e,t,r,a,l),!0;case"mouseover":return pl=wd(pl,e,t,r,a,l),!0;case"pointerover":var d=l.pointerId;return of.set(d,wd(of.get(d)||null,e,t,r,a,l)),!0;case"gotpointercapture":return d=l.pointerId,af.set(d,wd(af.get(d)||null,e,t,r,a,l)),!0}return!1}function SE(e){var t=nc(e.target);if(t!==null){var r=wc(t);if(r!==null){if(t=r.tag,t===13){if(t=hE(r),t!==null){e.blockedOn=t,wE(e.priority,function(){xE(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Tm(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=$0(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var a=new r.constructor(r.type,r);L0=a,r.target.dispatchEvent(a),L0=null}else return t=Of(r),t!==null&&z1(t),e.blockedOn=r,!1;t.shift()}return!0}function Nw(e,t,r){Tm(e)&&r.delete(t)}function x3(){N0=!1,dl!==null&&Tm(dl)&&(dl=null),fl!==null&&Tm(fl)&&(fl=null),pl!==null&&Tm(pl)&&(pl=null),of.forEach(Nw),af.forEach(Nw)}function Sd(e,t){e.blockedOn===t&&(e.blockedOn=null,N0||(N0=!0,Vo.unstable_scheduleCallback(Vo.unstable_NormalPriority,x3)))}function sf(e){function t(l){return Sd(l,e)}if(0<em.length){Sd(em[0],e);for(var r=1;r<em.length;r++){var a=em[r];a.blockedOn===e&&(a.blockedOn=null)}}for(dl!==null&&Sd(dl,e),fl!==null&&Sd(fl,e),pl!==null&&Sd(pl,e),of.forEach(t),af.forEach(t),r=0;r<ol.length;r++)a=ol[r],a.blockedOn===e&&(a.blockedOn=null);for(;0<ol.length&&(r=ol[0],r.blockedOn===null);)SE(r),r.blockedOn===null&&ol.shift()}var Bu=Ps.ReactCurrentBatchConfig,Ym=!0;function b3(e,t,r,a){var l=on,d=Bu.transition;Bu.transition=null;try{on=1,R1(e,t,r,a)}finally{on=l,Bu.transition=d}}function w3(e,t,r,a){var l=on,d=Bu.transition;Bu.transition=null;try{on=4,R1(e,t,r,a)}finally{on=l,Bu.transition=d}}function R1(e,t,r,a){if(Ym){var l=$0(e,t,r,a);if(l===null)Uv(e,t,a,Qm,r),Bw(e,a);else if(_3(l,e,t,r,a))a.stopPropagation();else if(Bw(e,a),t&4&&-1<v3.indexOf(e)){for(;l!==null;){var d=Of(l);if(d!==null&&_E(d),d=$0(e,t,r,a),d===null&&Uv(e,t,a,Qm,r),d===l)break;l=d}l!==null&&a.stopPropagation()}else Uv(e,t,a,null,r)}}var Qm=null;function $0(e,t,r,a){if(Qm=null,e=k1(a),e=nc(e),e!==null)if(t=wc(e),t===null)e=null;else if(r=t.tag,r===13){if(e=hE(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qm=e,null}function CE(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(c3()){case M1:return 1;case mE:return 4;case Xm:case u3:return 16;case gE:return 536870912;default:return 16}default:return 16}}var sl=null,L1=null,Pm=null;function EE(){if(Pm)return Pm;var e,t=L1,r=t.length,a,l="value"in sl?sl.value:sl.textContent,d=l.length;for(e=0;e<r&&t[e]===l[e];e++);var f=r-e;for(a=1;a<=f&&t[r-a]===l[d-a];a++);return Pm=l.slice(e,1<a?1-a:void 0)}function Im(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function tm(){return!0}function $w(){return!1}function Wo(e){function t(r,a,l,d,f){this._reactName=r,this._targetInst=l,this.type=a,this.nativeEvent=d,this.target=f,this.currentTarget=null;for(var u in e)e.hasOwnProperty(u)&&(r=e[u],this[u]=r?r(d):d[u]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?tm:$w,this.isPropagationStopped=$w,this}return Dn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=tm)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=tm)},persist:function(){},isPersistent:tm}),t}var th={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},D1=Wo(th),Ff=Dn({},th,{view:0,detail:0}),S3=Wo(Ff),Lv,Dv,Cd,Fg=Dn({},Ff,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:F1,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Cd&&(Cd&&e.type==="mousemove"?(Lv=e.screenX-Cd.screenX,Dv=e.screenY-Cd.screenY):Dv=Lv=0,Cd=e),Lv)},movementY:function(e){return"movementY"in e?e.movementY:Dv}}),jw=Wo(Fg),C3=Dn({},Fg,{dataTransfer:0}),E3=Wo(C3),T3=Dn({},Ff,{relatedTarget:0}),Fv=Wo(T3),P3=Dn({},th,{animationName:0,elapsedTime:0,pseudoElement:0}),I3=Wo(P3),k3=Dn({},th,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),M3=Wo(k3),A3=Dn({},th,{data:0}),Vw=Wo(A3),z3={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},R3={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},L3={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function D3(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=L3[e])?!!t[e]:!1}function F1(){return D3}var F3=Dn({},Ff,{key:function(e){if(e.key){var t=z3[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Im(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?R3[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:F1,charCode:function(e){return e.type==="keypress"?Im(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Im(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),O3=Wo(F3),B3=Dn({},Fg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Uw=Wo(B3),N3=Dn({},Ff,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:F1}),$3=Wo(N3),j3=Dn({},th,{propertyName:0,elapsedTime:0,pseudoElement:0}),V3=Wo(j3),U3=Dn({},Fg,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),H3=Wo(U3),q3=[9,13,27,32],O1=Ss&&"CompositionEvent"in window,Vd=null;Ss&&"documentMode"in document&&(Vd=document.documentMode);var W3=Ss&&"TextEvent"in window&&!Vd,TE=Ss&&(!O1||Vd&&8<Vd&&11>=Vd),Hw=" ",qw=!1;function PE(e,t){switch(e){case"keyup":return q3.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function IE(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var wu=!1;function G3(e,t){switch(e){case"compositionend":return IE(t);case"keypress":return t.which!==32?null:(qw=!0,Hw);case"textInput":return e=t.data,e===Hw&&qw?null:e;default:return null}}function Z3(e,t){if(wu)return e==="compositionend"||!O1&&PE(e,t)?(e=EE(),Pm=L1=sl=null,wu=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return TE&&t.locale!=="ko"?null:t.data;default:return null}}var K3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ww(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!K3[e.type]:t==="textarea"}function kE(e,t,r,a){aE(a),t=eg(t,"onChange"),0<t.length&&(r=new D1("onChange","change",null,r,a),e.push({event:r,listeners:t}))}var Ud=null,lf=null;function X3(e){$E(e,0)}function Og(e){var t=Eu(e);if(QC(t))return e}function J3(e,t){if(e==="change")return t}var ME=!1;if(Ss){var Ov;if(Ss){var Bv="oninput"in document;if(!Bv){var Gw=document.createElement("div");Gw.setAttribute("oninput","return;"),Bv=typeof Gw.oninput=="function"}Ov=Bv}else Ov=!1;ME=Ov&&(!document.documentMode||9<document.documentMode)}function Zw(){Ud&&(Ud.detachEvent("onpropertychange",AE),lf=Ud=null)}function AE(e){if(e.propertyName==="value"&&Og(lf)){var t=[];kE(t,lf,e,k1(e)),uE(X3,t)}}function Y3(e,t,r){e==="focusin"?(Zw(),Ud=t,lf=r,Ud.attachEvent("onpropertychange",AE)):e==="focusout"&&Zw()}function Q3(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Og(lf)}function e4(e,t){if(e==="click")return Og(t)}function t4(e,t){if(e==="input"||e==="change")return Og(t)}function r4(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ia=typeof Object.is=="function"?Object.is:r4;function cf(e,t){if(Ia(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),a=Object.keys(t);if(r.length!==a.length)return!1;for(a=0;a<r.length;a++){var l=r[a];if(!w0.call(t,l)||!Ia(e[l],t[l]))return!1}return!0}function Kw(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Xw(e,t){var r=Kw(e);e=0;for(var a;r;){if(r.nodeType===3){if(a=e+r.textContent.length,e<=t&&a>=t)return{node:r,offset:t-e};e=a}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Kw(r)}}function zE(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?zE(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function RE(){for(var e=window,t=Gm();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Gm(e.document)}return t}function B1(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function n4(e){var t=RE(),r=e.focusedElem,a=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&zE(r.ownerDocument.documentElement,r)){if(a!==null&&B1(r)){if(t=a.start,e=a.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var l=r.textContent.length,d=Math.min(a.start,l);a=a.end===void 0?d:Math.min(a.end,l),!e.extend&&d>a&&(l=a,a=d,d=l),l=Xw(r,d);var f=Xw(r,a);l&&f&&(e.rangeCount!==1||e.anchorNode!==l.node||e.anchorOffset!==l.offset||e.focusNode!==f.node||e.focusOffset!==f.offset)&&(t=t.createRange(),t.setStart(l.node,l.offset),e.removeAllRanges(),d>a?(e.addRange(t),e.extend(f.node,f.offset)):(t.setEnd(f.node,f.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var i4=Ss&&"documentMode"in document&&11>=document.documentMode,Su=null,j0=null,Hd=null,V0=!1;function Jw(e,t,r){var a=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;V0||Su==null||Su!==Gm(a)||(a=Su,"selectionStart"in a&&B1(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Hd&&cf(Hd,a)||(Hd=a,a=eg(j0,"onSelect"),0<a.length&&(t=new D1("onSelect","select",null,t,r),e.push({event:t,listeners:a}),t.target=Su)))}function rm(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Cu={animationend:rm("Animation","AnimationEnd"),animationiteration:rm("Animation","AnimationIteration"),animationstart:rm("Animation","AnimationStart"),transitionend:rm("Transition","TransitionEnd")},Nv={},LE={};Ss&&(LE=document.createElement("div").style,"AnimationEvent"in window||(delete Cu.animationend.animation,delete Cu.animationiteration.animation,delete Cu.animationstart.animation),"TransitionEvent"in window||delete Cu.transitionend.transition);function Bg(e){if(Nv[e])return Nv[e];if(!Cu[e])return e;var t=Cu[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in LE)return Nv[e]=t[r];return e}var DE=Bg("animationend"),FE=Bg("animationiteration"),OE=Bg("animationstart"),BE=Bg("transitionend"),NE=new Map,Yw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Sl(e,t){NE.set(e,t),bc(t,[e])}for(var $v=0;$v<Yw.length;$v++){var jv=Yw[$v],o4=jv.toLowerCase(),a4=jv[0].toUpperCase()+jv.slice(1);Sl(o4,"on"+a4)}Sl(DE,"onAnimationEnd");Sl(FE,"onAnimationIteration");Sl(OE,"onAnimationStart");Sl("dblclick","onDoubleClick");Sl("focusin","onFocus");Sl("focusout","onBlur");Sl(BE,"onTransitionEnd");Vu("onMouseEnter",["mouseout","mouseover"]);Vu("onMouseLeave",["mouseout","mouseover"]);Vu("onPointerEnter",["pointerout","pointerover"]);Vu("onPointerLeave",["pointerout","pointerover"]);bc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));bc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));bc("onBeforeInput",["compositionend","keypress","textInput","paste"]);bc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));bc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));bc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Od="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),s4=new Set("cancel close invalid load scroll toggle".split(" ").concat(Od));function Qw(e,t,r){var a=e.type||"unknown-event";e.currentTarget=r,o3(a,t,void 0,e),e.currentTarget=null}function $E(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var a=e[r],l=a.event;a=a.listeners;e:{var d=void 0;if(t)for(var f=a.length-1;0<=f;f--){var u=a[f],S=u.instance,T=u.currentTarget;if(u=u.listener,S!==d&&l.isPropagationStopped())break e;Qw(l,u,T),d=S}else for(f=0;f<a.length;f++){if(u=a[f],S=u.instance,T=u.currentTarget,u=u.listener,S!==d&&l.isPropagationStopped())break e;Qw(l,u,T),d=S}}}if(Km)throw e=O0,Km=!1,O0=null,e}function Sn(e,t){var r=t[G0];r===void 0&&(r=t[G0]=new Set);var a=e+"__bubble";r.has(a)||(jE(t,e,2,!1),r.add(a))}function Vv(e,t,r){var a=0;t&&(a|=4),jE(r,e,a,t)}var nm="_reactListening"+Math.random().toString(36).slice(2);function uf(e){if(!e[nm]){e[nm]=!0,ZC.forEach(function(r){r!=="selectionchange"&&(s4.has(r)||Vv(r,!1,e),Vv(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[nm]||(t[nm]=!0,Vv("selectionchange",!1,t))}}function jE(e,t,r,a){switch(CE(t)){case 1:var l=b3;break;case 4:l=w3;break;default:l=R1}r=l.bind(null,t,r,e),l=void 0,!F0||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(l=!0),a?l!==void 0?e.addEventListener(t,r,{capture:!0,passive:l}):e.addEventListener(t,r,!0):l!==void 0?e.addEventListener(t,r,{passive:l}):e.addEventListener(t,r,!1)}function Uv(e,t,r,a,l){var d=a;if(!(t&1)&&!(t&2)&&a!==null)e:for(;;){if(a===null)return;var f=a.tag;if(f===3||f===4){var u=a.stateNode.containerInfo;if(u===l||u.nodeType===8&&u.parentNode===l)break;if(f===4)for(f=a.return;f!==null;){var S=f.tag;if((S===3||S===4)&&(S=f.stateNode.containerInfo,S===l||S.nodeType===8&&S.parentNode===l))return;f=f.return}for(;u!==null;){if(f=nc(u),f===null)return;if(S=f.tag,S===5||S===6){a=d=f;continue e}u=u.parentNode}}a=a.return}uE(function(){var T=d,M=k1(r),A=[];e:{var I=NE.get(e);if(I!==void 0){var G=D1,N=e;switch(e){case"keypress":if(Im(r)===0)break e;case"keydown":case"keyup":G=O3;break;case"focusin":N="focus",G=Fv;break;case"focusout":N="blur",G=Fv;break;case"beforeblur":case"afterblur":G=Fv;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":G=jw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":G=E3;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":G=$3;break;case DE:case FE:case OE:G=I3;break;case BE:G=V3;break;case"scroll":G=S3;break;case"wheel":G=H3;break;case"copy":case"cut":case"paste":G=M3;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":G=Uw}var q=(t&4)!==0,Z=!q&&e==="scroll",V=q?I!==null?I+"Capture":null:I;q=[];for(var F=T,H;F!==null;){H=F;var Y=H.stateNode;if(H.tag===5&&Y!==null&&(H=Y,V!==null&&(Y=nf(F,V),Y!=null&&q.push(hf(F,Y,H)))),Z)break;F=F.return}0<q.length&&(I=new G(I,N,null,r,M),A.push({event:I,listeners:q}))}}if(!(t&7)){e:{if(I=e==="mouseover"||e==="pointerover",G=e==="mouseout"||e==="pointerout",I&&r!==L0&&(N=r.relatedTarget||r.fromElement)&&(nc(N)||N[Cs]))break e;if((G||I)&&(I=M.window===M?M:(I=M.ownerDocument)?I.defaultView||I.parentWindow:window,G?(N=r.relatedTarget||r.toElement,G=T,N=N?nc(N):null,N!==null&&(Z=wc(N),N!==Z||N.tag!==5&&N.tag!==6)&&(N=null)):(G=null,N=T),G!==N)){if(q=jw,Y="onMouseLeave",V="onMouseEnter",F="mouse",(e==="pointerout"||e==="pointerover")&&(q=Uw,Y="onPointerLeave",V="onPointerEnter",F="pointer"),Z=G==null?I:Eu(G),H=N==null?I:Eu(N),I=new q(Y,F+"leave",G,r,M),I.target=Z,I.relatedTarget=H,Y=null,nc(M)===T&&(q=new q(V,F+"enter",N,r,M),q.target=H,q.relatedTarget=Z,Y=q),Z=Y,G&&N)t:{for(q=G,V=N,F=0,H=q;H;H=uu(H))F++;for(H=0,Y=V;Y;Y=uu(Y))H++;for(;0<F-H;)q=uu(q),F--;for(;0<H-F;)V=uu(V),H--;for(;F--;){if(q===V||V!==null&&q===V.alternate)break t;q=uu(q),V=uu(V)}q=null}else q=null;G!==null&&e2(A,I,G,q,!1),N!==null&&Z!==null&&e2(A,Z,N,q,!0)}}e:{if(I=T?Eu(T):window,G=I.nodeName&&I.nodeName.toLowerCase(),G==="select"||G==="input"&&I.type==="file")var ne=J3;else if(Ww(I))if(ME)ne=t4;else{ne=Q3;var fe=Y3}else(G=I.nodeName)&&G.toLowerCase()==="input"&&(I.type==="checkbox"||I.type==="radio")&&(ne=e4);if(ne&&(ne=ne(e,T))){kE(A,ne,r,M);break e}fe&&fe(e,I,T),e==="focusout"&&(fe=I._wrapperState)&&fe.controlled&&I.type==="number"&&k0(I,"number",I.value)}switch(fe=T?Eu(T):window,e){case"focusin":(Ww(fe)||fe.contentEditable==="true")&&(Su=fe,j0=T,Hd=null);break;case"focusout":Hd=j0=Su=null;break;case"mousedown":V0=!0;break;case"contextmenu":case"mouseup":case"dragend":V0=!1,Jw(A,r,M);break;case"selectionchange":if(i4)break;case"keydown":case"keyup":Jw(A,r,M)}var ie;if(O1)e:{switch(e){case"compositionstart":var _e="onCompositionStart";break e;case"compositionend":_e="onCompositionEnd";break e;case"compositionupdate":_e="onCompositionUpdate";break e}_e=void 0}else wu?PE(e,r)&&(_e="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(_e="onCompositionStart");_e&&(TE&&r.locale!=="ko"&&(wu||_e!=="onCompositionStart"?_e==="onCompositionEnd"&&wu&&(ie=EE()):(sl=M,L1="value"in sl?sl.value:sl.textContent,wu=!0)),fe=eg(T,_e),0<fe.length&&(_e=new Vw(_e,e,null,r,M),A.push({event:_e,listeners:fe}),ie?_e.data=ie:(ie=IE(r),ie!==null&&(_e.data=ie)))),(ie=W3?G3(e,r):Z3(e,r))&&(T=eg(T,"onBeforeInput"),0<T.length&&(M=new Vw("onBeforeInput","beforeinput",null,r,M),A.push({event:M,listeners:T}),M.data=ie))}$E(A,t)})}function hf(e,t,r){return{instance:e,listener:t,currentTarget:r}}function eg(e,t){for(var r=t+"Capture",a=[];e!==null;){var l=e,d=l.stateNode;l.tag===5&&d!==null&&(l=d,d=nf(e,r),d!=null&&a.unshift(hf(e,d,l)),d=nf(e,t),d!=null&&a.push(hf(e,d,l))),e=e.return}return a}function uu(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function e2(e,t,r,a,l){for(var d=t._reactName,f=[];r!==null&&r!==a;){var u=r,S=u.alternate,T=u.stateNode;if(S!==null&&S===a)break;u.tag===5&&T!==null&&(u=T,l?(S=nf(r,d),S!=null&&f.unshift(hf(r,S,u))):l||(S=nf(r,d),S!=null&&f.push(hf(r,S,u)))),r=r.return}f.length!==0&&e.push({event:t,listeners:f})}var l4=/\r\n?/g,c4=/\u0000|\uFFFD/g;function t2(e){return(typeof e=="string"?e:""+e).replace(l4,`
`).replace(c4,"")}function im(e,t,r){if(t=t2(t),t2(e)!==t&&r)throw Error(it(425))}function tg(){}var U0=null,H0=null;function q0(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var W0=typeof setTimeout=="function"?setTimeout:void 0,u4=typeof clearTimeout=="function"?clearTimeout:void 0,r2=typeof Promise=="function"?Promise:void 0,h4=typeof queueMicrotask=="function"?queueMicrotask:typeof r2<"u"?function(e){return r2.resolve(null).then(e).catch(d4)}:W0;function d4(e){setTimeout(function(){throw e})}function Hv(e,t){var r=t,a=0;do{var l=r.nextSibling;if(e.removeChild(r),l&&l.nodeType===8)if(r=l.data,r==="/$"){if(a===0){e.removeChild(l),sf(t);return}a--}else r!=="$"&&r!=="$?"&&r!=="$!"||a++;r=l}while(r);sf(t)}function ml(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function n2(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var rh=Math.random().toString(36).slice(2),Wa="__reactFiber$"+rh,df="__reactProps$"+rh,Cs="__reactContainer$"+rh,G0="__reactEvents$"+rh,f4="__reactListeners$"+rh,p4="__reactHandles$"+rh;function nc(e){var t=e[Wa];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Cs]||r[Wa]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=n2(e);e!==null;){if(r=e[Wa])return r;e=n2(e)}return t}e=r,r=e.parentNode}return null}function Of(e){return e=e[Wa]||e[Cs],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Eu(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(it(33))}function Ng(e){return e[df]||null}var Z0=[],Tu=-1;function Cl(e){return{current:e}}function Cn(e){0>Tu||(e.current=Z0[Tu],Z0[Tu]=null,Tu--)}function _n(e,t){Tu++,Z0[Tu]=e.current,e.current=t}var bl={},Hi=Cl(bl),go=Cl(!1),pc=bl;function Uu(e,t){var r=e.type.contextTypes;if(!r)return bl;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var l={},d;for(d in r)l[d]=t[d];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=l),l}function yo(e){return e=e.childContextTypes,e!=null}function rg(){Cn(go),Cn(Hi)}function i2(e,t,r){if(Hi.current!==bl)throw Error(it(168));_n(Hi,t),_n(go,r)}function VE(e,t,r){var a=e.stateNode;if(t=t.childContextTypes,typeof a.getChildContext!="function")return r;a=a.getChildContext();for(var l in a)if(!(l in t))throw Error(it(108,YA(e)||"Unknown",l));return Dn({},r,a)}function ng(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||bl,pc=Hi.current,_n(Hi,e),_n(go,go.current),!0}function o2(e,t,r){var a=e.stateNode;if(!a)throw Error(it(169));r?(e=VE(e,t,pc),a.__reactInternalMemoizedMergedChildContext=e,Cn(go),Cn(Hi),_n(Hi,e)):Cn(go),_n(go,r)}var ps=null,$g=!1,qv=!1;function UE(e){ps===null?ps=[e]:ps.push(e)}function m4(e){$g=!0,UE(e)}function El(){if(!qv&&ps!==null){qv=!0;var e=0,t=on;try{var r=ps;for(on=1;e<r.length;e++){var a=r[e];do a=a(!0);while(a!==null)}ps=null,$g=!1}catch(l){throw ps!==null&&(ps=ps.slice(e+1)),pE(M1,El),l}finally{on=t,qv=!1}}return null}var Pu=[],Iu=0,ig=null,og=0,ta=[],ra=0,mc=null,gs=1,ys="";function ec(e,t){Pu[Iu++]=og,Pu[Iu++]=ig,ig=e,og=t}function HE(e,t,r){ta[ra++]=gs,ta[ra++]=ys,ta[ra++]=mc,mc=e;var a=gs;e=ys;var l=32-Ca(a)-1;a&=~(1<<l),r+=1;var d=32-Ca(t)+l;if(30<d){var f=l-l%5;d=(a&(1<<f)-1).toString(32),a>>=f,l-=f,gs=1<<32-Ca(t)+l|r<<l|a,ys=d+e}else gs=1<<d|r<<l|a,ys=e}function N1(e){e.return!==null&&(ec(e,1),HE(e,1,0))}function $1(e){for(;e===ig;)ig=Pu[--Iu],Pu[Iu]=null,og=Pu[--Iu],Pu[Iu]=null;for(;e===mc;)mc=ta[--ra],ta[ra]=null,ys=ta[--ra],ta[ra]=null,gs=ta[--ra],ta[ra]=null}var $o=null,Bo=null,Mn=!1,Sa=null;function qE(e,t){var r=na(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function a2(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,$o=e,Bo=ml(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,$o=e,Bo=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=mc!==null?{id:gs,overflow:ys}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=na(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,$o=e,Bo=null,!0):!1;default:return!1}}function K0(e){return(e.mode&1)!==0&&(e.flags&128)===0}function X0(e){if(Mn){var t=Bo;if(t){var r=t;if(!a2(e,t)){if(K0(e))throw Error(it(418));t=ml(r.nextSibling);var a=$o;t&&a2(e,t)?qE(a,r):(e.flags=e.flags&-4097|2,Mn=!1,$o=e)}}else{if(K0(e))throw Error(it(418));e.flags=e.flags&-4097|2,Mn=!1,$o=e}}}function s2(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;$o=e}function om(e){if(e!==$o)return!1;if(!Mn)return s2(e),Mn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!q0(e.type,e.memoizedProps)),t&&(t=Bo)){if(K0(e))throw WE(),Error(it(418));for(;t;)qE(e,t),t=ml(t.nextSibling)}if(s2(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(it(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Bo=ml(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Bo=null}}else Bo=$o?ml(e.stateNode.nextSibling):null;return!0}function WE(){for(var e=Bo;e;)e=ml(e.nextSibling)}function Hu(){Bo=$o=null,Mn=!1}function j1(e){Sa===null?Sa=[e]:Sa.push(e)}var g4=Ps.ReactCurrentBatchConfig;function Ed(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(it(309));var a=r.stateNode}if(!a)throw Error(it(147,e));var l=a,d=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===d?t.ref:(t=function(f){var u=l.refs;f===null?delete u[d]:u[d]=f},t._stringRef=d,t)}if(typeof e!="string")throw Error(it(284));if(!r._owner)throw Error(it(290,e))}return e}function am(e,t){throw e=Object.prototype.toString.call(t),Error(it(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function l2(e){var t=e._init;return t(e._payload)}function GE(e){function t(V,F){if(e){var H=V.deletions;H===null?(V.deletions=[F],V.flags|=16):H.push(F)}}function r(V,F){if(!e)return null;for(;F!==null;)t(V,F),F=F.sibling;return null}function a(V,F){for(V=new Map;F!==null;)F.key!==null?V.set(F.key,F):V.set(F.index,F),F=F.sibling;return V}function l(V,F){return V=_l(V,F),V.index=0,V.sibling=null,V}function d(V,F,H){return V.index=H,e?(H=V.alternate,H!==null?(H=H.index,H<F?(V.flags|=2,F):H):(V.flags|=2,F)):(V.flags|=1048576,F)}function f(V){return e&&V.alternate===null&&(V.flags|=2),V}function u(V,F,H,Y){return F===null||F.tag!==6?(F=Yv(H,V.mode,Y),F.return=V,F):(F=l(F,H),F.return=V,F)}function S(V,F,H,Y){var ne=H.type;return ne===bu?M(V,F,H.props.children,Y,H.key):F!==null&&(F.elementType===ne||typeof ne=="object"&&ne!==null&&ne.$$typeof===nl&&l2(ne)===F.type)?(Y=l(F,H.props),Y.ref=Ed(V,F,H),Y.return=V,Y):(Y=Dm(H.type,H.key,H.props,null,V.mode,Y),Y.ref=Ed(V,F,H),Y.return=V,Y)}function T(V,F,H,Y){return F===null||F.tag!==4||F.stateNode.containerInfo!==H.containerInfo||F.stateNode.implementation!==H.implementation?(F=Qv(H,V.mode,Y),F.return=V,F):(F=l(F,H.children||[]),F.return=V,F)}function M(V,F,H,Y,ne){return F===null||F.tag!==7?(F=uc(H,V.mode,Y,ne),F.return=V,F):(F=l(F,H),F.return=V,F)}function A(V,F,H){if(typeof F=="string"&&F!==""||typeof F=="number")return F=Yv(""+F,V.mode,H),F.return=V,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case Kp:return H=Dm(F.type,F.key,F.props,null,V.mode,H),H.ref=Ed(V,null,F),H.return=V,H;case xu:return F=Qv(F,V.mode,H),F.return=V,F;case nl:var Y=F._init;return A(V,Y(F._payload),H)}if(Dd(F)||xd(F))return F=uc(F,V.mode,H,null),F.return=V,F;am(V,F)}return null}function I(V,F,H,Y){var ne=F!==null?F.key:null;if(typeof H=="string"&&H!==""||typeof H=="number")return ne!==null?null:u(V,F,""+H,Y);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case Kp:return H.key===ne?S(V,F,H,Y):null;case xu:return H.key===ne?T(V,F,H,Y):null;case nl:return ne=H._init,I(V,F,ne(H._payload),Y)}if(Dd(H)||xd(H))return ne!==null?null:M(V,F,H,Y,null);am(V,H)}return null}function G(V,F,H,Y,ne){if(typeof Y=="string"&&Y!==""||typeof Y=="number")return V=V.get(H)||null,u(F,V,""+Y,ne);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case Kp:return V=V.get(Y.key===null?H:Y.key)||null,S(F,V,Y,ne);case xu:return V=V.get(Y.key===null?H:Y.key)||null,T(F,V,Y,ne);case nl:var fe=Y._init;return G(V,F,H,fe(Y._payload),ne)}if(Dd(Y)||xd(Y))return V=V.get(H)||null,M(F,V,Y,ne,null);am(F,Y)}return null}function N(V,F,H,Y){for(var ne=null,fe=null,ie=F,_e=F=0,be=null;ie!==null&&_e<H.length;_e++){ie.index>_e?(be=ie,ie=null):be=ie.sibling;var Pe=I(V,ie,H[_e],Y);if(Pe===null){ie===null&&(ie=be);break}e&&ie&&Pe.alternate===null&&t(V,ie),F=d(Pe,F,_e),fe===null?ne=Pe:fe.sibling=Pe,fe=Pe,ie=be}if(_e===H.length)return r(V,ie),Mn&&ec(V,_e),ne;if(ie===null){for(;_e<H.length;_e++)ie=A(V,H[_e],Y),ie!==null&&(F=d(ie,F,_e),fe===null?ne=ie:fe.sibling=ie,fe=ie);return Mn&&ec(V,_e),ne}for(ie=a(V,ie);_e<H.length;_e++)be=G(ie,V,_e,H[_e],Y),be!==null&&(e&&be.alternate!==null&&ie.delete(be.key===null?_e:be.key),F=d(be,F,_e),fe===null?ne=be:fe.sibling=be,fe=be);return e&&ie.forEach(function(ze){return t(V,ze)}),Mn&&ec(V,_e),ne}function q(V,F,H,Y){var ne=xd(H);if(typeof ne!="function")throw Error(it(150));if(H=ne.call(H),H==null)throw Error(it(151));for(var fe=ne=null,ie=F,_e=F=0,be=null,Pe=H.next();ie!==null&&!Pe.done;_e++,Pe=H.next()){ie.index>_e?(be=ie,ie=null):be=ie.sibling;var ze=I(V,ie,Pe.value,Y);if(ze===null){ie===null&&(ie=be);break}e&&ie&&ze.alternate===null&&t(V,ie),F=d(ze,F,_e),fe===null?ne=ze:fe.sibling=ze,fe=ze,ie=be}if(Pe.done)return r(V,ie),Mn&&ec(V,_e),ne;if(ie===null){for(;!Pe.done;_e++,Pe=H.next())Pe=A(V,Pe.value,Y),Pe!==null&&(F=d(Pe,F,_e),fe===null?ne=Pe:fe.sibling=Pe,fe=Pe);return Mn&&ec(V,_e),ne}for(ie=a(V,ie);!Pe.done;_e++,Pe=H.next())Pe=G(ie,V,_e,Pe.value,Y),Pe!==null&&(e&&Pe.alternate!==null&&ie.delete(Pe.key===null?_e:Pe.key),F=d(Pe,F,_e),fe===null?ne=Pe:fe.sibling=Pe,fe=Pe);return e&&ie.forEach(function(We){return t(V,We)}),Mn&&ec(V,_e),ne}function Z(V,F,H,Y){if(typeof H=="object"&&H!==null&&H.type===bu&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case Kp:e:{for(var ne=H.key,fe=F;fe!==null;){if(fe.key===ne){if(ne=H.type,ne===bu){if(fe.tag===7){r(V,fe.sibling),F=l(fe,H.props.children),F.return=V,V=F;break e}}else if(fe.elementType===ne||typeof ne=="object"&&ne!==null&&ne.$$typeof===nl&&l2(ne)===fe.type){r(V,fe.sibling),F=l(fe,H.props),F.ref=Ed(V,fe,H),F.return=V,V=F;break e}r(V,fe);break}else t(V,fe);fe=fe.sibling}H.type===bu?(F=uc(H.props.children,V.mode,Y,H.key),F.return=V,V=F):(Y=Dm(H.type,H.key,H.props,null,V.mode,Y),Y.ref=Ed(V,F,H),Y.return=V,V=Y)}return f(V);case xu:e:{for(fe=H.key;F!==null;){if(F.key===fe)if(F.tag===4&&F.stateNode.containerInfo===H.containerInfo&&F.stateNode.implementation===H.implementation){r(V,F.sibling),F=l(F,H.children||[]),F.return=V,V=F;break e}else{r(V,F);break}else t(V,F);F=F.sibling}F=Qv(H,V.mode,Y),F.return=V,V=F}return f(V);case nl:return fe=H._init,Z(V,F,fe(H._payload),Y)}if(Dd(H))return N(V,F,H,Y);if(xd(H))return q(V,F,H,Y);am(V,H)}return typeof H=="string"&&H!==""||typeof H=="number"?(H=""+H,F!==null&&F.tag===6?(r(V,F.sibling),F=l(F,H),F.return=V,V=F):(r(V,F),F=Yv(H,V.mode,Y),F.return=V,V=F),f(V)):r(V,F)}return Z}var qu=GE(!0),ZE=GE(!1),ag=Cl(null),sg=null,ku=null,V1=null;function U1(){V1=ku=sg=null}function H1(e){var t=ag.current;Cn(ag),e._currentValue=t}function J0(e,t,r){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===r)break;e=e.return}}function Nu(e,t){sg=e,V1=ku=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(mo=!0),e.firstContext=null)}function oa(e){var t=e._currentValue;if(V1!==e)if(e={context:e,memoizedValue:t,next:null},ku===null){if(sg===null)throw Error(it(308));ku=e,sg.dependencies={lanes:0,firstContext:e}}else ku=ku.next=e;return t}var ic=null;function q1(e){ic===null?ic=[e]:ic.push(e)}function KE(e,t,r,a){var l=t.interleaved;return l===null?(r.next=r,q1(t)):(r.next=l.next,l.next=r),t.interleaved=r,Es(e,a)}function Es(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var il=!1;function W1(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function XE(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function _s(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function gl(e,t,r){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,Or&2){var l=a.pending;return l===null?t.next=t:(t.next=l.next,l.next=t),a.pending=t,Es(e,r)}return l=a.interleaved,l===null?(t.next=t,q1(a)):(t.next=l.next,l.next=t),a.interleaved=t,Es(e,r)}function km(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var a=t.lanes;a&=e.pendingLanes,r|=a,t.lanes=r,A1(e,r)}}function c2(e,t){var r=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,r===a)){var l=null,d=null;if(r=r.firstBaseUpdate,r!==null){do{var f={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};d===null?l=d=f:d=d.next=f,r=r.next}while(r!==null);d===null?l=d=t:d=d.next=t}else l=d=t;r={baseState:a.baseState,firstBaseUpdate:l,lastBaseUpdate:d,shared:a.shared,effects:a.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function lg(e,t,r,a){var l=e.updateQueue;il=!1;var d=l.firstBaseUpdate,f=l.lastBaseUpdate,u=l.shared.pending;if(u!==null){l.shared.pending=null;var S=u,T=S.next;S.next=null,f===null?d=T:f.next=T,f=S;var M=e.alternate;M!==null&&(M=M.updateQueue,u=M.lastBaseUpdate,u!==f&&(u===null?M.firstBaseUpdate=T:u.next=T,M.lastBaseUpdate=S))}if(d!==null){var A=l.baseState;f=0,M=T=S=null,u=d;do{var I=u.lane,G=u.eventTime;if((a&I)===I){M!==null&&(M=M.next={eventTime:G,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var N=e,q=u;switch(I=t,G=r,q.tag){case 1:if(N=q.payload,typeof N=="function"){A=N.call(G,A,I);break e}A=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=q.payload,I=typeof N=="function"?N.call(G,A,I):N,I==null)break e;A=Dn({},A,I);break e;case 2:il=!0}}u.callback!==null&&u.lane!==0&&(e.flags|=64,I=l.effects,I===null?l.effects=[u]:I.push(u))}else G={eventTime:G,lane:I,tag:u.tag,payload:u.payload,callback:u.callback,next:null},M===null?(T=M=G,S=A):M=M.next=G,f|=I;if(u=u.next,u===null){if(u=l.shared.pending,u===null)break;I=u,u=I.next,I.next=null,l.lastBaseUpdate=I,l.shared.pending=null}}while(!0);if(M===null&&(S=A),l.baseState=S,l.firstBaseUpdate=T,l.lastBaseUpdate=M,t=l.shared.interleaved,t!==null){l=t;do f|=l.lane,l=l.next;while(l!==t)}else d===null&&(l.shared.lanes=0);yc|=f,e.lanes=f,e.memoizedState=A}}function u2(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var a=e[t],l=a.callback;if(l!==null){if(a.callback=null,a=r,typeof l!="function")throw Error(it(191,l));l.call(a)}}}var Bf={},Ka=Cl(Bf),ff=Cl(Bf),pf=Cl(Bf);function oc(e){if(e===Bf)throw Error(it(174));return e}function G1(e,t){switch(_n(pf,t),_n(ff,e),_n(Ka,Bf),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:A0(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=A0(t,e)}Cn(Ka),_n(Ka,t)}function Wu(){Cn(Ka),Cn(ff),Cn(pf)}function JE(e){oc(pf.current);var t=oc(Ka.current),r=A0(t,e.type);t!==r&&(_n(ff,e),_n(Ka,r))}function Z1(e){ff.current===e&&(Cn(Ka),Cn(ff))}var Rn=Cl(0);function cg(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Wv=[];function K1(){for(var e=0;e<Wv.length;e++)Wv[e]._workInProgressVersionPrimary=null;Wv.length=0}var Mm=Ps.ReactCurrentDispatcher,Gv=Ps.ReactCurrentBatchConfig,gc=0,Ln=null,ni=null,mi=null,ug=!1,qd=!1,mf=0,y4=0;function Ni(){throw Error(it(321))}function X1(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Ia(e[r],t[r]))return!1;return!0}function J1(e,t,r,a,l,d){if(gc=d,Ln=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Mm.current=e===null||e.memoizedState===null?b4:w4,e=r(a,l),qd){d=0;do{if(qd=!1,mf=0,25<=d)throw Error(it(301));d+=1,mi=ni=null,t.updateQueue=null,Mm.current=S4,e=r(a,l)}while(qd)}if(Mm.current=hg,t=ni!==null&&ni.next!==null,gc=0,mi=ni=Ln=null,ug=!1,t)throw Error(it(300));return e}function Y1(){var e=mf!==0;return mf=0,e}function qa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mi===null?Ln.memoizedState=mi=e:mi=mi.next=e,mi}function aa(){if(ni===null){var e=Ln.alternate;e=e!==null?e.memoizedState:null}else e=ni.next;var t=mi===null?Ln.memoizedState:mi.next;if(t!==null)mi=t,ni=e;else{if(e===null)throw Error(it(310));ni=e,e={memoizedState:ni.memoizedState,baseState:ni.baseState,baseQueue:ni.baseQueue,queue:ni.queue,next:null},mi===null?Ln.memoizedState=mi=e:mi=mi.next=e}return mi}function gf(e,t){return typeof t=="function"?t(e):t}function Zv(e){var t=aa(),r=t.queue;if(r===null)throw Error(it(311));r.lastRenderedReducer=e;var a=ni,l=a.baseQueue,d=r.pending;if(d!==null){if(l!==null){var f=l.next;l.next=d.next,d.next=f}a.baseQueue=l=d,r.pending=null}if(l!==null){d=l.next,a=a.baseState;var u=f=null,S=null,T=d;do{var M=T.lane;if((gc&M)===M)S!==null&&(S=S.next={lane:0,action:T.action,hasEagerState:T.hasEagerState,eagerState:T.eagerState,next:null}),a=T.hasEagerState?T.eagerState:e(a,T.action);else{var A={lane:M,action:T.action,hasEagerState:T.hasEagerState,eagerState:T.eagerState,next:null};S===null?(u=S=A,f=a):S=S.next=A,Ln.lanes|=M,yc|=M}T=T.next}while(T!==null&&T!==d);S===null?f=a:S.next=u,Ia(a,t.memoizedState)||(mo=!0),t.memoizedState=a,t.baseState=f,t.baseQueue=S,r.lastRenderedState=a}if(e=r.interleaved,e!==null){l=e;do d=l.lane,Ln.lanes|=d,yc|=d,l=l.next;while(l!==e)}else l===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Kv(e){var t=aa(),r=t.queue;if(r===null)throw Error(it(311));r.lastRenderedReducer=e;var a=r.dispatch,l=r.pending,d=t.memoizedState;if(l!==null){r.pending=null;var f=l=l.next;do d=e(d,f.action),f=f.next;while(f!==l);Ia(d,t.memoizedState)||(mo=!0),t.memoizedState=d,t.baseQueue===null&&(t.baseState=d),r.lastRenderedState=d}return[d,a]}function YE(){}function QE(e,t){var r=Ln,a=aa(),l=t(),d=!Ia(a.memoizedState,l);if(d&&(a.memoizedState=l,mo=!0),a=a.queue,Q1(rT.bind(null,r,a,e),[e]),a.getSnapshot!==t||d||mi!==null&&mi.memoizedState.tag&1){if(r.flags|=2048,yf(9,tT.bind(null,r,a,l,t),void 0,null),gi===null)throw Error(it(349));gc&30||eT(r,t,l)}return l}function eT(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Ln.updateQueue,t===null?(t={lastEffect:null,stores:null},Ln.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function tT(e,t,r,a){t.value=r,t.getSnapshot=a,nT(t)&&iT(e)}function rT(e,t,r){return r(function(){nT(t)&&iT(e)})}function nT(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Ia(e,r)}catch{return!0}}function iT(e){var t=Es(e,1);t!==null&&Ea(t,e,1,-1)}function h2(e){var t=qa();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:gf,lastRenderedState:e},t.queue=e,e=e.dispatch=x4.bind(null,Ln,e),[t.memoizedState,e]}function yf(e,t,r,a){return e={tag:e,create:t,destroy:r,deps:a,next:null},t=Ln.updateQueue,t===null?(t={lastEffect:null,stores:null},Ln.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(a=r.next,r.next=e,e.next=a,t.lastEffect=e)),e}function oT(){return aa().memoizedState}function Am(e,t,r,a){var l=qa();Ln.flags|=e,l.memoizedState=yf(1|t,r,void 0,a===void 0?null:a)}function jg(e,t,r,a){var l=aa();a=a===void 0?null:a;var d=void 0;if(ni!==null){var f=ni.memoizedState;if(d=f.destroy,a!==null&&X1(a,f.deps)){l.memoizedState=yf(t,r,d,a);return}}Ln.flags|=e,l.memoizedState=yf(1|t,r,d,a)}function d2(e,t){return Am(8390656,8,e,t)}function Q1(e,t){return jg(2048,8,e,t)}function aT(e,t){return jg(4,2,e,t)}function sT(e,t){return jg(4,4,e,t)}function lT(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function cT(e,t,r){return r=r!=null?r.concat([e]):null,jg(4,4,lT.bind(null,t,e),r)}function ex(){}function uT(e,t){var r=aa();t=t===void 0?null:t;var a=r.memoizedState;return a!==null&&t!==null&&X1(t,a[1])?a[0]:(r.memoizedState=[e,t],e)}function hT(e,t){var r=aa();t=t===void 0?null:t;var a=r.memoizedState;return a!==null&&t!==null&&X1(t,a[1])?a[0]:(e=e(),r.memoizedState=[e,t],e)}function dT(e,t,r){return gc&21?(Ia(r,t)||(r=yE(),Ln.lanes|=r,yc|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,mo=!0),e.memoizedState=r)}function v4(e,t){var r=on;on=r!==0&&4>r?r:4,e(!0);var a=Gv.transition;Gv.transition={};try{e(!1),t()}finally{on=r,Gv.transition=a}}function fT(){return aa().memoizedState}function _4(e,t,r){var a=vl(e);if(r={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null},pT(e))mT(t,r);else if(r=KE(e,t,r,a),r!==null){var l=to();Ea(r,e,a,l),gT(r,t,a)}}function x4(e,t,r){var a=vl(e),l={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null};if(pT(e))mT(t,l);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=t.lastRenderedReducer,d!==null))try{var f=t.lastRenderedState,u=d(f,r);if(l.hasEagerState=!0,l.eagerState=u,Ia(u,f)){var S=t.interleaved;S===null?(l.next=l,q1(t)):(l.next=S.next,S.next=l),t.interleaved=l;return}}catch{}finally{}r=KE(e,t,l,a),r!==null&&(l=to(),Ea(r,e,a,l),gT(r,t,a))}}function pT(e){var t=e.alternate;return e===Ln||t!==null&&t===Ln}function mT(e,t){qd=ug=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function gT(e,t,r){if(r&4194240){var a=t.lanes;a&=e.pendingLanes,r|=a,t.lanes=r,A1(e,r)}}var hg={readContext:oa,useCallback:Ni,useContext:Ni,useEffect:Ni,useImperativeHandle:Ni,useInsertionEffect:Ni,useLayoutEffect:Ni,useMemo:Ni,useReducer:Ni,useRef:Ni,useState:Ni,useDebugValue:Ni,useDeferredValue:Ni,useTransition:Ni,useMutableSource:Ni,useSyncExternalStore:Ni,useId:Ni,unstable_isNewReconciler:!1},b4={readContext:oa,useCallback:function(e,t){return qa().memoizedState=[e,t===void 0?null:t],e},useContext:oa,useEffect:d2,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Am(4194308,4,lT.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Am(4194308,4,e,t)},useInsertionEffect:function(e,t){return Am(4,2,e,t)},useMemo:function(e,t){var r=qa();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var a=qa();return t=r!==void 0?r(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=_4.bind(null,Ln,e),[a.memoizedState,e]},useRef:function(e){var t=qa();return e={current:e},t.memoizedState=e},useState:h2,useDebugValue:ex,useDeferredValue:function(e){return qa().memoizedState=e},useTransition:function(){var e=h2(!1),t=e[0];return e=v4.bind(null,e[1]),qa().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var a=Ln,l=qa();if(Mn){if(r===void 0)throw Error(it(407));r=r()}else{if(r=t(),gi===null)throw Error(it(349));gc&30||eT(a,t,r)}l.memoizedState=r;var d={value:r,getSnapshot:t};return l.queue=d,d2(rT.bind(null,a,d,e),[e]),a.flags|=2048,yf(9,tT.bind(null,a,d,r,t),void 0,null),r},useId:function(){var e=qa(),t=gi.identifierPrefix;if(Mn){var r=ys,a=gs;r=(a&~(1<<32-Ca(a)-1)).toString(32)+r,t=":"+t+"R"+r,r=mf++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=y4++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},w4={readContext:oa,useCallback:uT,useContext:oa,useEffect:Q1,useImperativeHandle:cT,useInsertionEffect:aT,useLayoutEffect:sT,useMemo:hT,useReducer:Zv,useRef:oT,useState:function(){return Zv(gf)},useDebugValue:ex,useDeferredValue:function(e){var t=aa();return dT(t,ni.memoizedState,e)},useTransition:function(){var e=Zv(gf)[0],t=aa().memoizedState;return[e,t]},useMutableSource:YE,useSyncExternalStore:QE,useId:fT,unstable_isNewReconciler:!1},S4={readContext:oa,useCallback:uT,useContext:oa,useEffect:Q1,useImperativeHandle:cT,useInsertionEffect:aT,useLayoutEffect:sT,useMemo:hT,useReducer:Kv,useRef:oT,useState:function(){return Kv(gf)},useDebugValue:ex,useDeferredValue:function(e){var t=aa();return ni===null?t.memoizedState=e:dT(t,ni.memoizedState,e)},useTransition:function(){var e=Kv(gf)[0],t=aa().memoizedState;return[e,t]},useMutableSource:YE,useSyncExternalStore:QE,useId:fT,unstable_isNewReconciler:!1};function _a(e,t){if(e&&e.defaultProps){t=Dn({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Y0(e,t,r,a){t=e.memoizedState,r=r(a,t),r=r==null?t:Dn({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Vg={isMounted:function(e){return(e=e._reactInternals)?wc(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var a=to(),l=vl(e),d=_s(a,l);d.payload=t,r!=null&&(d.callback=r),t=gl(e,d,l),t!==null&&(Ea(t,e,l,a),km(t,e,l))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var a=to(),l=vl(e),d=_s(a,l);d.tag=1,d.payload=t,r!=null&&(d.callback=r),t=gl(e,d,l),t!==null&&(Ea(t,e,l,a),km(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=to(),a=vl(e),l=_s(r,a);l.tag=2,t!=null&&(l.callback=t),t=gl(e,l,a),t!==null&&(Ea(t,e,a,r),km(t,e,a))}};function f2(e,t,r,a,l,d,f){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,d,f):t.prototype&&t.prototype.isPureReactComponent?!cf(r,a)||!cf(l,d):!0}function yT(e,t,r){var a=!1,l=bl,d=t.contextType;return typeof d=="object"&&d!==null?d=oa(d):(l=yo(t)?pc:Hi.current,a=t.contextTypes,d=(a=a!=null)?Uu(e,l):bl),t=new t(r,d),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Vg,e.stateNode=t,t._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=l,e.__reactInternalMemoizedMaskedChildContext=d),t}function p2(e,t,r,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,a),t.state!==e&&Vg.enqueueReplaceState(t,t.state,null)}function Q0(e,t,r,a){var l=e.stateNode;l.props=r,l.state=e.memoizedState,l.refs={},W1(e);var d=t.contextType;typeof d=="object"&&d!==null?l.context=oa(d):(d=yo(t)?pc:Hi.current,l.context=Uu(e,d)),l.state=e.memoizedState,d=t.getDerivedStateFromProps,typeof d=="function"&&(Y0(e,t,d,r),l.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(t=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),t!==l.state&&Vg.enqueueReplaceState(l,l.state,null),lg(e,r,l,a),l.state=e.memoizedState),typeof l.componentDidMount=="function"&&(e.flags|=4194308)}function Gu(e,t){try{var r="",a=t;do r+=JA(a),a=a.return;while(a);var l=r}catch(d){l=`
Error generating stack: `+d.message+`
`+d.stack}return{value:e,source:t,stack:l,digest:null}}function Xv(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function e_(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var C4=typeof WeakMap=="function"?WeakMap:Map;function vT(e,t,r){r=_s(-1,r),r.tag=3,r.payload={element:null};var a=t.value;return r.callback=function(){fg||(fg=!0,u_=a),e_(e,t)},r}function _T(e,t,r){r=_s(-1,r),r.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var l=t.value;r.payload=function(){return a(l)},r.callback=function(){e_(e,t)}}var d=e.stateNode;return d!==null&&typeof d.componentDidCatch=="function"&&(r.callback=function(){e_(e,t),typeof a!="function"&&(yl===null?yl=new Set([this]):yl.add(this));var f=t.stack;this.componentDidCatch(t.value,{componentStack:f!==null?f:""})}),r}function m2(e,t,r){var a=e.pingCache;if(a===null){a=e.pingCache=new C4;var l=new Set;a.set(t,l)}else l=a.get(t),l===void 0&&(l=new Set,a.set(t,l));l.has(r)||(l.add(r),e=B4.bind(null,e,t,r),t.then(e,e))}function g2(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function y2(e,t,r,a,l){return e.mode&1?(e.flags|=65536,e.lanes=l,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=_s(-1,1),t.tag=2,gl(r,t,1))),r.lanes|=1),e)}var E4=Ps.ReactCurrentOwner,mo=!1;function Qi(e,t,r,a){t.child=e===null?ZE(t,null,r,a):qu(t,e.child,r,a)}function v2(e,t,r,a,l){r=r.render;var d=t.ref;return Nu(t,l),a=J1(e,t,r,a,d,l),r=Y1(),e!==null&&!mo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,Ts(e,t,l)):(Mn&&r&&N1(t),t.flags|=1,Qi(e,t,a,l),t.child)}function _2(e,t,r,a,l){if(e===null){var d=r.type;return typeof d=="function"&&!lx(d)&&d.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=d,xT(e,t,d,a,l)):(e=Dm(r.type,null,a,t,t.mode,l),e.ref=t.ref,e.return=t,t.child=e)}if(d=e.child,!(e.lanes&l)){var f=d.memoizedProps;if(r=r.compare,r=r!==null?r:cf,r(f,a)&&e.ref===t.ref)return Ts(e,t,l)}return t.flags|=1,e=_l(d,a),e.ref=t.ref,e.return=t,t.child=e}function xT(e,t,r,a,l){if(e!==null){var d=e.memoizedProps;if(cf(d,a)&&e.ref===t.ref)if(mo=!1,t.pendingProps=a=d,(e.lanes&l)!==0)e.flags&131072&&(mo=!0);else return t.lanes=e.lanes,Ts(e,t,l)}return t_(e,t,r,a,l)}function bT(e,t,r){var a=t.pendingProps,l=a.children,d=e!==null?e.memoizedState:null;if(a.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},_n(Au,Oo),Oo|=r;else{if(!(r&1073741824))return e=d!==null?d.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,_n(Au,Oo),Oo|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=d!==null?d.baseLanes:r,_n(Au,Oo),Oo|=a}else d!==null?(a=d.baseLanes|r,t.memoizedState=null):a=r,_n(Au,Oo),Oo|=a;return Qi(e,t,l,r),t.child}function wT(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function t_(e,t,r,a,l){var d=yo(r)?pc:Hi.current;return d=Uu(t,d),Nu(t,l),r=J1(e,t,r,a,d,l),a=Y1(),e!==null&&!mo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,Ts(e,t,l)):(Mn&&a&&N1(t),t.flags|=1,Qi(e,t,r,l),t.child)}function x2(e,t,r,a,l){if(yo(r)){var d=!0;ng(t)}else d=!1;if(Nu(t,l),t.stateNode===null)zm(e,t),yT(t,r,a),Q0(t,r,a,l),a=!0;else if(e===null){var f=t.stateNode,u=t.memoizedProps;f.props=u;var S=f.context,T=r.contextType;typeof T=="object"&&T!==null?T=oa(T):(T=yo(r)?pc:Hi.current,T=Uu(t,T));var M=r.getDerivedStateFromProps,A=typeof M=="function"||typeof f.getSnapshotBeforeUpdate=="function";A||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(u!==a||S!==T)&&p2(t,f,a,T),il=!1;var I=t.memoizedState;f.state=I,lg(t,a,f,l),S=t.memoizedState,u!==a||I!==S||go.current||il?(typeof M=="function"&&(Y0(t,r,M,a),S=t.memoizedState),(u=il||f2(t,r,u,a,I,S,T))?(A||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(t.flags|=4194308)):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=S),f.props=a,f.state=S,f.context=T,a=u):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{f=t.stateNode,XE(e,t),u=t.memoizedProps,T=t.type===t.elementType?u:_a(t.type,u),f.props=T,A=t.pendingProps,I=f.context,S=r.contextType,typeof S=="object"&&S!==null?S=oa(S):(S=yo(r)?pc:Hi.current,S=Uu(t,S));var G=r.getDerivedStateFromProps;(M=typeof G=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(u!==A||I!==S)&&p2(t,f,a,S),il=!1,I=t.memoizedState,f.state=I,lg(t,a,f,l);var N=t.memoizedState;u!==A||I!==N||go.current||il?(typeof G=="function"&&(Y0(t,r,G,a),N=t.memoizedState),(T=il||f2(t,r,T,a,I,N,S)||!1)?(M||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(a,N,S),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(a,N,S)),typeof f.componentDidUpdate=="function"&&(t.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof f.componentDidUpdate!="function"||u===e.memoizedProps&&I===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&I===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=N),f.props=a,f.state=N,f.context=S,a=T):(typeof f.componentDidUpdate!="function"||u===e.memoizedProps&&I===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&I===e.memoizedState||(t.flags|=1024),a=!1)}return r_(e,t,r,a,d,l)}function r_(e,t,r,a,l,d){wT(e,t);var f=(t.flags&128)!==0;if(!a&&!f)return l&&o2(t,r,!1),Ts(e,t,d);a=t.stateNode,E4.current=t;var u=f&&typeof r.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,e!==null&&f?(t.child=qu(t,e.child,null,d),t.child=qu(t,null,u,d)):Qi(e,t,u,d),t.memoizedState=a.state,l&&o2(t,r,!0),t.child}function ST(e){var t=e.stateNode;t.pendingContext?i2(e,t.pendingContext,t.pendingContext!==t.context):t.context&&i2(e,t.context,!1),G1(e,t.containerInfo)}function b2(e,t,r,a,l){return Hu(),j1(l),t.flags|=256,Qi(e,t,r,a),t.child}var n_={dehydrated:null,treeContext:null,retryLane:0};function i_(e){return{baseLanes:e,cachePool:null,transitions:null}}function CT(e,t,r){var a=t.pendingProps,l=Rn.current,d=!1,f=(t.flags&128)!==0,u;if((u=f)||(u=e!==null&&e.memoizedState===null?!1:(l&2)!==0),u?(d=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(l|=1),_n(Rn,l&1),e===null)return X0(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(f=a.children,e=a.fallback,d?(a=t.mode,d=t.child,f={mode:"hidden",children:f},!(a&1)&&d!==null?(d.childLanes=0,d.pendingProps=f):d=qg(f,a,0,null),e=uc(e,a,r,null),d.return=t,e.return=t,d.sibling=e,t.child=d,t.child.memoizedState=i_(r),t.memoizedState=n_,e):tx(t,f));if(l=e.memoizedState,l!==null&&(u=l.dehydrated,u!==null))return T4(e,t,f,a,u,l,r);if(d){d=a.fallback,f=t.mode,l=e.child,u=l.sibling;var S={mode:"hidden",children:a.children};return!(f&1)&&t.child!==l?(a=t.child,a.childLanes=0,a.pendingProps=S,t.deletions=null):(a=_l(l,S),a.subtreeFlags=l.subtreeFlags&14680064),u!==null?d=_l(u,d):(d=uc(d,f,r,null),d.flags|=2),d.return=t,a.return=t,a.sibling=d,t.child=a,a=d,d=t.child,f=e.child.memoizedState,f=f===null?i_(r):{baseLanes:f.baseLanes|r,cachePool:null,transitions:f.transitions},d.memoizedState=f,d.childLanes=e.childLanes&~r,t.memoizedState=n_,a}return d=e.child,e=d.sibling,a=_l(d,{mode:"visible",children:a.children}),!(t.mode&1)&&(a.lanes=r),a.return=t,a.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=a,t.memoizedState=null,a}function tx(e,t){return t=qg({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function sm(e,t,r,a){return a!==null&&j1(a),qu(t,e.child,null,r),e=tx(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function T4(e,t,r,a,l,d,f){if(r)return t.flags&256?(t.flags&=-257,a=Xv(Error(it(422))),sm(e,t,f,a)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(d=a.fallback,l=t.mode,a=qg({mode:"visible",children:a.children},l,0,null),d=uc(d,l,f,null),d.flags|=2,a.return=t,d.return=t,a.sibling=d,t.child=a,t.mode&1&&qu(t,e.child,null,f),t.child.memoizedState=i_(f),t.memoizedState=n_,d);if(!(t.mode&1))return sm(e,t,f,null);if(l.data==="$!"){if(a=l.nextSibling&&l.nextSibling.dataset,a)var u=a.dgst;return a=u,d=Error(it(419)),a=Xv(d,a,void 0),sm(e,t,f,a)}if(u=(f&e.childLanes)!==0,mo||u){if(a=gi,a!==null){switch(f&-f){case 4:l=2;break;case 16:l=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:l=32;break;case 536870912:l=268435456;break;default:l=0}l=l&(a.suspendedLanes|f)?0:l,l!==0&&l!==d.retryLane&&(d.retryLane=l,Es(e,l),Ea(a,e,l,-1))}return sx(),a=Xv(Error(it(421))),sm(e,t,f,a)}return l.data==="$?"?(t.flags|=128,t.child=e.child,t=N4.bind(null,e),l._reactRetry=t,null):(e=d.treeContext,Bo=ml(l.nextSibling),$o=t,Mn=!0,Sa=null,e!==null&&(ta[ra++]=gs,ta[ra++]=ys,ta[ra++]=mc,gs=e.id,ys=e.overflow,mc=t),t=tx(t,a.children),t.flags|=4096,t)}function w2(e,t,r){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),J0(e.return,t,r)}function Jv(e,t,r,a,l){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:r,tailMode:l}:(d.isBackwards=t,d.rendering=null,d.renderingStartTime=0,d.last=a,d.tail=r,d.tailMode=l)}function ET(e,t,r){var a=t.pendingProps,l=a.revealOrder,d=a.tail;if(Qi(e,t,a.children,r),a=Rn.current,a&2)a=a&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&w2(e,r,t);else if(e.tag===19)w2(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(_n(Rn,a),!(t.mode&1))t.memoizedState=null;else switch(l){case"forwards":for(r=t.child,l=null;r!==null;)e=r.alternate,e!==null&&cg(e)===null&&(l=r),r=r.sibling;r=l,r===null?(l=t.child,t.child=null):(l=r.sibling,r.sibling=null),Jv(t,!1,l,r,d);break;case"backwards":for(r=null,l=t.child,t.child=null;l!==null;){if(e=l.alternate,e!==null&&cg(e)===null){t.child=l;break}e=l.sibling,l.sibling=r,r=l,l=e}Jv(t,!0,r,null,d);break;case"together":Jv(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function zm(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ts(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),yc|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(it(153));if(t.child!==null){for(e=t.child,r=_l(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=_l(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function P4(e,t,r){switch(t.tag){case 3:ST(t),Hu();break;case 5:JE(t);break;case 1:yo(t.type)&&ng(t);break;case 4:G1(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,l=t.memoizedProps.value;_n(ag,a._currentValue),a._currentValue=l;break;case 13:if(a=t.memoizedState,a!==null)return a.dehydrated!==null?(_n(Rn,Rn.current&1),t.flags|=128,null):r&t.child.childLanes?CT(e,t,r):(_n(Rn,Rn.current&1),e=Ts(e,t,r),e!==null?e.sibling:null);_n(Rn,Rn.current&1);break;case 19:if(a=(r&t.childLanes)!==0,e.flags&128){if(a)return ET(e,t,r);t.flags|=128}if(l=t.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),_n(Rn,Rn.current),a)break;return null;case 22:case 23:return t.lanes=0,bT(e,t,r)}return Ts(e,t,r)}var TT,o_,PT,IT;TT=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};o_=function(){};PT=function(e,t,r,a){var l=e.memoizedProps;if(l!==a){e=t.stateNode,oc(Ka.current);var d=null;switch(r){case"input":l=P0(e,l),a=P0(e,a),d=[];break;case"select":l=Dn({},l,{value:void 0}),a=Dn({},a,{value:void 0}),d=[];break;case"textarea":l=M0(e,l),a=M0(e,a),d=[];break;default:typeof l.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=tg)}z0(r,a);var f;r=null;for(T in l)if(!a.hasOwnProperty(T)&&l.hasOwnProperty(T)&&l[T]!=null)if(T==="style"){var u=l[T];for(f in u)u.hasOwnProperty(f)&&(r||(r={}),r[f]="")}else T!=="dangerouslySetInnerHTML"&&T!=="children"&&T!=="suppressContentEditableWarning"&&T!=="suppressHydrationWarning"&&T!=="autoFocus"&&(tf.hasOwnProperty(T)?d||(d=[]):(d=d||[]).push(T,null));for(T in a){var S=a[T];if(u=l!=null?l[T]:void 0,a.hasOwnProperty(T)&&S!==u&&(S!=null||u!=null))if(T==="style")if(u){for(f in u)!u.hasOwnProperty(f)||S&&S.hasOwnProperty(f)||(r||(r={}),r[f]="");for(f in S)S.hasOwnProperty(f)&&u[f]!==S[f]&&(r||(r={}),r[f]=S[f])}else r||(d||(d=[]),d.push(T,r)),r=S;else T==="dangerouslySetInnerHTML"?(S=S?S.__html:void 0,u=u?u.__html:void 0,S!=null&&u!==S&&(d=d||[]).push(T,S)):T==="children"?typeof S!="string"&&typeof S!="number"||(d=d||[]).push(T,""+S):T!=="suppressContentEditableWarning"&&T!=="suppressHydrationWarning"&&(tf.hasOwnProperty(T)?(S!=null&&T==="onScroll"&&Sn("scroll",e),d||u===S||(d=[])):(d=d||[]).push(T,S))}r&&(d=d||[]).push("style",r);var T=d;(t.updateQueue=T)&&(t.flags|=4)}};IT=function(e,t,r,a){r!==a&&(t.flags|=4)};function Td(e,t){if(!Mn)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function $i(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,a=0;if(t)for(var l=e.child;l!==null;)r|=l.lanes|l.childLanes,a|=l.subtreeFlags&14680064,a|=l.flags&14680064,l.return=e,l=l.sibling;else for(l=e.child;l!==null;)r|=l.lanes|l.childLanes,a|=l.subtreeFlags,a|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=a,e.childLanes=r,t}function I4(e,t,r){var a=t.pendingProps;switch($1(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $i(t),null;case 1:return yo(t.type)&&rg(),$i(t),null;case 3:return a=t.stateNode,Wu(),Cn(go),Cn(Hi),K1(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(om(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Sa!==null&&(f_(Sa),Sa=null))),o_(e,t),$i(t),null;case 5:Z1(t);var l=oc(pf.current);if(r=t.type,e!==null&&t.stateNode!=null)PT(e,t,r,a,l),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(t.stateNode===null)throw Error(it(166));return $i(t),null}if(e=oc(Ka.current),om(t)){a=t.stateNode,r=t.type;var d=t.memoizedProps;switch(a[Wa]=t,a[df]=d,e=(t.mode&1)!==0,r){case"dialog":Sn("cancel",a),Sn("close",a);break;case"iframe":case"object":case"embed":Sn("load",a);break;case"video":case"audio":for(l=0;l<Od.length;l++)Sn(Od[l],a);break;case"source":Sn("error",a);break;case"img":case"image":case"link":Sn("error",a),Sn("load",a);break;case"details":Sn("toggle",a);break;case"input":Aw(a,d),Sn("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!d.multiple},Sn("invalid",a);break;case"textarea":Rw(a,d),Sn("invalid",a)}z0(r,d),l=null;for(var f in d)if(d.hasOwnProperty(f)){var u=d[f];f==="children"?typeof u=="string"?a.textContent!==u&&(d.suppressHydrationWarning!==!0&&im(a.textContent,u,e),l=["children",u]):typeof u=="number"&&a.textContent!==""+u&&(d.suppressHydrationWarning!==!0&&im(a.textContent,u,e),l=["children",""+u]):tf.hasOwnProperty(f)&&u!=null&&f==="onScroll"&&Sn("scroll",a)}switch(r){case"input":Xp(a),zw(a,d,!0);break;case"textarea":Xp(a),Lw(a);break;case"select":case"option":break;default:typeof d.onClick=="function"&&(a.onclick=tg)}a=l,t.updateQueue=a,a!==null&&(t.flags|=4)}else{f=l.nodeType===9?l:l.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=rE(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=f.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=f.createElement(r,{is:a.is}):(e=f.createElement(r),r==="select"&&(f=e,a.multiple?f.multiple=!0:a.size&&(f.size=a.size))):e=f.createElementNS(e,r),e[Wa]=t,e[df]=a,TT(e,t,!1,!1),t.stateNode=e;e:{switch(f=R0(r,a),r){case"dialog":Sn("cancel",e),Sn("close",e),l=a;break;case"iframe":case"object":case"embed":Sn("load",e),l=a;break;case"video":case"audio":for(l=0;l<Od.length;l++)Sn(Od[l],e);l=a;break;case"source":Sn("error",e),l=a;break;case"img":case"image":case"link":Sn("error",e),Sn("load",e),l=a;break;case"details":Sn("toggle",e),l=a;break;case"input":Aw(e,a),l=P0(e,a),Sn("invalid",e);break;case"option":l=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},l=Dn({},a,{value:void 0}),Sn("invalid",e);break;case"textarea":Rw(e,a),l=M0(e,a),Sn("invalid",e);break;default:l=a}z0(r,l),u=l;for(d in u)if(u.hasOwnProperty(d)){var S=u[d];d==="style"?oE(e,S):d==="dangerouslySetInnerHTML"?(S=S?S.__html:void 0,S!=null&&nE(e,S)):d==="children"?typeof S=="string"?(r!=="textarea"||S!=="")&&rf(e,S):typeof S=="number"&&rf(e,""+S):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(tf.hasOwnProperty(d)?S!=null&&d==="onScroll"&&Sn("scroll",e):S!=null&&E1(e,d,S,f))}switch(r){case"input":Xp(e),zw(e,a,!1);break;case"textarea":Xp(e),Lw(e);break;case"option":a.value!=null&&e.setAttribute("value",""+xl(a.value));break;case"select":e.multiple=!!a.multiple,d=a.value,d!=null?Du(e,!!a.multiple,d,!1):a.defaultValue!=null&&Du(e,!!a.multiple,a.defaultValue,!0);break;default:typeof l.onClick=="function"&&(e.onclick=tg)}switch(r){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return $i(t),null;case 6:if(e&&t.stateNode!=null)IT(e,t,e.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(it(166));if(r=oc(pf.current),oc(Ka.current),om(t)){if(a=t.stateNode,r=t.memoizedProps,a[Wa]=t,(d=a.nodeValue!==r)&&(e=$o,e!==null))switch(e.tag){case 3:im(a.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&im(a.nodeValue,r,(e.mode&1)!==0)}d&&(t.flags|=4)}else a=(r.nodeType===9?r:r.ownerDocument).createTextNode(a),a[Wa]=t,t.stateNode=a}return $i(t),null;case 13:if(Cn(Rn),a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Mn&&Bo!==null&&t.mode&1&&!(t.flags&128))WE(),Hu(),t.flags|=98560,d=!1;else if(d=om(t),a!==null&&a.dehydrated!==null){if(e===null){if(!d)throw Error(it(318));if(d=t.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(it(317));d[Wa]=t}else Hu(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;$i(t),d=!1}else Sa!==null&&(f_(Sa),Sa=null),d=!0;if(!d)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(t.child.flags|=8192,t.mode&1&&(e===null||Rn.current&1?ii===0&&(ii=3):sx())),t.updateQueue!==null&&(t.flags|=4),$i(t),null);case 4:return Wu(),o_(e,t),e===null&&uf(t.stateNode.containerInfo),$i(t),null;case 10:return H1(t.type._context),$i(t),null;case 17:return yo(t.type)&&rg(),$i(t),null;case 19:if(Cn(Rn),d=t.memoizedState,d===null)return $i(t),null;if(a=(t.flags&128)!==0,f=d.rendering,f===null)if(a)Td(d,!1);else{if(ii!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(f=cg(e),f!==null){for(t.flags|=128,Td(d,!1),a=f.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=r,r=t.child;r!==null;)d=r,e=a,d.flags&=14680066,f=d.alternate,f===null?(d.childLanes=0,d.lanes=e,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=f.childLanes,d.lanes=f.lanes,d.child=f.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=f.memoizedProps,d.memoizedState=f.memoizedState,d.updateQueue=f.updateQueue,d.type=f.type,e=f.dependencies,d.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return _n(Rn,Rn.current&1|2),t.child}e=e.sibling}d.tail!==null&&qn()>Zu&&(t.flags|=128,a=!0,Td(d,!1),t.lanes=4194304)}else{if(!a)if(e=cg(f),e!==null){if(t.flags|=128,a=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Td(d,!0),d.tail===null&&d.tailMode==="hidden"&&!f.alternate&&!Mn)return $i(t),null}else 2*qn()-d.renderingStartTime>Zu&&r!==1073741824&&(t.flags|=128,a=!0,Td(d,!1),t.lanes=4194304);d.isBackwards?(f.sibling=t.child,t.child=f):(r=d.last,r!==null?r.sibling=f:t.child=f,d.last=f)}return d.tail!==null?(t=d.tail,d.rendering=t,d.tail=t.sibling,d.renderingStartTime=qn(),t.sibling=null,r=Rn.current,_n(Rn,a?r&1|2:r&1),t):($i(t),null);case 22:case 23:return ax(),a=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(t.flags|=8192),a&&t.mode&1?Oo&1073741824&&($i(t),t.subtreeFlags&6&&(t.flags|=8192)):$i(t),null;case 24:return null;case 25:return null}throw Error(it(156,t.tag))}function k4(e,t){switch($1(t),t.tag){case 1:return yo(t.type)&&rg(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Wu(),Cn(go),Cn(Hi),K1(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Z1(t),null;case 13:if(Cn(Rn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(it(340));Hu()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Cn(Rn),null;case 4:return Wu(),null;case 10:return H1(t.type._context),null;case 22:case 23:return ax(),null;case 24:return null;default:return null}}var lm=!1,Vi=!1,M4=typeof WeakSet=="function"?WeakSet:Set,Rt=null;function Mu(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(a){Bn(e,t,a)}else r.current=null}function a_(e,t,r){try{r()}catch(a){Bn(e,t,a)}}var S2=!1;function A4(e,t){if(U0=Ym,e=RE(),B1(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var a=r.getSelection&&r.getSelection();if(a&&a.rangeCount!==0){r=a.anchorNode;var l=a.anchorOffset,d=a.focusNode;a=a.focusOffset;try{r.nodeType,d.nodeType}catch{r=null;break e}var f=0,u=-1,S=-1,T=0,M=0,A=e,I=null;t:for(;;){for(var G;A!==r||l!==0&&A.nodeType!==3||(u=f+l),A!==d||a!==0&&A.nodeType!==3||(S=f+a),A.nodeType===3&&(f+=A.nodeValue.length),(G=A.firstChild)!==null;)I=A,A=G;for(;;){if(A===e)break t;if(I===r&&++T===l&&(u=f),I===d&&++M===a&&(S=f),(G=A.nextSibling)!==null)break;A=I,I=A.parentNode}A=G}r=u===-1||S===-1?null:{start:u,end:S}}else r=null}r=r||{start:0,end:0}}else r=null;for(H0={focusedElem:e,selectionRange:r},Ym=!1,Rt=t;Rt!==null;)if(t=Rt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Rt=e;else for(;Rt!==null;){t=Rt;try{var N=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var q=N.memoizedProps,Z=N.memoizedState,V=t.stateNode,F=V.getSnapshotBeforeUpdate(t.elementType===t.type?q:_a(t.type,q),Z);V.__reactInternalSnapshotBeforeUpdate=F}break;case 3:var H=t.stateNode.containerInfo;H.nodeType===1?H.textContent="":H.nodeType===9&&H.documentElement&&H.removeChild(H.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(it(163))}}catch(Y){Bn(t,t.return,Y)}if(e=t.sibling,e!==null){e.return=t.return,Rt=e;break}Rt=t.return}return N=S2,S2=!1,N}function Wd(e,t,r){var a=t.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var l=a=a.next;do{if((l.tag&e)===e){var d=l.destroy;l.destroy=void 0,d!==void 0&&a_(t,r,d)}l=l.next}while(l!==a)}}function Ug(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var a=r.create;r.destroy=a()}r=r.next}while(r!==t)}}function s_(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function kT(e){var t=e.alternate;t!==null&&(e.alternate=null,kT(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Wa],delete t[df],delete t[G0],delete t[f4],delete t[p4])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function MT(e){return e.tag===5||e.tag===3||e.tag===4}function C2(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||MT(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function l_(e,t,r){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=tg));else if(a!==4&&(e=e.child,e!==null))for(l_(e,t,r),e=e.sibling;e!==null;)l_(e,t,r),e=e.sibling}function c_(e,t,r){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(c_(e,t,r),e=e.sibling;e!==null;)c_(e,t,r),e=e.sibling}var wi=null,xa=!1;function Qs(e,t,r){for(r=r.child;r!==null;)AT(e,t,r),r=r.sibling}function AT(e,t,r){if(Za&&typeof Za.onCommitFiberUnmount=="function")try{Za.onCommitFiberUnmount(Dg,r)}catch{}switch(r.tag){case 5:Vi||Mu(r,t);case 6:var a=wi,l=xa;wi=null,Qs(e,t,r),wi=a,xa=l,wi!==null&&(xa?(e=wi,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):wi.removeChild(r.stateNode));break;case 18:wi!==null&&(xa?(e=wi,r=r.stateNode,e.nodeType===8?Hv(e.parentNode,r):e.nodeType===1&&Hv(e,r),sf(e)):Hv(wi,r.stateNode));break;case 4:a=wi,l=xa,wi=r.stateNode.containerInfo,xa=!0,Qs(e,t,r),wi=a,xa=l;break;case 0:case 11:case 14:case 15:if(!Vi&&(a=r.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){l=a=a.next;do{var d=l,f=d.destroy;d=d.tag,f!==void 0&&(d&2||d&4)&&a_(r,t,f),l=l.next}while(l!==a)}Qs(e,t,r);break;case 1:if(!Vi&&(Mu(r,t),a=r.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=r.memoizedProps,a.state=r.memoizedState,a.componentWillUnmount()}catch(u){Bn(r,t,u)}Qs(e,t,r);break;case 21:Qs(e,t,r);break;case 22:r.mode&1?(Vi=(a=Vi)||r.memoizedState!==null,Qs(e,t,r),Vi=a):Qs(e,t,r);break;default:Qs(e,t,r)}}function E2(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new M4),t.forEach(function(a){var l=$4.bind(null,e,a);r.has(a)||(r.add(a),a.then(l,l))})}}function ya(e,t){var r=t.deletions;if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];try{var d=e,f=t,u=f;e:for(;u!==null;){switch(u.tag){case 5:wi=u.stateNode,xa=!1;break e;case 3:wi=u.stateNode.containerInfo,xa=!0;break e;case 4:wi=u.stateNode.containerInfo,xa=!0;break e}u=u.return}if(wi===null)throw Error(it(160));AT(d,f,l),wi=null,xa=!1;var S=l.alternate;S!==null&&(S.return=null),l.return=null}catch(T){Bn(l,t,T)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)zT(t,e),t=t.sibling}function zT(e,t){var r=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ya(t,e),Ha(e),a&4){try{Wd(3,e,e.return),Ug(3,e)}catch(q){Bn(e,e.return,q)}try{Wd(5,e,e.return)}catch(q){Bn(e,e.return,q)}}break;case 1:ya(t,e),Ha(e),a&512&&r!==null&&Mu(r,r.return);break;case 5:if(ya(t,e),Ha(e),a&512&&r!==null&&Mu(r,r.return),e.flags&32){var l=e.stateNode;try{rf(l,"")}catch(q){Bn(e,e.return,q)}}if(a&4&&(l=e.stateNode,l!=null)){var d=e.memoizedProps,f=r!==null?r.memoizedProps:d,u=e.type,S=e.updateQueue;if(e.updateQueue=null,S!==null)try{u==="input"&&d.type==="radio"&&d.name!=null&&eE(l,d),R0(u,f);var T=R0(u,d);for(f=0;f<S.length;f+=2){var M=S[f],A=S[f+1];M==="style"?oE(l,A):M==="dangerouslySetInnerHTML"?nE(l,A):M==="children"?rf(l,A):E1(l,M,A,T)}switch(u){case"input":I0(l,d);break;case"textarea":tE(l,d);break;case"select":var I=l._wrapperState.wasMultiple;l._wrapperState.wasMultiple=!!d.multiple;var G=d.value;G!=null?Du(l,!!d.multiple,G,!1):I!==!!d.multiple&&(d.defaultValue!=null?Du(l,!!d.multiple,d.defaultValue,!0):Du(l,!!d.multiple,d.multiple?[]:"",!1))}l[df]=d}catch(q){Bn(e,e.return,q)}}break;case 6:if(ya(t,e),Ha(e),a&4){if(e.stateNode===null)throw Error(it(162));l=e.stateNode,d=e.memoizedProps;try{l.nodeValue=d}catch(q){Bn(e,e.return,q)}}break;case 3:if(ya(t,e),Ha(e),a&4&&r!==null&&r.memoizedState.isDehydrated)try{sf(t.containerInfo)}catch(q){Bn(e,e.return,q)}break;case 4:ya(t,e),Ha(e);break;case 13:ya(t,e),Ha(e),l=e.child,l.flags&8192&&(d=l.memoizedState!==null,l.stateNode.isHidden=d,!d||l.alternate!==null&&l.alternate.memoizedState!==null||(ix=qn())),a&4&&E2(e);break;case 22:if(M=r!==null&&r.memoizedState!==null,e.mode&1?(Vi=(T=Vi)||M,ya(t,e),Vi=T):ya(t,e),Ha(e),a&8192){if(T=e.memoizedState!==null,(e.stateNode.isHidden=T)&&!M&&e.mode&1)for(Rt=e,M=e.child;M!==null;){for(A=Rt=M;Rt!==null;){switch(I=Rt,G=I.child,I.tag){case 0:case 11:case 14:case 15:Wd(4,I,I.return);break;case 1:Mu(I,I.return);var N=I.stateNode;if(typeof N.componentWillUnmount=="function"){a=I,r=I.return;try{t=a,N.props=t.memoizedProps,N.state=t.memoizedState,N.componentWillUnmount()}catch(q){Bn(a,r,q)}}break;case 5:Mu(I,I.return);break;case 22:if(I.memoizedState!==null){P2(A);continue}}G!==null?(G.return=I,Rt=G):P2(A)}M=M.sibling}e:for(M=null,A=e;;){if(A.tag===5){if(M===null){M=A;try{l=A.stateNode,T?(d=l.style,typeof d.setProperty=="function"?d.setProperty("display","none","important"):d.display="none"):(u=A.stateNode,S=A.memoizedProps.style,f=S!=null&&S.hasOwnProperty("display")?S.display:null,u.style.display=iE("display",f))}catch(q){Bn(e,e.return,q)}}}else if(A.tag===6){if(M===null)try{A.stateNode.nodeValue=T?"":A.memoizedProps}catch(q){Bn(e,e.return,q)}}else if((A.tag!==22&&A.tag!==23||A.memoizedState===null||A===e)&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===e)break e;for(;A.sibling===null;){if(A.return===null||A.return===e)break e;M===A&&(M=null),A=A.return}M===A&&(M=null),A.sibling.return=A.return,A=A.sibling}}break;case 19:ya(t,e),Ha(e),a&4&&E2(e);break;case 21:break;default:ya(t,e),Ha(e)}}function Ha(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(MT(r)){var a=r;break e}r=r.return}throw Error(it(160))}switch(a.tag){case 5:var l=a.stateNode;a.flags&32&&(rf(l,""),a.flags&=-33);var d=C2(e);c_(e,d,l);break;case 3:case 4:var f=a.stateNode.containerInfo,u=C2(e);l_(e,u,f);break;default:throw Error(it(161))}}catch(S){Bn(e,e.return,S)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function z4(e,t,r){Rt=e,RT(e)}function RT(e,t,r){for(var a=(e.mode&1)!==0;Rt!==null;){var l=Rt,d=l.child;if(l.tag===22&&a){var f=l.memoizedState!==null||lm;if(!f){var u=l.alternate,S=u!==null&&u.memoizedState!==null||Vi;u=lm;var T=Vi;if(lm=f,(Vi=S)&&!T)for(Rt=l;Rt!==null;)f=Rt,S=f.child,f.tag===22&&f.memoizedState!==null?I2(l):S!==null?(S.return=f,Rt=S):I2(l);for(;d!==null;)Rt=d,RT(d),d=d.sibling;Rt=l,lm=u,Vi=T}T2(e)}else l.subtreeFlags&8772&&d!==null?(d.return=l,Rt=d):T2(e)}}function T2(e){for(;Rt!==null;){var t=Rt;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Vi||Ug(5,t);break;case 1:var a=t.stateNode;if(t.flags&4&&!Vi)if(r===null)a.componentDidMount();else{var l=t.elementType===t.type?r.memoizedProps:_a(t.type,r.memoizedProps);a.componentDidUpdate(l,r.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var d=t.updateQueue;d!==null&&u2(t,d,a);break;case 3:var f=t.updateQueue;if(f!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}u2(t,f,r)}break;case 5:var u=t.stateNode;if(r===null&&t.flags&4){r=u;var S=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":S.autoFocus&&r.focus();break;case"img":S.src&&(r.src=S.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var T=t.alternate;if(T!==null){var M=T.memoizedState;if(M!==null){var A=M.dehydrated;A!==null&&sf(A)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(it(163))}Vi||t.flags&512&&s_(t)}catch(I){Bn(t,t.return,I)}}if(t===e){Rt=null;break}if(r=t.sibling,r!==null){r.return=t.return,Rt=r;break}Rt=t.return}}function P2(e){for(;Rt!==null;){var t=Rt;if(t===e){Rt=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Rt=r;break}Rt=t.return}}function I2(e){for(;Rt!==null;){var t=Rt;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Ug(4,t)}catch(S){Bn(t,r,S)}break;case 1:var a=t.stateNode;if(typeof a.componentDidMount=="function"){var l=t.return;try{a.componentDidMount()}catch(S){Bn(t,l,S)}}var d=t.return;try{s_(t)}catch(S){Bn(t,d,S)}break;case 5:var f=t.return;try{s_(t)}catch(S){Bn(t,f,S)}}}catch(S){Bn(t,t.return,S)}if(t===e){Rt=null;break}var u=t.sibling;if(u!==null){u.return=t.return,Rt=u;break}Rt=t.return}}var R4=Math.ceil,dg=Ps.ReactCurrentDispatcher,rx=Ps.ReactCurrentOwner,ia=Ps.ReactCurrentBatchConfig,Or=0,gi=null,Jn=null,Si=0,Oo=0,Au=Cl(0),ii=0,vf=null,yc=0,Hg=0,nx=0,Gd=null,fo=null,ix=0,Zu=1/0,fs=null,fg=!1,u_=null,yl=null,cm=!1,ll=null,pg=0,Zd=0,h_=null,Rm=-1,Lm=0;function to(){return Or&6?qn():Rm!==-1?Rm:Rm=qn()}function vl(e){return e.mode&1?Or&2&&Si!==0?Si&-Si:g4.transition!==null?(Lm===0&&(Lm=yE()),Lm):(e=on,e!==0||(e=window.event,e=e===void 0?16:CE(e.type)),e):1}function Ea(e,t,r,a){if(50<Zd)throw Zd=0,h_=null,Error(it(185));Df(e,r,a),(!(Or&2)||e!==gi)&&(e===gi&&(!(Or&2)&&(Hg|=r),ii===4&&al(e,Si)),vo(e,a),r===1&&Or===0&&!(t.mode&1)&&(Zu=qn()+500,$g&&El()))}function vo(e,t){var r=e.callbackNode;g3(e,t);var a=Jm(e,e===gi?Si:0);if(a===0)r!==null&&Ow(r),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(r!=null&&Ow(r),t===1)e.tag===0?m4(k2.bind(null,e)):UE(k2.bind(null,e)),h4(function(){!(Or&6)&&El()}),r=null;else{switch(vE(a)){case 1:r=M1;break;case 4:r=mE;break;case 16:r=Xm;break;case 536870912:r=gE;break;default:r=Xm}r=jT(r,LT.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function LT(e,t){if(Rm=-1,Lm=0,Or&6)throw Error(it(327));var r=e.callbackNode;if($u()&&e.callbackNode!==r)return null;var a=Jm(e,e===gi?Si:0);if(a===0)return null;if(a&30||a&e.expiredLanes||t)t=mg(e,a);else{t=a;var l=Or;Or|=2;var d=FT();(gi!==e||Si!==t)&&(fs=null,Zu=qn()+500,cc(e,t));do try{F4();break}catch(u){DT(e,u)}while(!0);U1(),dg.current=d,Or=l,Jn!==null?t=0:(gi=null,Si=0,t=ii)}if(t!==0){if(t===2&&(l=B0(e),l!==0&&(a=l,t=d_(e,l))),t===1)throw r=vf,cc(e,0),al(e,a),vo(e,qn()),r;if(t===6)al(e,a);else{if(l=e.current.alternate,!(a&30)&&!L4(l)&&(t=mg(e,a),t===2&&(d=B0(e),d!==0&&(a=d,t=d_(e,d))),t===1))throw r=vf,cc(e,0),al(e,a),vo(e,qn()),r;switch(e.finishedWork=l,e.finishedLanes=a,t){case 0:case 1:throw Error(it(345));case 2:tc(e,fo,fs);break;case 3:if(al(e,a),(a&130023424)===a&&(t=ix+500-qn(),10<t)){if(Jm(e,0)!==0)break;if(l=e.suspendedLanes,(l&a)!==a){to(),e.pingedLanes|=e.suspendedLanes&l;break}e.timeoutHandle=W0(tc.bind(null,e,fo,fs),t);break}tc(e,fo,fs);break;case 4:if(al(e,a),(a&4194240)===a)break;for(t=e.eventTimes,l=-1;0<a;){var f=31-Ca(a);d=1<<f,f=t[f],f>l&&(l=f),a&=~d}if(a=l,a=qn()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*R4(a/1960))-a,10<a){e.timeoutHandle=W0(tc.bind(null,e,fo,fs),a);break}tc(e,fo,fs);break;case 5:tc(e,fo,fs);break;default:throw Error(it(329))}}}return vo(e,qn()),e.callbackNode===r?LT.bind(null,e):null}function d_(e,t){var r=Gd;return e.current.memoizedState.isDehydrated&&(cc(e,t).flags|=256),e=mg(e,t),e!==2&&(t=fo,fo=r,t!==null&&f_(t)),e}function f_(e){fo===null?fo=e:fo.push.apply(fo,e)}function L4(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var a=0;a<r.length;a++){var l=r[a],d=l.getSnapshot;l=l.value;try{if(!Ia(d(),l))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function al(e,t){for(t&=~nx,t&=~Hg,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Ca(t),a=1<<r;e[r]=-1,t&=~a}}function k2(e){if(Or&6)throw Error(it(327));$u();var t=Jm(e,0);if(!(t&1))return vo(e,qn()),null;var r=mg(e,t);if(e.tag!==0&&r===2){var a=B0(e);a!==0&&(t=a,r=d_(e,a))}if(r===1)throw r=vf,cc(e,0),al(e,t),vo(e,qn()),r;if(r===6)throw Error(it(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,tc(e,fo,fs),vo(e,qn()),null}function ox(e,t){var r=Or;Or|=1;try{return e(t)}finally{Or=r,Or===0&&(Zu=qn()+500,$g&&El())}}function vc(e){ll!==null&&ll.tag===0&&!(Or&6)&&$u();var t=Or;Or|=1;var r=ia.transition,a=on;try{if(ia.transition=null,on=1,e)return e()}finally{on=a,ia.transition=r,Or=t,!(Or&6)&&El()}}function ax(){Oo=Au.current,Cn(Au)}function cc(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,u4(r)),Jn!==null)for(r=Jn.return;r!==null;){var a=r;switch($1(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&rg();break;case 3:Wu(),Cn(go),Cn(Hi),K1();break;case 5:Z1(a);break;case 4:Wu();break;case 13:Cn(Rn);break;case 19:Cn(Rn);break;case 10:H1(a.type._context);break;case 22:case 23:ax()}r=r.return}if(gi=e,Jn=e=_l(e.current,null),Si=Oo=t,ii=0,vf=null,nx=Hg=yc=0,fo=Gd=null,ic!==null){for(t=0;t<ic.length;t++)if(r=ic[t],a=r.interleaved,a!==null){r.interleaved=null;var l=a.next,d=r.pending;if(d!==null){var f=d.next;d.next=l,a.next=f}r.pending=a}ic=null}return e}function DT(e,t){do{var r=Jn;try{if(U1(),Mm.current=hg,ug){for(var a=Ln.memoizedState;a!==null;){var l=a.queue;l!==null&&(l.pending=null),a=a.next}ug=!1}if(gc=0,mi=ni=Ln=null,qd=!1,mf=0,rx.current=null,r===null||r.return===null){ii=1,vf=t,Jn=null;break}e:{var d=e,f=r.return,u=r,S=t;if(t=Si,u.flags|=32768,S!==null&&typeof S=="object"&&typeof S.then=="function"){var T=S,M=u,A=M.tag;if(!(M.mode&1)&&(A===0||A===11||A===15)){var I=M.alternate;I?(M.updateQueue=I.updateQueue,M.memoizedState=I.memoizedState,M.lanes=I.lanes):(M.updateQueue=null,M.memoizedState=null)}var G=g2(f);if(G!==null){G.flags&=-257,y2(G,f,u,d,t),G.mode&1&&m2(d,T,t),t=G,S=T;var N=t.updateQueue;if(N===null){var q=new Set;q.add(S),t.updateQueue=q}else N.add(S);break e}else{if(!(t&1)){m2(d,T,t),sx();break e}S=Error(it(426))}}else if(Mn&&u.mode&1){var Z=g2(f);if(Z!==null){!(Z.flags&65536)&&(Z.flags|=256),y2(Z,f,u,d,t),j1(Gu(S,u));break e}}d=S=Gu(S,u),ii!==4&&(ii=2),Gd===null?Gd=[d]:Gd.push(d),d=f;do{switch(d.tag){case 3:d.flags|=65536,t&=-t,d.lanes|=t;var V=vT(d,S,t);c2(d,V);break e;case 1:u=S;var F=d.type,H=d.stateNode;if(!(d.flags&128)&&(typeof F.getDerivedStateFromError=="function"||H!==null&&typeof H.componentDidCatch=="function"&&(yl===null||!yl.has(H)))){d.flags|=65536,t&=-t,d.lanes|=t;var Y=_T(d,u,t);c2(d,Y);break e}}d=d.return}while(d!==null)}BT(r)}catch(ne){t=ne,Jn===r&&r!==null&&(Jn=r=r.return);continue}break}while(!0)}function FT(){var e=dg.current;return dg.current=hg,e===null?hg:e}function sx(){(ii===0||ii===3||ii===2)&&(ii=4),gi===null||!(yc&268435455)&&!(Hg&268435455)||al(gi,Si)}function mg(e,t){var r=Or;Or|=2;var a=FT();(gi!==e||Si!==t)&&(fs=null,cc(e,t));do try{D4();break}catch(l){DT(e,l)}while(!0);if(U1(),Or=r,dg.current=a,Jn!==null)throw Error(it(261));return gi=null,Si=0,ii}function D4(){for(;Jn!==null;)OT(Jn)}function F4(){for(;Jn!==null&&!s3();)OT(Jn)}function OT(e){var t=$T(e.alternate,e,Oo);e.memoizedProps=e.pendingProps,t===null?BT(e):Jn=t,rx.current=null}function BT(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=k4(r,t),r!==null){r.flags&=32767,Jn=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ii=6,Jn=null;return}}else if(r=I4(r,t,Oo),r!==null){Jn=r;return}if(t=t.sibling,t!==null){Jn=t;return}Jn=t=e}while(t!==null);ii===0&&(ii=5)}function tc(e,t,r){var a=on,l=ia.transition;try{ia.transition=null,on=1,O4(e,t,r,a)}finally{ia.transition=l,on=a}return null}function O4(e,t,r,a){do $u();while(ll!==null);if(Or&6)throw Error(it(327));r=e.finishedWork;var l=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(it(177));e.callbackNode=null,e.callbackPriority=0;var d=r.lanes|r.childLanes;if(y3(e,d),e===gi&&(Jn=gi=null,Si=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||cm||(cm=!0,jT(Xm,function(){return $u(),null})),d=(r.flags&15990)!==0,r.subtreeFlags&15990||d){d=ia.transition,ia.transition=null;var f=on;on=1;var u=Or;Or|=4,rx.current=null,A4(e,r),zT(r,e),n4(H0),Ym=!!U0,H0=U0=null,e.current=r,z4(r),l3(),Or=u,on=f,ia.transition=d}else e.current=r;if(cm&&(cm=!1,ll=e,pg=l),d=e.pendingLanes,d===0&&(yl=null),h3(r.stateNode),vo(e,qn()),t!==null)for(a=e.onRecoverableError,r=0;r<t.length;r++)l=t[r],a(l.value,{componentStack:l.stack,digest:l.digest});if(fg)throw fg=!1,e=u_,u_=null,e;return pg&1&&e.tag!==0&&$u(),d=e.pendingLanes,d&1?e===h_?Zd++:(Zd=0,h_=e):Zd=0,El(),null}function $u(){if(ll!==null){var e=vE(pg),t=ia.transition,r=on;try{if(ia.transition=null,on=16>e?16:e,ll===null)var a=!1;else{if(e=ll,ll=null,pg=0,Or&6)throw Error(it(331));var l=Or;for(Or|=4,Rt=e.current;Rt!==null;){var d=Rt,f=d.child;if(Rt.flags&16){var u=d.deletions;if(u!==null){for(var S=0;S<u.length;S++){var T=u[S];for(Rt=T;Rt!==null;){var M=Rt;switch(M.tag){case 0:case 11:case 15:Wd(8,M,d)}var A=M.child;if(A!==null)A.return=M,Rt=A;else for(;Rt!==null;){M=Rt;var I=M.sibling,G=M.return;if(kT(M),M===T){Rt=null;break}if(I!==null){I.return=G,Rt=I;break}Rt=G}}}var N=d.alternate;if(N!==null){var q=N.child;if(q!==null){N.child=null;do{var Z=q.sibling;q.sibling=null,q=Z}while(q!==null)}}Rt=d}}if(d.subtreeFlags&2064&&f!==null)f.return=d,Rt=f;else e:for(;Rt!==null;){if(d=Rt,d.flags&2048)switch(d.tag){case 0:case 11:case 15:Wd(9,d,d.return)}var V=d.sibling;if(V!==null){V.return=d.return,Rt=V;break e}Rt=d.return}}var F=e.current;for(Rt=F;Rt!==null;){f=Rt;var H=f.child;if(f.subtreeFlags&2064&&H!==null)H.return=f,Rt=H;else e:for(f=F;Rt!==null;){if(u=Rt,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:Ug(9,u)}}catch(ne){Bn(u,u.return,ne)}if(u===f){Rt=null;break e}var Y=u.sibling;if(Y!==null){Y.return=u.return,Rt=Y;break e}Rt=u.return}}if(Or=l,El(),Za&&typeof Za.onPostCommitFiberRoot=="function")try{Za.onPostCommitFiberRoot(Dg,e)}catch{}a=!0}return a}finally{on=r,ia.transition=t}}return!1}function M2(e,t,r){t=Gu(r,t),t=vT(e,t,1),e=gl(e,t,1),t=to(),e!==null&&(Df(e,1,t),vo(e,t))}function Bn(e,t,r){if(e.tag===3)M2(e,e,r);else for(;t!==null;){if(t.tag===3){M2(t,e,r);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(yl===null||!yl.has(a))){e=Gu(r,e),e=_T(t,e,1),t=gl(t,e,1),e=to(),t!==null&&(Df(t,1,e),vo(t,e));break}}t=t.return}}function B4(e,t,r){var a=e.pingCache;a!==null&&a.delete(t),t=to(),e.pingedLanes|=e.suspendedLanes&r,gi===e&&(Si&r)===r&&(ii===4||ii===3&&(Si&130023424)===Si&&500>qn()-ix?cc(e,0):nx|=r),vo(e,t)}function NT(e,t){t===0&&(e.mode&1?(t=Qp,Qp<<=1,!(Qp&130023424)&&(Qp=4194304)):t=1);var r=to();e=Es(e,t),e!==null&&(Df(e,t,r),vo(e,r))}function N4(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),NT(e,r)}function $4(e,t){var r=0;switch(e.tag){case 13:var a=e.stateNode,l=e.memoizedState;l!==null&&(r=l.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(it(314))}a!==null&&a.delete(t),NT(e,r)}var $T;$T=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||go.current)mo=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return mo=!1,P4(e,t,r);mo=!!(e.flags&131072)}else mo=!1,Mn&&t.flags&1048576&&HE(t,og,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;zm(e,t),e=t.pendingProps;var l=Uu(t,Hi.current);Nu(t,r),l=J1(null,t,a,e,l,r);var d=Y1();return t.flags|=1,typeof l=="object"&&l!==null&&typeof l.render=="function"&&l.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,yo(a)?(d=!0,ng(t)):d=!1,t.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,W1(t),l.updater=Vg,t.stateNode=l,l._reactInternals=t,Q0(t,a,e,r),t=r_(null,t,a,!0,d,r)):(t.tag=0,Mn&&d&&N1(t),Qi(null,t,l,r),t=t.child),t;case 16:a=t.elementType;e:{switch(zm(e,t),e=t.pendingProps,l=a._init,a=l(a._payload),t.type=a,l=t.tag=V4(a),e=_a(a,e),l){case 0:t=t_(null,t,a,e,r);break e;case 1:t=x2(null,t,a,e,r);break e;case 11:t=v2(null,t,a,e,r);break e;case 14:t=_2(null,t,a,_a(a.type,e),r);break e}throw Error(it(306,a,""))}return t;case 0:return a=t.type,l=t.pendingProps,l=t.elementType===a?l:_a(a,l),t_(e,t,a,l,r);case 1:return a=t.type,l=t.pendingProps,l=t.elementType===a?l:_a(a,l),x2(e,t,a,l,r);case 3:e:{if(ST(t),e===null)throw Error(it(387));a=t.pendingProps,d=t.memoizedState,l=d.element,XE(e,t),lg(t,a,null,r);var f=t.memoizedState;if(a=f.element,d.isDehydrated)if(d={element:a,isDehydrated:!1,cache:f.cache,pendingSuspenseBoundaries:f.pendingSuspenseBoundaries,transitions:f.transitions},t.updateQueue.baseState=d,t.memoizedState=d,t.flags&256){l=Gu(Error(it(423)),t),t=b2(e,t,a,r,l);break e}else if(a!==l){l=Gu(Error(it(424)),t),t=b2(e,t,a,r,l);break e}else for(Bo=ml(t.stateNode.containerInfo.firstChild),$o=t,Mn=!0,Sa=null,r=ZE(t,null,a,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Hu(),a===l){t=Ts(e,t,r);break e}Qi(e,t,a,r)}t=t.child}return t;case 5:return JE(t),e===null&&X0(t),a=t.type,l=t.pendingProps,d=e!==null?e.memoizedProps:null,f=l.children,q0(a,l)?f=null:d!==null&&q0(a,d)&&(t.flags|=32),wT(e,t),Qi(e,t,f,r),t.child;case 6:return e===null&&X0(t),null;case 13:return CT(e,t,r);case 4:return G1(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=qu(t,null,a,r):Qi(e,t,a,r),t.child;case 11:return a=t.type,l=t.pendingProps,l=t.elementType===a?l:_a(a,l),v2(e,t,a,l,r);case 7:return Qi(e,t,t.pendingProps,r),t.child;case 8:return Qi(e,t,t.pendingProps.children,r),t.child;case 12:return Qi(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(a=t.type._context,l=t.pendingProps,d=t.memoizedProps,f=l.value,_n(ag,a._currentValue),a._currentValue=f,d!==null)if(Ia(d.value,f)){if(d.children===l.children&&!go.current){t=Ts(e,t,r);break e}}else for(d=t.child,d!==null&&(d.return=t);d!==null;){var u=d.dependencies;if(u!==null){f=d.child;for(var S=u.firstContext;S!==null;){if(S.context===a){if(d.tag===1){S=_s(-1,r&-r),S.tag=2;var T=d.updateQueue;if(T!==null){T=T.shared;var M=T.pending;M===null?S.next=S:(S.next=M.next,M.next=S),T.pending=S}}d.lanes|=r,S=d.alternate,S!==null&&(S.lanes|=r),J0(d.return,r,t),u.lanes|=r;break}S=S.next}}else if(d.tag===10)f=d.type===t.type?null:d.child;else if(d.tag===18){if(f=d.return,f===null)throw Error(it(341));f.lanes|=r,u=f.alternate,u!==null&&(u.lanes|=r),J0(f,r,t),f=d.sibling}else f=d.child;if(f!==null)f.return=d;else for(f=d;f!==null;){if(f===t){f=null;break}if(d=f.sibling,d!==null){d.return=f.return,f=d;break}f=f.return}d=f}Qi(e,t,l.children,r),t=t.child}return t;case 9:return l=t.type,a=t.pendingProps.children,Nu(t,r),l=oa(l),a=a(l),t.flags|=1,Qi(e,t,a,r),t.child;case 14:return a=t.type,l=_a(a,t.pendingProps),l=_a(a.type,l),_2(e,t,a,l,r);case 15:return xT(e,t,t.type,t.pendingProps,r);case 17:return a=t.type,l=t.pendingProps,l=t.elementType===a?l:_a(a,l),zm(e,t),t.tag=1,yo(a)?(e=!0,ng(t)):e=!1,Nu(t,r),yT(t,a,l),Q0(t,a,l,r),r_(null,t,a,!0,e,r);case 19:return ET(e,t,r);case 22:return bT(e,t,r)}throw Error(it(156,t.tag))};function jT(e,t){return pE(e,t)}function j4(e,t,r,a){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function na(e,t,r,a){return new j4(e,t,r,a)}function lx(e){return e=e.prototype,!(!e||!e.isReactComponent)}function V4(e){if(typeof e=="function")return lx(e)?1:0;if(e!=null){if(e=e.$$typeof,e===P1)return 11;if(e===I1)return 14}return 2}function _l(e,t){var r=e.alternate;return r===null?(r=na(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Dm(e,t,r,a,l,d){var f=2;if(a=e,typeof e=="function")lx(e)&&(f=1);else if(typeof e=="string")f=5;else e:switch(e){case bu:return uc(r.children,l,d,t);case T1:f=8,l|=8;break;case S0:return e=na(12,r,t,l|2),e.elementType=S0,e.lanes=d,e;case C0:return e=na(13,r,t,l),e.elementType=C0,e.lanes=d,e;case E0:return e=na(19,r,t,l),e.elementType=E0,e.lanes=d,e;case JC:return qg(r,l,d,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case KC:f=10;break e;case XC:f=9;break e;case P1:f=11;break e;case I1:f=14;break e;case nl:f=16,a=null;break e}throw Error(it(130,e==null?e:typeof e,""))}return t=na(f,r,t,l),t.elementType=e,t.type=a,t.lanes=d,t}function uc(e,t,r,a){return e=na(7,e,a,t),e.lanes=r,e}function qg(e,t,r,a){return e=na(22,e,a,t),e.elementType=JC,e.lanes=r,e.stateNode={isHidden:!1},e}function Yv(e,t,r){return e=na(6,e,null,t),e.lanes=r,e}function Qv(e,t,r){return t=na(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function U4(e,t,r,a,l){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Rv(0),this.expirationTimes=Rv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rv(0),this.identifierPrefix=a,this.onRecoverableError=l,this.mutableSourceEagerHydrationData=null}function cx(e,t,r,a,l,d,f,u,S){return e=new U4(e,t,r,u,S),t===1?(t=1,d===!0&&(t|=8)):t=0,d=na(3,null,null,t),e.current=d,d.stateNode=e,d.memoizedState={element:a,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},W1(d),e}function H4(e,t,r){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:xu,key:a==null?null:""+a,children:e,containerInfo:t,implementation:r}}function VT(e){if(!e)return bl;e=e._reactInternals;e:{if(wc(e)!==e||e.tag!==1)throw Error(it(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(yo(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(it(171))}if(e.tag===1){var r=e.type;if(yo(r))return VE(e,r,t)}return t}function UT(e,t,r,a,l,d,f,u,S){return e=cx(r,a,!0,e,l,d,f,u,S),e.context=VT(null),r=e.current,a=to(),l=vl(r),d=_s(a,l),d.callback=t??null,gl(r,d,l),e.current.lanes=l,Df(e,l,a),vo(e,a),e}function Wg(e,t,r,a){var l=t.current,d=to(),f=vl(l);return r=VT(r),t.context===null?t.context=r:t.pendingContext=r,t=_s(d,f),t.payload={element:e},a=a===void 0?null:a,a!==null&&(t.callback=a),e=gl(l,t,f),e!==null&&(Ea(e,l,f,d),km(e,l,f)),f}function gg(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function A2(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function ux(e,t){A2(e,t),(e=e.alternate)&&A2(e,t)}function q4(){return null}var HT=typeof reportError=="function"?reportError:function(e){console.error(e)};function hx(e){this._internalRoot=e}Gg.prototype.render=hx.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(it(409));Wg(e,t,null,null)};Gg.prototype.unmount=hx.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;vc(function(){Wg(null,e,null,null)}),t[Cs]=null}};function Gg(e){this._internalRoot=e}Gg.prototype.unstable_scheduleHydration=function(e){if(e){var t=bE();e={blockedOn:null,target:e,priority:t};for(var r=0;r<ol.length&&t!==0&&t<ol[r].priority;r++);ol.splice(r,0,e),r===0&&SE(e)}};function dx(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Zg(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function z2(){}function W4(e,t,r,a,l){if(l){if(typeof a=="function"){var d=a;a=function(){var T=gg(f);d.call(T)}}var f=UT(t,a,e,0,null,!1,!1,"",z2);return e._reactRootContainer=f,e[Cs]=f.current,uf(e.nodeType===8?e.parentNode:e),vc(),f}for(;l=e.lastChild;)e.removeChild(l);if(typeof a=="function"){var u=a;a=function(){var T=gg(S);u.call(T)}}var S=cx(e,0,!1,null,null,!1,!1,"",z2);return e._reactRootContainer=S,e[Cs]=S.current,uf(e.nodeType===8?e.parentNode:e),vc(function(){Wg(t,S,r,a)}),S}function Kg(e,t,r,a,l){var d=r._reactRootContainer;if(d){var f=d;if(typeof l=="function"){var u=l;l=function(){var S=gg(f);u.call(S)}}Wg(t,f,e,l)}else f=W4(r,t,e,l,a);return gg(f)}_E=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Fd(t.pendingLanes);r!==0&&(A1(t,r|1),vo(t,qn()),!(Or&6)&&(Zu=qn()+500,El()))}break;case 13:vc(function(){var a=Es(e,1);if(a!==null){var l=to();Ea(a,e,1,l)}}),ux(e,1)}};z1=function(e){if(e.tag===13){var t=Es(e,134217728);if(t!==null){var r=to();Ea(t,e,134217728,r)}ux(e,134217728)}};xE=function(e){if(e.tag===13){var t=vl(e),r=Es(e,t);if(r!==null){var a=to();Ea(r,e,t,a)}ux(e,t)}};bE=function(){return on};wE=function(e,t){var r=on;try{return on=e,t()}finally{on=r}};D0=function(e,t,r){switch(t){case"input":if(I0(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var a=r[t];if(a!==e&&a.form===e.form){var l=Ng(a);if(!l)throw Error(it(90));QC(a),I0(a,l)}}}break;case"textarea":tE(e,r);break;case"select":t=r.value,t!=null&&Du(e,!!r.multiple,t,!1)}};lE=ox;cE=vc;var G4={usingClientEntryPoint:!1,Events:[Of,Eu,Ng,aE,sE,ox]},Pd={findFiberByHostInstance:nc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Z4={bundleType:Pd.bundleType,version:Pd.version,rendererPackageName:Pd.rendererPackageName,rendererConfig:Pd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ps.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=dE(e),e===null?null:e.stateNode},findFiberByHostInstance:Pd.findFiberByHostInstance||q4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var um=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!um.isDisabled&&um.supportsFiber)try{Dg=um.inject(Z4),Za=um}catch{}}qo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=G4;qo.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!dx(t))throw Error(it(200));return H4(e,t,null,r)};qo.createRoot=function(e,t){if(!dx(e))throw Error(it(299));var r=!1,a="",l=HT;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(l=t.onRecoverableError)),t=cx(e,1,!1,null,null,r,!1,a,l),e[Cs]=t.current,uf(e.nodeType===8?e.parentNode:e),new hx(t)};qo.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(it(188)):(e=Object.keys(e).join(","),Error(it(268,e)));return e=dE(t),e=e===null?null:e.stateNode,e};qo.flushSync=function(e){return vc(e)};qo.hydrate=function(e,t,r){if(!Zg(t))throw Error(it(200));return Kg(null,e,t,!0,r)};qo.hydrateRoot=function(e,t,r){if(!dx(e))throw Error(it(405));var a=r!=null&&r.hydratedSources||null,l=!1,d="",f=HT;if(r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(d=r.identifierPrefix),r.onRecoverableError!==void 0&&(f=r.onRecoverableError)),t=UT(t,null,e,1,r??null,l,!1,d,f),e[Cs]=t.current,uf(e),a)for(e=0;e<a.length;e++)r=a[e],l=r._getVersion,l=l(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,l]:t.mutableSourceEagerHydrationData.push(r,l);return new Gg(t)};qo.render=function(e,t,r){if(!Zg(t))throw Error(it(200));return Kg(null,e,t,!1,r)};qo.unmountComponentAtNode=function(e){if(!Zg(e))throw Error(it(40));return e._reactRootContainer?(vc(function(){Kg(null,null,e,!1,function(){e._reactRootContainer=null,e[Cs]=null})}),!0):!1};qo.unstable_batchedUpdates=ox;qo.unstable_renderSubtreeIntoContainer=function(e,t,r,a){if(!Zg(r))throw Error(it(200));if(e==null||e._reactInternals===void 0)throw Error(it(38));return Kg(e,t,r,!1,a)};qo.version="18.3.1-next-f1338f8080-20240426";function qT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(qT)}catch(e){console.error(e)}}qT(),qC.exports=qo;var Nf=qC.exports;const R2=zg(Nf);var L2=Nf;b0.createRoot=L2.createRoot,b0.hydrateRoot=L2.hydrateRoot;var WT={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v4.5.1/LICENSE.txt
 */(function(e,t){(function(r,a){e.exports=a()})(SA,function(){var r={},a={};function l(f,u,S){if(a[f]=S,f==="index"){var T="var sharedModule = {}; ("+a.shared+")(sharedModule); ("+a.worker+")(sharedModule);",M={};return a.shared(M),a.index(r,M),typeof window<"u"&&r.setWorkerUrl(window.URL.createObjectURL(new Blob([T],{type:"text/javascript"}))),r}}l("shared",["exports"],function(f){function u(o,n,s,h){return new(s||(s=Promise))(function(g,_){function x(P){try{C(h.next(P))}catch(R){_(R)}}function b(P){try{C(h.throw(P))}catch(R){_(R)}}function C(P){var R;P.done?g(P.value):(R=P.value,R instanceof s?R:new s(function(D){D(R)})).then(x,b)}C((h=h.apply(o,n||[])).next())})}function S(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}typeof SuppressedError=="function"&&SuppressedError;var T=M;function M(o,n){this.x=o,this.y=n}M.prototype={clone:function(){return new M(this.x,this.y)},add:function(o){return this.clone()._add(o)},sub:function(o){return this.clone()._sub(o)},multByPoint:function(o){return this.clone()._multByPoint(o)},divByPoint:function(o){return this.clone()._divByPoint(o)},mult:function(o){return this.clone()._mult(o)},div:function(o){return this.clone()._div(o)},rotate:function(o){return this.clone()._rotate(o)},rotateAround:function(o,n){return this.clone()._rotateAround(o,n)},matMult:function(o){return this.clone()._matMult(o)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(o){return this.x===o.x&&this.y===o.y},dist:function(o){return Math.sqrt(this.distSqr(o))},distSqr:function(o){var n=o.x-this.x,s=o.y-this.y;return n*n+s*s},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(o){return Math.atan2(this.y-o.y,this.x-o.x)},angleWith:function(o){return this.angleWithSep(o.x,o.y)},angleWithSep:function(o,n){return Math.atan2(this.x*n-this.y*o,this.x*o+this.y*n)},_matMult:function(o){var n=o[2]*this.x+o[3]*this.y;return this.x=o[0]*this.x+o[1]*this.y,this.y=n,this},_add:function(o){return this.x+=o.x,this.y+=o.y,this},_sub:function(o){return this.x-=o.x,this.y-=o.y,this},_mult:function(o){return this.x*=o,this.y*=o,this},_div:function(o){return this.x/=o,this.y/=o,this},_multByPoint:function(o){return this.x*=o.x,this.y*=o.y,this},_divByPoint:function(o){return this.x/=o.x,this.y/=o.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var o=this.y;return this.y=this.x,this.x=-o,this},_rotate:function(o){var n=Math.cos(o),s=Math.sin(o),h=s*this.x+n*this.y;return this.x=n*this.x-s*this.y,this.y=h,this},_rotateAround:function(o,n){var s=Math.cos(o),h=Math.sin(o),g=n.y+h*(this.x-n.x)+s*(this.y-n.y);return this.x=n.x+s*(this.x-n.x)-h*(this.y-n.y),this.y=g,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},M.convert=function(o){return o instanceof M?o:Array.isArray(o)?new M(o[0],o[1]):o};var A=S(T),I=G;function G(o,n,s,h){this.cx=3*o,this.bx=3*(s-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(h-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=n,this.p2x=s,this.p2y=h}G.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,n){if(n===void 0&&(n=1e-6),o<0)return 0;if(o>1)return 1;for(var s=o,h=0;h<8;h++){var g=this.sampleCurveX(s)-o;if(Math.abs(g)<n)return s;var _=this.sampleCurveDerivativeX(s);if(Math.abs(_)<1e-6)break;s-=g/_}var x=0,b=1;for(s=o,h=0;h<20&&(g=this.sampleCurveX(s),!(Math.abs(g-o)<n));h++)o>g?x=s:b=s,s=.5*(b-x)+x;return s},solve:function(o,n){return this.sampleCurveY(this.solveCurveX(o,n))}};var N=S(I);let q,Z;function V(){return q==null&&(q=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),q}function F(){if(Z==null&&(Z=!1,V())){const n=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(n){for(let h=0;h<5*5;h++){const g=4*h;n.fillStyle=`rgb(${g},${g+1},${g+2})`,n.fillRect(h%5,Math.floor(h/5),1,1)}const s=n.getImageData(0,0,5,5).data;for(let h=0;h<5*5*4;h++)if(h%4!=3&&s[h]!==h){Z=!0;break}}}return Z||!1}function H(o,n,s,h){const g=new N(o,n,s,h);return _=>g.solve(_)}const Y=H(.25,.1,.25,1);function ne(o,n,s){return Math.min(s,Math.max(n,o))}function fe(o,n,s){const h=s-n,g=((o-n)%h+h)%h+n;return g===n?s:g}function ie(o,...n){for(const s of n)for(const h in s)o[h]=s[h];return o}let _e=1;function be(o,n,s){const h={};for(const g in o)h[g]=n.call(this,o[g],g,o);return h}function Pe(o,n,s){const h={};for(const g in o)n.call(this,o[g],g,o)&&(h[g]=o[g]);return h}function ze(o){return Array.isArray(o)?o.map(ze):typeof o=="object"&&o?be(o,ze):o}const We={};function Ce(o){We[o]||(typeof console<"u"&&console.warn(o),We[o]=!0)}function Ie(o,n,s){return(s.y-o.y)*(n.x-o.x)>(n.y-o.y)*(s.x-o.x)}function Ke(o){return typeof WorkerGlobalScope<"u"&&o!==void 0&&o instanceof WorkerGlobalScope}let ke=null;function Se(o){return typeof ImageBitmap<"u"&&o instanceof ImageBitmap}const ge="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Fe(o,n,s,h,g){return u(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const _=new VideoFrame(o,{timestamp:0});try{const x=_==null?void 0:_.format;if(!x||!x.startsWith("BGR")&&!x.startsWith("RGB"))throw new Error(`Unrecognized format ${x}`);const b=x.startsWith("BGR"),C=new Uint8ClampedArray(h*g*4);if(yield _.copyTo(C,function(P,R,D,j,W){const J=4*Math.max(-R,0),ee=(Math.max(0,D)-D)*j*4+J,ce=4*j,pe=Math.max(0,R),Ae=Math.max(0,D);return{rect:{x:pe,y:Ae,width:Math.min(P.width,R+j)-pe,height:Math.min(P.height,D+W)-Ae},layout:[{offset:ee,stride:ce}]}}(o,n,s,h,g)),b)for(let P=0;P<C.length;P+=4){const R=C[P];C[P]=C[P+2],C[P+2]=R}return C}finally{_.close()}})}let Be,Ve;const Ze="AbortError";function gt(){return new Error(Ze)}const st={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function St(o){return st.REGISTERED_PROTOCOLS[o.substring(0,o.indexOf("://"))]}const Et="global-dispatcher";class Lt extends Error{constructor(n,s,h,g){super(`AJAXError: ${s} (${n}): ${h}`),this.status=n,this.statusText=s,this.url=h,this.body=g}}const Vt=()=>Ke(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,or=function(o,n){if(/:\/\//.test(o.url)&&!/^https?:|^file:/.test(o.url)){const h=St(o.url);if(h)return h(o,n);if(Ke(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:o,targetMapId:Et},n)}if(!(/^file:/.test(s=o.url)||/^file:/.test(Vt())&&!/^\w+:/.test(s))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(h,g){return u(this,void 0,void 0,function*(){const _=new Request(h.url,{method:h.method||"GET",body:h.body,credentials:h.credentials,headers:h.headers,cache:h.cache,referrer:Vt(),signal:g.signal});h.type!=="json"||_.headers.has("Accept")||_.headers.set("Accept","application/json");const x=yield fetch(_);if(!x.ok){const P=yield x.blob();throw new Lt(x.status,x.statusText,h.url,P)}let b;b=h.type==="arrayBuffer"||h.type==="image"?x.arrayBuffer():h.type==="json"?x.json():x.text();const C=yield b;if(g.signal.aborted)throw gt();return{data:C,cacheControl:x.headers.get("Cache-Control"),expires:x.headers.get("Expires")}})}(o,n);if(Ke(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:o,mustQueue:!0,targetMapId:Et},n)}var s;return function(h,g){return new Promise((_,x)=>{var b;const C=new XMLHttpRequest;C.open(h.method||"GET",h.url,!0),h.type!=="arrayBuffer"&&h.type!=="image"||(C.responseType="arraybuffer");for(const P in h.headers)C.setRequestHeader(P,h.headers[P]);h.type==="json"&&(C.responseType="text",!((b=h.headers)===null||b===void 0)&&b.Accept||C.setRequestHeader("Accept","application/json")),C.withCredentials=h.credentials==="include",C.onerror=()=>{x(new Error(C.statusText))},C.onload=()=>{if(!g.signal.aborted)if((C.status>=200&&C.status<300||C.status===0)&&C.response!==null){let P=C.response;if(h.type==="json")try{P=JSON.parse(C.response)}catch(R){return void x(R)}_({data:P,cacheControl:C.getResponseHeader("Cache-Control"),expires:C.getResponseHeader("Expires")})}else{const P=new Blob([C.response],{type:C.getResponseHeader("Content-Type")});x(new Lt(C.status,C.statusText,h.url,P))}},g.signal.addEventListener("abort",()=>{C.abort(),x(gt())}),C.send(h.body)})}(o,n)};function Jt(o){if(!o||o.indexOf("://")<=0||o.indexOf("data:image/")===0||o.indexOf("blob:")===0)return!0;const n=new URL(o),s=window.location;return n.protocol===s.protocol&&n.host===s.host}function tr(o,n,s){s[o]&&s[o].indexOf(n)!==-1||(s[o]=s[o]||[],s[o].push(n))}function rr(o,n,s){if(s&&s[o]){const h=s[o].indexOf(n);h!==-1&&s[o].splice(h,1)}}class Gr{constructor(n,s={}){ie(this,s),this.type=n}}class sr extends Gr{constructor(n,s={}){super("error",ie({error:n},s))}}class Br{on(n,s){return this._listeners=this._listeners||{},tr(n,s,this._listeners),this}off(n,s){return rr(n,s,this._listeners),rr(n,s,this._oneTimeListeners),this}once(n,s){return s?(this._oneTimeListeners=this._oneTimeListeners||{},tr(n,s,this._oneTimeListeners),this):new Promise(h=>this.once(n,h))}fire(n,s){typeof n=="string"&&(n=new Gr(n,s||{}));const h=n.type;if(this.listens(h)){n.target=this;const g=this._listeners&&this._listeners[h]?this._listeners[h].slice():[];for(const b of g)b.call(this,n);const _=this._oneTimeListeners&&this._oneTimeListeners[h]?this._oneTimeListeners[h].slice():[];for(const b of _)rr(h,b,this._oneTimeListeners),b.call(this,n);const x=this._eventedParent;x&&(ie(n,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),x.fire(n))}else n instanceof sr&&console.error(n.error);return this}listens(n){return this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n)}setEventedParent(n,s){return this._eventedParent=n,this._eventedParentData=s,this}}var Te={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"enum",default:"mercator",values:{mercator:{},globe:{}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const Ar=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function yr(o,n){const s={};for(const h in o)h!=="ref"&&(s[h]=o[h]);return Ar.forEach(h=>{h in n&&(s[h]=n[h])}),s}function mt(o,n){if(Array.isArray(o)){if(!Array.isArray(n)||o.length!==n.length)return!1;for(let s=0;s<o.length;s++)if(!mt(o[s],n[s]))return!1;return!0}if(typeof o=="object"&&o!==null&&n!==null){if(typeof n!="object"||Object.keys(o).length!==Object.keys(n).length)return!1;for(const s in o)if(!mt(o[s],n[s]))return!1;return!0}return o===n}function Ft(o,n){o.push(n)}function Xt(o,n,s){Ft(s,{command:"addSource",args:[o,n[o]]})}function Sr(o,n,s){Ft(n,{command:"removeSource",args:[o]}),s[o]=!0}function Zt(o,n,s,h){Sr(o,s,h),Xt(o,n,s)}function Qt(o,n,s){let h;for(h in o[s])if(Object.prototype.hasOwnProperty.call(o[s],h)&&h!=="data"&&!mt(o[s][h],n[s][h]))return!1;for(h in n[s])if(Object.prototype.hasOwnProperty.call(n[s],h)&&h!=="data"&&!mt(o[s][h],n[s][h]))return!1;return!0}function Cr(o,n,s,h,g,_){o=o||{},n=n||{};for(const x in o)Object.prototype.hasOwnProperty.call(o,x)&&(mt(o[x],n[x])||s.push({command:_,args:[h,x,n[x],g]}));for(const x in n)Object.prototype.hasOwnProperty.call(n,x)&&!Object.prototype.hasOwnProperty.call(o,x)&&(mt(o[x],n[x])||s.push({command:_,args:[h,x,n[x],g]}))}function vr(o){return o.id}function Nn(o,n){return o[n.id]=n,o}class Xe{constructor(n,s,h,g){this.message=(n?`${n}: `:"")+h,g&&(this.identifier=g),s!=null&&s.__line__&&(this.line=s.__line__)}}function _r(o,...n){for(const s of n)for(const h in s)o[h]=s[h];return o}class nr extends Error{constructor(n,s){super(s),this.message=s,this.key=n}}class Nr{constructor(n,s=[]){this.parent=n,this.bindings={};for(const[h,g]of s)this.bindings[h]=g}concat(n){return new Nr(this,n)}get(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw new Error(`${n} not found in scope.`)}has(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n)}}const Lr={kind:"null"},Ye={kind:"number"},Dt={kind:"string"},ht={kind:"boolean"},lr={kind:"color"},Dr={kind:"object"},kt={kind:"value"},Zr={kind:"collator"},Fr={kind:"formatted"},Xr={kind:"padding"},Jr={kind:"resolvedImage"},oe={kind:"variableAnchorOffsetCollection"};function U(o,n){return{kind:"array",itemType:o,N:n}}function $(o){if(o.kind==="array"){const n=$(o.itemType);return typeof o.N=="number"?`array<${n}, ${o.N}>`:o.itemType.kind==="value"?"array":`array<${n}>`}return o.kind}const X=[Lr,Ye,Dt,ht,lr,Fr,Dr,U(kt),Xr,Jr,oe];function te(o,n){if(n.kind==="error")return null;if(o.kind==="array"){if(n.kind==="array"&&(n.N===0&&n.itemType.kind==="value"||!te(o.itemType,n.itemType))&&(typeof o.N!="number"||o.N===n.N))return null}else{if(o.kind===n.kind)return null;if(o.kind==="value"){for(const s of X)if(!te(s,n))return null}}return`Expected ${$(o)} but found ${$(n)} instead.`}function se(o,n){return n.some(s=>s.kind===o.kind)}function me(o,n){return n.some(s=>s==="null"?o===null:s==="array"?Array.isArray(o):s==="object"?o&&!Array.isArray(o)&&typeof o=="object":s===typeof o)}function xe(o,n){return o.kind==="array"&&n.kind==="array"?o.itemType.kind===n.itemType.kind&&typeof o.N=="number":o.kind===n.kind}const ue=.96422,Re=.82521,je=4/29,Le=6/29,Qe=3*Le*Le,vt=Le*Le*Le,wt=Math.PI/180,At=180/Math.PI;function Kt(o){return(o%=360)<0&&(o+=360),o}function zt([o,n,s,h]){let g,_;const x=zr((.2225045*(o=Yt(o))+.7168786*(n=Yt(n))+.0606169*(s=Yt(s)))/1);o===n&&n===s?g=_=x:(g=zr((.4360747*o+.3850649*n+.1430804*s)/ue),_=zr((.0139322*o+.0971045*n+.7141733*s)/Re));const b=116*x-16;return[b<0?0:b,500*(g-x),200*(x-_),h]}function Yt(o){return o<=.04045?o/12.92:Math.pow((o+.055)/1.055,2.4)}function zr(o){return o>vt?Math.pow(o,1/3):o/Qe+je}function cr([o,n,s,h]){let g=(o+16)/116,_=isNaN(n)?g:g+n/500,x=isNaN(s)?g:g-s/200;return g=1*fr(g),_=ue*fr(_),x=Re*fr(x),[Ut(3.1338561*_-1.6168667*g-.4906146*x),Ut(-.9787684*_+1.9161415*g+.033454*x),Ut(.0719453*_-.2289914*g+1.4052427*x),h]}function Ut(o){return(o=o<=.00304?12.92*o:1.055*Math.pow(o,1/2.4)-.055)<0?0:o>1?1:o}function fr(o){return o>Le?o*o*o:Qe*(o-je)}function Er(o){return parseInt(o.padEnd(2,o),16)/255}function $r(o,n){return Rr(n?o/100:o,0,1)}function Rr(o,n,s){return Math.min(Math.max(n,o),s)}function En(o){return!o.some(Number.isNaN)}const oo={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class pr{constructor(n,s,h,g=1,_=!0){this.r=n,this.g=s,this.b=h,this.a=g,_||(this.r*=g,this.g*=g,this.b*=g,g||this.overwriteGetter("rgb",[n,s,h,g]))}static parse(n){if(n instanceof pr)return n;if(typeof n!="string")return;const s=function(h){if((h=h.toLowerCase().trim())==="transparent")return[0,0,0,0];const g=oo[h];if(g){const[x,b,C]=g;return[x/255,b/255,C/255,1]}if(h.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(h)){const x=h.length<6?1:2;let b=1;return[Er(h.slice(b,b+=x)),Er(h.slice(b,b+=x)),Er(h.slice(b,b+=x)),Er(h.slice(b,b+x)||"ff")]}if(h.startsWith("rgb")){const x=h.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){const[b,C,P,R,D,j,W,J,ee,ce,pe,Ae]=x,ve=[R||" ",W||" ",ce].join("");if(ve==="  "||ve==="  /"||ve===",,"||ve===",,,"){const Ee=[P,j,ee].join(""),Ne=Ee==="%%%"?100:Ee===""?255:0;if(Ne){const Je=[Rr(+C/Ne,0,1),Rr(+D/Ne,0,1),Rr(+J/Ne,0,1),pe?$r(+pe,Ae):1];if(En(Je))return Je}}return}}const _=h.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(_){const[x,b,C,P,R,D,j,W,J]=_,ee=[C||" ",R||" ",j].join("");if(ee==="  "||ee==="  /"||ee===",,"||ee===",,,"){const ce=[+b,Rr(+P,0,100),Rr(+D,0,100),W?$r(+W,J):1];if(En(ce))return function([pe,Ae,ve,Ee]){function Ne(Je){const ft=(Je+pe/30)%12,Ot=Ae*Math.min(ve,1-ve);return ve-Ot*Math.max(-1,Math.min(ft-3,9-ft,1))}return pe=Kt(pe),Ae/=100,ve/=100,[Ne(0),Ne(8),Ne(4),Ee]}(ce)}}}(n);return s?new pr(...s,!1):void 0}get rgb(){const{r:n,g:s,b:h,a:g}=this,_=g||1/0;return this.overwriteGetter("rgb",[n/_,s/_,h/_,g])}get hcl(){return this.overwriteGetter("hcl",function(n){const[s,h,g,_]=zt(n),x=Math.sqrt(h*h+g*g);return[Math.round(1e4*x)?Kt(Math.atan2(g,h)*At):NaN,x,s,_]}(this.rgb))}get lab(){return this.overwriteGetter("lab",zt(this.rgb))}overwriteGetter(n,s){return Object.defineProperty(this,n,{value:s}),s}toString(){const[n,s,h,g]=this.rgb;return`rgba(${[n,s,h].map(_=>Math.round(255*_)).join(",")},${g})`}}pr.black=new pr(0,0,0,1),pr.white=new pr(1,1,1,1),pr.transparent=new pr(0,0,0,0),pr.red=new pr(1,0,0,1);class Ii{constructor(n,s,h){this.sensitivity=n?s?"variant":"case":s?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(n,s){return this.collator.compare(n,s)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class ki{constructor(n,s,h,g,_){this.text=n,this.image=s,this.scale=h,this.fontStack=g,this.textColor=_}}class An{constructor(n){this.sections=n}static fromString(n){return new An([new ki(n,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(n=>n.text.length!==0||n.image&&n.image.name.length!==0)}static factory(n){return n instanceof An?n:An.fromString(n)}toString(){return this.sections.length===0?"":this.sections.map(n=>n.text).join("")}}class bn{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof bn)return n;if(typeof n=="number")return new bn([n,n,n,n]);if(Array.isArray(n)&&!(n.length<1||n.length>4)){for(const s of n)if(typeof s!="number")return;switch(n.length){case 1:n=[n[0],n[0],n[0],n[0]];break;case 2:n=[n[0],n[1],n[0],n[1]];break;case 3:n=[n[0],n[1],n[2],n[1]]}return new bn(n)}}toString(){return JSON.stringify(this.values)}}const Ra=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class $n{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof $n)return n;if(Array.isArray(n)&&!(n.length<1)&&n.length%2==0){for(let s=0;s<n.length;s+=2){const h=n[s],g=n[s+1];if(typeof h!="string"||!Ra.has(h)||!Array.isArray(g)||g.length!==2||typeof g[0]!="number"||typeof g[1]!="number")return}return new $n(n)}}toString(){return JSON.stringify(this.values)}}class jr{constructor(n){this.name=n.name,this.available=n.available}toString(){return this.name}static fromString(n){return n?new jr({name:n,available:!1}):null}}function jn(o,n,s,h){return typeof o=="number"&&o>=0&&o<=255&&typeof n=="number"&&n>=0&&n<=255&&typeof s=="number"&&s>=0&&s<=255?h===void 0||typeof h=="number"&&h>=0&&h<=1?null:`Invalid rgba value [${[o,n,s,h].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof h=="number"?[o,n,s,h]:[o,n,s]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function qi(o){if(o===null||typeof o=="string"||typeof o=="boolean"||typeof o=="number"||o instanceof pr||o instanceof Ii||o instanceof An||o instanceof bn||o instanceof $n||o instanceof jr)return!0;if(Array.isArray(o)){for(const n of o)if(!qi(n))return!1;return!0}if(typeof o=="object"){for(const n in o)if(!qi(o[n]))return!1;return!0}return!1}function Yr(o){if(o===null)return Lr;if(typeof o=="string")return Dt;if(typeof o=="boolean")return ht;if(typeof o=="number")return Ye;if(o instanceof pr)return lr;if(o instanceof Ii)return Zr;if(o instanceof An)return Fr;if(o instanceof bn)return Xr;if(o instanceof $n)return oe;if(o instanceof jr)return Jr;if(Array.isArray(o)){const n=o.length;let s;for(const h of o){const g=Yr(h);if(s){if(s===g)continue;s=kt;break}s=g}return U(s||kt,n)}return Dr}function Fn(o){const n=typeof o;return o===null?"":n==="string"||n==="number"||n==="boolean"?String(o):o instanceof pr||o instanceof An||o instanceof bn||o instanceof $n||o instanceof jr?o.toString():JSON.stringify(o)}class Wn{constructor(n,s){this.type=n,this.value=s}static parse(n,s){if(n.length!==2)return s.error(`'literal' expression requires exactly one argument, but found ${n.length-1} instead.`);if(!qi(n[1]))return s.error("invalid value");const h=n[1];let g=Yr(h);const _=s.expectedType;return g.kind!=="array"||g.N!==0||!_||_.kind!=="array"||typeof _.N=="number"&&_.N!==0||(g=_),new Wn(g,h)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class Hr{constructor(n){this.name="ExpressionEvaluationError",this.message=n}toJSON(){return this.message}}const Wi={string:Dt,number:Ye,boolean:ht,object:Dr};class mn{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");let h,g=1;const _=n[0];if(_==="array"){let b,C;if(n.length>2){const P=n[1];if(typeof P!="string"||!(P in Wi)||P==="object")return s.error('The item type argument of "array" must be one of string, number, boolean',1);b=Wi[P],g++}else b=kt;if(n.length>3){if(n[2]!==null&&(typeof n[2]!="number"||n[2]<0||n[2]!==Math.floor(n[2])))return s.error('The length argument to "array" must be a positive integer literal',2);C=n[2],g++}h=U(b,C)}else{if(!Wi[_])throw new Error(`Types doesn't contain name = ${_}`);h=Wi[_]}const x=[];for(;g<n.length;g++){const b=s.parse(n[g],g,kt);if(!b)return null;x.push(b)}return new mn(h,x)}evaluate(n){for(let s=0;s<this.args.length;s++){const h=this.args[s].evaluate(n);if(!te(this.type,Yr(h)))return h;if(s===this.args.length-1)throw new Hr(`Expected value to be of type ${$(this.type)}, but found ${$(Yr(h))} instead.`)}throw new Error}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const bo={"to-boolean":ht,"to-color":lr,"to-number":Ye,"to-string":Dt};class Mi{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");const h=n[0];if(!bo[h])throw new Error(`Can't parse ${h} as it is not part of the known types`);if((h==="to-boolean"||h==="to-string")&&n.length!==2)return s.error("Expected one argument.");const g=bo[h],_=[];for(let x=1;x<n.length;x++){const b=s.parse(n[x],x,kt);if(!b)return null;_.push(b)}return new Mi(g,_)}evaluate(n){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(n);case"color":{let s,h;for(const g of this.args){if(s=g.evaluate(n),h=null,s instanceof pr)return s;if(typeof s=="string"){const _=n.parseColor(s);if(_)return _}else if(Array.isArray(s)&&(h=s.length<3||s.length>4?`Invalid rbga value ${JSON.stringify(s)}: expected an array containing either three or four numeric values.`:jn(s[0],s[1],s[2],s[3]),!h))return new pr(s[0]/255,s[1]/255,s[2]/255,s[3])}throw new Hr(h||`Could not parse color from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"padding":{let s;for(const h of this.args){s=h.evaluate(n);const g=bn.parse(s);if(g)return g}throw new Hr(`Could not parse padding from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"variableAnchorOffsetCollection":{let s;for(const h of this.args){s=h.evaluate(n);const g=$n.parse(s);if(g)return g}throw new Hr(`Could not parse variableAnchorOffsetCollection from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"number":{let s=null;for(const h of this.args){if(s=h.evaluate(n),s===null)return 0;const g=Number(s);if(!isNaN(g))return g}throw new Hr(`Could not convert ${JSON.stringify(s)} to number.`)}case"formatted":return An.fromString(Fn(this.args[0].evaluate(n)));case"resolvedImage":return jr.fromString(Fn(this.args[0].evaluate(n)));default:return Fn(this.args[0].evaluate(n))}}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const Vr=["Unknown","Point","LineString","Polygon"];class ur{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Vr[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(n){let s=this._parseColorCache[n];return s||(s=this._parseColorCache[n]=pr.parse(n)),s}}class mr{constructor(n,s,h=[],g,_=new Nr,x=[]){this.registry=n,this.path=h,this.key=h.map(b=>`[${b}]`).join(""),this.scope=_,this.errors=x,this.expectedType=g,this._isConstant=s}parse(n,s,h,g,_={}){return s?this.concat(s,h,g)._parse(n,_):this._parse(n,_)}_parse(n,s){function h(g,_,x){return x==="assert"?new mn(_,[g]):x==="coerce"?new Mi(_,[g]):g}if(n!==null&&typeof n!="string"&&typeof n!="boolean"&&typeof n!="number"||(n=["literal",n]),Array.isArray(n)){if(n.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const g=n[0];if(typeof g!="string")return this.error(`Expression name must be a string, but found ${typeof g} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const _=this.registry[g];if(_){let x=_.parse(n,this);if(!x)return null;if(this.expectedType){const b=this.expectedType,C=x.type;if(b.kind!=="string"&&b.kind!=="number"&&b.kind!=="boolean"&&b.kind!=="object"&&b.kind!=="array"||C.kind!=="value")if(b.kind!=="color"&&b.kind!=="formatted"&&b.kind!=="resolvedImage"||C.kind!=="value"&&C.kind!=="string")if(b.kind!=="padding"||C.kind!=="value"&&C.kind!=="number"&&C.kind!=="array")if(b.kind!=="variableAnchorOffsetCollection"||C.kind!=="value"&&C.kind!=="array"){if(this.checkSubtype(b,C))return null}else x=h(x,b,s.typeAnnotation||"coerce");else x=h(x,b,s.typeAnnotation||"coerce");else x=h(x,b,s.typeAnnotation||"coerce");else x=h(x,b,s.typeAnnotation||"assert")}if(!(x instanceof Wn)&&x.type.kind!=="resolvedImage"&&this._isConstant(x)){const b=new ur;try{x=new Wn(x.type,x.evaluate(b))}catch(C){return this.error(C.message),null}}return x}return this.error(`Unknown expression "${g}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(n===void 0?"'undefined' value invalid. Use null instead.":typeof n=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof n} instead.`)}concat(n,s,h){const g=typeof n=="number"?this.path.concat(n):this.path,_=h?this.scope.concat(h):this.scope;return new mr(this.registry,this._isConstant,g,s||null,_,this.errors)}error(n,...s){const h=`${this.key}${s.map(g=>`[${g}]`).join("")}`;this.errors.push(new nr(h,n))}checkSubtype(n,s){const h=te(n,s);return h&&this.error(h),h}}class qt{constructor(n,s){this.type=s.type,this.bindings=[].concat(n),this.result=s}evaluate(n){return this.result.evaluate(n)}eachChild(n){for(const s of this.bindings)n(s[1]);n(this.result)}static parse(n,s){if(n.length<4)return s.error(`Expected at least 3 arguments, but found ${n.length-1} instead.`);const h=[];for(let _=1;_<n.length-1;_+=2){const x=n[_];if(typeof x!="string")return s.error(`Expected string, but found ${typeof x} instead.`,_);if(/[^a-zA-Z0-9_]/.test(x))return s.error("Variable names must contain only alphanumeric characters or '_'.",_);const b=s.parse(n[_+1],_+1);if(!b)return null;h.push([x,b])}const g=s.parse(n[n.length-1],n.length-1,s.expectedType,h);return g?new qt(h,g):null}outputDefined(){return this.result.outputDefined()}}class Tn{constructor(n,s){this.type=s.type,this.name=n,this.boundExpression=s}static parse(n,s){if(n.length!==2||typeof n[1]!="string")return s.error("'var' expression requires exactly one string literal argument.");const h=n[1];return s.scope.has(h)?new Tn(h,s.scope.get(h)):s.error(`Unknown variable "${h}". Make sure "${h}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(n){return this.boundExpression.evaluate(n)}eachChild(){}outputDefined(){return!1}}class Gi{constructor(n,s,h){this.type=n,this.index=s,this.input=h}static parse(n,s){if(n.length!==3)return s.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,Ye),g=s.parse(n[2],2,U(s.expectedType||kt));return h&&g?new Gi(g.type.itemType,h,g):null}evaluate(n){const s=this.index.evaluate(n),h=this.input.evaluate(n);if(s<0)throw new Hr(`Array index out of bounds: ${s} < 0.`);if(s>=h.length)throw new Hr(`Array index out of bounds: ${s} > ${h.length-1}.`);if(s!==Math.floor(s))throw new Hr(`Array index must be an integer, but found ${s} instead.`);return h[s]}eachChild(n){n(this.index),n(this.input)}outputDefined(){return!1}}class Zi{constructor(n,s){this.type=ht,this.needle=n,this.haystack=s}static parse(n,s){if(n.length!==3)return s.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,kt),g=s.parse(n[2],2,kt);return h&&g?se(h.type,[ht,Dt,Ye,Lr,kt])?new Zi(h,g):s.error(`Expected first argument to be of type boolean, string, number or null, but found ${$(h.type)} instead`):null}evaluate(n){const s=this.needle.evaluate(n),h=this.haystack.evaluate(n);if(!h)return!1;if(!me(s,["boolean","string","number","null"]))throw new Hr(`Expected first argument to be of type boolean, string, number or null, but found ${$(Yr(s))} instead.`);if(!me(h,["string","array"]))throw new Hr(`Expected second argument to be of type array or string, but found ${$(Yr(h))} instead.`);return h.indexOf(s)>=0}eachChild(n){n(this.needle),n(this.haystack)}outputDefined(){return!0}}class ao{constructor(n,s,h){this.type=Ye,this.needle=n,this.haystack=s,this.fromIndex=h}static parse(n,s){if(n.length<=2||n.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,kt),g=s.parse(n[2],2,kt);if(!h||!g)return null;if(!se(h.type,[ht,Dt,Ye,Lr,kt]))return s.error(`Expected first argument to be of type boolean, string, number or null, but found ${$(h.type)} instead`);if(n.length===4){const _=s.parse(n[3],3,Ye);return _?new ao(h,g,_):null}return new ao(h,g)}evaluate(n){const s=this.needle.evaluate(n),h=this.haystack.evaluate(n);if(!me(s,["boolean","string","number","null"]))throw new Hr(`Expected first argument to be of type boolean, string, number or null, but found ${$(Yr(s))} instead.`);if(!me(h,["string","array"]))throw new Hr(`Expected second argument to be of type array or string, but found ${$(Yr(h))} instead.`);if(this.fromIndex){const g=this.fromIndex.evaluate(n);return h.indexOf(s,g)}return h.indexOf(s)}eachChild(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex)}outputDefined(){return!1}}class Ai{constructor(n,s,h,g,_,x){this.inputType=n,this.type=s,this.input=h,this.cases=g,this.outputs=_,this.otherwise=x}static parse(n,s){if(n.length<5)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if(n.length%2!=1)return s.error("Expected an even number of arguments.");let h,g;s.expectedType&&s.expectedType.kind!=="value"&&(g=s.expectedType);const _={},x=[];for(let P=2;P<n.length-1;P+=2){let R=n[P];const D=n[P+1];Array.isArray(R)||(R=[R]);const j=s.concat(P);if(R.length===0)return j.error("Expected at least one branch label.");for(const J of R){if(typeof J!="number"&&typeof J!="string")return j.error("Branch labels must be numbers or strings.");if(typeof J=="number"&&Math.abs(J)>Number.MAX_SAFE_INTEGER)return j.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof J=="number"&&Math.floor(J)!==J)return j.error("Numeric branch labels must be integer values.");if(h){if(j.checkSubtype(h,Yr(J)))return null}else h=Yr(J);if(_[String(J)]!==void 0)return j.error("Branch labels must be unique.");_[String(J)]=x.length}const W=s.parse(D,P,g);if(!W)return null;g=g||W.type,x.push(W)}const b=s.parse(n[1],1,kt);if(!b)return null;const C=s.parse(n[n.length-1],n.length-1,g);return C?b.type.kind!=="value"&&s.concat(1).checkSubtype(h,b.type)?null:new Ai(h,g,b,_,x,C):null}evaluate(n){const s=this.input.evaluate(n);return(Yr(s)===this.inputType&&this.outputs[this.cases[s]]||this.otherwise).evaluate(n)}eachChild(n){n(this.input),this.outputs.forEach(n),n(this.otherwise)}outputDefined(){return this.outputs.every(n=>n.outputDefined())&&this.otherwise.outputDefined()}}class wo{constructor(n,s,h){this.type=n,this.branches=s,this.otherwise=h}static parse(n,s){if(n.length<4)return s.error(`Expected at least 3 arguments, but found only ${n.length-1}.`);if(n.length%2!=0)return s.error("Expected an odd number of arguments.");let h;s.expectedType&&s.expectedType.kind!=="value"&&(h=s.expectedType);const g=[];for(let x=1;x<n.length-1;x+=2){const b=s.parse(n[x],x,ht);if(!b)return null;const C=s.parse(n[x+1],x+1,h);if(!C)return null;g.push([b,C]),h=h||C.type}const _=s.parse(n[n.length-1],n.length-1,h);if(!_)return null;if(!h)throw new Error("Can't infer output type");return new wo(h,g,_)}evaluate(n){for(const[s,h]of this.branches)if(s.evaluate(n))return h.evaluate(n);return this.otherwise.evaluate(n)}eachChild(n){for(const[s,h]of this.branches)n(s),n(h);n(this.otherwise)}outputDefined(){return this.branches.every(([n,s])=>s.outputDefined())&&this.otherwise.outputDefined()}}class Ki{constructor(n,s,h,g){this.type=n,this.input=s,this.beginIndex=h,this.endIndex=g}static parse(n,s){if(n.length<=2||n.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,kt),g=s.parse(n[2],2,Ye);if(!h||!g)return null;if(!se(h.type,[U(kt),Dt,kt]))return s.error(`Expected first argument to be of type array or string, but found ${$(h.type)} instead`);if(n.length===4){const _=s.parse(n[3],3,Ye);return _?new Ki(h.type,h,g,_):null}return new Ki(h.type,h,g)}evaluate(n){const s=this.input.evaluate(n),h=this.beginIndex.evaluate(n);if(!me(s,["string","array"]))throw new Hr(`Expected first argument to be of type array or string, but found ${$(Yr(s))} instead.`);if(this.endIndex){const g=this.endIndex.evaluate(n);return s.slice(h,g)}return s.slice(h)}eachChild(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex)}outputDefined(){return!1}}function so(o,n){const s=o.length-1;let h,g,_=0,x=s,b=0;for(;_<=x;)if(b=Math.floor((_+x)/2),h=o[b],g=o[b+1],h<=n){if(b===s||n<g)return b;_=b+1}else{if(!(h>n))throw new Hr("Input is not a number.");x=b-1}return 0}class Qr{constructor(n,s,h){this.type=n,this.input=s,this.labels=[],this.outputs=[];for(const[g,_]of h)this.labels.push(g),this.outputs.push(_)}static parse(n,s){if(n.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return s.error("Expected an even number of arguments.");const h=s.parse(n[1],1,Ye);if(!h)return null;const g=[];let _=null;s.expectedType&&s.expectedType.kind!=="value"&&(_=s.expectedType);for(let x=1;x<n.length;x+=2){const b=x===1?-1/0:n[x],C=n[x+1],P=x,R=x+1;if(typeof b!="number")return s.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',P);if(g.length&&g[g.length-1][0]>=b)return s.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',P);const D=s.parse(C,R,_);if(!D)return null;_=_||D.type,g.push([b,D])}return new Qr(_,h,g)}evaluate(n){const s=this.labels,h=this.outputs;if(s.length===1)return h[0].evaluate(n);const g=this.input.evaluate(n);if(g<=s[0])return h[0].evaluate(n);const _=s.length;return g>=s[_-1]?h[_-1].evaluate(n):h[so(s,g)].evaluate(n)}eachChild(n){n(this.input);for(const s of this.outputs)n(s)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function Xa(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var Is=lo;function lo(o,n,s,h){this.cx=3*o,this.bx=3*(s-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(h-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=n,this.p2x=s,this.p2y=h}lo.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,n){if(n===void 0&&(n=1e-6),o<0)return 0;if(o>1)return 1;for(var s=o,h=0;h<8;h++){var g=this.sampleCurveX(s)-o;if(Math.abs(g)<n)return s;var _=this.sampleCurveDerivativeX(s);if(Math.abs(_)<1e-6)break;s-=g/_}var x=0,b=1;for(s=o,h=0;h<20&&(g=this.sampleCurveX(s),!(Math.abs(g-o)<n));h++)o>g?x=s:b=s,s=.5*(b-x)+x;return s},solve:function(o,n){return this.sampleCurveY(this.solveCurveX(o,n))}};var ca=Xa(Is);function yi(o,n,s){return o+s*(n-o)}function So(o,n,s){return o.map((h,g)=>yi(h,n[g],s))}const Qn={number:yi,color:function(o,n,s,h="rgb"){switch(h){case"rgb":{const[g,_,x,b]=So(o.rgb,n.rgb,s);return new pr(g,_,x,b,!1)}case"hcl":{const[g,_,x,b]=o.hcl,[C,P,R,D]=n.hcl;let j,W;if(isNaN(g)||isNaN(C))isNaN(g)?isNaN(C)?j=NaN:(j=C,x!==1&&x!==0||(W=P)):(j=g,R!==1&&R!==0||(W=_));else{let Ae=C-g;C>g&&Ae>180?Ae-=360:C<g&&g-C>180&&(Ae+=360),j=g+s*Ae}const[J,ee,ce,pe]=function([Ae,ve,Ee,Ne]){return Ae=isNaN(Ae)?0:Ae*wt,cr([Ee,Math.cos(Ae)*ve,Math.sin(Ae)*ve,Ne])}([j,W??yi(_,P,s),yi(x,R,s),yi(b,D,s)]);return new pr(J,ee,ce,pe,!1)}case"lab":{const[g,_,x,b]=cr(So(o.lab,n.lab,s));return new pr(g,_,x,b,!1)}}},array:So,padding:function(o,n,s){return new bn(So(o.values,n.values,s))},variableAnchorOffsetCollection:function(o,n,s){const h=o.values,g=n.values;if(h.length!==g.length)throw new Hr(`Cannot interpolate values of different length. from: ${o.toString()}, to: ${n.toString()}`);const _=[];for(let x=0;x<h.length;x+=2){if(h[x]!==g[x])throw new Hr(`Cannot interpolate values containing mismatched anchors. from[${x}]: ${h[x]}, to[${x}]: ${g[x]}`);_.push(h[x]);const[b,C]=h[x+1],[P,R]=g[x+1];_.push([yi(b,P,s),yi(C,R,s)])}return new $n(_)}};class ei{constructor(n,s,h,g,_){this.type=n,this.operator=s,this.interpolation=h,this.input=g,this.labels=[],this.outputs=[];for(const[x,b]of _)this.labels.push(x),this.outputs.push(b)}static interpolationFactor(n,s,h,g){let _=0;if(n.name==="exponential")_=ua(s,n.base,h,g);else if(n.name==="linear")_=ua(s,1,h,g);else if(n.name==="cubic-bezier"){const x=n.controlPoints;_=new ca(x[0],x[1],x[2],x[3]).solve(ua(s,1,h,g))}return _}static parse(n,s){let[h,g,_,...x]=n;if(!Array.isArray(g)||g.length===0)return s.error("Expected an interpolation type expression.",1);if(g[0]==="linear")g={name:"linear"};else if(g[0]==="exponential"){const P=g[1];if(typeof P!="number")return s.error("Exponential interpolation requires a numeric base.",1,1);g={name:"exponential",base:P}}else{if(g[0]!=="cubic-bezier")return s.error(`Unknown interpolation type ${String(g[0])}`,1,0);{const P=g.slice(1);if(P.length!==4||P.some(R=>typeof R!="number"||R<0||R>1))return s.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);g={name:"cubic-bezier",controlPoints:P}}}if(n.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return s.error("Expected an even number of arguments.");if(_=s.parse(_,2,Ye),!_)return null;const b=[];let C=null;h==="interpolate-hcl"||h==="interpolate-lab"?C=lr:s.expectedType&&s.expectedType.kind!=="value"&&(C=s.expectedType);for(let P=0;P<x.length;P+=2){const R=x[P],D=x[P+1],j=P+3,W=P+4;if(typeof R!="number")return s.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',j);if(b.length&&b[b.length-1][0]>=R)return s.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',j);const J=s.parse(D,W,C);if(!J)return null;C=C||J.type,b.push([R,J])}return xe(C,Ye)||xe(C,lr)||xe(C,Xr)||xe(C,oe)||xe(C,U(Ye))?new ei(C,h,g,_,b):s.error(`Type ${$(C)} is not interpolatable.`)}evaluate(n){const s=this.labels,h=this.outputs;if(s.length===1)return h[0].evaluate(n);const g=this.input.evaluate(n);if(g<=s[0])return h[0].evaluate(n);const _=s.length;if(g>=s[_-1])return h[_-1].evaluate(n);const x=so(s,g),b=ei.interpolationFactor(this.interpolation,g,s[x],s[x+1]),C=h[x].evaluate(n),P=h[x+1].evaluate(n);switch(this.operator){case"interpolate":return Qn[this.type.kind](C,P,b);case"interpolate-hcl":return Qn.color(C,P,b,"hcl");case"interpolate-lab":return Qn.color(C,P,b,"lab")}}eachChild(n){n(this.input);for(const s of this.outputs)n(s)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function ua(o,n,s,h){const g=h-s,_=o-s;return g===0?0:n===1?_/g:(Math.pow(n,_)-1)/(Math.pow(n,g)-1)}class La{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expectected at least one argument.");let h=null;const g=s.expectedType;g&&g.kind!=="value"&&(h=g);const _=[];for(const b of n.slice(1)){const C=s.parse(b,1+_.length,h,void 0,{typeAnnotation:"omit"});if(!C)return null;h=h||C.type,_.push(C)}if(!h)throw new Error("No output type");const x=g&&_.some(b=>te(g,b.type));return new La(x?kt:h,_)}evaluate(n){let s,h=null,g=0;for(const _ of this.args)if(g++,h=_.evaluate(n),h&&h instanceof jr&&!h.available&&(s||(s=h.name),h=null,g===this.args.length&&(h=s)),h!==null)break;return h}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}function Tt(o,n){return o==="=="||o==="!="?n.kind==="boolean"||n.kind==="string"||n.kind==="number"||n.kind==="null"||n.kind==="value":n.kind==="string"||n.kind==="number"||n.kind==="value"}function Wt(o,n,s,h){return h.compare(n,s)===0}function Ur(o,n,s){const h=o!=="=="&&o!=="!=";return class GT{constructor(_,x,b){this.type=ht,this.lhs=_,this.rhs=x,this.collator=b,this.hasUntypedArgument=_.type.kind==="value"||x.type.kind==="value"}static parse(_,x){if(_.length!==3&&_.length!==4)return x.error("Expected two or three arguments.");const b=_[0];let C=x.parse(_[1],1,kt);if(!C)return null;if(!Tt(b,C.type))return x.concat(1).error(`"${b}" comparisons are not supported for type '${$(C.type)}'.`);let P=x.parse(_[2],2,kt);if(!P)return null;if(!Tt(b,P.type))return x.concat(2).error(`"${b}" comparisons are not supported for type '${$(P.type)}'.`);if(C.type.kind!==P.type.kind&&C.type.kind!=="value"&&P.type.kind!=="value")return x.error(`Cannot compare types '${$(C.type)}' and '${$(P.type)}'.`);h&&(C.type.kind==="value"&&P.type.kind!=="value"?C=new mn(P.type,[C]):C.type.kind!=="value"&&P.type.kind==="value"&&(P=new mn(C.type,[P])));let R=null;if(_.length===4){if(C.type.kind!=="string"&&P.type.kind!=="string"&&C.type.kind!=="value"&&P.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(R=x.parse(_[3],3,Zr),!R)return null}return new GT(C,P,R)}evaluate(_){const x=this.lhs.evaluate(_),b=this.rhs.evaluate(_);if(h&&this.hasUntypedArgument){const C=Yr(x),P=Yr(b);if(C.kind!==P.kind||C.kind!=="string"&&C.kind!=="number")throw new Hr(`Expected arguments for "${o}" to be (string, string) or (number, number), but found (${C.kind}, ${P.kind}) instead.`)}if(this.collator&&!h&&this.hasUntypedArgument){const C=Yr(x),P=Yr(b);if(C.kind!=="string"||P.kind!=="string")return n(_,x,b)}return this.collator?s(_,x,b,this.collator.evaluate(_)):n(_,x,b)}eachChild(_){_(this.lhs),_(this.rhs),this.collator&&_(this.collator)}outputDefined(){return!0}}}const Pn=Ur("==",function(o,n,s){return n===s},Wt),gn=Ur("!=",function(o,n,s){return n!==s},function(o,n,s,h){return!Wt(0,n,s,h)}),ks=Ur("<",function(o,n,s){return n<s},function(o,n,s,h){return h.compare(n,s)<0}),Ms=Ur(">",function(o,n,s){return n>s},function(o,n,s,h){return h.compare(n,s)>0}),Il=Ur("<=",function(o,n,s){return n<=s},function(o,n,s,h){return h.compare(n,s)<=0}),As=Ur(">=",function(o,n,s){return n>=s},function(o,n,s,h){return h.compare(n,s)>=0});class Ec{constructor(n,s,h){this.type=Zr,this.locale=h,this.caseSensitive=n,this.diacriticSensitive=s}static parse(n,s){if(n.length!==2)return s.error("Expected one argument.");const h=n[1];if(typeof h!="object"||Array.isArray(h))return s.error("Collator options argument must be an object.");const g=s.parse(h["case-sensitive"]!==void 0&&h["case-sensitive"],1,ht);if(!g)return null;const _=s.parse(h["diacritic-sensitive"]!==void 0&&h["diacritic-sensitive"],1,ht);if(!_)return null;let x=null;return h.locale&&(x=s.parse(h.locale,1,Dt),!x)?null:new Ec(g,_,x)}evaluate(n){return new Ii(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null)}eachChild(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale)}outputDefined(){return!1}}class ch{constructor(n,s,h,g,_){this.type=Dt,this.number=n,this.locale=s,this.currency=h,this.minFractionDigits=g,this.maxFractionDigits=_}static parse(n,s){if(n.length!==3)return s.error("Expected two arguments.");const h=s.parse(n[1],1,Ye);if(!h)return null;const g=n[2];if(typeof g!="object"||Array.isArray(g))return s.error("NumberFormat options argument must be an object.");let _=null;if(g.locale&&(_=s.parse(g.locale,1,Dt),!_))return null;let x=null;if(g.currency&&(x=s.parse(g.currency,1,Dt),!x))return null;let b=null;if(g["min-fraction-digits"]&&(b=s.parse(g["min-fraction-digits"],1,Ye),!b))return null;let C=null;return g["max-fraction-digits"]&&(C=s.parse(g["max-fraction-digits"],1,Ye),!C)?null:new ch(h,_,x,b,C)}evaluate(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n))}eachChild(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits)}outputDefined(){return!1}}class Tc{constructor(n){this.type=Fr,this.sections=n}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");const h=n[1];if(!Array.isArray(h)&&typeof h=="object")return s.error("First argument must be an image or text section.");const g=[];let _=!1;for(let x=1;x<=n.length-1;++x){const b=n[x];if(_&&typeof b=="object"&&!Array.isArray(b)){_=!1;let C=null;if(b["font-scale"]&&(C=s.parse(b["font-scale"],1,Ye),!C))return null;let P=null;if(b["text-font"]&&(P=s.parse(b["text-font"],1,U(Dt)),!P))return null;let R=null;if(b["text-color"]&&(R=s.parse(b["text-color"],1,lr),!R))return null;const D=g[g.length-1];D.scale=C,D.font=P,D.textColor=R}else{const C=s.parse(n[x],1,kt);if(!C)return null;const P=C.type.kind;if(P!=="string"&&P!=="value"&&P!=="null"&&P!=="resolvedImage")return s.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");_=!0,g.push({content:C,scale:null,font:null,textColor:null})}}return new Tc(g)}evaluate(n){return new An(this.sections.map(s=>{const h=s.content.evaluate(n);return Yr(h)===Jr?new ki("",h,null,null,null):new ki(Fn(h),null,s.scale?s.scale.evaluate(n):null,s.font?s.font.evaluate(n).join(","):null,s.textColor?s.textColor.evaluate(n):null)}))}eachChild(n){for(const s of this.sections)n(s.content),s.scale&&n(s.scale),s.font&&n(s.font),s.textColor&&n(s.textColor)}outputDefined(){return!1}}class uh{constructor(n){this.type=Jr,this.input=n}static parse(n,s){if(n.length!==2)return s.error("Expected two arguments.");const h=s.parse(n[1],1,Dt);return h?new uh(h):s.error("No image name provided.")}evaluate(n){const s=this.input.evaluate(n),h=jr.fromString(s);return h&&n.availableImages&&(h.available=n.availableImages.indexOf(s)>-1),h}eachChild(n){n(this.input)}outputDefined(){return!1}}class hh{constructor(n){this.type=Ye,this.input=n}static parse(n,s){if(n.length!==2)return s.error(`Expected 1 argument, but found ${n.length-1} instead.`);const h=s.parse(n[1],1);return h?h.type.kind!=="array"&&h.type.kind!=="string"&&h.type.kind!=="value"?s.error(`Expected argument of type string or array, but found ${$(h.type)} instead.`):new hh(h):null}evaluate(n){const s=this.input.evaluate(n);if(typeof s=="string"||Array.isArray(s))return s.length;throw new Hr(`Expected value to be of type string or array, but found ${$(Yr(s))} instead.`)}eachChild(n){n(this.input)}outputDefined(){return!1}}const Go=8192;function dh(o,n){const s=(180+o[0])/360,h=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o[1]*Math.PI/360)))/360,g=Math.pow(2,n.z);return[Math.round(s*g*Go),Math.round(h*g*Go)]}function zs(o,n){const s=Math.pow(2,n.z);return[(g=(o[0]/Go+n.x)/s,360*g-180),(h=(o[1]/Go+n.y)/s,360/Math.PI*Math.atan(Math.exp((180-360*h)*Math.PI/180))-90)];var h,g}function xr(o,n){o[0]=Math.min(o[0],n[0]),o[1]=Math.min(o[1],n[1]),o[2]=Math.max(o[2],n[0]),o[3]=Math.max(o[3],n[1])}function kl(o,n){return!(o[0]<=n[0]||o[2]>=n[2]||o[1]<=n[1]||o[3]>=n[3])}function Py(o,n,s){const h=o[0]-n[0],g=o[1]-n[1],_=o[0]-s[0],x=o[1]-s[1];return h*x-_*g==0&&h*_<=0&&g*x<=0}function Pc(o,n,s,h){return(g=[h[0]-s[0],h[1]-s[1]])[0]*(_=[n[0]-o[0],n[1]-o[1]])[1]-g[1]*_[0]!=0&&!(!Xf(o,n,s,h)||!Xf(s,h,o,n));var g,_}function Iy(o,n,s){for(const h of s)for(let g=0;g<h.length-1;++g)if(Pc(o,n,h[g],h[g+1]))return!0;return!1}function Rs(o,n,s=!1){let h=!1;for(const b of n)for(let C=0;C<b.length-1;C++){if(Py(o,b[C],b[C+1]))return s;(_=b[C])[1]>(g=o)[1]!=(x=b[C+1])[1]>g[1]&&g[0]<(x[0]-_[0])*(g[1]-_[1])/(x[1]-_[1])+_[0]&&(h=!h)}var g,_,x;return h}function ky(o,n){for(const s of n)if(Rs(o,s))return!0;return!1}function Kf(o,n){for(const s of o)if(!Rs(s,n))return!1;for(let s=0;s<o.length-1;++s)if(Iy(o[s],o[s+1],n))return!1;return!0}function My(o,n){for(const s of n)if(Kf(o,s))return!0;return!1}function Xf(o,n,s,h){const g=h[0]-s[0],_=h[1]-s[1],x=(o[0]-s[0])*_-g*(o[1]-s[1]),b=(n[0]-s[0])*_-g*(n[1]-s[1]);return x>0&&b<0||x<0&&b>0}function fh(o,n,s){const h=[];for(let g=0;g<o.length;g++){const _=[];for(let x=0;x<o[g].length;x++){const b=dh(o[g][x],s);xr(n,b),_.push(b)}h.push(_)}return h}function Jf(o,n,s){const h=[];for(let g=0;g<o.length;g++){const _=fh(o[g],n,s);h.push(_)}return h}function Yf(o,n,s,h){if(o[0]<s[0]||o[0]>s[2]){const g=.5*h;let _=o[0]-s[0]>g?-h:s[0]-o[0]>g?h:0;_===0&&(_=o[0]-s[2]>g?-h:s[2]-o[0]>g?h:0),o[0]+=_}xr(n,o)}function Qf(o,n,s,h){const g=Math.pow(2,h.z)*Go,_=[h.x*Go,h.y*Go],x=[];for(const b of o)for(const C of b){const P=[C.x+_[0],C.y+_[1]];Yf(P,n,s,g),x.push(P)}return x}function ep(o,n,s,h){const g=Math.pow(2,h.z)*Go,_=[h.x*Go,h.y*Go],x=[];for(const C of o){const P=[];for(const R of C){const D=[R.x+_[0],R.y+_[1]];xr(n,D),P.push(D)}x.push(P)}if(n[2]-n[0]<=g/2){(b=n)[0]=b[1]=1/0,b[2]=b[3]=-1/0;for(const C of x)for(const P of C)Yf(P,n,s,g)}var b;return x}class Ja{constructor(n,s){this.type=ht,this.geojson=n,this.geometries=s}static parse(n,s){if(n.length!==2)return s.error(`'within' expression requires exactly one argument, but found ${n.length-1} instead.`);if(qi(n[1])){const h=n[1];if(h.type==="FeatureCollection"){const g=[];for(const _ of h.features){const{type:x,coordinates:b}=_.geometry;x==="Polygon"&&g.push(b),x==="MultiPolygon"&&g.push(...b)}if(g.length)return new Ja(h,{type:"MultiPolygon",coordinates:g})}else if(h.type==="Feature"){const g=h.geometry.type;if(g==="Polygon"||g==="MultiPolygon")return new Ja(h,h.geometry)}else if(h.type==="Polygon"||h.type==="MultiPolygon")return new Ja(h,h)}return s.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(s,h){const g=[1/0,1/0,-1/0,-1/0],_=[1/0,1/0,-1/0,-1/0],x=s.canonicalID();if(h.type==="Polygon"){const b=fh(h.coordinates,_,x),C=Qf(s.geometry(),g,_,x);if(!kl(g,_))return!1;for(const P of C)if(!Rs(P,b))return!1}if(h.type==="MultiPolygon"){const b=Jf(h.coordinates,_,x),C=Qf(s.geometry(),g,_,x);if(!kl(g,_))return!1;for(const P of C)if(!ky(P,b))return!1}return!0}(n,this.geometries);if(n.geometryType()==="LineString")return function(s,h){const g=[1/0,1/0,-1/0,-1/0],_=[1/0,1/0,-1/0,-1/0],x=s.canonicalID();if(h.type==="Polygon"){const b=fh(h.coordinates,_,x),C=ep(s.geometry(),g,_,x);if(!kl(g,_))return!1;for(const P of C)if(!Kf(P,b))return!1}if(h.type==="MultiPolygon"){const b=Jf(h.coordinates,_,x),C=ep(s.geometry(),g,_,x);if(!kl(g,_))return!1;for(const P of C)if(!My(P,b))return!1}return!0}(n,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let tp=class{constructor(o=[],n=Ay){if(this.data=o,this.length=this.data.length,this.compare=n,this.length>0)for(let s=(this.length>>1)-1;s>=0;s--)this._down(s)}push(o){this.data.push(o),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const o=this.data[0],n=this.data.pop();return this.length--,this.length>0&&(this.data[0]=n,this._down(0)),o}peek(){return this.data[0]}_up(o){const{data:n,compare:s}=this,h=n[o];for(;o>0;){const g=o-1>>1,_=n[g];if(s(h,_)>=0)break;n[o]=_,o=g}n[o]=h}_down(o){const{data:n,compare:s}=this,h=this.length>>1,g=n[o];for(;o<h;){let _=1+(o<<1),x=n[_];const b=_+1;if(b<this.length&&s(n[b],x)<0&&(_=b,x=n[b]),s(x,g)>=0)break;n[o]=x,o=_}n[o]=g}};function Ay(o,n){return o<n?-1:o>n?1:0}function zy(o,n,s,h,g){rp(o,n,s,h||o.length-1,g||Ry)}function rp(o,n,s,h,g){for(;h>s;){if(h-s>600){var _=h-s+1,x=n-s+1,b=Math.log(_),C=.5*Math.exp(2*b/3),P=.5*Math.sqrt(b*C*(_-C)/_)*(x-_/2<0?-1:1);rp(o,n,Math.max(s,Math.floor(n-x*C/_+P)),Math.min(h,Math.floor(n+(_-x)*C/_+P)),g)}var R=o[n],D=s,j=h;for(Ml(o,s,n),g(o[h],R)>0&&Ml(o,s,h);D<j;){for(Ml(o,D,j),D++,j--;g(o[D],R)<0;)D++;for(;g(o[j],R)>0;)j--}g(o[s],R)===0?Ml(o,s,j):Ml(o,++j,h),j<=n&&(s=j+1),n<=j&&(h=j-1)}}function Ml(o,n,s){var h=o[n];o[n]=o[s],o[s]=h}function Ry(o,n){return o<n?-1:o>n?1:0}function Ic(o,n){if(o.length<=1)return[o];const s=[];let h,g;for(const _ of o){const x=Dy(_);x!==0&&(_.area=Math.abs(x),g===void 0&&(g=x<0),g===x<0?(h&&s.push(h),h=[_]):h.push(_))}if(h&&s.push(h),n>1)for(let _=0;_<s.length;_++)s[_].length<=n||(zy(s[_],n,1,s[_].length-1,Ly),s[_]=s[_].slice(0,n));return s}function Ly(o,n){return n.area-o.area}function Dy(o){let n=0;for(let s,h,g=0,_=o.length,x=_-1;g<_;x=g++)s=o[g],h=o[x],n+=(h.x-s.x)*(s.y+h.y);return n}const np=1/298.257223563,ip=np*(2-np),op=Math.PI/180;class ph{constructor(n){const s=6378.137*op*1e3,h=Math.cos(n*op),g=1/(1-ip*(1-h*h)),_=Math.sqrt(g);this.kx=s*_*h,this.ky=s*_*g*(1-ip)}distance(n,s){const h=this.wrap(n[0]-s[0])*this.kx,g=(n[1]-s[1])*this.ky;return Math.sqrt(h*h+g*g)}pointOnLine(n,s){let h,g,_,x,b=1/0;for(let C=0;C<n.length-1;C++){let P=n[C][0],R=n[C][1],D=this.wrap(n[C+1][0]-P)*this.kx,j=(n[C+1][1]-R)*this.ky,W=0;D===0&&j===0||(W=(this.wrap(s[0]-P)*this.kx*D+(s[1]-R)*this.ky*j)/(D*D+j*j),W>1?(P=n[C+1][0],R=n[C+1][1]):W>0&&(P+=D/this.kx*W,R+=j/this.ky*W)),D=this.wrap(s[0]-P)*this.kx,j=(s[1]-R)*this.ky;const J=D*D+j*j;J<b&&(b=J,h=P,g=R,_=C,x=W)}return{point:[h,g],index:_,t:Math.max(0,Math.min(1,x))}}wrap(n){for(;n<-180;)n+=360;for(;n>180;)n-=360;return n}}function ap(o,n){return n[0]-o[0]}function kc(o){return o[1]-o[0]+1}function ha(o,n){return o[1]>=o[0]&&o[1]<n}function Al(o,n){if(o[0]>o[1])return[null,null];const s=kc(o);if(n){if(s===2)return[o,null];const g=Math.floor(s/2);return[[o[0],o[0]+g],[o[0]+g,o[1]]]}if(s===1)return[o,null];const h=Math.floor(s/2)-1;return[[o[0],o[0]+h],[o[0]+h+1,o[1]]]}function mh(o,n){if(!ha(n,o.length))return[1/0,1/0,-1/0,-1/0];const s=[1/0,1/0,-1/0,-1/0];for(let h=n[0];h<=n[1];++h)xr(s,o[h]);return s}function gh(o){const n=[1/0,1/0,-1/0,-1/0];for(const s of o)for(const h of s)xr(n,h);return n}function sp(o){return o[0]!==-1/0&&o[1]!==-1/0&&o[2]!==1/0&&o[3]!==1/0}function yh(o,n,s){if(!sp(o)||!sp(n))return NaN;let h=0,g=0;return o[2]<n[0]&&(h=n[0]-o[2]),o[0]>n[2]&&(h=o[0]-n[2]),o[1]>n[3]&&(g=o[1]-n[3]),o[3]<n[1]&&(g=n[1]-o[3]),s.distance([0,0],[h,g])}function en(o,n,s){const h=s.pointOnLine(n,o);return s.distance(o,h.point)}function vh(o,n,s,h,g){const _=Math.min(en(o,[s,h],g),en(n,[s,h],g)),x=Math.min(en(s,[o,n],g),en(h,[o,n],g));return Math.min(_,x)}function hr(o,n,s,h,g){if(!ha(n,o.length)||!ha(h,s.length))return 1/0;let _=1/0;for(let x=n[0];x<n[1];++x){const b=o[x],C=o[x+1];for(let P=h[0];P<h[1];++P){const R=s[P],D=s[P+1];if(Pc(b,C,R,D))return 0;_=Math.min(_,vh(b,C,R,D,g))}}return _}function _h(o,n,s,h,g){if(!ha(n,o.length)||!ha(h,s.length))return NaN;let _=1/0;for(let x=n[0];x<=n[1];++x)for(let b=h[0];b<=h[1];++b)if(_=Math.min(_,g.distance(o[x],s[b])),_===0)return _;return _}function pn(o,n,s){if(Rs(o,n,!0))return 0;let h=1/0;for(const g of n){const _=g[0],x=g[g.length-1];if(_!==x&&(h=Math.min(h,en(o,[x,_],s)),h===0))return h;const b=s.pointOnLine(g,o);if(h=Math.min(h,s.distance(o,b.point)),h===0)return h}return h}function sn(o,n,s,h){if(!ha(n,o.length))return NaN;for(let _=n[0];_<=n[1];++_)if(Rs(o[_],s,!0))return 0;let g=1/0;for(let _=n[0];_<n[1];++_){const x=o[_],b=o[_+1];for(const C of s)for(let P=0,R=C.length,D=R-1;P<R;D=P++){const j=C[D],W=C[P];if(Pc(x,b,j,W))return 0;g=Math.min(g,vh(x,b,j,W,h))}}return g}function zl(o,n){for(const s of o)for(const h of s)if(Rs(h,n,!0))return!0;return!1}function lp(o,n,s,h=1/0){const g=gh(o),_=gh(n);if(h!==1/0&&yh(g,_,s)>=h)return h;if(kl(g,_)){if(zl(o,n))return 0}else if(zl(n,o))return 0;let x=1/0;for(const b of o)for(let C=0,P=b.length,R=P-1;C<P;R=C++){const D=b[R],j=b[C];for(const W of n)for(let J=0,ee=W.length,ce=ee-1;J<ee;ce=J++){const pe=W[ce],Ae=W[J];if(Pc(D,j,pe,Ae))return 0;x=Math.min(x,vh(D,j,pe,Ae,s))}}return x}function xh(o,n,s,h,g,_){if(!_)return;const x=yh(mh(h,_),g,s);x<n&&o.push([x,_,[0,0]])}function Mc(o,n,s,h,g,_,x){if(!_||!x)return;const b=yh(mh(h,_),mh(g,x),s);b<n&&o.push([b,_,x])}function Ac(o,n,s,h,g=1/0){let _=Math.min(h.distance(o[0],s[0][0]),g);if(_===0)return _;const x=new tp([[0,[0,o.length-1],[0,0]]],ap),b=gh(s);for(;x.length>0;){const C=x.pop();if(C[0]>=_)continue;const P=C[1],R=n?50:100;if(kc(P)<=R){if(!ha(P,o.length))return NaN;if(n){const D=sn(o,P,s,h);if(isNaN(D)||D===0)return D;_=Math.min(_,D)}else for(let D=P[0];D<=P[1];++D){const j=pn(o[D],s,h);if(_=Math.min(_,j),_===0)return 0}}else{const D=Al(P,n);xh(x,_,h,o,b,D[0]),xh(x,_,h,o,b,D[1])}}return _}function zc(o,n,s,h,g,_=1/0){let x=Math.min(_,g.distance(o[0],s[0]));if(x===0)return x;const b=new tp([[0,[0,o.length-1],[0,s.length-1]]],ap);for(;b.length>0;){const C=b.pop();if(C[0]>=x)continue;const P=C[1],R=C[2],D=n?50:100,j=h?50:100;if(kc(P)<=D&&kc(R)<=j){if(!ha(P,o.length)&&ha(R,s.length))return NaN;let W;if(n&&h)W=hr(o,P,s,R,g),x=Math.min(x,W);else if(n&&!h){const J=o.slice(P[0],P[1]+1);for(let ee=R[0];ee<=R[1];++ee)if(W=en(s[ee],J,g),x=Math.min(x,W),x===0)return x}else if(!n&&h){const J=s.slice(R[0],R[1]+1);for(let ee=P[0];ee<=P[1];++ee)if(W=en(o[ee],J,g),x=Math.min(x,W),x===0)return x}else W=_h(o,P,s,R,g),x=Math.min(x,W)}else{const W=Al(P,n),J=Al(R,h);Mc(b,x,g,o,s,W[0],J[0]),Mc(b,x,g,o,s,W[0],J[1]),Mc(b,x,g,o,s,W[1],J[0]),Mc(b,x,g,o,s,W[1],J[1])}}return x}function bh(o){return o.type==="MultiPolygon"?o.coordinates.map(n=>({type:"Polygon",coordinates:n})):o.type==="MultiLineString"?o.coordinates.map(n=>({type:"LineString",coordinates:n})):o.type==="MultiPoint"?o.coordinates.map(n=>({type:"Point",coordinates:n})):[o]}class Da{constructor(n,s){this.type=Ye,this.geojson=n,this.geometries=s}static parse(n,s){if(n.length!==2)return s.error(`'distance' expression requires exactly one argument, but found ${n.length-1} instead.`);if(qi(n[1])){const h=n[1];if(h.type==="FeatureCollection")return new Da(h,h.features.map(g=>bh(g.geometry)).flat());if(h.type==="Feature")return new Da(h,bh(h.geometry));if("type"in h&&"coordinates"in h)return new Da(h,bh(h))}return s.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(s,h){const g=s.geometry(),_=g.flat().map(C=>zs([C.x,C.y],s.canonical));if(g.length===0)return NaN;const x=new ph(_[0][1]);let b=1/0;for(const C of h){switch(C.type){case"Point":b=Math.min(b,zc(_,!1,[C.coordinates],!1,x,b));break;case"LineString":b=Math.min(b,zc(_,!1,C.coordinates,!0,x,b));break;case"Polygon":b=Math.min(b,Ac(_,!1,C.coordinates,x,b))}if(b===0)return b}return b}(n,this.geometries);if(n.geometryType()==="LineString")return function(s,h){const g=s.geometry(),_=g.flat().map(C=>zs([C.x,C.y],s.canonical));if(g.length===0)return NaN;const x=new ph(_[0][1]);let b=1/0;for(const C of h){switch(C.type){case"Point":b=Math.min(b,zc(_,!0,[C.coordinates],!1,x,b));break;case"LineString":b=Math.min(b,zc(_,!0,C.coordinates,!0,x,b));break;case"Polygon":b=Math.min(b,Ac(_,!0,C.coordinates,x,b))}if(b===0)return b}return b}(n,this.geometries);if(n.geometryType()==="Polygon")return function(s,h){const g=s.geometry();if(g.length===0||g[0].length===0)return NaN;const _=Ic(g,0).map(C=>C.map(P=>P.map(R=>zs([R.x,R.y],s.canonical)))),x=new ph(_[0][0][0][1]);let b=1/0;for(const C of h)for(const P of _){switch(C.type){case"Point":b=Math.min(b,Ac([C.coordinates],!1,P,x,b));break;case"LineString":b=Math.min(b,Ac(C.coordinates,!0,P,x,b));break;case"Polygon":b=Math.min(b,lp(P,C.coordinates,x,b))}if(b===0)return b}return b}(n,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const Ya={"==":Pn,"!=":gn,">":Ms,"<":ks,">=":As,"<=":Il,array:mn,at:Gi,boolean:mn,case:wo,coalesce:La,collator:Ec,format:Tc,image:uh,in:Zi,"index-of":ao,interpolate:ei,"interpolate-hcl":ei,"interpolate-lab":ei,length:hh,let:qt,literal:Wn,match:Ai,number:mn,"number-format":ch,object:mn,slice:Ki,step:Qr,string:mn,"to-boolean":Mi,"to-color":Mi,"to-number":Mi,"to-string":Mi,var:Tn,within:Ja,distance:Da};class Xi{constructor(n,s,h,g){this.name=n,this.type=s,this._evaluate=h,this.args=g}evaluate(n){return this._evaluate(n,this.args)}eachChild(n){this.args.forEach(n)}outputDefined(){return!1}static parse(n,s){const h=n[0],g=Xi.definitions[h];if(!g)return s.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0);const _=Array.isArray(g)?g[0]:g.type,x=Array.isArray(g)?[[g[1],g[2]]]:g.overloads,b=x.filter(([P])=>!Array.isArray(P)||P.length===n.length-1);let C=null;for(const[P,R]of b){C=new mr(s.registry,Lc,s.path,null,s.scope);const D=[];let j=!1;for(let W=1;W<n.length;W++){const J=n[W],ee=Array.isArray(P)?P[W-1]:P.type,ce=C.parse(J,1+D.length,ee);if(!ce){j=!0;break}D.push(ce)}if(!j)if(Array.isArray(P)&&P.length!==D.length)C.error(`Expected ${P.length} arguments, but found ${D.length} instead.`);else{for(let W=0;W<D.length;W++){const J=Array.isArray(P)?P[W]:P.type,ee=D[W];C.concat(W+1).checkSubtype(J,ee.type)}if(C.errors.length===0)return new Xi(h,_,R,D)}}if(b.length===1)s.errors.push(...C.errors);else{const P=(b.length?b:x).map(([D])=>{return j=D,Array.isArray(j)?`(${j.map($).join(", ")})`:`(${$(j.type)}...)`;var j}).join(" | "),R=[];for(let D=1;D<n.length;D++){const j=s.parse(n[D],1+R.length);if(!j)return null;R.push($(j.type))}s.error(`Expected arguments of type ${P}, but found (${R.join(", ")}) instead.`)}return null}static register(n,s){Xi.definitions=s;for(const h in s)n[h]=Xi}}function wh(o,[n,s,h,g]){n=n.evaluate(o),s=s.evaluate(o),h=h.evaluate(o);const _=g?g.evaluate(o):1,x=jn(n,s,h,_);if(x)throw new Hr(x);return new pr(n/255,s/255,h/255,_,!1)}function Rc(o,n){return o in n}function Sh(o,n){const s=n[o];return s===void 0?null:s}function Qa(o){return{type:o}}function Lc(o){if(o instanceof Tn)return Lc(o.boundExpression);if(o instanceof Xi&&o.name==="error"||o instanceof Ec||o instanceof Ja||o instanceof Da)return!1;const n=o instanceof Mi||o instanceof mn;let s=!0;return o.eachChild(h=>{s=n?s&&Lc(h):s&&h instanceof Wn}),!!s&&Dc(o)&&Fc(o,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Dc(o){if(o instanceof Xi&&(o.name==="get"&&o.args.length===1||o.name==="feature-state"||o.name==="has"&&o.args.length===1||o.name==="properties"||o.name==="geometry-type"||o.name==="id"||/^filter-/.test(o.name))||o instanceof Ja||o instanceof Da)return!1;let n=!0;return o.eachChild(s=>{n&&!Dc(s)&&(n=!1)}),n}function Rl(o){if(o instanceof Xi&&o.name==="feature-state")return!1;let n=!0;return o.eachChild(s=>{n&&!Rl(s)&&(n=!1)}),n}function Fc(o,n){if(o instanceof Xi&&n.indexOf(o.name)>=0)return!1;let s=!0;return o.eachChild(h=>{s&&!Fc(h,n)&&(s=!1)}),s}function cp(o){return{result:"success",value:o}}function Ls(o){return{result:"error",value:o}}function es(o){return o["property-type"]==="data-driven"||o["property-type"]==="cross-faded-data-driven"}function Ch(o){return!!o.expression&&o.expression.parameters.indexOf("zoom")>-1}function Ds(o){return!!o.expression&&o.expression.interpolated}function Tr(o){return o instanceof Number?"number":o instanceof String?"string":o instanceof Boolean?"boolean":Array.isArray(o)?"array":o===null?"null":typeof o}function Ll(o){return typeof o=="object"&&o!==null&&!Array.isArray(o)}function up(o){return o}function hp(o,n){const s=n.type==="color",h=o.stops&&typeof o.stops[0][0]=="object",g=h||!(h||o.property!==void 0),_=o.type||(Ds(n)?"exponential":"interval");if(s||n.type==="padding"){const R=s?pr.parse:bn.parse;(o=_r({},o)).stops&&(o.stops=o.stops.map(D=>[D[0],R(D[1])])),o.default=R(o.default?o.default:n.default)}if(o.colorSpace&&(x=o.colorSpace)!=="rgb"&&x!=="hcl"&&x!=="lab")throw new Error(`Unknown color space: "${o.colorSpace}"`);var x;let b,C,P;if(_==="exponential")b=Eh;else if(_==="interval")b=Bc;else if(_==="categorical"){b=Oc,C=Object.create(null);for(const R of o.stops)C[R[0]]=R[1];P=typeof o.stops[0][0]}else{if(_!=="identity")throw new Error(`Unknown function type "${_}"`);b=Th}if(h){const R={},D=[];for(let J=0;J<o.stops.length;J++){const ee=o.stops[J],ce=ee[0].zoom;R[ce]===void 0&&(R[ce]={zoom:ce,type:o.type,property:o.property,default:o.default,stops:[]},D.push(ce)),R[ce].stops.push([ee[0].value,ee[1]])}const j=[];for(const J of D)j.push([R[J].zoom,hp(R[J],n)]);const W={name:"linear"};return{kind:"composite",interpolationType:W,interpolationFactor:ei.interpolationFactor.bind(void 0,W),zoomStops:j.map(J=>J[0]),evaluate:({zoom:J},ee)=>Eh({stops:j,base:o.base},n,J).evaluate(J,ee)}}if(g){const R=_==="exponential"?{name:"exponential",base:o.base!==void 0?o.base:1}:null;return{kind:"camera",interpolationType:R,interpolationFactor:ei.interpolationFactor.bind(void 0,R),zoomStops:o.stops.map(D=>D[0]),evaluate:({zoom:D})=>b(o,n,D,C,P)}}return{kind:"source",evaluate(R,D){const j=D&&D.properties?D.properties[o.property]:void 0;return j===void 0?ts(o.default,n.default):b(o,n,j,C,P)}}}function ts(o,n,s){return o!==void 0?o:n!==void 0?n:s!==void 0?s:void 0}function Oc(o,n,s,h,g){return ts(typeof s===g?h[s]:void 0,o.default,n.default)}function Bc(o,n,s){if(Tr(s)!=="number")return ts(o.default,n.default);const h=o.stops.length;if(h===1||s<=o.stops[0][0])return o.stops[0][1];if(s>=o.stops[h-1][0])return o.stops[h-1][1];const g=so(o.stops.map(_=>_[0]),s);return o.stops[g][1]}function Eh(o,n,s){const h=o.base!==void 0?o.base:1;if(Tr(s)!=="number")return ts(o.default,n.default);const g=o.stops.length;if(g===1||s<=o.stops[0][0])return o.stops[0][1];if(s>=o.stops[g-1][0])return o.stops[g-1][1];const _=so(o.stops.map(R=>R[0]),s),x=function(R,D,j,W){const J=W-j,ee=R-j;return J===0?0:D===1?ee/J:(Math.pow(D,ee)-1)/(Math.pow(D,J)-1)}(s,h,o.stops[_][0],o.stops[_+1][0]),b=o.stops[_][1],C=o.stops[_+1][1],P=Qn[n.type]||up;return typeof b.evaluate=="function"?{evaluate(...R){const D=b.evaluate.apply(void 0,R),j=C.evaluate.apply(void 0,R);if(D!==void 0&&j!==void 0)return P(D,j,x,o.colorSpace)}}:P(b,C,x,o.colorSpace)}function Th(o,n,s){switch(n.type){case"color":s=pr.parse(s);break;case"formatted":s=An.fromString(s.toString());break;case"resolvedImage":s=jr.fromString(s.toString());break;case"padding":s=bn.parse(s);break;default:Tr(s)===n.type||n.type==="enum"&&n.values[s]||(s=void 0)}return ts(s,o.default,n.default)}Xi.register(Ya,{error:[{kind:"error"},[Dt],(o,[n])=>{throw new Hr(n.evaluate(o))}],typeof:[Dt,[kt],(o,[n])=>$(Yr(n.evaluate(o)))],"to-rgba":[U(Ye,4),[lr],(o,[n])=>{const[s,h,g,_]=n.evaluate(o).rgb;return[255*s,255*h,255*g,_]}],rgb:[lr,[Ye,Ye,Ye],wh],rgba:[lr,[Ye,Ye,Ye,Ye],wh],has:{type:ht,overloads:[[[Dt],(o,[n])=>Rc(n.evaluate(o),o.properties())],[[Dt,Dr],(o,[n,s])=>Rc(n.evaluate(o),s.evaluate(o))]]},get:{type:kt,overloads:[[[Dt],(o,[n])=>Sh(n.evaluate(o),o.properties())],[[Dt,Dr],(o,[n,s])=>Sh(n.evaluate(o),s.evaluate(o))]]},"feature-state":[kt,[Dt],(o,[n])=>Sh(n.evaluate(o),o.featureState||{})],properties:[Dr,[],o=>o.properties()],"geometry-type":[Dt,[],o=>o.geometryType()],id:[kt,[],o=>o.id()],zoom:[Ye,[],o=>o.globals.zoom],"heatmap-density":[Ye,[],o=>o.globals.heatmapDensity||0],"line-progress":[Ye,[],o=>o.globals.lineProgress||0],accumulated:[kt,[],o=>o.globals.accumulated===void 0?null:o.globals.accumulated],"+":[Ye,Qa(Ye),(o,n)=>{let s=0;for(const h of n)s+=h.evaluate(o);return s}],"*":[Ye,Qa(Ye),(o,n)=>{let s=1;for(const h of n)s*=h.evaluate(o);return s}],"-":{type:Ye,overloads:[[[Ye,Ye],(o,[n,s])=>n.evaluate(o)-s.evaluate(o)],[[Ye],(o,[n])=>-n.evaluate(o)]]},"/":[Ye,[Ye,Ye],(o,[n,s])=>n.evaluate(o)/s.evaluate(o)],"%":[Ye,[Ye,Ye],(o,[n,s])=>n.evaluate(o)%s.evaluate(o)],ln2:[Ye,[],()=>Math.LN2],pi:[Ye,[],()=>Math.PI],e:[Ye,[],()=>Math.E],"^":[Ye,[Ye,Ye],(o,[n,s])=>Math.pow(n.evaluate(o),s.evaluate(o))],sqrt:[Ye,[Ye],(o,[n])=>Math.sqrt(n.evaluate(o))],log10:[Ye,[Ye],(o,[n])=>Math.log(n.evaluate(o))/Math.LN10],ln:[Ye,[Ye],(o,[n])=>Math.log(n.evaluate(o))],log2:[Ye,[Ye],(o,[n])=>Math.log(n.evaluate(o))/Math.LN2],sin:[Ye,[Ye],(o,[n])=>Math.sin(n.evaluate(o))],cos:[Ye,[Ye],(o,[n])=>Math.cos(n.evaluate(o))],tan:[Ye,[Ye],(o,[n])=>Math.tan(n.evaluate(o))],asin:[Ye,[Ye],(o,[n])=>Math.asin(n.evaluate(o))],acos:[Ye,[Ye],(o,[n])=>Math.acos(n.evaluate(o))],atan:[Ye,[Ye],(o,[n])=>Math.atan(n.evaluate(o))],min:[Ye,Qa(Ye),(o,n)=>Math.min(...n.map(s=>s.evaluate(o)))],max:[Ye,Qa(Ye),(o,n)=>Math.max(...n.map(s=>s.evaluate(o)))],abs:[Ye,[Ye],(o,[n])=>Math.abs(n.evaluate(o))],round:[Ye,[Ye],(o,[n])=>{const s=n.evaluate(o);return s<0?-Math.round(-s):Math.round(s)}],floor:[Ye,[Ye],(o,[n])=>Math.floor(n.evaluate(o))],ceil:[Ye,[Ye],(o,[n])=>Math.ceil(n.evaluate(o))],"filter-==":[ht,[Dt,kt],(o,[n,s])=>o.properties()[n.value]===s.value],"filter-id-==":[ht,[kt],(o,[n])=>o.id()===n.value],"filter-type-==":[ht,[Dt],(o,[n])=>o.geometryType()===n.value],"filter-<":[ht,[Dt,kt],(o,[n,s])=>{const h=o.properties()[n.value],g=s.value;return typeof h==typeof g&&h<g}],"filter-id-<":[ht,[kt],(o,[n])=>{const s=o.id(),h=n.value;return typeof s==typeof h&&s<h}],"filter->":[ht,[Dt,kt],(o,[n,s])=>{const h=o.properties()[n.value],g=s.value;return typeof h==typeof g&&h>g}],"filter-id->":[ht,[kt],(o,[n])=>{const s=o.id(),h=n.value;return typeof s==typeof h&&s>h}],"filter-<=":[ht,[Dt,kt],(o,[n,s])=>{const h=o.properties()[n.value],g=s.value;return typeof h==typeof g&&h<=g}],"filter-id-<=":[ht,[kt],(o,[n])=>{const s=o.id(),h=n.value;return typeof s==typeof h&&s<=h}],"filter->=":[ht,[Dt,kt],(o,[n,s])=>{const h=o.properties()[n.value],g=s.value;return typeof h==typeof g&&h>=g}],"filter-id->=":[ht,[kt],(o,[n])=>{const s=o.id(),h=n.value;return typeof s==typeof h&&s>=h}],"filter-has":[ht,[kt],(o,[n])=>n.value in o.properties()],"filter-has-id":[ht,[],o=>o.id()!==null&&o.id()!==void 0],"filter-type-in":[ht,[U(Dt)],(o,[n])=>n.value.indexOf(o.geometryType())>=0],"filter-id-in":[ht,[U(kt)],(o,[n])=>n.value.indexOf(o.id())>=0],"filter-in-small":[ht,[Dt,U(kt)],(o,[n,s])=>s.value.indexOf(o.properties()[n.value])>=0],"filter-in-large":[ht,[Dt,U(kt)],(o,[n,s])=>function(h,g,_,x){for(;_<=x;){const b=_+x>>1;if(g[b]===h)return!0;g[b]>h?x=b-1:_=b+1}return!1}(o.properties()[n.value],s.value,0,s.value.length-1)],all:{type:ht,overloads:[[[ht,ht],(o,[n,s])=>n.evaluate(o)&&s.evaluate(o)],[Qa(ht),(o,n)=>{for(const s of n)if(!s.evaluate(o))return!1;return!0}]]},any:{type:ht,overloads:[[[ht,ht],(o,[n,s])=>n.evaluate(o)||s.evaluate(o)],[Qa(ht),(o,n)=>{for(const s of n)if(s.evaluate(o))return!0;return!1}]]},"!":[ht,[ht],(o,[n])=>!n.evaluate(o)],"is-supported-script":[ht,[Dt],(o,[n])=>{const s=o.globals&&o.globals.isSupportedScript;return!s||s(n.evaluate(o))}],upcase:[Dt,[Dt],(o,[n])=>n.evaluate(o).toUpperCase()],downcase:[Dt,[Dt],(o,[n])=>n.evaluate(o).toLowerCase()],concat:[Dt,Qa(kt),(o,n)=>n.map(s=>Fn(s.evaluate(o))).join("")],"resolved-locale":[Dt,[Zr],(o,[n])=>n.evaluate(o).resolvedLocale()]});class Nc{constructor(n,s){var h;this.expression=n,this._warningHistory={},this._evaluator=new ur,this._defaultValue=s?(h=s).type==="color"&&Ll(h.default)?new pr(0,0,0,0):h.type==="color"?pr.parse(h.default)||null:h.type==="padding"?bn.parse(h.default)||null:h.type==="variableAnchorOffsetCollection"?$n.parse(h.default)||null:h.default===void 0?null:h.default:null,this._enumValues=s&&s.type==="enum"?s.values:null}evaluateWithoutErrorHandling(n,s,h,g,_,x){return this._evaluator.globals=n,this._evaluator.feature=s,this._evaluator.featureState=h,this._evaluator.canonical=g,this._evaluator.availableImages=_||null,this._evaluator.formattedSection=x,this.expression.evaluate(this._evaluator)}evaluate(n,s,h,g,_,x){this._evaluator.globals=n,this._evaluator.feature=s||null,this._evaluator.featureState=h||null,this._evaluator.canonical=g,this._evaluator.availableImages=_||null,this._evaluator.formattedSection=x||null;try{const b=this.expression.evaluate(this._evaluator);if(b==null||typeof b=="number"&&b!=b)return this._defaultValue;if(this._enumValues&&!(b in this._enumValues))throw new Hr(`Expected value to be one of ${Object.keys(this._enumValues).map(C=>JSON.stringify(C)).join(", ")}, but found ${JSON.stringify(b)} instead.`);return b}catch(b){return this._warningHistory[b.message]||(this._warningHistory[b.message]=!0,typeof console<"u"&&console.warn(b.message)),this._defaultValue}}}function Dl(o){return Array.isArray(o)&&o.length>0&&typeof o[0]=="string"&&o[0]in Ya}function rs(o,n){const s=new mr(Ya,Lc,[],n?function(g){const _={color:lr,string:Dt,number:Ye,enum:Dt,boolean:ht,formatted:Fr,padding:Xr,resolvedImage:Jr,variableAnchorOffsetCollection:oe};return g.type==="array"?U(_[g.value]||kt,g.length):_[g.type]}(n):void 0),h=s.parse(o,void 0,void 0,void 0,n&&n.type==="string"?{typeAnnotation:"coerce"}:void 0);return h?cp(new Nc(h,n)):Ls(s.errors)}class Ph{constructor(n,s){this.kind=n,this._styleExpression=s,this.isStateDependent=n!=="constant"&&!Rl(s.expression)}evaluateWithoutErrorHandling(n,s,h,g,_,x){return this._styleExpression.evaluateWithoutErrorHandling(n,s,h,g,_,x)}evaluate(n,s,h,g,_,x){return this._styleExpression.evaluate(n,s,h,g,_,x)}}class Ih{constructor(n,s,h,g){this.kind=n,this.zoomStops=h,this._styleExpression=s,this.isStateDependent=n!=="camera"&&!Rl(s.expression),this.interpolationType=g}evaluateWithoutErrorHandling(n,s,h,g,_,x){return this._styleExpression.evaluateWithoutErrorHandling(n,s,h,g,_,x)}evaluate(n,s,h,g,_,x){return this._styleExpression.evaluate(n,s,h,g,_,x)}interpolationFactor(n,s,h){return this.interpolationType?ei.interpolationFactor(this.interpolationType,n,s,h):0}}function dp(o,n){const s=rs(o,n);if(s.result==="error")return s;const h=s.value.expression,g=Dc(h);if(!g&&!es(n))return Ls([new nr("","data expressions not supported")]);const _=Fc(h,["zoom"]);if(!_&&!Ch(n))return Ls([new nr("","zoom expressions not supported")]);const x=jc(h);return x||_?x instanceof nr?Ls([x]):x instanceof ei&&!Ds(n)?Ls([new nr("",'"interpolate" expressions cannot be used with this property')]):cp(x?new Ih(g?"camera":"composite",s.value,x.labels,x instanceof ei?x.interpolation:void 0):new Ph(g?"constant":"source",s.value)):Ls([new nr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class $c{constructor(n,s){this._parameters=n,this._specification=s,_r(this,hp(this._parameters,this._specification))}static deserialize(n){return new $c(n._parameters,n._specification)}static serialize(n){return{_parameters:n._parameters,_specification:n._specification}}}function jc(o){let n=null;if(o instanceof qt)n=jc(o.result);else if(o instanceof La){for(const s of o.args)if(n=jc(s),n)break}else(o instanceof Qr||o instanceof ei)&&o.input instanceof Xi&&o.input.name==="zoom"&&(n=o);return n instanceof nr||o.eachChild(s=>{const h=jc(s);h instanceof nr?n=h:!n&&h?n=new nr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&h&&n!==h&&(n=new nr("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n}function Fs(o){if(o===!0||o===!1)return!0;if(!Array.isArray(o)||o.length===0)return!1;switch(o[0]){case"has":return o.length>=2&&o[1]!=="$id"&&o[1]!=="$type";case"in":return o.length>=3&&(typeof o[1]!="string"||Array.isArray(o[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return o.length!==3||Array.isArray(o[1])||Array.isArray(o[2]);case"any":case"all":for(const n of o.slice(1))if(!Fs(n)&&typeof n!="boolean")return!1;return!0;default:return!0}}const Vc={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function vi(o){if(o==null)return{filter:()=>!0,needGeometry:!1};Fs(o)||(o=Uc(o));const n=rs(o,Vc);if(n.result==="error")throw new Error(n.value.map(s=>`${s.key}: ${s.message}`).join(", "));return{filter:(s,h,g)=>n.value.evaluate(s,h,{},g),needGeometry:kh(o)}}function Fl(o,n){return o<n?-1:o>n?1:0}function kh(o){if(!Array.isArray(o))return!1;if(o[0]==="within"||o[0]==="distance")return!0;for(let n=1;n<o.length;n++)if(kh(o[n]))return!0;return!1}function Uc(o){if(!o)return!0;const n=o[0];return o.length<=1?n!=="any":n==="=="?Mh(o[1],o[2],"=="):n==="!="?Bs(Mh(o[1],o[2],"==")):n==="<"||n===">"||n==="<="||n===">="?Mh(o[1],o[2],n):n==="any"?(s=o.slice(1),["any"].concat(s.map(Uc))):n==="all"?["all"].concat(o.slice(1).map(Uc)):n==="none"?["all"].concat(o.slice(1).map(Uc).map(Bs)):n==="in"?Os(o[1],o.slice(2)):n==="!in"?Bs(Os(o[1],o.slice(2))):n==="has"?Ah(o[1]):n!=="!has"||Bs(Ah(o[1]));var s}function Mh(o,n,s){switch(o){case"$type":return[`filter-type-${s}`,n];case"$id":return[`filter-id-${s}`,n];default:return[`filter-${s}`,o,n]}}function Os(o,n){if(n.length===0)return!1;switch(o){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some(s=>typeof s!=typeof n[0])?["filter-in-large",o,["literal",n.sort(Fl)]]:["filter-in-small",o,["literal",n]]}}function Ah(o){switch(o){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",o]}}function Bs(o){return["!",o]}function zh(o){const n=typeof o;if(n==="number"||n==="boolean"||n==="string"||o==null)return JSON.stringify(o);if(Array.isArray(o)){let g="[";for(const _ of o)g+=`${zh(_)},`;return`${g}]`}const s=Object.keys(o).sort();let h="{";for(let g=0;g<s.length;g++)h+=`${JSON.stringify(s[g])}:${zh(o[s[g]])},`;return`${h}}`}function Rh(o){let n="";for(const s of Ar)n+=`/${zh(o[s])}`;return n}function fp(o){const n=o.value;return n?[new Xe(o.key,n,"constants have been deprecated as of v8")]:[]}function ln(o){return o instanceof Number||o instanceof String||o instanceof Boolean?o.valueOf():o}function ns(o){if(Array.isArray(o))return o.map(ns);if(o instanceof Object&&!(o instanceof Number||o instanceof String||o instanceof Boolean)){const n={};for(const s in o)n[s]=ns(o[s]);return n}return ln(o)}function zi(o){const n=o.key,s=o.value,h=o.valueSpec||{},g=o.objectElementValidators||{},_=o.style,x=o.styleSpec,b=o.validateSpec;let C=[];const P=Tr(s);if(P!=="object")return[new Xe(n,s,`object expected, ${P} found`)];for(const R in s){const D=R.split(".")[0],j=h[D]||h["*"];let W;if(g[D])W=g[D];else if(h[D])W=b;else if(g["*"])W=g["*"];else{if(!h["*"]){C.push(new Xe(n,s[R],`unknown property "${R}"`));continue}W=b}C=C.concat(W({key:(n&&`${n}.`)+R,value:s[R],valueSpec:j,style:_,styleSpec:x,object:s,objectKey:R,validateSpec:b},s))}for(const R in h)g[R]||h[R].required&&h[R].default===void 0&&s[R]===void 0&&C.push(new Xe(n,s,`missing required property "${R}"`));return C}function Hc(o){const n=o.value,s=o.valueSpec,h=o.style,g=o.styleSpec,_=o.key,x=o.arrayElementValidator||o.validateSpec;if(Tr(n)!=="array")return[new Xe(_,n,`array expected, ${Tr(n)} found`)];if(s.length&&n.length!==s.length)return[new Xe(_,n,`array length ${s.length} expected, length ${n.length} found`)];if(s["min-length"]&&n.length<s["min-length"])return[new Xe(_,n,`array length at least ${s["min-length"]} expected, length ${n.length} found`)];let b={type:s.value,values:s.values};g.$version<7&&(b.function=s.function),Tr(s.value)==="object"&&(b=s.value);let C=[];for(let P=0;P<n.length;P++)C=C.concat(x({array:n,arrayIndex:P,value:n[P],valueSpec:b,validateSpec:o.validateSpec,style:h,styleSpec:g,key:`${_}[${P}]`}));return C}function Ol(o){const n=o.key,s=o.value,h=o.valueSpec;let g=Tr(s);return g==="number"&&s!=s&&(g="NaN"),g!=="number"?[new Xe(n,s,`number expected, ${g} found`)]:"minimum"in h&&s<h.minimum?[new Xe(n,s,`${s} is less than the minimum value ${h.minimum}`)]:"maximum"in h&&s>h.maximum?[new Xe(n,s,`${s} is greater than the maximum value ${h.maximum}`)]:[]}function Lh(o){const n=o.valueSpec,s=ln(o.value.type);let h,g,_,x={};const b=s!=="categorical"&&o.value.property===void 0,C=!b,P=Tr(o.value.stops)==="array"&&Tr(o.value.stops[0])==="array"&&Tr(o.value.stops[0][0])==="object",R=zi({key:o.key,value:o.value,valueSpec:o.styleSpec.function,validateSpec:o.validateSpec,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{stops:function(W){if(s==="identity")return[new Xe(W.key,W.value,'identity function may not have a "stops" property')];let J=[];const ee=W.value;return J=J.concat(Hc({key:W.key,value:ee,valueSpec:W.valueSpec,validateSpec:W.validateSpec,style:W.style,styleSpec:W.styleSpec,arrayElementValidator:D})),Tr(ee)==="array"&&ee.length===0&&J.push(new Xe(W.key,ee,"array must have at least one stop")),J},default:function(W){return W.validateSpec({key:W.key,value:W.value,valueSpec:n,validateSpec:W.validateSpec,style:W.style,styleSpec:W.styleSpec})}}});return s==="identity"&&b&&R.push(new Xe(o.key,o.value,'missing required property "property"')),s==="identity"||o.value.stops||R.push(new Xe(o.key,o.value,'missing required property "stops"')),s==="exponential"&&o.valueSpec.expression&&!Ds(o.valueSpec)&&R.push(new Xe(o.key,o.value,"exponential functions not supported")),o.styleSpec.$version>=8&&(C&&!es(o.valueSpec)?R.push(new Xe(o.key,o.value,"property functions not supported")):b&&!Ch(o.valueSpec)&&R.push(new Xe(o.key,o.value,"zoom functions not supported"))),s!=="categorical"&&!P||o.value.property!==void 0||R.push(new Xe(o.key,o.value,'"property" property is required')),R;function D(W){let J=[];const ee=W.value,ce=W.key;if(Tr(ee)!=="array")return[new Xe(ce,ee,`array expected, ${Tr(ee)} found`)];if(ee.length!==2)return[new Xe(ce,ee,`array length 2 expected, length ${ee.length} found`)];if(P){if(Tr(ee[0])!=="object")return[new Xe(ce,ee,`object expected, ${Tr(ee[0])} found`)];if(ee[0].zoom===void 0)return[new Xe(ce,ee,"object stop key must have zoom")];if(ee[0].value===void 0)return[new Xe(ce,ee,"object stop key must have value")];if(_&&_>ln(ee[0].zoom))return[new Xe(ce,ee[0].zoom,"stop zoom values must appear in ascending order")];ln(ee[0].zoom)!==_&&(_=ln(ee[0].zoom),g=void 0,x={}),J=J.concat(zi({key:`${ce}[0]`,value:ee[0],valueSpec:{zoom:{}},validateSpec:W.validateSpec,style:W.style,styleSpec:W.styleSpec,objectElementValidators:{zoom:Ol,value:j}}))}else J=J.concat(j({key:`${ce}[0]`,value:ee[0],valueSpec:{},validateSpec:W.validateSpec,style:W.style,styleSpec:W.styleSpec},ee));return Dl(ns(ee[1]))?J.concat([new Xe(`${ce}[1]`,ee[1],"expressions are not allowed in function stops.")]):J.concat(W.validateSpec({key:`${ce}[1]`,value:ee[1],valueSpec:n,validateSpec:W.validateSpec,style:W.style,styleSpec:W.styleSpec}))}function j(W,J){const ee=Tr(W.value),ce=ln(W.value),pe=W.value!==null?W.value:J;if(h){if(ee!==h)return[new Xe(W.key,pe,`${ee} stop domain type must match previous stop domain type ${h}`)]}else h=ee;if(ee!=="number"&&ee!=="string"&&ee!=="boolean")return[new Xe(W.key,pe,"stop domain value must be a number, string, or boolean")];if(ee!=="number"&&s!=="categorical"){let Ae=`number expected, ${ee} found`;return es(n)&&s===void 0&&(Ae+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Xe(W.key,pe,Ae)]}return s!=="categorical"||ee!=="number"||isFinite(ce)&&Math.floor(ce)===ce?s!=="categorical"&&ee==="number"&&g!==void 0&&ce<g?[new Xe(W.key,pe,"stop domain values must appear in ascending order")]:(g=ce,s==="categorical"&&ce in x?[new Xe(W.key,pe,"stop domain values must be unique")]:(x[ce]=!0,[])):[new Xe(W.key,pe,`integer expected, found ${ce}`)]}}function is(o){const n=(o.expressionContext==="property"?dp:rs)(ns(o.value),o.valueSpec);if(n.result==="error")return n.value.map(h=>new Xe(`${o.key}${h.key}`,o.value,h.message));const s=n.value.expression||n.value._styleExpression.expression;if(o.expressionContext==="property"&&o.propertyKey==="text-font"&&!s.outputDefined())return[new Xe(o.key,o.value,`Invalid data expression for "${o.propertyKey}". Output values must be contained as literals within the expression.`)];if(o.expressionContext==="property"&&o.propertyType==="layout"&&!Rl(s))return[new Xe(o.key,o.value,'"feature-state" data expressions are not supported with layout properties.')];if(o.expressionContext==="filter"&&!Rl(s))return[new Xe(o.key,o.value,'"feature-state" data expressions are not supported with filters.')];if(o.expressionContext&&o.expressionContext.indexOf("cluster")===0){if(!Fc(s,["zoom","feature-state"]))return[new Xe(o.key,o.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(o.expressionContext==="cluster-initial"&&!Dc(s))return[new Xe(o.key,o.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Bl(o){const n=o.key,s=o.value,h=o.valueSpec,g=[];return Array.isArray(h.values)?h.values.indexOf(ln(s))===-1&&g.push(new Xe(n,s,`expected one of [${h.values.join(", ")}], ${JSON.stringify(s)} found`)):Object.keys(h.values).indexOf(ln(s))===-1&&g.push(new Xe(n,s,`expected one of [${Object.keys(h.values).join(", ")}], ${JSON.stringify(s)} found`)),g}function Nl(o){return Fs(ns(o.value))?is(_r({},o,{expressionContext:"filter",valueSpec:{value:"boolean"}})):$l(o)}function $l(o){const n=o.value,s=o.key;if(Tr(n)!=="array")return[new Xe(s,n,`array expected, ${Tr(n)} found`)];const h=o.styleSpec;let g,_=[];if(n.length<1)return[new Xe(s,n,"filter array must have at least 1 element")];switch(_=_.concat(Bl({key:`${s}[0]`,value:n[0],valueSpec:h.filter_operator,style:o.style,styleSpec:o.styleSpec})),ln(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&ln(n[1])==="$type"&&_.push(new Xe(s,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":n.length!==3&&_.push(new Xe(s,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":n.length>=2&&(g=Tr(n[1]),g!=="string"&&_.push(new Xe(`${s}[1]`,n[1],`string expected, ${g} found`)));for(let x=2;x<n.length;x++)g=Tr(n[x]),ln(n[1])==="$type"?_=_.concat(Bl({key:`${s}[${x}]`,value:n[x],valueSpec:h.geometry_type,style:o.style,styleSpec:o.styleSpec})):g!=="string"&&g!=="number"&&g!=="boolean"&&_.push(new Xe(`${s}[${x}]`,n[x],`string, number, or boolean expected, ${g} found`));break;case"any":case"all":case"none":for(let x=1;x<n.length;x++)_=_.concat($l({key:`${s}[${x}]`,value:n[x],style:o.style,styleSpec:o.styleSpec}));break;case"has":case"!has":g=Tr(n[1]),n.length!==2?_.push(new Xe(s,n,`filter array for "${n[0]}" operator must have 2 elements`)):g!=="string"&&_.push(new Xe(`${s}[1]`,n[1],`string expected, ${g} found`))}return _}function Dh(o,n){const s=o.key,h=o.validateSpec,g=o.style,_=o.styleSpec,x=o.value,b=o.objectKey,C=_[`${n}_${o.layerType}`];if(!C)return[];const P=b.match(/^(.*)-transition$/);if(n==="paint"&&P&&C[P[1]]&&C[P[1]].transition)return h({key:s,value:x,valueSpec:_.transition,style:g,styleSpec:_});const R=o.valueSpec||C[b];if(!R)return[new Xe(s,x,`unknown property "${b}"`)];let D;if(Tr(x)==="string"&&es(R)&&!R.tokens&&(D=/^{([^}]+)}$/.exec(x)))return[new Xe(s,x,`"${b}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(D[1])} }\`.`)];const j=[];return o.layerType==="symbol"&&(b==="text-field"&&g&&!g.glyphs&&j.push(new Xe(s,x,'use of "text-field" requires a style "glyphs" property')),b==="text-font"&&Ll(ns(x))&&ln(x.type)==="identity"&&j.push(new Xe(s,x,'"text-font" does not support identity functions'))),j.concat(h({key:o.key,value:x,valueSpec:R,style:g,styleSpec:_,expressionContext:"property",propertyType:n,propertyKey:b}))}function Fh(o){return Dh(o,"paint")}function Oh(o){return Dh(o,"layout")}function Bh(o){let n=[];const s=o.value,h=o.key,g=o.style,_=o.styleSpec;s.type||s.ref||n.push(new Xe(h,s,'either "type" or "ref" is required'));let x=ln(s.type);const b=ln(s.ref);if(s.id){const C=ln(s.id);for(let P=0;P<o.arrayIndex;P++){const R=g.layers[P];ln(R.id)===C&&n.push(new Xe(h,s.id,`duplicate layer id "${s.id}", previously used at line ${R.id.__line__}`))}}if("ref"in s){let C;["type","source","source-layer","filter","layout"].forEach(P=>{P in s&&n.push(new Xe(h,s[P],`"${P}" is prohibited for ref layers`))}),g.layers.forEach(P=>{ln(P.id)===b&&(C=P)}),C?C.ref?n.push(new Xe(h,s.ref,"ref cannot reference another ref layer")):x=ln(C.type):n.push(new Xe(h,s.ref,`ref layer "${b}" not found`))}else if(x!=="background")if(s.source){const C=g.sources&&g.sources[s.source],P=C&&ln(C.type);C?P==="vector"&&x==="raster"?n.push(new Xe(h,s.source,`layer "${s.id}" requires a raster source`)):P!=="raster-dem"&&x==="hillshade"?n.push(new Xe(h,s.source,`layer "${s.id}" requires a raster-dem source`)):P==="raster"&&x!=="raster"?n.push(new Xe(h,s.source,`layer "${s.id}" requires a vector source`)):P!=="vector"||s["source-layer"]?P==="raster-dem"&&x!=="hillshade"?n.push(new Xe(h,s.source,"raster-dem source can only be used with layer type 'hillshade'.")):x!=="line"||!s.paint||!s.paint["line-gradient"]||P==="geojson"&&C.lineMetrics||n.push(new Xe(h,s,`layer "${s.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):n.push(new Xe(h,s,`layer "${s.id}" must specify a "source-layer"`)):n.push(new Xe(h,s.source,`source "${s.source}" not found`))}else n.push(new Xe(h,s,'missing required property "source"'));return n=n.concat(zi({key:h,value:s,valueSpec:_.layer,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,objectElementValidators:{"*":()=>[],type:()=>o.validateSpec({key:`${h}.type`,value:s.type,valueSpec:_.layer.type,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,object:s,objectKey:"type"}),filter:Nl,layout:C=>zi({layer:s,key:C.key,value:C.value,style:C.style,styleSpec:C.styleSpec,validateSpec:C.validateSpec,objectElementValidators:{"*":P=>Oh(_r({layerType:x},P))}}),paint:C=>zi({layer:s,key:C.key,value:C.value,style:C.style,styleSpec:C.styleSpec,validateSpec:C.validateSpec,objectElementValidators:{"*":P=>Fh(_r({layerType:x},P))}})}})),n}function da(o){const n=o.value,s=o.key,h=Tr(n);return h!=="string"?[new Xe(s,n,`string expected, ${h} found`)]:[]}const Nh={promoteId:function({key:o,value:n}){if(Tr(n)==="string")return da({key:o,value:n});{const s=[];for(const h in n)s.push(...da({key:`${o}.${h}`,value:n[h]}));return s}}};function pp(o){const n=o.value,s=o.key,h=o.styleSpec,g=o.style,_=o.validateSpec;if(!n.type)return[new Xe(s,n,'"type" is required')];const x=ln(n.type);let b;switch(x){case"vector":case"raster":return b=zi({key:s,value:n,valueSpec:h[`source_${x.replace("-","_")}`],style:o.style,styleSpec:h,objectElementValidators:Nh,validateSpec:_}),b;case"raster-dem":return b=function(C){var P;const R=(P=C.sourceName)!==null&&P!==void 0?P:"",D=C.value,j=C.styleSpec,W=j.source_raster_dem,J=C.style;let ee=[];const ce=Tr(D);if(D===void 0)return ee;if(ce!=="object")return ee.push(new Xe("source_raster_dem",D,`object expected, ${ce} found`)),ee;const pe=ln(D.encoding)==="custom",Ae=["redFactor","greenFactor","blueFactor","baseShift"],ve=C.value.encoding?`"${C.value.encoding}"`:"Default";for(const Ee in D)!pe&&Ae.includes(Ee)?ee.push(new Xe(Ee,D[Ee],`In "${R}": "${Ee}" is only valid when "encoding" is set to "custom". ${ve} encoding found`)):W[Ee]?ee=ee.concat(C.validateSpec({key:Ee,value:D[Ee],valueSpec:W[Ee],validateSpec:C.validateSpec,style:J,styleSpec:j})):ee.push(new Xe(Ee,D[Ee],`unknown property "${Ee}"`));return ee}({sourceName:s,value:n,style:o.style,styleSpec:h,validateSpec:_}),b;case"geojson":if(b=zi({key:s,value:n,valueSpec:h.source_geojson,style:g,styleSpec:h,validateSpec:_,objectElementValidators:Nh}),n.cluster)for(const C in n.clusterProperties){const[P,R]=n.clusterProperties[C],D=typeof P=="string"?[P,["accumulated"],["get",C]]:P;b.push(...is({key:`${s}.${C}.map`,value:R,validateSpec:_,expressionContext:"cluster-map"})),b.push(...is({key:`${s}.${C}.reduce`,value:D,validateSpec:_,expressionContext:"cluster-reduce"}))}return b;case"video":return zi({key:s,value:n,valueSpec:h.source_video,style:g,validateSpec:_,styleSpec:h});case"image":return zi({key:s,value:n,valueSpec:h.source_image,style:g,validateSpec:_,styleSpec:h});case"canvas":return[new Xe(s,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Bl({key:`${s}.type`,value:n.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:g,validateSpec:_,styleSpec:h})}}function $h(o){const n=o.value,s=o.styleSpec,h=s.light,g=o.style;let _=[];const x=Tr(n);if(n===void 0)return _;if(x!=="object")return _=_.concat([new Xe("light",n,`object expected, ${x} found`)]),_;for(const b in n){const C=b.match(/^(.*)-transition$/);_=_.concat(C&&h[C[1]]&&h[C[1]].transition?o.validateSpec({key:b,value:n[b],valueSpec:s.transition,validateSpec:o.validateSpec,style:g,styleSpec:s}):h[b]?o.validateSpec({key:b,value:n[b],valueSpec:h[b],validateSpec:o.validateSpec,style:g,styleSpec:s}):[new Xe(b,n[b],`unknown property "${b}"`)])}return _}function mp(o){const n=o.value,s=o.styleSpec,h=s.sky,g=o.style,_=Tr(n);if(n===void 0)return[];if(_!=="object")return[new Xe("sky",n,`object expected, ${_} found`)];let x=[];for(const b in n)x=x.concat(h[b]?o.validateSpec({key:b,value:n[b],valueSpec:h[b],style:g,styleSpec:s}):[new Xe(b,n[b],`unknown property "${b}"`)]);return x}function jh(o){const n=o.value,s=o.styleSpec,h=s.terrain,g=o.style;let _=[];const x=Tr(n);if(n===void 0)return _;if(x!=="object")return _=_.concat([new Xe("terrain",n,`object expected, ${x} found`)]),_;for(const b in n)_=_.concat(h[b]?o.validateSpec({key:b,value:n[b],valueSpec:h[b],validateSpec:o.validateSpec,style:g,styleSpec:s}):[new Xe(b,n[b],`unknown property "${b}"`)]);return _}function Vh(o){let n=[];const s=o.value,h=o.key;if(Array.isArray(s)){const g=[],_=[];for(const x in s)s[x].id&&g.includes(s[x].id)&&n.push(new Xe(h,s,`all the sprites' ids must be unique, but ${s[x].id} is duplicated`)),g.push(s[x].id),s[x].url&&_.includes(s[x].url)&&n.push(new Xe(h,s,`all the sprites' URLs must be unique, but ${s[x].url} is duplicated`)),_.push(s[x].url),n=n.concat(zi({key:`${h}[${x}]`,value:s[x],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:o.validateSpec}));return n}return da({key:h,value:s})}const Uh={"*":()=>[],array:Hc,boolean:function(o){const n=o.value,s=o.key,h=Tr(n);return h!=="boolean"?[new Xe(s,n,`boolean expected, ${h} found`)]:[]},number:Ol,color:function(o){const n=o.key,s=o.value,h=Tr(s);return h!=="string"?[new Xe(n,s,`color expected, ${h} found`)]:pr.parse(String(s))?[]:[new Xe(n,s,`color expected, "${s}" found`)]},constants:fp,enum:Bl,filter:Nl,function:Lh,layer:Bh,object:zi,source:pp,light:$h,sky:mp,terrain:jh,projection:function(o){const n=o.value,s=o.styleSpec,h=s.projection,g=o.style,_=Tr(n);if(n===void 0)return[];if(_!=="object")return[new Xe("projection",n,`object expected, ${_} found`)];let x=[];for(const b in n)x=x.concat(h[b]?o.validateSpec({key:b,value:n[b],valueSpec:h[b],style:g,styleSpec:s}):[new Xe(b,n[b],`unknown property "${b}"`)]);return x},string:da,formatted:function(o){return da(o).length===0?[]:is(o)},resolvedImage:function(o){return da(o).length===0?[]:is(o)},padding:function(o){const n=o.key,s=o.value;if(Tr(s)==="array"){if(s.length<1||s.length>4)return[new Xe(n,s,`padding requires 1 to 4 values; ${s.length} values found`)];const h={type:"number"};let g=[];for(let _=0;_<s.length;_++)g=g.concat(o.validateSpec({key:`${n}[${_}]`,value:s[_],validateSpec:o.validateSpec,valueSpec:h}));return g}return Ol({key:n,value:s,valueSpec:{}})},variableAnchorOffsetCollection:function(o){const n=o.key,s=o.value,h=Tr(s),g=o.styleSpec;if(h!=="array"||s.length<1||s.length%2!=0)return[new Xe(n,s,"variableAnchorOffsetCollection requires a non-empty array of even length")];let _=[];for(let x=0;x<s.length;x+=2)_=_.concat(Bl({key:`${n}[${x}]`,value:s[x],valueSpec:g.layout_symbol["text-anchor"]})),_=_.concat(Hc({key:`${n}[${x+1}]`,value:s[x+1],valueSpec:{length:2,value:"number"},validateSpec:o.validateSpec,style:o.style,styleSpec:g}));return _},sprite:Vh};function jl(o){const n=o.value,s=o.valueSpec,h=o.styleSpec;return o.validateSpec=jl,s.expression&&Ll(ln(n))?Lh(o):s.expression&&Dl(ns(n))?is(o):s.type&&Uh[s.type]?Uh[s.type](o):zi(_r({},o,{valueSpec:s.type?h[s.type]:s}))}function gp(o){const n=o.value,s=o.key,h=da(o);return h.length||(n.indexOf("{fontstack}")===-1&&h.push(new Xe(s,n,'"glyphs" url must include a "{fontstack}" token')),n.indexOf("{range}")===-1&&h.push(new Xe(s,n,'"glyphs" url must include a "{range}" token'))),h}function co(o,n=Te){let s=[];return s=s.concat(jl({key:"",value:o,valueSpec:n.$root,styleSpec:n,style:o,validateSpec:jl,objectElementValidators:{glyphs:gp,"*":()=>[]}})),o.constants&&(s=s.concat(fp({key:"constants",value:o.constants,style:o,styleSpec:n,validateSpec:jl}))),Hh(s)}function Co(o){return function(n){return o({...n,validateSpec:jl})}}function Hh(o){return[].concat(o).sort((n,s)=>n.line-s.line)}function Eo(o){return function(...n){return Hh(o.apply(this,n))}}co.source=Eo(Co(pp)),co.sprite=Eo(Co(Vh)),co.glyphs=Eo(Co(gp)),co.light=Eo(Co($h)),co.sky=Eo(Co(mp)),co.terrain=Eo(Co(jh)),co.layer=Eo(Co(Bh)),co.filter=Eo(Co(Nl)),co.paintProperty=Eo(Co(Fh)),co.layoutProperty=Eo(Co(Oh));const fa=co,Fy=fa.light,qh=fa.sky,Oy=fa.paintProperty,By=fa.layoutProperty;function Wh(o,n){let s=!1;if(n&&n.length)for(const h of n)o.fire(new sr(new Error(h.message))),s=!0;return s}class Ns{constructor(n,s,h){const g=this.cells=[];if(n instanceof ArrayBuffer){this.arrayBuffer=n;const x=new Int32Array(this.arrayBuffer);n=x[0],this.d=(s=x[1])+2*(h=x[2]);for(let C=0;C<this.d*this.d;C++){const P=x[3+C],R=x[3+C+1];g.push(P===R?null:x.subarray(P,R))}const b=x[3+g.length+1];this.keys=x.subarray(x[3+g.length],b),this.bboxes=x.subarray(b),this.insert=this._insertReadonly}else{this.d=s+2*h;for(let x=0;x<this.d*this.d;x++)g.push([]);this.keys=[],this.bboxes=[]}this.n=s,this.extent=n,this.padding=h,this.scale=s/n,this.uid=0;const _=h/s*n;this.min=-_,this.max=n+_}insert(n,s,h,g,_){this._forEachCell(s,h,g,_,this._insertCell,this.uid++,void 0,void 0),this.keys.push(n),this.bboxes.push(s),this.bboxes.push(h),this.bboxes.push(g),this.bboxes.push(_)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(n,s,h,g,_,x){this.cells[_].push(x)}query(n,s,h,g,_){const x=this.min,b=this.max;if(n<=x&&s<=x&&b<=h&&b<=g&&!_)return Array.prototype.slice.call(this.keys);{const C=[];return this._forEachCell(n,s,h,g,this._queryCell,C,{},_),C}}_queryCell(n,s,h,g,_,x,b,C){const P=this.cells[_];if(P!==null){const R=this.keys,D=this.bboxes;for(let j=0;j<P.length;j++){const W=P[j];if(b[W]===void 0){const J=4*W;(C?C(D[J+0],D[J+1],D[J+2],D[J+3]):n<=D[J+2]&&s<=D[J+3]&&h>=D[J+0]&&g>=D[J+1])?(b[W]=!0,x.push(R[W])):b[W]=!1}}}}_forEachCell(n,s,h,g,_,x,b,C){const P=this._convertToCellCoord(n),R=this._convertToCellCoord(s),D=this._convertToCellCoord(h),j=this._convertToCellCoord(g);for(let W=P;W<=D;W++)for(let J=R;J<=j;J++){const ee=this.d*J+W;if((!C||C(this._convertFromCellCoord(W),this._convertFromCellCoord(J),this._convertFromCellCoord(W+1),this._convertFromCellCoord(J+1)))&&_.call(this,n,s,h,g,ee,x,b,C))return}}_convertFromCellCoord(n){return(n-this.padding)/this.scale}_convertToCellCoord(n){return Math.max(0,Math.min(this.d-1,Math.floor(n*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const n=this.cells,s=3+this.cells.length+1+1;let h=0;for(let x=0;x<this.cells.length;x++)h+=this.cells[x].length;const g=new Int32Array(s+h+this.keys.length+this.bboxes.length);g[0]=this.extent,g[1]=this.n,g[2]=this.padding;let _=s;for(let x=0;x<n.length;x++){const b=n[x];g[3+x]=_,g.set(b,_),_+=b.length}return g[3+n.length]=_,g.set(this.keys,_),_+=this.keys.length,g[3+n.length+1]=_,g.set(this.bboxes,_),_+=this.bboxes.length,g.buffer}static serialize(n,s){const h=n.toArrayBuffer();return s&&s.push(h),{buffer:h}}static deserialize(n){return new Ns(n.buffer)}}const Zo={};function _t(o,n,s={}){if(Zo[o])throw new Error(`${o} is already registered.`);Object.defineProperty(n,"_classRegistryKey",{value:o,writeable:!1}),Zo[o]={klass:n,omit:s.omit||[],shallow:s.shallow||[]}}_t("Object",Object),_t("TransferableGridIndex",Ns),_t("Color",pr),_t("Error",Error),_t("AJAXError",Lt),_t("ResolvedImage",jr),_t("StylePropertyFunction",$c),_t("StyleExpression",Nc,{omit:["_evaluator"]}),_t("ZoomDependentExpression",Ih),_t("ZoomConstantExpression",Ph),_t("CompoundExpression",Xi,{omit:["_evaluate"]});for(const o in Ya)Ya[o]._classRegistryKey||_t(`Expression_${o}`,Ya[o]);function yp(o){return o&&typeof ArrayBuffer<"u"&&(o instanceof ArrayBuffer||o.constructor&&o.constructor.name==="ArrayBuffer")}function Gh(o){return o.$name||o.constructor._classRegistryKey}function vp(o){return!function(n){if(n===null||typeof n!="object")return!1;const s=Gh(n);return!(!s||s==="Object")}(o)&&(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob||o instanceof Error||yp(o)||Se(o)||ArrayBuffer.isView(o)||o instanceof ImageData)}function Vl(o,n){if(vp(o))return(yp(o)||Se(o))&&n&&n.push(o),ArrayBuffer.isView(o)&&n&&n.push(o.buffer),o instanceof ImageData&&n&&n.push(o.data.buffer),o;if(Array.isArray(o)){const _=[];for(const x of o)_.push(Vl(x,n));return _}if(typeof o!="object")throw new Error("can't serialize object of type "+typeof o);const s=Gh(o);if(!s)throw new Error(`can't serialize object of unregistered class ${o.constructor.name}`);if(!Zo[s])throw new Error(`${s} is not registered.`);const{klass:h}=Zo[s],g=h.serialize?h.serialize(o,n):{};if(h.serialize){if(n&&g===n[n.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const _ in o){if(!o.hasOwnProperty(_)||Zo[s].omit.indexOf(_)>=0)continue;const x=o[_];g[_]=Zo[s].shallow.indexOf(_)>=0?x:Vl(x,n)}o instanceof Error&&(g.message=o.message)}if(g.$name)throw new Error("$name property is reserved for worker serialization logic.");return s!=="Object"&&(g.$name=s),g}function Ko(o){if(vp(o))return o;if(Array.isArray(o))return o.map(Ko);if(typeof o!="object")throw new Error("can't deserialize object of type "+typeof o);const n=Gh(o)||"Object";if(!Zo[n])throw new Error(`can't deserialize unregistered class ${n}`);const{klass:s}=Zo[n];if(!s)throw new Error(`can't deserialize unregistered class ${n}`);if(s.deserialize)return s.deserialize(o);const h=Object.create(s.prototype);for(const g of Object.keys(o)){if(g==="$name")continue;const _=o[g];h[g]=Zo[n].shallow.indexOf(g)>=0?_:Ko(_)}return h}class _p{constructor(){this.first=!0}update(n,s){const h=Math.floor(n);return this.first?(this.first=!1,this.lastIntegerZoom=h,this.lastIntegerZoomTime=0,this.lastZoom=n,this.lastFloorZoom=h,!0):(this.lastFloorZoom>h?(this.lastIntegerZoom=h+1,this.lastIntegerZoomTime=s):this.lastFloorZoom<h&&(this.lastIntegerZoom=h,this.lastIntegerZoomTime=s),n!==this.lastZoom&&(this.lastZoom=n,this.lastFloorZoom=h,!0))}}const ut={"Latin-1 Supplement":o=>o>=128&&o<=255,Arabic:o=>o>=1536&&o<=1791,"Arabic Supplement":o=>o>=1872&&o<=1919,"Arabic Extended-A":o=>o>=2208&&o<=2303,"Hangul Jamo":o=>o>=4352&&o<=4607,"Unified Canadian Aboriginal Syllabics":o=>o>=5120&&o<=5759,Khmer:o=>o>=6016&&o<=6143,"Unified Canadian Aboriginal Syllabics Extended":o=>o>=6320&&o<=6399,"General Punctuation":o=>o>=8192&&o<=8303,"Letterlike Symbols":o=>o>=8448&&o<=8527,"Number Forms":o=>o>=8528&&o<=8591,"Miscellaneous Technical":o=>o>=8960&&o<=9215,"Control Pictures":o=>o>=9216&&o<=9279,"Optical Character Recognition":o=>o>=9280&&o<=9311,"Enclosed Alphanumerics":o=>o>=9312&&o<=9471,"Geometric Shapes":o=>o>=9632&&o<=9727,"Miscellaneous Symbols":o=>o>=9728&&o<=9983,"Miscellaneous Symbols and Arrows":o=>o>=11008&&o<=11263,"CJK Radicals Supplement":o=>o>=11904&&o<=12031,"Kangxi Radicals":o=>o>=12032&&o<=12255,"Ideographic Description Characters":o=>o>=12272&&o<=12287,"CJK Symbols and Punctuation":o=>o>=12288&&o<=12351,Hiragana:o=>o>=12352&&o<=12447,Katakana:o=>o>=12448&&o<=12543,Bopomofo:o=>o>=12544&&o<=12591,"Hangul Compatibility Jamo":o=>o>=12592&&o<=12687,Kanbun:o=>o>=12688&&o<=12703,"Bopomofo Extended":o=>o>=12704&&o<=12735,"CJK Strokes":o=>o>=12736&&o<=12783,"Katakana Phonetic Extensions":o=>o>=12784&&o<=12799,"Enclosed CJK Letters and Months":o=>o>=12800&&o<=13055,"CJK Compatibility":o=>o>=13056&&o<=13311,"CJK Unified Ideographs Extension A":o=>o>=13312&&o<=19903,"Yijing Hexagram Symbols":o=>o>=19904&&o<=19967,"CJK Unified Ideographs":o=>o>=19968&&o<=40959,"Yi Syllables":o=>o>=40960&&o<=42127,"Yi Radicals":o=>o>=42128&&o<=42191,"Hangul Jamo Extended-A":o=>o>=43360&&o<=43391,"Hangul Syllables":o=>o>=44032&&o<=55215,"Hangul Jamo Extended-B":o=>o>=55216&&o<=55295,"Private Use Area":o=>o>=57344&&o<=63743,"CJK Compatibility Ideographs":o=>o>=63744&&o<=64255,"Arabic Presentation Forms-A":o=>o>=64336&&o<=65023,"Vertical Forms":o=>o>=65040&&o<=65055,"CJK Compatibility Forms":o=>o>=65072&&o<=65103,"Small Form Variants":o=>o>=65104&&o<=65135,"Arabic Presentation Forms-B":o=>o>=65136&&o<=65279,"Halfwidth and Fullwidth Forms":o=>o>=65280&&o<=65519};function Zh(o){for(const n of o)if(Kh(n.charCodeAt(0)))return!0;return!1}function Ny(o){for(const n of o)if(!xp(n.charCodeAt(0)))return!1;return!0}function xp(o){return!(ut.Arabic(o)||ut["Arabic Supplement"](o)||ut["Arabic Extended-A"](o)||ut["Arabic Presentation Forms-A"](o)||ut["Arabic Presentation Forms-B"](o))}function Kh(o){return!(o!==746&&o!==747&&(o<4352||!(ut["Bopomofo Extended"](o)||ut.Bopomofo(o)||ut["CJK Compatibility Forms"](o)&&!(o>=65097&&o<=65103)||ut["CJK Compatibility Ideographs"](o)||ut["CJK Compatibility"](o)||ut["CJK Radicals Supplement"](o)||ut["CJK Strokes"](o)||!(!ut["CJK Symbols and Punctuation"](o)||o>=12296&&o<=12305||o>=12308&&o<=12319||o===12336)||ut["CJK Unified Ideographs Extension A"](o)||ut["CJK Unified Ideographs"](o)||ut["Enclosed CJK Letters and Months"](o)||ut["Hangul Compatibility Jamo"](o)||ut["Hangul Jamo Extended-A"](o)||ut["Hangul Jamo Extended-B"](o)||ut["Hangul Jamo"](o)||ut["Hangul Syllables"](o)||ut.Hiragana(o)||ut["Ideographic Description Characters"](o)||ut.Kanbun(o)||ut["Kangxi Radicals"](o)||ut["Katakana Phonetic Extensions"](o)||ut.Katakana(o)&&o!==12540||!(!ut["Halfwidth and Fullwidth Forms"](o)||o===65288||o===65289||o===65293||o>=65306&&o<=65310||o===65339||o===65341||o===65343||o>=65371&&o<=65503||o===65507||o>=65512&&o<=65519)||!(!ut["Small Form Variants"](o)||o>=65112&&o<=65118||o>=65123&&o<=65126)||ut["Unified Canadian Aboriginal Syllabics"](o)||ut["Unified Canadian Aboriginal Syllabics Extended"](o)||ut["Vertical Forms"](o)||ut["Yijing Hexagram Symbols"](o)||ut["Yi Syllables"](o)||ut["Yi Radicals"](o))))}function bp(o){return!(Kh(o)||function(n){return!!(ut["Latin-1 Supplement"](n)&&(n===167||n===169||n===174||n===177||n===188||n===189||n===190||n===215||n===247)||ut["General Punctuation"](n)&&(n===8214||n===8224||n===8225||n===8240||n===8241||n===8251||n===8252||n===8258||n===8263||n===8264||n===8265||n===8273)||ut["Letterlike Symbols"](n)||ut["Number Forms"](n)||ut["Miscellaneous Technical"](n)&&(n>=8960&&n<=8967||n>=8972&&n<=8991||n>=8996&&n<=9e3||n===9003||n>=9085&&n<=9114||n>=9150&&n<=9165||n===9167||n>=9169&&n<=9179||n>=9186&&n<=9215)||ut["Control Pictures"](n)&&n!==9251||ut["Optical Character Recognition"](n)||ut["Enclosed Alphanumerics"](n)||ut["Geometric Shapes"](n)||ut["Miscellaneous Symbols"](n)&&!(n>=9754&&n<=9759)||ut["Miscellaneous Symbols and Arrows"](n)&&(n>=11026&&n<=11055||n>=11088&&n<=11097||n>=11192&&n<=11243)||ut["CJK Symbols and Punctuation"](n)||ut.Katakana(n)||ut["Private Use Area"](n)||ut["CJK Compatibility Forms"](n)||ut["Small Form Variants"](n)||ut["Halfwidth and Fullwidth Forms"](n)||n===8734||n===8756||n===8757||n>=9984&&n<=10087||n>=10102&&n<=10131||n===65532||n===65533)}(o))}function Fa(o){return o>=1424&&o<=2303||ut["Arabic Presentation Forms-A"](o)||ut["Arabic Presentation Forms-B"](o)}function wp(o,n){return!(!n&&Fa(o)||o>=2304&&o<=3583||o>=3840&&o<=4255||ut.Khmer(o))}function Xh(o){for(const n of o)if(Fa(n.charCodeAt(0)))return!0;return!1}const Oa=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(o){this.pluginStatus=o.pluginStatus,this.pluginURL=o.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(o){this.applyArabicShaping=o.applyArabicShaping,this.processBidirectionalText=o.processBidirectionalText,this.processStyledBidirectionalText=o.processStyledBidirectionalText}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class tn{constructor(n,s){this.zoom=n,s?(this.now=s.now,this.fadeDuration=s.fadeDuration,this.zoomHistory=s.zoomHistory,this.transition=s.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new _p,this.transition={})}isSupportedScript(n){return function(s,h){for(const g of s)if(!wp(g.charCodeAt(0),h))return!1;return!0}(n,Oa.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const n=this.zoom,s=n-Math.floor(n),h=this.crossFadingFactor();return n>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:s+(1-s)*h}:{fromScale:.5,toScale:1,t:1-(1-h)*s}}}class qc{constructor(n,s){this.property=n,this.value=s,this.expression=function(h,g){if(Ll(h))return new $c(h,g);if(Dl(h)){const _=dp(h,g);if(_.result==="error")throw new Error(_.value.map(x=>`${x.key}: ${x.message}`).join(", "));return _.value}{let _=h;return g.type==="color"&&typeof h=="string"?_=pr.parse(h):g.type!=="padding"||typeof h!="number"&&!Array.isArray(h)?g.type==="variableAnchorOffsetCollection"&&Array.isArray(h)&&(_=$n.parse(h)):_=bn.parse(h),{kind:"constant",evaluate:()=>_}}}(s===void 0?n.specification.default:s,n.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(n,s,h){return this.property.possiblyEvaluate(this,n,s,h)}}class $s{constructor(n){this.property=n,this.value=new qc(n,void 0)}transitioned(n,s){return new Sp(this.property,this.value,s,ie({},n.transition,this.transition),n.now)}untransitioned(){return new Sp(this.property,this.value,null,{},0)}}class js{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitionablePropertyValues)}getValue(n){return ze(this._values[n].value.value)}setValue(n,s){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new $s(this._values[n].property)),this._values[n].value=new qc(this._values[n].property,s===null?void 0:ze(s))}getTransition(n){return ze(this._values[n].transition)}setTransition(n,s){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new $s(this._values[n].property)),this._values[n].transition=ze(s)||void 0}serialize(){const n={};for(const s of Object.keys(this._values)){const h=this.getValue(s);h!==void 0&&(n[s]=h);const g=this.getTransition(s);g!==void 0&&(n[`${s}-transition`]=g)}return n}transitioned(n,s){const h=new Jh(this._properties);for(const g of Object.keys(this._values))h._values[g]=this._values[g].transitioned(n,s._values[g]);return h}untransitioned(){const n=new Jh(this._properties);for(const s of Object.keys(this._values))n._values[s]=this._values[s].untransitioned();return n}}class Sp{constructor(n,s,h,g,_){this.property=n,this.value=s,this.begin=_+g.delay||0,this.end=this.begin+g.duration||0,n.specification.transition&&(g.delay||g.duration)&&(this.prior=h)}possiblyEvaluate(n,s,h){const g=n.now||0,_=this.value.possiblyEvaluate(n,s,h),x=this.prior;if(x){if(g>this.end)return this.prior=null,_;if(this.value.isDataDriven())return this.prior=null,_;if(g<this.begin)return x.possiblyEvaluate(n,s,h);{const b=(g-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(n,s,h),_,function(C){if(C<=0)return 0;if(C>=1)return 1;const P=C*C,R=P*C;return 4*(C<.5?R:3*(C-P)+R-.75)}(b))}}return _}}class Jh{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitioningPropertyValues)}possiblyEvaluate(n,s,h){const g=new Wc(this._properties);for(const _ of Object.keys(this._values))g._values[_]=this._values[_].possiblyEvaluate(n,s,h);return g}hasTransition(){for(const n of Object.keys(this._values))if(this._values[n].prior)return!0;return!1}}class Ul{constructor(n){this._properties=n,this._values=Object.create(n.defaultPropertyValues)}hasValue(n){return this._values[n].value!==void 0}getValue(n){return ze(this._values[n].value)}setValue(n,s){this._values[n]=new qc(this._values[n].property,s===null?void 0:ze(s))}serialize(){const n={};for(const s of Object.keys(this._values)){const h=this.getValue(s);h!==void 0&&(n[s]=h)}return n}possiblyEvaluate(n,s,h){const g=new Wc(this._properties);for(const _ of Object.keys(this._values))g._values[_]=this._values[_].possiblyEvaluate(n,s,h);return g}}class Xo{constructor(n,s,h){this.property=n,this.value=s,this.parameters=h}isConstant(){return this.value.kind==="constant"}constantOr(n){return this.value.kind==="constant"?this.value.value:n}evaluate(n,s,h,g){return this.property.evaluate(this.value,this.parameters,n,s,h,g)}}class Wc{constructor(n){this._properties=n,this._values=Object.create(n.defaultPossiblyEvaluatedValues)}get(n){return this._values[n]}}class It{constructor(n){this.specification=n}possiblyEvaluate(n,s){if(n.isDataDriven())throw new Error("Value should not be data driven");return n.expression.evaluate(s)}interpolate(n,s,h){const g=Qn[this.specification.type];return g?g(n,s,h):n}}class Bt{constructor(n,s){this.specification=n,this.overrides=s}possiblyEvaluate(n,s,h,g){return new Xo(this,n.expression.kind==="constant"||n.expression.kind==="camera"?{kind:"constant",value:n.expression.evaluate(s,null,{},h,g)}:n.expression,s)}interpolate(n,s,h){if(n.value.kind!=="constant"||s.value.kind!=="constant")return n;if(n.value.value===void 0||s.value.value===void 0)return new Xo(this,{kind:"constant",value:void 0},n.parameters);const g=Qn[this.specification.type];if(g){const _=g(n.value.value,s.value.value,h);return new Xo(this,{kind:"constant",value:_},n.parameters)}return n}evaluate(n,s,h,g,_,x){return n.kind==="constant"?n.value:n.evaluate(s,h,g,_,x)}}class y extends Bt{possiblyEvaluate(n,s,h,g){if(n.value===void 0)return new Xo(this,{kind:"constant",value:void 0},s);if(n.expression.kind==="constant"){const _=n.expression.evaluate(s,null,{},h,g),x=n.property.specification.type==="resolvedImage"&&typeof _!="string"?_.name:_,b=this._calculate(x,x,x,s);return new Xo(this,{kind:"constant",value:b},s)}if(n.expression.kind==="camera"){const _=this._calculate(n.expression.evaluate({zoom:s.zoom-1}),n.expression.evaluate({zoom:s.zoom}),n.expression.evaluate({zoom:s.zoom+1}),s);return new Xo(this,{kind:"constant",value:_},s)}return new Xo(this,n.expression,s)}evaluate(n,s,h,g,_,x){if(n.kind==="source"){const b=n.evaluate(s,h,g,_,x);return this._calculate(b,b,b,s)}return n.kind==="composite"?this._calculate(n.evaluate({zoom:Math.floor(s.zoom)-1},h,g),n.evaluate({zoom:Math.floor(s.zoom)},h,g),n.evaluate({zoom:Math.floor(s.zoom)+1},h,g),s):n.value}_calculate(n,s,h,g){return g.zoom>g.zoomHistory.lastIntegerZoom?{from:n,to:s}:{from:h,to:s}}interpolate(n){return n}}class i{constructor(n){this.specification=n}possiblyEvaluate(n,s,h,g){if(n.value!==void 0){if(n.expression.kind==="constant"){const _=n.expression.evaluate(s,null,{},h,g);return this._calculate(_,_,_,s)}return this._calculate(n.expression.evaluate(new tn(Math.floor(s.zoom-1),s)),n.expression.evaluate(new tn(Math.floor(s.zoom),s)),n.expression.evaluate(new tn(Math.floor(s.zoom+1),s)),s)}}_calculate(n,s,h,g){return g.zoom>g.zoomHistory.lastIntegerZoom?{from:n,to:s}:{from:h,to:s}}interpolate(n){return n}}class c{constructor(n){this.specification=n}possiblyEvaluate(n,s,h,g){return!!n.expression.evaluate(s,null,{},h,g)}interpolate(){return!1}}class p{constructor(n){this.properties=n,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const s in n){const h=n[s];h.specification.overridable&&this.overridableProperties.push(s);const g=this.defaultPropertyValues[s]=new qc(h,void 0),_=this.defaultTransitionablePropertyValues[s]=new $s(h);this.defaultTransitioningPropertyValues[s]=_.untransitioned(),this.defaultPossiblyEvaluatedValues[s]=g.possiblyEvaluate({})}}}_t("DataDrivenProperty",Bt),_t("DataConstantProperty",It),_t("CrossFadedDataDrivenProperty",y),_t("CrossFadedProperty",i),_t("ColorRampProperty",c);const m="-transition";class v extends Br{constructor(n,s){if(super(),this.id=n.id,this.type=n.type,this._featureFilter={filter:()=>!0,needGeometry:!1},n.type!=="custom"&&(this.metadata=n.metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,n.type!=="background"&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter),s.layout&&(this._unevaluatedLayout=new Ul(s.layout)),s.paint)){this._transitionablePaint=new js(s.paint);for(const h in n.paint)this.setPaintProperty(h,n.paint[h],{validate:!1});for(const h in n.layout)this.setLayoutProperty(h,n.layout[h],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Wc(s.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(n){return n==="visibility"?this.visibility:this._unevaluatedLayout.getValue(n)}setLayoutProperty(n,s,h={}){s!=null&&this._validate(By,`layers.${this.id}.layout.${n}`,n,s,h)||(n!=="visibility"?this._unevaluatedLayout.setValue(n,s):this.visibility=s)}getPaintProperty(n){return n.endsWith(m)?this._transitionablePaint.getTransition(n.slice(0,-11)):this._transitionablePaint.getValue(n)}setPaintProperty(n,s,h={}){if(s!=null&&this._validate(Oy,`layers.${this.id}.paint.${n}`,n,s,h))return!1;if(n.endsWith(m))return this._transitionablePaint.setTransition(n.slice(0,-11),s||void 0),!1;{const g=this._transitionablePaint._values[n],_=g.property.specification["property-type"]==="cross-faded-data-driven",x=g.value.isDataDriven(),b=g.value;this._transitionablePaint.setValue(n,s),this._handleSpecialPaintPropertyUpdate(n);const C=this._transitionablePaint._values[n].value;return C.isDataDriven()||x||_||this._handleOverridablePaintPropertyUpdate(n,b,C)}}_handleSpecialPaintPropertyUpdate(n){}_handleOverridablePaintPropertyUpdate(n,s,h){return!1}isHidden(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||this.visibility==="none"}updateTransitions(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(n,s){n.getCrossfadeParameters&&(this._crossfadeParameters=n.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,s)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,s)}serialize(){const n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),Pe(n,(s,h)=>!(s===void 0||h==="layout"&&!Object.keys(s).length||h==="paint"&&!Object.keys(s).length))}_validate(n,s,h,g,_={}){return(!_||_.validate!==!1)&&Wh(this,n.call(fa,{key:s,layerType:this.type,objectKey:h,value:g,styleSpec:Te,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const n in this.paint._values){const s=this.paint.get(n);if(s instanceof Xo&&es(s.property.specification)&&(s.value.kind==="source"||s.value.kind==="composite")&&s.value.isStateDependent)return!0}return!1}}const w={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class E{constructor(n,s){this._structArray=n,this._pos1=s*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class k{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(n,s){return n._trim(),s&&(n.isTransferred=!0,s.push(n.arrayBuffer)),{length:n.length,arrayBuffer:n.arrayBuffer}}static deserialize(n){const s=Object.create(this.prototype);return s.arrayBuffer=n.arrayBuffer,s.length=n.length,s.capacity=n.arrayBuffer.byteLength/s.bytesPerElement,s._refreshViews(),s}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(n){this.reserve(n),this.length=n}reserve(n){if(n>this.capacity){this.capacity=Math.max(n,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const s=this.uint8;this._refreshViews(),s&&this.uint8.set(s)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function z(o,n=1){let s=0,h=0;return{members:o.map(g=>{const _=w[g.type].BYTES_PER_ELEMENT,x=s=B(s,Math.max(n,_)),b=g.components||1;return h=Math.max(h,_),s+=_*b,{name:g.name,type:g.type,components:b,offset:x}}),size:B(s,Math.max(h,n)),alignment:n}}function B(o,n){return Math.ceil(o/n)*n}class O extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s){const h=this.length;return this.resize(h+1),this.emplace(h,n,s)}emplace(n,s,h){const g=2*n;return this.int16[g+0]=s,this.int16[g+1]=h,n}}O.prototype.bytesPerElement=4,_t("StructArrayLayout2i4",O);class K extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h){const g=this.length;return this.resize(g+1),this.emplace(g,n,s,h)}emplace(n,s,h,g){const _=3*n;return this.int16[_+0]=s,this.int16[_+1]=h,this.int16[_+2]=g,n}}K.prototype.bytesPerElement=6,_t("StructArrayLayout3i6",K);class Q extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,g){const _=this.length;return this.resize(_+1),this.emplace(_,n,s,h,g)}emplace(n,s,h,g,_){const x=4*n;return this.int16[x+0]=s,this.int16[x+1]=h,this.int16[x+2]=g,this.int16[x+3]=_,n}}Q.prototype.bytesPerElement=8,_t("StructArrayLayout4i8",Q);class re extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,g,_,x){const b=this.length;return this.resize(b+1),this.emplace(b,n,s,h,g,_,x)}emplace(n,s,h,g,_,x,b){const C=6*n;return this.int16[C+0]=s,this.int16[C+1]=h,this.int16[C+2]=g,this.int16[C+3]=_,this.int16[C+4]=x,this.int16[C+5]=b,n}}re.prototype.bytesPerElement=12,_t("StructArrayLayout2i4i12",re);class he extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,g,_,x){const b=this.length;return this.resize(b+1),this.emplace(b,n,s,h,g,_,x)}emplace(n,s,h,g,_,x,b){const C=4*n,P=8*n;return this.int16[C+0]=s,this.int16[C+1]=h,this.uint8[P+4]=g,this.uint8[P+5]=_,this.uint8[P+6]=x,this.uint8[P+7]=b,n}}he.prototype.bytesPerElement=8,_t("StructArrayLayout2i4ub8",he);class le extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s){const h=this.length;return this.resize(h+1),this.emplace(h,n,s)}emplace(n,s,h){const g=2*n;return this.float32[g+0]=s,this.float32[g+1]=h,n}}le.prototype.bytesPerElement=8,_t("StructArrayLayout2f8",le);class de extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h,g,_,x,b,C,P,R){const D=this.length;return this.resize(D+1),this.emplace(D,n,s,h,g,_,x,b,C,P,R)}emplace(n,s,h,g,_,x,b,C,P,R,D){const j=10*n;return this.uint16[j+0]=s,this.uint16[j+1]=h,this.uint16[j+2]=g,this.uint16[j+3]=_,this.uint16[j+4]=x,this.uint16[j+5]=b,this.uint16[j+6]=C,this.uint16[j+7]=P,this.uint16[j+8]=R,this.uint16[j+9]=D,n}}de.prototype.bytesPerElement=20,_t("StructArrayLayout10ui20",de);class ye extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h,g,_,x,b,C,P,R,D,j){const W=this.length;return this.resize(W+1),this.emplace(W,n,s,h,g,_,x,b,C,P,R,D,j)}emplace(n,s,h,g,_,x,b,C,P,R,D,j,W){const J=12*n;return this.int16[J+0]=s,this.int16[J+1]=h,this.int16[J+2]=g,this.int16[J+3]=_,this.uint16[J+4]=x,this.uint16[J+5]=b,this.uint16[J+6]=C,this.uint16[J+7]=P,this.int16[J+8]=R,this.int16[J+9]=D,this.int16[J+10]=j,this.int16[J+11]=W,n}}ye.prototype.bytesPerElement=24,_t("StructArrayLayout4i4ui4i24",ye);class ae extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h){const g=this.length;return this.resize(g+1),this.emplace(g,n,s,h)}emplace(n,s,h,g){const _=3*n;return this.float32[_+0]=s,this.float32[_+1]=h,this.float32[_+2]=g,n}}ae.prototype.bytesPerElement=12,_t("StructArrayLayout3f12",ae);class we extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.uint32[1*n+0]=s,n}}we.prototype.bytesPerElement=4,_t("StructArrayLayout1ul4",we);class Me extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h,g,_,x,b,C,P){const R=this.length;return this.resize(R+1),this.emplace(R,n,s,h,g,_,x,b,C,P)}emplace(n,s,h,g,_,x,b,C,P,R){const D=10*n,j=5*n;return this.int16[D+0]=s,this.int16[D+1]=h,this.int16[D+2]=g,this.int16[D+3]=_,this.int16[D+4]=x,this.int16[D+5]=b,this.uint32[j+3]=C,this.uint16[D+8]=P,this.uint16[D+9]=R,n}}Me.prototype.bytesPerElement=20,_t("StructArrayLayout6i1ul2ui20",Me);class Oe extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,g,_,x){const b=this.length;return this.resize(b+1),this.emplace(b,n,s,h,g,_,x)}emplace(n,s,h,g,_,x,b){const C=6*n;return this.int16[C+0]=s,this.int16[C+1]=h,this.int16[C+2]=g,this.int16[C+3]=_,this.int16[C+4]=x,this.int16[C+5]=b,n}}Oe.prototype.bytesPerElement=12,_t("StructArrayLayout2i2i2i12",Oe);class Ge extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,g,_){const x=this.length;return this.resize(x+1),this.emplace(x,n,s,h,g,_)}emplace(n,s,h,g,_,x){const b=4*n,C=8*n;return this.float32[b+0]=s,this.float32[b+1]=h,this.float32[b+2]=g,this.int16[C+6]=_,this.int16[C+7]=x,n}}Ge.prototype.bytesPerElement=16,_t("StructArrayLayout2f1f2i16",Ge);class et extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,g,_,x){const b=this.length;return this.resize(b+1),this.emplace(b,n,s,h,g,_,x)}emplace(n,s,h,g,_,x,b){const C=16*n,P=4*n,R=8*n;return this.uint8[C+0]=s,this.uint8[C+1]=h,this.float32[P+1]=g,this.float32[P+2]=_,this.int16[R+6]=x,this.int16[R+7]=b,n}}et.prototype.bytesPerElement=16,_t("StructArrayLayout2ub2f2i16",et);class dt extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h){const g=this.length;return this.resize(g+1),this.emplace(g,n,s,h)}emplace(n,s,h,g){const _=3*n;return this.uint16[_+0]=s,this.uint16[_+1]=h,this.uint16[_+2]=g,n}}dt.prototype.bytesPerElement=6,_t("StructArrayLayout3ui6",dt);class pt extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,g,_,x,b,C,P,R,D,j,W,J,ee,ce,pe){const Ae=this.length;return this.resize(Ae+1),this.emplace(Ae,n,s,h,g,_,x,b,C,P,R,D,j,W,J,ee,ce,pe)}emplace(n,s,h,g,_,x,b,C,P,R,D,j,W,J,ee,ce,pe,Ae){const ve=24*n,Ee=12*n,Ne=48*n;return this.int16[ve+0]=s,this.int16[ve+1]=h,this.uint16[ve+2]=g,this.uint16[ve+3]=_,this.uint32[Ee+2]=x,this.uint32[Ee+3]=b,this.uint32[Ee+4]=C,this.uint16[ve+10]=P,this.uint16[ve+11]=R,this.uint16[ve+12]=D,this.float32[Ee+7]=j,this.float32[Ee+8]=W,this.uint8[Ne+36]=J,this.uint8[Ne+37]=ee,this.uint8[Ne+38]=ce,this.uint32[Ee+10]=pe,this.int16[ve+22]=Ae,n}}pt.prototype.bytesPerElement=48,_t("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",pt);class tt extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,g,_,x,b,C,P,R,D,j,W,J,ee,ce,pe,Ae,ve,Ee,Ne,Je,ft,Ot,ct,at,Pt,xt){const yt=this.length;return this.resize(yt+1),this.emplace(yt,n,s,h,g,_,x,b,C,P,R,D,j,W,J,ee,ce,pe,Ae,ve,Ee,Ne,Je,ft,Ot,ct,at,Pt,xt)}emplace(n,s,h,g,_,x,b,C,P,R,D,j,W,J,ee,ce,pe,Ae,ve,Ee,Ne,Je,ft,Ot,ct,at,Pt,xt,yt){const He=32*n,Mt=16*n;return this.int16[He+0]=s,this.int16[He+1]=h,this.int16[He+2]=g,this.int16[He+3]=_,this.int16[He+4]=x,this.int16[He+5]=b,this.int16[He+6]=C,this.int16[He+7]=P,this.uint16[He+8]=R,this.uint16[He+9]=D,this.uint16[He+10]=j,this.uint16[He+11]=W,this.uint16[He+12]=J,this.uint16[He+13]=ee,this.uint16[He+14]=ce,this.uint16[He+15]=pe,this.uint16[He+16]=Ae,this.uint16[He+17]=ve,this.uint16[He+18]=Ee,this.uint16[He+19]=Ne,this.uint16[He+20]=Je,this.uint16[He+21]=ft,this.uint16[He+22]=Ot,this.uint32[Mt+12]=ct,this.float32[Mt+13]=at,this.float32[Mt+14]=Pt,this.uint16[He+30]=xt,this.uint16[He+31]=yt,n}}tt.prototype.bytesPerElement=64,_t("StructArrayLayout8i15ui1ul2f2ui64",tt);class rt extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.float32[1*n+0]=s,n}}rt.prototype.bytesPerElement=4,_t("StructArrayLayout1f4",rt);class bt extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h){const g=this.length;return this.resize(g+1),this.emplace(g,n,s,h)}emplace(n,s,h,g){const _=3*n;return this.uint16[6*n+0]=s,this.float32[_+1]=h,this.float32[_+2]=g,n}}bt.prototype.bytesPerElement=12,_t("StructArrayLayout1ui2f12",bt);class Gt extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h){const g=this.length;return this.resize(g+1),this.emplace(g,n,s,h)}emplace(n,s,h,g){const _=4*n;return this.uint32[2*n+0]=s,this.uint16[_+2]=h,this.uint16[_+3]=g,n}}Gt.prototype.bytesPerElement=8,_t("StructArrayLayout1ul2ui8",Gt);class ot extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s){const h=this.length;return this.resize(h+1),this.emplace(h,n,s)}emplace(n,s,h){const g=2*n;return this.uint16[g+0]=s,this.uint16[g+1]=h,n}}ot.prototype.bytesPerElement=4,_t("StructArrayLayout2ui4",ot);class lt extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.uint16[1*n+0]=s,n}}lt.prototype.bytesPerElement=2,_t("StructArrayLayout1ui2",lt);class jt extends k{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,g){const _=this.length;return this.resize(_+1),this.emplace(_,n,s,h,g)}emplace(n,s,h,g,_){const x=4*n;return this.float32[x+0]=s,this.float32[x+1]=h,this.float32[x+2]=g,this.float32[x+3]=_,n}}jt.prototype.bytesPerElement=16,_t("StructArrayLayout4f16",jt);class cn extends E{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new A(this.anchorPointX,this.anchorPointY)}}cn.prototype.size=20;class er extends Me{get(n){return new cn(this,n)}}_t("CollisionBoxArray",er);class dr extends E{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(n){this._structArray.uint8[this._pos1+37]=n}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(n){this._structArray.uint8[this._pos1+38]=n}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(n){this._structArray.uint32[this._pos4+10]=n}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}dr.prototype.size=48;class un extends pt{get(n){return new dr(this,n)}}_t("PlacedSymbolArray",un);class ai extends E{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(n){this._structArray.uint32[this._pos4+12]=n}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}ai.prototype.size=64;class To extends tt{get(n){return new ai(this,n)}}_t("SymbolInstanceArray",To);class hn extends rt{getoffsetX(n){return this.float32[1*n+0]}}_t("GlyphOffsetArray",hn);class Ri extends K{getx(n){return this.int16[3*n+0]}gety(n){return this.int16[3*n+1]}gettileUnitDistanceFromAnchor(n){return this.int16[3*n+2]}}_t("SymbolLineVertexArray",Ri);class _i extends E{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}_i.prototype.size=12;class si extends bt{get(n){return new _i(this,n)}}_t("TextAnchorOffsetArray",si);class li extends E{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}li.prototype.size=8;class Po extends Gt{get(n){return new li(this,n)}}_t("FeatureIndexArray",Po);class os extends O{}class Gc extends O{}class Vs extends O{}class as extends re{}class Zc extends he{}class Yh extends le{}class ti extends de{}class Io extends ye{}class Ba extends ae{}class Us extends we{}class ci extends Oe{}class ui extends et{}class Gn extends dt{}class yn extends ot{}const Hs=z([{name:"a_pos",components:2,type:"Int16"}],4),{members:Qh}=Hs;class Vn{constructor(n=[]){this.segments=n}prepareSegment(n,s,h,g){let _=this.segments[this.segments.length-1];return n>Vn.MAX_VERTEX_ARRAY_LENGTH&&Ce(`Max vertices per segment is ${Vn.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${n}`),(!_||_.vertexLength+n>Vn.MAX_VERTEX_ARRAY_LENGTH||_.sortKey!==g)&&(_={vertexOffset:s.length,primitiveOffset:h.length,vertexLength:0,primitiveLength:0},g!==void 0&&(_.sortKey=g),this.segments.push(_)),_}get(){return this.segments}destroy(){for(const n of this.segments)for(const s in n.vaos)n.vaos[s].destroy()}static simpleSegment(n,s,h,g){return new Vn([{vertexOffset:n,primitiveOffset:s,vertexLength:h,primitiveLength:g,vaos:{},sortKey:0}])}}function Cp(o,n){return 256*(o=ne(Math.floor(o),0,255))+ne(Math.floor(n),0,255)}Vn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,_t("SegmentVector",Vn);const Kc=z([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Xc={exports:{}},Na={exports:{}};Na.exports=function(o,n){var s,h,g,_,x,b,C,P;for(h=o.length-(s=3&o.length),g=n,x=3432918353,b=461845907,P=0;P<h;)C=255&o.charCodeAt(P)|(255&o.charCodeAt(++P))<<8|(255&o.charCodeAt(++P))<<16|(255&o.charCodeAt(++P))<<24,++P,g=27492+(65535&(_=5*(65535&(g=(g^=C=(65535&(C=(C=(65535&C)*x+(((C>>>16)*x&65535)<<16)&4294967295)<<15|C>>>17))*b+(((C>>>16)*b&65535)<<16)&4294967295)<<13|g>>>19))+((5*(g>>>16)&65535)<<16)&4294967295))+((58964+(_>>>16)&65535)<<16);switch(C=0,s){case 3:C^=(255&o.charCodeAt(P+2))<<16;case 2:C^=(255&o.charCodeAt(P+1))<<8;case 1:g^=C=(65535&(C=(C=(65535&(C^=255&o.charCodeAt(P)))*x+(((C>>>16)*x&65535)<<16)&4294967295)<<15|C>>>17))*b+(((C>>>16)*b&65535)<<16)&4294967295}return g^=o.length,g=2246822507*(65535&(g^=g>>>16))+((2246822507*(g>>>16)&65535)<<16)&4294967295,g=3266489909*(65535&(g^=g>>>13))+((3266489909*(g>>>16)&65535)<<16)&4294967295,(g^=g>>>16)>>>0};var Ep=Na.exports,ed={exports:{}};ed.exports=function(o,n){for(var s,h=o.length,g=n^h,_=0;h>=4;)s=1540483477*(65535&(s=255&o.charCodeAt(_)|(255&o.charCodeAt(++_))<<8|(255&o.charCodeAt(++_))<<16|(255&o.charCodeAt(++_))<<24))+((1540483477*(s>>>16)&65535)<<16),g=1540483477*(65535&g)+((1540483477*(g>>>16)&65535)<<16)^(s=1540483477*(65535&(s^=s>>>24))+((1540483477*(s>>>16)&65535)<<16)),h-=4,++_;switch(h){case 3:g^=(255&o.charCodeAt(_+2))<<16;case 2:g^=(255&o.charCodeAt(_+1))<<8;case 1:g=1540483477*(65535&(g^=255&o.charCodeAt(_)))+((1540483477*(g>>>16)&65535)<<16)}return g=1540483477*(65535&(g^=g>>>13))+((1540483477*(g>>>16)&65535)<<16),(g^=g>>>15)>>>0};var td=Ep,rd=ed.exports;Xc.exports=td,Xc.exports.murmur3=td,Xc.exports.murmur2=rd;var Jc=S(Xc.exports);class qs{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(n,s,h,g){this.ids.push(jx(n)),this.positions.push(s,h,g)}getPositions(n){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const s=jx(n);let h=0,g=this.ids.length-1;for(;h<g;){const x=h+g>>1;this.ids[x]>=s?g=x:h=x+1}const _=[];for(;this.ids[h]===s;)_.push({index:this.positions[3*h],start:this.positions[3*h+1],end:this.positions[3*h+2]}),h++;return _}static serialize(n,s){const h=new Float64Array(n.ids),g=new Uint32Array(n.positions);return $y(h,g,0,h.length-1),s&&s.push(h.buffer,g.buffer),{ids:h,positions:g}}static deserialize(n){const s=new qs;return s.ids=n.ids,s.positions=n.positions,s.indexed=!0,s}}function jx(o){const n=+o;return!isNaN(n)&&n<=Number.MAX_SAFE_INTEGER?n:Jc(String(o))}function $y(o,n,s,h){for(;s<h;){const g=o[s+h>>1];let _=s-1,x=h+1;for(;;){do _++;while(o[_]<g);do x--;while(o[x]>g);if(_>=x)break;Tp(o,_,x),Tp(n,3*_,3*x),Tp(n,3*_+1,3*x+1),Tp(n,3*_+2,3*x+2)}x-s<h-x?($y(o,n,s,x),s=x+1):($y(o,n,x+1,h),h=x)}}function Tp(o,n,s){const h=o[n];o[n]=o[s],o[s]=h}_t("FeaturePositionMap",qs);class Hl{constructor(n,s){this.gl=n.gl,this.location=s}}class Pp extends Hl{constructor(n,s){super(n,s),this.current=0}set(n){this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))}}class Vx extends Hl{constructor(n,s){super(n,s),this.current=[0,0,0,0]}set(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3]))}}class Ux extends Hl{constructor(n,s){super(n,s),this.current=pr.transparent}set(n){n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a))}}const Mk=new Float32Array(16);function jy(o){return[Cp(255*o.r,255*o.g),Cp(255*o.b,255*o.a)]}class nd{constructor(n,s,h){this.value=n,this.uniformNames=s.map(g=>`u_${g}`),this.type=h}setUniform(n,s,h){n.set(h.constantOr(this.value))}getBinding(n,s,h){return this.type==="color"?new Ux(n,s):new Pp(n,s)}}class Yc{constructor(n,s){this.uniformNames=s.map(h=>`u_${h}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(n,s){this.pixelRatioFrom=s.pixelRatio,this.pixelRatioTo=n.pixelRatio,this.patternFrom=s.tlbr,this.patternTo=n.tlbr}setUniform(n,s,h,g){const _=g==="u_pattern_to"?this.patternTo:g==="u_pattern_from"?this.patternFrom:g==="u_pixel_ratio_to"?this.pixelRatioTo:g==="u_pixel_ratio_from"?this.pixelRatioFrom:null;_&&n.set(_)}getBinding(n,s,h){return h.substr(0,9)==="u_pattern"?new Vx(n,s):new Pp(n,s)}}class ss{constructor(n,s,h,g){this.expression=n,this.type=h,this.maxValue=0,this.paintVertexAttributes=s.map(_=>({name:`a_${_}`,type:"Float32",components:h==="color"?2:1,offset:0})),this.paintVertexArray=new g}populatePaintArray(n,s,h,g,_){const x=this.paintVertexArray.length,b=this.expression.evaluate(new tn(0),s,{},g,[],_);this.paintVertexArray.resize(n),this._setPaintValue(x,n,b)}updatePaintArray(n,s,h,g){const _=this.expression.evaluate({zoom:0},h,g);this._setPaintValue(n,s,_)}_setPaintValue(n,s,h){if(this.type==="color"){const g=jy(h);for(let _=n;_<s;_++)this.paintVertexArray.emplace(_,g[0],g[1])}else{for(let g=n;g<s;g++)this.paintVertexArray.emplace(g,h);this.maxValue=Math.max(this.maxValue,Math.abs(h))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class pa{constructor(n,s,h,g,_,x){this.expression=n,this.uniformNames=s.map(b=>`u_${b}_t`),this.type=h,this.useIntegerZoom=g,this.zoom=_,this.maxValue=0,this.paintVertexAttributes=s.map(b=>({name:`a_${b}`,type:"Float32",components:h==="color"?4:2,offset:0})),this.paintVertexArray=new x}populatePaintArray(n,s,h,g,_){const x=this.expression.evaluate(new tn(this.zoom),s,{},g,[],_),b=this.expression.evaluate(new tn(this.zoom+1),s,{},g,[],_),C=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValue(C,n,x,b)}updatePaintArray(n,s,h,g){const _=this.expression.evaluate({zoom:this.zoom},h,g),x=this.expression.evaluate({zoom:this.zoom+1},h,g);this._setPaintValue(n,s,_,x)}_setPaintValue(n,s,h,g){if(this.type==="color"){const _=jy(h),x=jy(g);for(let b=n;b<s;b++)this.paintVertexArray.emplace(b,_[0],_[1],x[0],x[1])}else{for(let _=n;_<s;_++)this.paintVertexArray.emplace(_,h,g);this.maxValue=Math.max(this.maxValue,Math.abs(h),Math.abs(g))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(n,s){const h=this.useIntegerZoom?Math.floor(s.zoom):s.zoom,g=ne(this.expression.interpolationFactor(h,this.zoom,this.zoom+1),0,1);n.set(g)}getBinding(n,s,h){return new Pp(n,s)}}class Ws{constructor(n,s,h,g,_,x){this.expression=n,this.type=s,this.useIntegerZoom=h,this.zoom=g,this.layerId=x,this.zoomInPaintVertexArray=new _,this.zoomOutPaintVertexArray=new _}populatePaintArray(n,s,h){const g=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(n),this.zoomOutPaintVertexArray.resize(n),this._setPaintValues(g,n,s.patterns&&s.patterns[this.layerId],h)}updatePaintArray(n,s,h,g,_){this._setPaintValues(n,s,h.patterns&&h.patterns[this.layerId],_)}_setPaintValues(n,s,h,g){if(!g||!h)return;const{min:_,mid:x,max:b}=h,C=g[_],P=g[x],R=g[b];if(C&&P&&R)for(let D=n;D<s;D++)this.zoomInPaintVertexArray.emplace(D,P.tl[0],P.tl[1],P.br[0],P.br[1],C.tl[0],C.tl[1],C.br[0],C.br[1],P.pixelRatio,C.pixelRatio),this.zoomOutPaintVertexArray.emplace(D,P.tl[0],P.tl[1],P.br[0],P.br[1],R.tl[0],R.tl[1],R.br[0],R.br[1],P.pixelRatio,R.pixelRatio)}upload(n){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=n.createVertexBuffer(this.zoomInPaintVertexArray,Kc.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=n.createVertexBuffer(this.zoomOutPaintVertexArray,Kc.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Hx{constructor(n,s,h){this.binders={},this._buffers=[];const g=[];for(const _ in n.paint._values){if(!h(_))continue;const x=n.paint.get(_);if(!(x instanceof Xo&&es(x.property.specification)))continue;const b=Ak(_,n.type),C=x.value,P=x.property.specification.type,R=x.property.useIntegerZoom,D=x.property.specification["property-type"],j=D==="cross-faded"||D==="cross-faded-data-driven";if(C.kind==="constant")this.binders[_]=j?new Yc(C.value,b):new nd(C.value,b,P),g.push(`/u_${_}`);else if(C.kind==="source"||j){const W=qx(_,P,"source");this.binders[_]=j?new Ws(C,P,R,s,W,n.id):new ss(C,b,P,W),g.push(`/a_${_}`)}else{const W=qx(_,P,"composite");this.binders[_]=new pa(C,b,P,R,s,W),g.push(`/z_${_}`)}}this.cacheKey=g.sort().join("")}getMaxValue(n){const s=this.binders[n];return s instanceof ss||s instanceof pa?s.maxValue:0}populatePaintArrays(n,s,h,g,_){for(const x in this.binders){const b=this.binders[x];(b instanceof ss||b instanceof pa||b instanceof Ws)&&b.populatePaintArray(n,s,h,g,_)}}setConstantPatternPositions(n,s){for(const h in this.binders){const g=this.binders[h];g instanceof Yc&&g.setConstantPatternPositions(n,s)}}updatePaintArrays(n,s,h,g,_){let x=!1;for(const b in n){const C=s.getPositions(b);for(const P of C){const R=h.feature(P.index);for(const D in this.binders){const j=this.binders[D];if((j instanceof ss||j instanceof pa||j instanceof Ws)&&j.expression.isStateDependent===!0){const W=g.paint.get(D);j.expression=W.value,j.updatePaintArray(P.start,P.end,R,n[b],_),x=!0}}}}return x}defines(){const n=[];for(const s in this.binders){const h=this.binders[s];(h instanceof nd||h instanceof Yc)&&n.push(...h.uniformNames.map(g=>`#define HAS_UNIFORM_${g}`))}return n}getBinderAttributes(){const n=[];for(const s in this.binders){const h=this.binders[s];if(h instanceof ss||h instanceof pa)for(let g=0;g<h.paintVertexAttributes.length;g++)n.push(h.paintVertexAttributes[g].name);else if(h instanceof Ws)for(let g=0;g<Kc.members.length;g++)n.push(Kc.members[g].name)}return n}getBinderUniforms(){const n=[];for(const s in this.binders){const h=this.binders[s];if(h instanceof nd||h instanceof Yc||h instanceof pa)for(const g of h.uniformNames)n.push(g)}return n}getPaintVertexBuffers(){return this._buffers}getUniforms(n,s){const h=[];for(const g in this.binders){const _=this.binders[g];if(_ instanceof nd||_ instanceof Yc||_ instanceof pa){for(const x of _.uniformNames)if(s[x]){const b=_.getBinding(n,s[x],x);h.push({name:x,property:g,binding:b})}}}return h}setUniforms(n,s,h,g){for(const{name:_,property:x,binding:b}of s)this.binders[x].setUniform(b,g,h.get(x),_)}updatePaintBuffers(n){this._buffers=[];for(const s in this.binders){const h=this.binders[s];if(n&&h instanceof Ws){const g=n.fromScale===2?h.zoomInPaintVertexBuffer:h.zoomOutPaintVertexBuffer;g&&this._buffers.push(g)}else(h instanceof ss||h instanceof pa)&&h.paintVertexBuffer&&this._buffers.push(h.paintVertexBuffer)}}upload(n){for(const s in this.binders){const h=this.binders[s];(h instanceof ss||h instanceof pa||h instanceof Ws)&&h.upload(n)}this.updatePaintBuffers()}destroy(){for(const n in this.binders){const s=this.binders[n];(s instanceof ss||s instanceof pa||s instanceof Ws)&&s.destroy()}}}class ql{constructor(n,s,h=()=>!0){this.programConfigurations={};for(const g of n)this.programConfigurations[g.id]=new Hx(g,s,h);this.needsUpload=!1,this._featureMap=new qs,this._bufferOffset=0}populatePaintArrays(n,s,h,g,_,x){for(const b in this.programConfigurations)this.programConfigurations[b].populatePaintArrays(n,s,g,_,x);s.id!==void 0&&this._featureMap.add(s.id,h,this._bufferOffset,n),this._bufferOffset=n,this.needsUpload=!0}updatePaintArrays(n,s,h,g){for(const _ of h)this.needsUpload=this.programConfigurations[_.id].updatePaintArrays(n,this._featureMap,s,_,g)||this.needsUpload}get(n){return this.programConfigurations[n]}upload(n){if(this.needsUpload){for(const s in this.programConfigurations)this.programConfigurations[s].upload(n);this.needsUpload=!1}}destroy(){for(const n in this.programConfigurations)this.programConfigurations[n].destroy()}}function Ak(o,n){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[o]||[o.replace(`${n}-`,"").replace(/-/g,"_")]}function qx(o,n,s){const h={color:{source:le,composite:jt},number:{source:rt,composite:le}},g=function(_){return{"line-pattern":{source:ti,composite:ti},"fill-pattern":{source:ti,composite:ti},"fill-extrusion-pattern":{source:ti,composite:ti}}[_]}(o);return g&&g[s]||h[n][s]}_t("ConstantBinder",nd),_t("CrossFadedConstantBinder",Yc),_t("SourceExpressionBinder",ss),_t("CrossFadedCompositeBinder",Ws),_t("CompositeExpressionBinder",pa),_t("ProgramConfiguration",Hx,{omit:["_buffers"]}),_t("ProgramConfigurationSet",ql);const On=8192,Vy=Math.pow(2,14)-1,Wx=-Vy-1;function Wl(o){const n=On/o.extent,s=o.loadGeometry();for(let h=0;h<s.length;h++){const g=s[h];for(let _=0;_<g.length;_++){const x=g[_],b=Math.round(x.x*n),C=Math.round(x.y*n);x.x=ne(b,Wx,Vy),x.y=ne(C,Wx,Vy),(b<x.x||b>x.x+1||C<x.y||C>x.y+1)&&Ce("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return s}function Gl(o,n){return{type:o.type,id:o.id,properties:o.properties,geometry:n?Wl(o):[]}}function Ip(o,n,s,h,g){o.emplaceBack(2*n+(h+1)/2,2*s+(g+1)/2)}class Uy{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new Gc,this.indexArray=new Gn,this.segments=new Vn,this.programConfigurations=new ql(n.layers,n.zoom),this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){const g=this.layers[0],_=[];let x=null,b=!1;g.type==="circle"&&(x=g.layout.get("circle-sort-key"),b=!x.isConstant());for(const{feature:C,id:P,index:R,sourceLayerIndex:D}of n){const j=this.layers[0]._featureFilter.needGeometry,W=Gl(C,j);if(!this.layers[0]._featureFilter.filter(new tn(this.zoom),W,h))continue;const J=b?x.evaluate(W,{},h):void 0,ee={id:P,properties:C.properties,type:C.type,sourceLayerIndex:D,index:R,geometry:j?W.geometry:Wl(C),patterns:{},sortKey:J};_.push(ee)}b&&_.sort((C,P)=>C.sortKey-P.sortKey);for(const C of _){const{geometry:P,index:R,sourceLayerIndex:D}=C,j=n[R].feature;this.addFeature(C,P,R,h),s.featureIndex.insert(j,P,R,D,this.index)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Qh),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,s,h,g){for(const _ of s)for(const x of _){const b=x.x,C=x.y;if(b<0||b>=On||C<0||C>=On)continue;const P=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,n.sortKey),R=P.vertexLength;Ip(this.layoutVertexArray,b,C,-1,-1),Ip(this.layoutVertexArray,b,C,1,-1),Ip(this.layoutVertexArray,b,C,1,1),Ip(this.layoutVertexArray,b,C,-1,1),this.indexArray.emplaceBack(R,R+1,R+2),this.indexArray.emplaceBack(R,R+3,R+2),P.vertexLength+=4,P.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,{},g)}}function Gx(o,n){for(let s=0;s<o.length;s++)if(Qc(n,o[s]))return!0;for(let s=0;s<n.length;s++)if(Qc(o,n[s]))return!0;return!!Hy(o,n)}function zk(o,n,s){return!!Qc(o,n)||!!qy(n,o,s)}function Zx(o,n){if(o.length===1)return Xx(n,o[0]);for(let s=0;s<n.length;s++){const h=n[s];for(let g=0;g<h.length;g++)if(Qc(o,h[g]))return!0}for(let s=0;s<o.length;s++)if(Xx(n,o[s]))return!0;for(let s=0;s<n.length;s++)if(Hy(o,n[s]))return!0;return!1}function Rk(o,n,s){if(o.length>1){if(Hy(o,n))return!0;for(let h=0;h<n.length;h++)if(qy(n[h],o,s))return!0}for(let h=0;h<o.length;h++)if(qy(o[h],n,s))return!0;return!1}function Hy(o,n){if(o.length===0||n.length===0)return!1;for(let s=0;s<o.length-1;s++){const h=o[s],g=o[s+1];for(let _=0;_<n.length-1;_++)if(Lk(h,g,n[_],n[_+1]))return!0}return!1}function Lk(o,n,s,h){return Ie(o,s,h)!==Ie(n,s,h)&&Ie(o,n,s)!==Ie(o,n,h)}function qy(o,n,s){const h=s*s;if(n.length===1)return o.distSqr(n[0])<h;for(let g=1;g<n.length;g++)if(Kx(o,n[g-1],n[g])<h)return!0;return!1}function Kx(o,n,s){const h=n.distSqr(s);if(h===0)return o.distSqr(n);const g=((o.x-n.x)*(s.x-n.x)+(o.y-n.y)*(s.y-n.y))/h;return o.distSqr(g<0?n:g>1?s:s.sub(n)._mult(g)._add(n))}function Xx(o,n){let s,h,g,_=!1;for(let x=0;x<o.length;x++){s=o[x];for(let b=0,C=s.length-1;b<s.length;C=b++)h=s[b],g=s[C],h.y>n.y!=g.y>n.y&&n.x<(g.x-h.x)*(n.y-h.y)/(g.y-h.y)+h.x&&(_=!_)}return _}function Qc(o,n){let s=!1;for(let h=0,g=o.length-1;h<o.length;g=h++){const _=o[h],x=o[g];_.y>n.y!=x.y>n.y&&n.x<(x.x-_.x)*(n.y-_.y)/(x.y-_.y)+_.x&&(s=!s)}return s}function Dk(o,n,s){const h=s[0],g=s[2];if(o.x<h.x&&n.x<h.x||o.x>g.x&&n.x>g.x||o.y<h.y&&n.y<h.y||o.y>g.y&&n.y>g.y)return!1;const _=Ie(o,n,s[0]);return _!==Ie(o,n,s[1])||_!==Ie(o,n,s[2])||_!==Ie(o,n,s[3])}function id(o,n,s){const h=n.paint.get(o).value;return h.kind==="constant"?h.value:s.programConfigurations.get(n.id).getMaxValue(o)}function kp(o){return Math.sqrt(o[0]*o[0]+o[1]*o[1])}function Mp(o,n,s,h,g){if(!n[0]&&!n[1])return o;const _=A.convert(n)._mult(g);s==="viewport"&&_._rotate(-h);const x=[];for(let b=0;b<o.length;b++)x.push(o[b].sub(_));return x}let Jx,Yx;_t("CircleBucket",Uy,{omit:["layers"]});var Fk={get paint(){return Yx=Yx||new p({"circle-radius":new Bt(Te.paint_circle["circle-radius"]),"circle-color":new Bt(Te.paint_circle["circle-color"]),"circle-blur":new Bt(Te.paint_circle["circle-blur"]),"circle-opacity":new Bt(Te.paint_circle["circle-opacity"]),"circle-translate":new It(Te.paint_circle["circle-translate"]),"circle-translate-anchor":new It(Te.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new It(Te.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new It(Te.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Bt(Te.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Bt(Te.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Bt(Te.paint_circle["circle-stroke-opacity"])})},get layout(){return Jx=Jx||new p({"circle-sort-key":new Bt(Te.layout_circle["circle-sort-key"])})}},Li=1e-6,eu=typeof Float32Array<"u"?Float32Array:Array;function Wy(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function Qx(o,n,s){var h=n[0],g=n[1],_=n[2],x=n[3],b=n[4],C=n[5],P=n[6],R=n[7],D=n[8],j=n[9],W=n[10],J=n[11],ee=n[12],ce=n[13],pe=n[14],Ae=n[15],ve=s[0],Ee=s[1],Ne=s[2],Je=s[3];return o[0]=ve*h+Ee*b+Ne*D+Je*ee,o[1]=ve*g+Ee*C+Ne*j+Je*ce,o[2]=ve*_+Ee*P+Ne*W+Je*pe,o[3]=ve*x+Ee*R+Ne*J+Je*Ae,o[4]=(ve=s[4])*h+(Ee=s[5])*b+(Ne=s[6])*D+(Je=s[7])*ee,o[5]=ve*g+Ee*C+Ne*j+Je*ce,o[6]=ve*_+Ee*P+Ne*W+Je*pe,o[7]=ve*x+Ee*R+Ne*J+Je*Ae,o[8]=(ve=s[8])*h+(Ee=s[9])*b+(Ne=s[10])*D+(Je=s[11])*ee,o[9]=ve*g+Ee*C+Ne*j+Je*ce,o[10]=ve*_+Ee*P+Ne*W+Je*pe,o[11]=ve*x+Ee*R+Ne*J+Je*Ae,o[12]=(ve=s[12])*h+(Ee=s[13])*b+(Ne=s[14])*D+(Je=s[15])*ee,o[13]=ve*g+Ee*C+Ne*j+Je*ce,o[14]=ve*_+Ee*P+Ne*W+Je*pe,o[15]=ve*x+Ee*R+Ne*J+Je*Ae,o}Math.hypot||(Math.hypot=function(){for(var o=0,n=arguments.length;n--;)o+=arguments[n]*arguments[n];return Math.sqrt(o)});var od,Ok=Qx;function Ap(o,n,s){var h=n[0],g=n[1],_=n[2],x=n[3];return o[0]=s[0]*h+s[4]*g+s[8]*_+s[12]*x,o[1]=s[1]*h+s[5]*g+s[9]*_+s[13]*x,o[2]=s[2]*h+s[6]*g+s[10]*_+s[14]*x,o[3]=s[3]*h+s[7]*g+s[11]*_+s[15]*x,o}od=new eu(4),eu!=Float32Array&&(od[0]=0,od[1]=0,od[2]=0,od[3]=0);class Bk extends v{constructor(n){super(n,Fk)}createBucket(n){return new Uy(n)}queryRadius(n){const s=n;return id("circle-radius",this,s)+id("circle-stroke-width",this,s)+kp(this.paint.get("circle-translate"))}queryIntersectsFeature(n,s,h,g,_,x,b,C){const P=Mp(n,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),x.angle,b),R=this.paint.get("circle-radius").evaluate(s,h)+this.paint.get("circle-stroke-width").evaluate(s,h),D=this.paint.get("circle-pitch-alignment")==="map",j=D?P:function(J,ee){return J.map(ce=>eb(ce,ee))}(P,C),W=D?R*b:R;for(const J of g)for(const ee of J){const ce=D?ee:eb(ee,C);let pe=W;const Ae=Ap([],[ee.x,ee.y,0,1],C);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?pe*=Ae[3]/x.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(pe*=x.cameraToCenterDistance/Ae[3]),zk(j,ce,pe))return!0}return!1}}function eb(o,n){const s=Ap([],[o.x,o.y,0,1],n);return new A(s[0]/s[3],s[1]/s[3])}class tb extends Uy{}let rb;_t("HeatmapBucket",tb,{omit:["layers"]});var Nk={get paint(){return rb=rb||new p({"heatmap-radius":new Bt(Te.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Bt(Te.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new It(Te.paint_heatmap["heatmap-intensity"]),"heatmap-color":new c(Te.paint_heatmap["heatmap-color"]),"heatmap-opacity":new It(Te.paint_heatmap["heatmap-opacity"])})}};function Gy(o,{width:n,height:s},h,g){if(g){if(g instanceof Uint8ClampedArray)g=new Uint8Array(g.buffer);else if(g.length!==n*s*h)throw new RangeError(`mismatched image size. expected: ${g.length} but got: ${n*s*h}`)}else g=new Uint8Array(n*s*h);return o.width=n,o.height=s,o.data=g,o}function nb(o,{width:n,height:s},h){if(n===o.width&&s===o.height)return;const g=Gy({},{width:n,height:s},h);Zy(o,g,{x:0,y:0},{x:0,y:0},{width:Math.min(o.width,n),height:Math.min(o.height,s)},h),o.width=n,o.height=s,o.data=g.data}function Zy(o,n,s,h,g,_){if(g.width===0||g.height===0)return n;if(g.width>o.width||g.height>o.height||s.x>o.width-g.width||s.y>o.height-g.height)throw new RangeError("out of range source coordinates for image copy");if(g.width>n.width||g.height>n.height||h.x>n.width-g.width||h.y>n.height-g.height)throw new RangeError("out of range destination coordinates for image copy");const x=o.data,b=n.data;if(x===b)throw new Error("srcData equals dstData, so image is already copied");for(let C=0;C<g.height;C++){const P=((s.y+C)*o.width+s.x)*_,R=((h.y+C)*n.width+h.x)*_;for(let D=0;D<g.width*_;D++)b[R+D]=x[P+D]}return n}class ad{constructor(n,s){Gy(this,n,1,s)}resize(n){nb(this,n,1)}clone(){return new ad({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,s,h,g,_){Zy(n,s,h,g,_,1)}}class ko{constructor(n,s){Gy(this,n,4,s)}resize(n){nb(this,n,4)}replace(n,s){s?this.data.set(n):this.data=n instanceof Uint8ClampedArray?new Uint8Array(n.buffer):n}clone(){return new ko({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,s,h,g,_){Zy(n,s,h,g,_,4)}}function ib(o){const n={},s=o.resolution||256,h=o.clips?o.clips.length:1,g=o.image||new ko({width:s,height:h});if(Math.log(s)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${s}`);const _=(x,b,C)=>{n[o.evaluationKey]=C;const P=o.expression.evaluate(n);g.data[x+b+0]=Math.floor(255*P.r/P.a),g.data[x+b+1]=Math.floor(255*P.g/P.a),g.data[x+b+2]=Math.floor(255*P.b/P.a),g.data[x+b+3]=Math.floor(255*P.a)};if(o.clips)for(let x=0,b=0;x<h;++x,b+=4*s)for(let C=0,P=0;C<s;C++,P+=4){const R=C/(s-1),{start:D,end:j}=o.clips[x];_(b,P,D*(1-R)+j*R)}else for(let x=0,b=0;x<s;x++,b+=4)_(0,b,x/(s-1));return g}_t("AlphaImage",ad),_t("RGBAImage",ko);class $k extends v{createBucket(n){return new tb(n)}constructor(n){super(n,Nk),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(n){n==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=ib({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let ob;var jk={get paint(){return ob=ob||new p({"hillshade-illumination-direction":new It(Te.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new It(Te.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new It(Te.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new It(Te.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new It(Te.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new It(Te.paint_hillshade["hillshade-accent-color"])})}};class Vk extends v{constructor(n){super(n,jk)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const Uk=z([{name:"a_pos",components:2,type:"Int16"}],4),{members:Hk}=Uk;function ab(o,n,s=2){const h=n&&n.length,g=h?n[0]*s:o.length;let _=sb(o,0,g,s,!0);const x=[];if(!_||_.next===_.prev)return x;let b,C,P;if(h&&(_=function(R,D,j,W){const J=[];for(let ee=0,ce=D.length;ee<ce;ee++){const pe=sb(R,D[ee]*W,ee<ce-1?D[ee+1]*W:R.length,W,!1);pe===pe.next&&(pe.steiner=!0),J.push(Yk(pe))}J.sort(Kk);for(let ee=0;ee<J.length;ee++)j=Xk(J[ee],j);return j}(o,n,_,s)),o.length>80*s){b=1/0,C=1/0;let R=-1/0,D=-1/0;for(let j=s;j<g;j+=s){const W=o[j],J=o[j+1];W<b&&(b=W),J<C&&(C=J),W>R&&(R=W),J>D&&(D=J)}P=Math.max(R-b,D-C),P=P!==0?32767/P:0}return sd(_,x,s,b,C,P,0),x}function sb(o,n,s,h,g){let _;if(g===function(x,b,C,P){let R=0;for(let D=b,j=C-P;D<C;D+=P)R+=(x[j]-x[D])*(x[D+1]+x[j+1]),j=D;return R}(o,n,s,h)>0)for(let x=n;x<s;x+=h)_=ub(x/h|0,o[x],o[x+1],_);else for(let x=s-h;x>=n;x-=h)_=ub(x/h|0,o[x],o[x+1],_);return _&&zp(_,_.next)&&(cd(_),_=_.next),_}function Zl(o,n){if(!o)return o;n||(n=o);let s,h=o;do if(s=!1,h.steiner||!zp(h,h.next)&&zn(h.prev,h,h.next)!==0)h=h.next;else{if(cd(h),h=n=h.prev,h===h.next)break;s=!0}while(s||h!==n);return n}function sd(o,n,s,h,g,_,x){if(!o)return;!x&&_&&function(C,P,R,D){let j=C;do j.z===0&&(j.z=Ky(j.x,j.y,P,R,D)),j.prevZ=j.prev,j.nextZ=j.next,j=j.next;while(j!==C);j.prevZ.nextZ=null,j.prevZ=null,function(W){let J,ee=1;do{let ce,pe=W;W=null;let Ae=null;for(J=0;pe;){J++;let ve=pe,Ee=0;for(let Je=0;Je<ee&&(Ee++,ve=ve.nextZ,ve);Je++);let Ne=ee;for(;Ee>0||Ne>0&&ve;)Ee!==0&&(Ne===0||!ve||pe.z<=ve.z)?(ce=pe,pe=pe.nextZ,Ee--):(ce=ve,ve=ve.nextZ,Ne--),Ae?Ae.nextZ=ce:W=ce,ce.prevZ=Ae,Ae=ce;pe=ve}Ae.nextZ=null,ee*=2}while(J>1)}(j)}(o,h,g,_);let b=o;for(;o.prev!==o.next;){const C=o.prev,P=o.next;if(_?Wk(o,h,g,_):qk(o))n.push(C.i,o.i,P.i),cd(o),o=P.next,b=P.next;else if((o=P)===b){x?x===1?sd(o=Gk(Zl(o),n),n,s,h,g,_,2):x===2&&Zk(o,n,s,h,g,_):sd(Zl(o),n,s,h,g,_,1);break}}}function qk(o){const n=o.prev,s=o,h=o.next;if(zn(n,s,h)>=0)return!1;const g=n.x,_=s.x,x=h.x,b=n.y,C=s.y,P=h.y,R=g<_?g<x?g:x:_<x?_:x,D=b<C?b<P?b:P:C<P?C:P,j=g>_?g>x?g:x:_>x?_:x,W=b>C?b>P?b:P:C>P?C:P;let J=h.next;for(;J!==n;){if(J.x>=R&&J.x<=j&&J.y>=D&&J.y<=W&&tu(g,b,_,C,x,P,J.x,J.y)&&zn(J.prev,J,J.next)>=0)return!1;J=J.next}return!0}function Wk(o,n,s,h){const g=o.prev,_=o,x=o.next;if(zn(g,_,x)>=0)return!1;const b=g.x,C=_.x,P=x.x,R=g.y,D=_.y,j=x.y,W=b<C?b<P?b:P:C<P?C:P,J=R<D?R<j?R:j:D<j?D:j,ee=b>C?b>P?b:P:C>P?C:P,ce=R>D?R>j?R:j:D>j?D:j,pe=Ky(W,J,n,s,h),Ae=Ky(ee,ce,n,s,h);let ve=o.prevZ,Ee=o.nextZ;for(;ve&&ve.z>=pe&&Ee&&Ee.z<=Ae;){if(ve.x>=W&&ve.x<=ee&&ve.y>=J&&ve.y<=ce&&ve!==g&&ve!==x&&tu(b,R,C,D,P,j,ve.x,ve.y)&&zn(ve.prev,ve,ve.next)>=0||(ve=ve.prevZ,Ee.x>=W&&Ee.x<=ee&&Ee.y>=J&&Ee.y<=ce&&Ee!==g&&Ee!==x&&tu(b,R,C,D,P,j,Ee.x,Ee.y)&&zn(Ee.prev,Ee,Ee.next)>=0))return!1;Ee=Ee.nextZ}for(;ve&&ve.z>=pe;){if(ve.x>=W&&ve.x<=ee&&ve.y>=J&&ve.y<=ce&&ve!==g&&ve!==x&&tu(b,R,C,D,P,j,ve.x,ve.y)&&zn(ve.prev,ve,ve.next)>=0)return!1;ve=ve.prevZ}for(;Ee&&Ee.z<=Ae;){if(Ee.x>=W&&Ee.x<=ee&&Ee.y>=J&&Ee.y<=ce&&Ee!==g&&Ee!==x&&tu(b,R,C,D,P,j,Ee.x,Ee.y)&&zn(Ee.prev,Ee,Ee.next)>=0)return!1;Ee=Ee.nextZ}return!0}function Gk(o,n){let s=o;do{const h=s.prev,g=s.next.next;!zp(h,g)&&lb(h,s,s.next,g)&&ld(h,g)&&ld(g,h)&&(n.push(h.i,s.i,g.i),cd(s),cd(s.next),s=o=g),s=s.next}while(s!==o);return Zl(s)}function Zk(o,n,s,h,g,_){let x=o;do{let b=x.next.next;for(;b!==x.prev;){if(x.i!==b.i&&Qk(x,b)){let C=cb(x,b);return x=Zl(x,x.next),C=Zl(C,C.next),sd(x,n,s,h,g,_,0),void sd(C,n,s,h,g,_,0)}b=b.next}x=x.next}while(x!==o)}function Kk(o,n){return o.x-n.x}function Xk(o,n){const s=function(g,_){let x=_;const b=g.x,C=g.y;let P,R=-1/0;do{if(C<=x.y&&C>=x.next.y&&x.next.y!==x.y){const ee=x.x+(C-x.y)*(x.next.x-x.x)/(x.next.y-x.y);if(ee<=b&&ee>R&&(R=ee,P=x.x<x.next.x?x:x.next,ee===b))return P}x=x.next}while(x!==_);if(!P)return null;const D=P,j=P.x,W=P.y;let J=1/0;x=P;do{if(b>=x.x&&x.x>=j&&b!==x.x&&tu(C<W?b:R,C,j,W,C<W?R:b,C,x.x,x.y)){const ee=Math.abs(C-x.y)/(b-x.x);ld(x,g)&&(ee<J||ee===J&&(x.x>P.x||x.x===P.x&&Jk(P,x)))&&(P=x,J=ee)}x=x.next}while(x!==D);return P}(o,n);if(!s)return n;const h=cb(s,o);return Zl(h,h.next),Zl(s,s.next)}function Jk(o,n){return zn(o.prev,o,n.prev)<0&&zn(n.next,o,o.next)<0}function Ky(o,n,s,h,g){return(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-s)*g|0)|o<<8))|o<<4))|o<<2))|o<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-h)*g|0)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function Yk(o){let n=o,s=o;do(n.x<s.x||n.x===s.x&&n.y<s.y)&&(s=n),n=n.next;while(n!==o);return s}function tu(o,n,s,h,g,_,x,b){return(g-x)*(n-b)>=(o-x)*(_-b)&&(o-x)*(h-b)>=(s-x)*(n-b)&&(s-x)*(_-b)>=(g-x)*(h-b)}function Qk(o,n){return o.next.i!==n.i&&o.prev.i!==n.i&&!function(s,h){let g=s;do{if(g.i!==s.i&&g.next.i!==s.i&&g.i!==h.i&&g.next.i!==h.i&&lb(g,g.next,s,h))return!0;g=g.next}while(g!==s);return!1}(o,n)&&(ld(o,n)&&ld(n,o)&&function(s,h){let g=s,_=!1;const x=(s.x+h.x)/2,b=(s.y+h.y)/2;do g.y>b!=g.next.y>b&&g.next.y!==g.y&&x<(g.next.x-g.x)*(b-g.y)/(g.next.y-g.y)+g.x&&(_=!_),g=g.next;while(g!==s);return _}(o,n)&&(zn(o.prev,o,n.prev)||zn(o,n.prev,n))||zp(o,n)&&zn(o.prev,o,o.next)>0&&zn(n.prev,n,n.next)>0)}function zn(o,n,s){return(n.y-o.y)*(s.x-n.x)-(n.x-o.x)*(s.y-n.y)}function zp(o,n){return o.x===n.x&&o.y===n.y}function lb(o,n,s,h){const g=Lp(zn(o,n,s)),_=Lp(zn(o,n,h)),x=Lp(zn(s,h,o)),b=Lp(zn(s,h,n));return g!==_&&x!==b||!(g!==0||!Rp(o,s,n))||!(_!==0||!Rp(o,h,n))||!(x!==0||!Rp(s,o,h))||!(b!==0||!Rp(s,n,h))}function Rp(o,n,s){return n.x<=Math.max(o.x,s.x)&&n.x>=Math.min(o.x,s.x)&&n.y<=Math.max(o.y,s.y)&&n.y>=Math.min(o.y,s.y)}function Lp(o){return o>0?1:o<0?-1:0}function ld(o,n){return zn(o.prev,o,o.next)<0?zn(o,n,o.next)>=0&&zn(o,o.prev,n)>=0:zn(o,n,o.prev)<0||zn(o,o.next,n)<0}function cb(o,n){const s=Xy(o.i,o.x,o.y),h=Xy(n.i,n.x,n.y),g=o.next,_=n.prev;return o.next=n,n.prev=o,s.next=g,g.prev=s,h.next=s,s.prev=h,_.next=h,h.prev=_,h}function ub(o,n,s,h){const g=Xy(o,n,s);return h?(g.next=h.next,g.prev=h,h.next.prev=g,h.next=g):(g.prev=g,g.next=g),g}function cd(o){o.next.prev=o.prev,o.prev.next=o.next,o.prevZ&&(o.prevZ.nextZ=o.nextZ),o.nextZ&&(o.nextZ.prevZ=o.prevZ)}function Xy(o,n,s){return{i:o,x:n,y:s,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function Jy(o,n,s){const h=s.patternDependencies;let g=!1;for(const _ of n){const x=_.paint.get(`${o}-pattern`);x.isConstant()||(g=!0);const b=x.constantOr(null);b&&(g=!0,h[b.to]=!0,h[b.from]=!0)}return g}function Yy(o,n,s,h,g){const _=g.patternDependencies;for(const x of n){const b=x.paint.get(`${o}-pattern`).value;if(b.kind!=="constant"){let C=b.evaluate({zoom:h-1},s,{},g.availableImages),P=b.evaluate({zoom:h},s,{},g.availableImages),R=b.evaluate({zoom:h+1},s,{},g.availableImages);C=C&&C.name?C.name:C,P=P&&P.name?P.name:P,R=R&&R.name?R.name:R,_[C]=!0,_[P]=!0,_[R]=!0,s.patterns[x.id]={min:C,mid:P,max:R}}}return s}class Qy{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Vs,this.indexArray=new Gn,this.indexArray2=new yn,this.programConfigurations=new ql(n.layers,n.zoom),this.segments=new Vn,this.segments2=new Vn,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){this.hasPattern=Jy("fill",this.layers,s);const g=this.layers[0].layout.get("fill-sort-key"),_=!g.isConstant(),x=[];for(const{feature:b,id:C,index:P,sourceLayerIndex:R}of n){const D=this.layers[0]._featureFilter.needGeometry,j=Gl(b,D);if(!this.layers[0]._featureFilter.filter(new tn(this.zoom),j,h))continue;const W=_?g.evaluate(j,{},h,s.availableImages):void 0,J={id:C,properties:b.properties,type:b.type,sourceLayerIndex:R,index:P,geometry:D?j.geometry:Wl(b),patterns:{},sortKey:W};x.push(J)}_&&x.sort((b,C)=>b.sortKey-C.sortKey);for(const b of x){const{geometry:C,index:P,sourceLayerIndex:R}=b;if(this.hasPattern){const D=Yy("fill",this.layers,b,this.zoom,s);this.patternFeatures.push(D)}else this.addFeature(b,C,P,h,{});s.featureIndex.insert(n[P].feature,C,P,R,this.index)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h)}addFeatures(n,s,h){for(const g of this.patternFeatures)this.addFeature(g,g.geometry,g.index,s,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Hk),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.indexBuffer2=n.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(n,s,h,g,_){for(const x of Ic(s,500)){let b=0;for(const W of x)b+=W.length;const C=this.segments.prepareSegment(b,this.layoutVertexArray,this.indexArray),P=C.vertexLength,R=[],D=[];for(const W of x){if(W.length===0)continue;W!==x[0]&&D.push(R.length/2);const J=this.segments2.prepareSegment(W.length,this.layoutVertexArray,this.indexArray2),ee=J.vertexLength;this.layoutVertexArray.emplaceBack(W[0].x,W[0].y),this.indexArray2.emplaceBack(ee+W.length-1,ee),R.push(W[0].x),R.push(W[0].y);for(let ce=1;ce<W.length;ce++)this.layoutVertexArray.emplaceBack(W[ce].x,W[ce].y),this.indexArray2.emplaceBack(ee+ce-1,ee+ce),R.push(W[ce].x),R.push(W[ce].y);J.vertexLength+=W.length,J.primitiveLength+=W.length}const j=ab(R,D);for(let W=0;W<j.length;W+=3)this.indexArray.emplaceBack(P+j[W],P+j[W+1],P+j[W+2]);C.vertexLength+=b,C.primitiveLength+=j.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,_,g)}}let hb,db;_t("FillBucket",Qy,{omit:["layers","patternFeatures"]});var eM={get paint(){return db=db||new p({"fill-antialias":new It(Te.paint_fill["fill-antialias"]),"fill-opacity":new Bt(Te.paint_fill["fill-opacity"]),"fill-color":new Bt(Te.paint_fill["fill-color"]),"fill-outline-color":new Bt(Te.paint_fill["fill-outline-color"]),"fill-translate":new It(Te.paint_fill["fill-translate"]),"fill-translate-anchor":new It(Te.paint_fill["fill-translate-anchor"]),"fill-pattern":new y(Te.paint_fill["fill-pattern"])})},get layout(){return hb=hb||new p({"fill-sort-key":new Bt(Te.layout_fill["fill-sort-key"])})}};class tM extends v{constructor(n){super(n,eM)}recalculate(n,s){super.recalculate(n,s);const h=this.paint._values["fill-outline-color"];h.value.kind==="constant"&&h.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(n){return new Qy(n)}queryRadius(){return kp(this.paint.get("fill-translate"))}queryIntersectsFeature(n,s,h,g,_,x,b){return Zx(Mp(n,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),x.angle,b),g)}isTileClipped(){return!0}}const rM=z([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),nM=z([{name:"a_centroid",components:2,type:"Int16"}],4),{members:iM}=rM;var Gs={},oM=T,fb=ru;function ru(o,n,s,h,g){this.properties={},this.extent=s,this.type=0,this._pbf=o,this._geometry=-1,this._keys=h,this._values=g,o.readFields(aM,this,n)}function aM(o,n,s){o==1?n.id=s.readVarint():o==2?function(h,g){for(var _=h.readVarint()+h.pos;h.pos<_;){var x=g._keys[h.readVarint()],b=g._values[h.readVarint()];g.properties[x]=b}}(s,n):o==3?n.type=s.readVarint():o==4&&(n._geometry=s.pos)}function sM(o){for(var n,s,h=0,g=0,_=o.length,x=_-1;g<_;x=g++)h+=((s=o[x]).x-(n=o[g]).x)*(n.y+s.y);return h}ru.types=["Unknown","Point","LineString","Polygon"],ru.prototype.loadGeometry=function(){var o=this._pbf;o.pos=this._geometry;for(var n,s=o.readVarint()+o.pos,h=1,g=0,_=0,x=0,b=[];o.pos<s;){if(g<=0){var C=o.readVarint();h=7&C,g=C>>3}if(g--,h===1||h===2)_+=o.readSVarint(),x+=o.readSVarint(),h===1&&(n&&b.push(n),n=[]),n.push(new oM(_,x));else{if(h!==7)throw new Error("unknown command "+h);n&&n.push(n[0].clone())}}return n&&b.push(n),b},ru.prototype.bbox=function(){var o=this._pbf;o.pos=this._geometry;for(var n=o.readVarint()+o.pos,s=1,h=0,g=0,_=0,x=1/0,b=-1/0,C=1/0,P=-1/0;o.pos<n;){if(h<=0){var R=o.readVarint();s=7&R,h=R>>3}if(h--,s===1||s===2)(g+=o.readSVarint())<x&&(x=g),g>b&&(b=g),(_+=o.readSVarint())<C&&(C=_),_>P&&(P=_);else if(s!==7)throw new Error("unknown command "+s)}return[x,C,b,P]},ru.prototype.toGeoJSON=function(o,n,s){var h,g,_=this.extent*Math.pow(2,s),x=this.extent*o,b=this.extent*n,C=this.loadGeometry(),P=ru.types[this.type];function R(W){for(var J=0;J<W.length;J++){var ee=W[J];W[J]=[360*(ee.x+x)/_-180,360/Math.PI*Math.atan(Math.exp((180-360*(ee.y+b)/_)*Math.PI/180))-90]}}switch(this.type){case 1:var D=[];for(h=0;h<C.length;h++)D[h]=C[h][0];R(C=D);break;case 2:for(h=0;h<C.length;h++)R(C[h]);break;case 3:for(C=function(W){var J=W.length;if(J<=1)return[W];for(var ee,ce,pe=[],Ae=0;Ae<J;Ae++){var ve=sM(W[Ae]);ve!==0&&(ce===void 0&&(ce=ve<0),ce===ve<0?(ee&&pe.push(ee),ee=[W[Ae]]):ee.push(W[Ae]))}return ee&&pe.push(ee),pe}(C),h=0;h<C.length;h++)for(g=0;g<C[h].length;g++)R(C[h][g])}C.length===1?C=C[0]:P="Multi"+P;var j={type:"Feature",geometry:{type:P,coordinates:C},properties:this.properties};return"id"in this&&(j.id=this.id),j};var lM=fb,pb=mb;function mb(o,n){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=o,this._keys=[],this._values=[],this._features=[],o.readFields(cM,this,n),this.length=this._features.length}function cM(o,n,s){o===15?n.version=s.readVarint():o===1?n.name=s.readString():o===5?n.extent=s.readVarint():o===2?n._features.push(s.pos):o===3?n._keys.push(s.readString()):o===4&&n._values.push(function(h){for(var g=null,_=h.readVarint()+h.pos;h.pos<_;){var x=h.readVarint()>>3;g=x===1?h.readString():x===2?h.readFloat():x===3?h.readDouble():x===4?h.readVarint64():x===5?h.readVarint():x===6?h.readSVarint():x===7?h.readBoolean():null}return g}(s))}mb.prototype.feature=function(o){if(o<0||o>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[o];var n=this._pbf.readVarint()+this._pbf.pos;return new lM(this._pbf,n,this.extent,this._keys,this._values)};var uM=pb;function hM(o,n,s){if(o===3){var h=new uM(s,s.readVarint()+s.pos);h.length&&(n[h.name]=h)}}Gs.VectorTile=function(o,n){this.layers=o.readFields(hM,{},n)},Gs.VectorTileFeature=fb,Gs.VectorTileLayer=pb;const dM=Gs.VectorTileFeature.types,ev=Math.pow(2,13);function ud(o,n,s,h,g,_,x,b){o.emplaceBack(n,s,2*Math.floor(h*ev)+x,g*ev*2,_*ev*2,Math.round(b))}class tv{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new as,this.centroidVertexArray=new os,this.indexArray=new Gn,this.programConfigurations=new ql(n.layers,n.zoom),this.segments=new Vn,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){this.features=[],this.hasPattern=Jy("fill-extrusion",this.layers,s);for(const{feature:g,id:_,index:x,sourceLayerIndex:b}of n){const C=this.layers[0]._featureFilter.needGeometry,P=Gl(g,C);if(!this.layers[0]._featureFilter.filter(new tn(this.zoom),P,h))continue;const R={id:_,sourceLayerIndex:b,index:x,geometry:C?P.geometry:Wl(g),properties:g.properties,type:g.type,patterns:{}};this.hasPattern?this.features.push(Yy("fill-extrusion",this.layers,R,this.zoom,s)):this.addFeature(R,R.geometry,x,h,{}),s.featureIndex.insert(g,R.geometry,x,b,this.index,!0)}}addFeatures(n,s,h){for(const g of this.features){const{geometry:_}=g;this.addFeature(g,_,g.index,s,h)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,iM),this.centroidVertexBuffer=n.createVertexBuffer(this.centroidVertexArray,nM.members,!0),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(n,s,h,g,_){for(const x of Ic(s,500)){const b={x:0,y:0,vertexCount:0};let C=0;for(const J of x)C+=J.length;let P=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const J of x){if(J.length===0||pM(J))continue;let ee=0;for(let ce=0;ce<J.length;ce++){const pe=J[ce];if(ce>=1){const Ae=J[ce-1];if(!fM(pe,Ae)){P.vertexLength+4>Vn.MAX_VERTEX_ARRAY_LENGTH&&(P=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const ve=pe.sub(Ae)._perp()._unit(),Ee=Ae.dist(pe);ee+Ee>32768&&(ee=0),ud(this.layoutVertexArray,pe.x,pe.y,ve.x,ve.y,0,0,ee),ud(this.layoutVertexArray,pe.x,pe.y,ve.x,ve.y,0,1,ee),b.x+=2*pe.x,b.y+=2*pe.y,b.vertexCount+=2,ee+=Ee,ud(this.layoutVertexArray,Ae.x,Ae.y,ve.x,ve.y,0,0,ee),ud(this.layoutVertexArray,Ae.x,Ae.y,ve.x,ve.y,0,1,ee),b.x+=2*Ae.x,b.y+=2*Ae.y,b.vertexCount+=2;const Ne=P.vertexLength;this.indexArray.emplaceBack(Ne,Ne+2,Ne+1),this.indexArray.emplaceBack(Ne+1,Ne+2,Ne+3),P.vertexLength+=4,P.primitiveLength+=2}}}}if(P.vertexLength+C>Vn.MAX_VERTEX_ARRAY_LENGTH&&(P=this.segments.prepareSegment(C,this.layoutVertexArray,this.indexArray)),dM[n.type]!=="Polygon")continue;const R=[],D=[],j=P.vertexLength;for(const J of x)if(J.length!==0){J!==x[0]&&D.push(R.length/2);for(let ee=0;ee<J.length;ee++){const ce=J[ee];ud(this.layoutVertexArray,ce.x,ce.y,0,0,1,1,0),b.x+=ce.x,b.y+=ce.y,b.vertexCount+=1,R.push(ce.x),R.push(ce.y)}}const W=ab(R,D);for(let J=0;J<W.length;J+=3)this.indexArray.emplaceBack(j+W[J],j+W[J+2],j+W[J+1]);P.primitiveLength+=W.length/3,P.vertexLength+=C;for(let J=0;J<b.vertexCount;J++){const ee=Math.floor(b.x/b.vertexCount),ce=Math.floor(b.y/b.vertexCount);this.centroidVertexArray.emplaceBack(ee,ce)}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,_,g)}}function fM(o,n){return o.x===n.x&&(o.x<0||o.x>On)||o.y===n.y&&(o.y<0||o.y>On)}function pM(o){return o.every(n=>n.x<0)||o.every(n=>n.x>On)||o.every(n=>n.y<0)||o.every(n=>n.y>On)}let gb;_t("FillExtrusionBucket",tv,{omit:["layers","features"]});var mM={get paint(){return gb=gb||new p({"fill-extrusion-opacity":new It(Te["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Bt(Te["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new It(Te["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new It(Te["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new y(Te["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Bt(Te["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Bt(Te["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new It(Te["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class gM extends v{constructor(n){super(n,mM)}createBucket(n){return new tv(n)}queryRadius(){return kp(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(n,s,h,g,_,x,b,C){const P=Mp(n,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),x.angle,b),R=this.paint.get("fill-extrusion-height").evaluate(s,h),D=this.paint.get("fill-extrusion-base").evaluate(s,h),j=function(J,ee,ce,pe){const Ae=[];for(const ve of J){const Ee=[ve.x,ve.y,0,1];Ap(Ee,Ee,ee),Ae.push(new A(Ee[0]/Ee[3],Ee[1]/Ee[3]))}return Ae}(P,C),W=function(J,ee,ce,pe){const Ae=[],ve=[],Ee=pe[8]*ee,Ne=pe[9]*ee,Je=pe[10]*ee,ft=pe[11]*ee,Ot=pe[8]*ce,ct=pe[9]*ce,at=pe[10]*ce,Pt=pe[11]*ce;for(const xt of J){const yt=[],He=[];for(const Mt of xt){const Ct=Mt.x,Ht=Mt.y,Kr=pe[0]*Ct+pe[4]*Ht+pe[12],Wr=pe[1]*Ct+pe[5]*Ht+pe[13],Zn=pe[2]*Ct+pe[6]*Ht+pe[14],Jo=pe[3]*Ct+pe[7]*Ht+pe[15],di=Zn+Je,In=Jo+ft,Di=Kr+Ot,Fi=Wr+ct,Oi=Zn+at,kn=Jo+Pt,Kn=new A((Kr+Ee)/In,(Wr+Ne)/In);Kn.z=di/In,yt.push(Kn);const xi=new A(Di/kn,Fi/kn);xi.z=Oi/kn,He.push(xi)}Ae.push(yt),ve.push(He)}return[Ae,ve]}(g,D,R,C);return function(J,ee,ce){let pe=1/0;Zx(ce,ee)&&(pe=yb(ce,ee[0]));for(let Ae=0;Ae<ee.length;Ae++){const ve=ee[Ae],Ee=J[Ae];for(let Ne=0;Ne<ve.length-1;Ne++){const Je=ve[Ne],ft=[Je,ve[Ne+1],Ee[Ne+1],Ee[Ne],Je];Gx(ce,ft)&&(pe=Math.min(pe,yb(ce,ft)))}}return pe!==1/0&&pe}(W[0],W[1],j)}}function hd(o,n){return o.x*n.x+o.y*n.y}function yb(o,n){if(o.length===1){let s=0;const h=n[s++];let g;for(;!g||h.equals(g);)if(g=n[s++],!g)return 1/0;for(;s<n.length;s++){const _=n[s],x=o[0],b=g.sub(h),C=_.sub(h),P=x.sub(h),R=hd(b,b),D=hd(b,C),j=hd(C,C),W=hd(P,b),J=hd(P,C),ee=R*j-D*D,ce=(j*W-D*J)/ee,pe=(R*J-D*W)/ee,Ae=h.z*(1-ce-pe)+g.z*ce+_.z*pe;if(isFinite(Ae))return Ae}return 1/0}{let s=1/0;for(const h of n)s=Math.min(s,h.z);return s}}const yM=z([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:vM}=yM,_M=z([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:xM}=_M,bM=Gs.VectorTileFeature.types,wM=Math.cos(Math.PI/180*37.5),vb=Math.pow(2,14)/.5;class rv{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(s=>{this.gradients[s.id]={}}),this.layoutVertexArray=new Zc,this.layoutVertexArray2=new Yh,this.indexArray=new Gn,this.programConfigurations=new ql(n.layers,n.zoom),this.segments=new Vn,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){this.hasPattern=Jy("line",this.layers,s);const g=this.layers[0].layout.get("line-sort-key"),_=!g.isConstant(),x=[];for(const{feature:b,id:C,index:P,sourceLayerIndex:R}of n){const D=this.layers[0]._featureFilter.needGeometry,j=Gl(b,D);if(!this.layers[0]._featureFilter.filter(new tn(this.zoom),j,h))continue;const W=_?g.evaluate(j,{},h):void 0,J={id:C,properties:b.properties,type:b.type,sourceLayerIndex:R,index:P,geometry:D?j.geometry:Wl(b),patterns:{},sortKey:W};x.push(J)}_&&x.sort((b,C)=>b.sortKey-C.sortKey);for(const b of x){const{geometry:C,index:P,sourceLayerIndex:R}=b;if(this.hasPattern){const D=Yy("line",this.layers,b,this.zoom,s);this.patternFeatures.push(D)}else this.addFeature(b,C,P,h,{});s.featureIndex.insert(n[P].feature,C,P,R,this.index)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h)}addFeatures(n,s,h){for(const g of this.patternFeatures)this.addFeature(g,g.geometry,g.index,s,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=n.createVertexBuffer(this.layoutVertexArray2,xM)),this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,vM),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(n){if(n.properties&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_end"))return{start:+n.properties.mapbox_clip_start,end:+n.properties.mapbox_clip_end}}addFeature(n,s,h,g,_){const x=this.layers[0].layout,b=x.get("line-join").evaluate(n,{}),C=x.get("line-cap"),P=x.get("line-miter-limit"),R=x.get("line-round-limit");this.lineClips=this.lineFeatureClips(n);for(const D of s)this.addLine(D,n,b,C,P,R);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,_,g)}addLine(n,s,h,g,_,x){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let pe=0;pe<n.length-1;pe++)this.totalDistance+=n[pe].dist(n[pe+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const b=bM[s.type]==="Polygon";let C=n.length;for(;C>=2&&n[C-1].equals(n[C-2]);)C--;let P=0;for(;P<C-1&&n[P].equals(n[P+1]);)P++;if(C<(b?3:2))return;h==="bevel"&&(_=1.05);const R=this.overscaling<=16?15*On/(512*this.overscaling):0,D=this.segments.prepareSegment(10*C,this.layoutVertexArray,this.indexArray);let j,W,J,ee,ce;this.e1=this.e2=-1,b&&(j=n[C-2],ce=n[P].sub(j)._unit()._perp());for(let pe=P;pe<C;pe++){if(J=pe===C-1?b?n[P+1]:void 0:n[pe+1],J&&n[pe].equals(J))continue;ce&&(ee=ce),j&&(W=j),j=n[pe],ce=J?J.sub(j)._unit()._perp():ee,ee=ee||ce;let Ae=ee.add(ce);Ae.x===0&&Ae.y===0||Ae._unit();const ve=ee.x*ce.x+ee.y*ce.y,Ee=Ae.x*ce.x+Ae.y*ce.y,Ne=Ee!==0?1/Ee:1/0,Je=2*Math.sqrt(2-2*Ee),ft=Ee<wM&&W&&J,Ot=ee.x*ce.y-ee.y*ce.x>0;if(ft&&pe>P){const Pt=j.dist(W);if(Pt>2*R){const xt=j.sub(j.sub(W)._mult(R/Pt)._round());this.updateDistance(W,xt),this.addCurrentVertex(xt,ee,0,0,D),W=xt}}const ct=W&&J;let at=ct?h:b?"butt":g;if(ct&&at==="round"&&(Ne<x?at="miter":Ne<=2&&(at="fakeround")),at==="miter"&&Ne>_&&(at="bevel"),at==="bevel"&&(Ne>2&&(at="flipbevel"),Ne<_&&(at="miter")),W&&this.updateDistance(W,j),at==="miter")Ae._mult(Ne),this.addCurrentVertex(j,Ae,0,0,D);else if(at==="flipbevel"){if(Ne>100)Ae=ce.mult(-1);else{const Pt=Ne*ee.add(ce).mag()/ee.sub(ce).mag();Ae._perp()._mult(Pt*(Ot?-1:1))}this.addCurrentVertex(j,Ae,0,0,D),this.addCurrentVertex(j,Ae.mult(-1),0,0,D)}else if(at==="bevel"||at==="fakeround"){const Pt=-Math.sqrt(Ne*Ne-1),xt=Ot?Pt:0,yt=Ot?0:Pt;if(W&&this.addCurrentVertex(j,ee,xt,yt,D),at==="fakeround"){const He=Math.round(180*Je/Math.PI/20);for(let Mt=1;Mt<He;Mt++){let Ct=Mt/He;if(Ct!==.5){const Kr=Ct-.5;Ct+=Ct*Kr*(Ct-1)*((1.0904+ve*(ve*(3.55645-1.43519*ve)-3.2452))*Kr*Kr+(.848013+ve*(.215638*ve-1.06021)))}const Ht=ce.sub(ee)._mult(Ct)._add(ee)._unit()._mult(Ot?-1:1);this.addHalfVertex(j,Ht.x,Ht.y,!1,Ot,0,D)}}J&&this.addCurrentVertex(j,ce,-xt,-yt,D)}else if(at==="butt")this.addCurrentVertex(j,Ae,0,0,D);else if(at==="square"){const Pt=W?1:-1;this.addCurrentVertex(j,Ae,Pt,Pt,D)}else at==="round"&&(W&&(this.addCurrentVertex(j,ee,0,0,D),this.addCurrentVertex(j,ee,1,1,D,!0)),J&&(this.addCurrentVertex(j,ce,-1,-1,D,!0),this.addCurrentVertex(j,ce,0,0,D)));if(ft&&pe<C-1){const Pt=j.dist(J);if(Pt>2*R){const xt=j.add(J.sub(j)._mult(R/Pt)._round());this.updateDistance(j,xt),this.addCurrentVertex(xt,ce,0,0,D),j=xt}}}}addCurrentVertex(n,s,h,g,_,x=!1){const b=s.y*g-s.x,C=-s.y-s.x*g;this.addHalfVertex(n,s.x+s.y*h,s.y-s.x*h,x,!1,h,_),this.addHalfVertex(n,b,C,x,!0,-g,_),this.distance>vb/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(n,s,h,g,_,x))}addHalfVertex({x:n,y:s},h,g,_,x,b,C){const P=.5*(this.lineClips?this.scaledDistance*(vb-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((n<<1)+(_?1:0),(s<<1)+(x?1:0),Math.round(63*h)+128,Math.round(63*g)+128,1+(b===0?0:b<0?-1:1)|(63&P)<<2,P>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const R=C.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,R),C.primitiveLength++),x?this.e2=R:this.e1=R}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(n,s){this.distance+=n.dist(s),this.updateScaledDistance()}}let _b,xb;_t("LineBucket",rv,{omit:["layers","patternFeatures"]});var bb={get paint(){return xb=xb||new p({"line-opacity":new Bt(Te.paint_line["line-opacity"]),"line-color":new Bt(Te.paint_line["line-color"]),"line-translate":new It(Te.paint_line["line-translate"]),"line-translate-anchor":new It(Te.paint_line["line-translate-anchor"]),"line-width":new Bt(Te.paint_line["line-width"]),"line-gap-width":new Bt(Te.paint_line["line-gap-width"]),"line-offset":new Bt(Te.paint_line["line-offset"]),"line-blur":new Bt(Te.paint_line["line-blur"]),"line-dasharray":new i(Te.paint_line["line-dasharray"]),"line-pattern":new y(Te.paint_line["line-pattern"]),"line-gradient":new c(Te.paint_line["line-gradient"])})},get layout(){return _b=_b||new p({"line-cap":new It(Te.layout_line["line-cap"]),"line-join":new Bt(Te.layout_line["line-join"]),"line-miter-limit":new It(Te.layout_line["line-miter-limit"]),"line-round-limit":new It(Te.layout_line["line-round-limit"]),"line-sort-key":new Bt(Te.layout_line["line-sort-key"])})}};class SM extends Bt{possiblyEvaluate(n,s){return s=new tn(Math.floor(s.zoom),{now:s.now,fadeDuration:s.fadeDuration,zoomHistory:s.zoomHistory,transition:s.transition}),super.possiblyEvaluate(n,s)}evaluate(n,s,h,g){return s=ie({},s,{zoom:Math.floor(s.zoom)}),super.evaluate(n,s,h,g)}}let Dp;class CM extends v{constructor(n){super(n,bb),this.gradientVersion=0,Dp||(Dp=new SM(bb.paint.properties["line-width"].specification),Dp.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(n){if(n==="line-gradient"){const s=this.gradientExpression();this.stepInterpolant=!!function(h){return h._styleExpression!==void 0}(s)&&s._styleExpression.expression instanceof Qr,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(n,s){super.recalculate(n,s),this.paint._values["line-floorwidth"]=Dp.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,n)}createBucket(n){return new rv(n)}queryRadius(n){const s=n,h=wb(id("line-width",this,s),id("line-gap-width",this,s)),g=id("line-offset",this,s);return h/2+Math.abs(g)+kp(this.paint.get("line-translate"))}queryIntersectsFeature(n,s,h,g,_,x,b){const C=Mp(n,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),x.angle,b),P=b/2*wb(this.paint.get("line-width").evaluate(s,h),this.paint.get("line-gap-width").evaluate(s,h)),R=this.paint.get("line-offset").evaluate(s,h);return R&&(g=function(D,j){const W=[];for(let J=0;J<D.length;J++){const ee=D[J],ce=[];for(let pe=0;pe<ee.length;pe++){const Ae=ee[pe-1],ve=ee[pe],Ee=ee[pe+1],Ne=pe===0?new A(0,0):ve.sub(Ae)._unit()._perp(),Je=pe===ee.length-1?new A(0,0):Ee.sub(ve)._unit()._perp(),ft=Ne._add(Je)._unit(),Ot=ft.x*Je.x+ft.y*Je.y;Ot!==0&&ft._mult(1/Ot),ce.push(ft._mult(j)._add(ve))}W.push(ce)}return W}(g,R*b)),function(D,j,W){for(let J=0;J<j.length;J++){const ee=j[J];if(D.length>=3){for(let ce=0;ce<ee.length;ce++)if(Qc(D,ee[ce]))return!0}if(Rk(D,ee,W))return!0}return!1}(C,g,P)}isTileClipped(){return!0}}function wb(o,n){return n>0?n+2*o:o}const EM=z([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),TM=z([{name:"a_projected_pos",components:3,type:"Float32"}],4);z([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const PM=z([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);z([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Sb=z([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),IM=z([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function kM(o,n,s){return o.sections.forEach(h=>{h.text=function(g,_,x){const b=_.layout.get("text-transform").evaluate(x,{});return b==="uppercase"?g=g.toLocaleUpperCase():b==="lowercase"&&(g=g.toLocaleLowerCase()),Oa.applyArabicShaping&&(g=Oa.applyArabicShaping(g)),g}(h.text,n,s)}),o}z([{name:"triangle",components:3,type:"Uint16"}]),z([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),z([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),z([{type:"Float32",name:"offsetX"}]),z([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),z([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const dd={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var Un=24,Cb=qr,Eb=function(o,n,s,h,g){var _,x,b=8*g-h-1,C=(1<<b)-1,P=C>>1,R=-7,D=g-1,j=-1,W=o[n+D];for(D+=j,_=W&(1<<-R)-1,W>>=-R,R+=b;R>0;_=256*_+o[n+D],D+=j,R-=8);for(x=_&(1<<-R)-1,_>>=-R,R+=h;R>0;x=256*x+o[n+D],D+=j,R-=8);if(_===0)_=1-P;else{if(_===C)return x?NaN:1/0*(W?-1:1);x+=Math.pow(2,h),_-=P}return(W?-1:1)*x*Math.pow(2,_-h)},Tb=function(o,n,s,h,g,_){var x,b,C,P=8*_-g-1,R=(1<<P)-1,D=R>>1,j=g===23?Math.pow(2,-24)-Math.pow(2,-77):0,W=0,J=1,ee=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(b=isNaN(n)?1:0,x=R):(x=Math.floor(Math.log(n)/Math.LN2),n*(C=Math.pow(2,-x))<1&&(x--,C*=2),(n+=x+D>=1?j/C:j*Math.pow(2,1-D))*C>=2&&(x++,C/=2),x+D>=R?(b=0,x=R):x+D>=1?(b=(n*C-1)*Math.pow(2,g),x+=D):(b=n*Math.pow(2,D-1)*Math.pow(2,g),x=0));g>=8;o[s+W]=255&b,W+=J,b/=256,g-=8);for(x=x<<g|b,P+=g;P>0;o[s+W]=255&x,W+=J,x/=256,P-=8);o[s+W-J]|=128*ee};function qr(o){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(o)?o:new Uint8Array(o||0),this.pos=0,this.type=0,this.length=this.buf.length}qr.Varint=0,qr.Fixed64=1,qr.Bytes=2,qr.Fixed32=5;var nv=4294967296,Pb=1/nv,Ib=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");function ls(o){return o.type===qr.Bytes?o.readVarint()+o.pos:o.pos+1}function nu(o,n,s){return s?4294967296*n+(o>>>0):4294967296*(n>>>0)+(o>>>0)}function kb(o,n,s){var h=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(7*Math.LN2));s.realloc(h);for(var g=s.pos-1;g>=o;g--)s.buf[g+h]=s.buf[g]}function MM(o,n){for(var s=0;s<o.length;s++)n.writeVarint(o[s])}function AM(o,n){for(var s=0;s<o.length;s++)n.writeSVarint(o[s])}function zM(o,n){for(var s=0;s<o.length;s++)n.writeFloat(o[s])}function RM(o,n){for(var s=0;s<o.length;s++)n.writeDouble(o[s])}function LM(o,n){for(var s=0;s<o.length;s++)n.writeBoolean(o[s])}function DM(o,n){for(var s=0;s<o.length;s++)n.writeFixed32(o[s])}function FM(o,n){for(var s=0;s<o.length;s++)n.writeSFixed32(o[s])}function OM(o,n){for(var s=0;s<o.length;s++)n.writeFixed64(o[s])}function BM(o,n){for(var s=0;s<o.length;s++)n.writeSFixed64(o[s])}function Fp(o,n){return(o[n]|o[n+1]<<8|o[n+2]<<16)+16777216*o[n+3]}function iu(o,n,s){o[s]=n,o[s+1]=n>>>8,o[s+2]=n>>>16,o[s+3]=n>>>24}function Mb(o,n){return(o[n]|o[n+1]<<8|o[n+2]<<16)+(o[n+3]<<24)}qr.prototype={destroy:function(){this.buf=null},readFields:function(o,n,s){for(s=s||this.length;this.pos<s;){var h=this.readVarint(),g=h>>3,_=this.pos;this.type=7&h,o(g,n,this),this.pos===_&&this.skip(h)}return n},readMessage:function(o,n){return this.readFields(o,n,this.readVarint()+this.pos)},readFixed32:function(){var o=Fp(this.buf,this.pos);return this.pos+=4,o},readSFixed32:function(){var o=Mb(this.buf,this.pos);return this.pos+=4,o},readFixed64:function(){var o=Fp(this.buf,this.pos)+Fp(this.buf,this.pos+4)*nv;return this.pos+=8,o},readSFixed64:function(){var o=Fp(this.buf,this.pos)+Mb(this.buf,this.pos+4)*nv;return this.pos+=8,o},readFloat:function(){var o=Eb(this.buf,this.pos,!0,23,4);return this.pos+=4,o},readDouble:function(){var o=Eb(this.buf,this.pos,!0,52,8);return this.pos+=8,o},readVarint:function(o){var n,s,h=this.buf;return n=127&(s=h[this.pos++]),s<128?n:(n|=(127&(s=h[this.pos++]))<<7,s<128?n:(n|=(127&(s=h[this.pos++]))<<14,s<128?n:(n|=(127&(s=h[this.pos++]))<<21,s<128?n:function(g,_,x){var b,C,P=x.buf;if(b=(112&(C=P[x.pos++]))>>4,C<128||(b|=(127&(C=P[x.pos++]))<<3,C<128)||(b|=(127&(C=P[x.pos++]))<<10,C<128)||(b|=(127&(C=P[x.pos++]))<<17,C<128)||(b|=(127&(C=P[x.pos++]))<<24,C<128)||(b|=(1&(C=P[x.pos++]))<<31,C<128))return nu(g,b,_);throw new Error("Expected varint not more than 10 bytes")}(n|=(15&(s=h[this.pos]))<<28,o,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var o=this.readVarint();return o%2==1?(o+1)/-2:o/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var o=this.readVarint()+this.pos,n=this.pos;return this.pos=o,o-n>=12&&Ib?function(s,h,g){return Ib.decode(s.subarray(h,g))}(this.buf,n,o):function(s,h,g){for(var _="",x=h;x<g;){var b,C,P,R=s[x],D=null,j=R>239?4:R>223?3:R>191?2:1;if(x+j>g)break;j===1?R<128&&(D=R):j===2?(192&(b=s[x+1]))==128&&(D=(31&R)<<6|63&b)<=127&&(D=null):j===3?(C=s[x+2],(192&(b=s[x+1]))==128&&(192&C)==128&&((D=(15&R)<<12|(63&b)<<6|63&C)<=2047||D>=55296&&D<=57343)&&(D=null)):j===4&&(C=s[x+2],P=s[x+3],(192&(b=s[x+1]))==128&&(192&C)==128&&(192&P)==128&&((D=(15&R)<<18|(63&b)<<12|(63&C)<<6|63&P)<=65535||D>=1114112)&&(D=null)),D===null?(D=65533,j=1):D>65535&&(D-=65536,_+=String.fromCharCode(D>>>10&1023|55296),D=56320|1023&D),_+=String.fromCharCode(D),x+=j}return _}(this.buf,n,o)},readBytes:function(){var o=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,o);return this.pos=o,n},readPackedVarint:function(o,n){if(this.type!==qr.Bytes)return o.push(this.readVarint(n));var s=ls(this);for(o=o||[];this.pos<s;)o.push(this.readVarint(n));return o},readPackedSVarint:function(o){if(this.type!==qr.Bytes)return o.push(this.readSVarint());var n=ls(this);for(o=o||[];this.pos<n;)o.push(this.readSVarint());return o},readPackedBoolean:function(o){if(this.type!==qr.Bytes)return o.push(this.readBoolean());var n=ls(this);for(o=o||[];this.pos<n;)o.push(this.readBoolean());return o},readPackedFloat:function(o){if(this.type!==qr.Bytes)return o.push(this.readFloat());var n=ls(this);for(o=o||[];this.pos<n;)o.push(this.readFloat());return o},readPackedDouble:function(o){if(this.type!==qr.Bytes)return o.push(this.readDouble());var n=ls(this);for(o=o||[];this.pos<n;)o.push(this.readDouble());return o},readPackedFixed32:function(o){if(this.type!==qr.Bytes)return o.push(this.readFixed32());var n=ls(this);for(o=o||[];this.pos<n;)o.push(this.readFixed32());return o},readPackedSFixed32:function(o){if(this.type!==qr.Bytes)return o.push(this.readSFixed32());var n=ls(this);for(o=o||[];this.pos<n;)o.push(this.readSFixed32());return o},readPackedFixed64:function(o){if(this.type!==qr.Bytes)return o.push(this.readFixed64());var n=ls(this);for(o=o||[];this.pos<n;)o.push(this.readFixed64());return o},readPackedSFixed64:function(o){if(this.type!==qr.Bytes)return o.push(this.readSFixed64());var n=ls(this);for(o=o||[];this.pos<n;)o.push(this.readSFixed64());return o},skip:function(o){var n=7&o;if(n===qr.Varint)for(;this.buf[this.pos++]>127;);else if(n===qr.Bytes)this.pos=this.readVarint()+this.pos;else if(n===qr.Fixed32)this.pos+=4;else{if(n!==qr.Fixed64)throw new Error("Unimplemented type: "+n);this.pos+=8}},writeTag:function(o,n){this.writeVarint(o<<3|n)},realloc:function(o){for(var n=this.length||16;n<this.pos+o;)n*=2;if(n!==this.length){var s=new Uint8Array(n);s.set(this.buf),this.buf=s,this.length=n}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(o){this.realloc(4),iu(this.buf,o,this.pos),this.pos+=4},writeSFixed32:function(o){this.realloc(4),iu(this.buf,o,this.pos),this.pos+=4},writeFixed64:function(o){this.realloc(8),iu(this.buf,-1&o,this.pos),iu(this.buf,Math.floor(o*Pb),this.pos+4),this.pos+=8},writeSFixed64:function(o){this.realloc(8),iu(this.buf,-1&o,this.pos),iu(this.buf,Math.floor(o*Pb),this.pos+4),this.pos+=8},writeVarint:function(o){(o=+o||0)>268435455||o<0?function(n,s){var h,g;if(n>=0?(h=n%4294967296|0,g=n/4294967296|0):(g=~(-n/4294967296),4294967295^(h=~(-n%4294967296))?h=h+1|0:(h=0,g=g+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");s.realloc(10),function(_,x,b){b.buf[b.pos++]=127&_|128,_>>>=7,b.buf[b.pos++]=127&_|128,_>>>=7,b.buf[b.pos++]=127&_|128,_>>>=7,b.buf[b.pos++]=127&_|128,b.buf[b.pos]=127&(_>>>=7)}(h,0,s),function(_,x){var b=(7&_)<<4;x.buf[x.pos++]|=b|((_>>>=3)?128:0),_&&(x.buf[x.pos++]=127&_|((_>>>=7)?128:0),_&&(x.buf[x.pos++]=127&_|((_>>>=7)?128:0),_&&(x.buf[x.pos++]=127&_|((_>>>=7)?128:0),_&&(x.buf[x.pos++]=127&_|((_>>>=7)?128:0),_&&(x.buf[x.pos++]=127&_)))))}(g,s)}(o,this):(this.realloc(4),this.buf[this.pos++]=127&o|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=o>>>7&127))))},writeSVarint:function(o){this.writeVarint(o<0?2*-o-1:2*o)},writeBoolean:function(o){this.writeVarint(!!o)},writeString:function(o){o=String(o),this.realloc(4*o.length),this.pos++;var n=this.pos;this.pos=function(h,g,_){for(var x,b,C=0;C<g.length;C++){if((x=g.charCodeAt(C))>55295&&x<57344){if(!b){x>56319||C+1===g.length?(h[_++]=239,h[_++]=191,h[_++]=189):b=x;continue}if(x<56320){h[_++]=239,h[_++]=191,h[_++]=189,b=x;continue}x=b-55296<<10|x-56320|65536,b=null}else b&&(h[_++]=239,h[_++]=191,h[_++]=189,b=null);x<128?h[_++]=x:(x<2048?h[_++]=x>>6|192:(x<65536?h[_++]=x>>12|224:(h[_++]=x>>18|240,h[_++]=x>>12&63|128),h[_++]=x>>6&63|128),h[_++]=63&x|128)}return _}(this.buf,o,this.pos);var s=this.pos-n;s>=128&&kb(n,s,this),this.pos=n-1,this.writeVarint(s),this.pos+=s},writeFloat:function(o){this.realloc(4),Tb(this.buf,o,this.pos,!0,23,4),this.pos+=4},writeDouble:function(o){this.realloc(8),Tb(this.buf,o,this.pos,!0,52,8),this.pos+=8},writeBytes:function(o){var n=o.length;this.writeVarint(n),this.realloc(n);for(var s=0;s<n;s++)this.buf[this.pos++]=o[s]},writeRawMessage:function(o,n){this.pos++;var s=this.pos;o(n,this);var h=this.pos-s;h>=128&&kb(s,h,this),this.pos=s-1,this.writeVarint(h),this.pos+=h},writeMessage:function(o,n,s){this.writeTag(o,qr.Bytes),this.writeRawMessage(n,s)},writePackedVarint:function(o,n){n.length&&this.writeMessage(o,MM,n)},writePackedSVarint:function(o,n){n.length&&this.writeMessage(o,AM,n)},writePackedBoolean:function(o,n){n.length&&this.writeMessage(o,LM,n)},writePackedFloat:function(o,n){n.length&&this.writeMessage(o,zM,n)},writePackedDouble:function(o,n){n.length&&this.writeMessage(o,RM,n)},writePackedFixed32:function(o,n){n.length&&this.writeMessage(o,DM,n)},writePackedSFixed32:function(o,n){n.length&&this.writeMessage(o,FM,n)},writePackedFixed64:function(o,n){n.length&&this.writeMessage(o,OM,n)},writePackedSFixed64:function(o,n){n.length&&this.writeMessage(o,BM,n)},writeBytesField:function(o,n){this.writeTag(o,qr.Bytes),this.writeBytes(n)},writeFixed32Field:function(o,n){this.writeTag(o,qr.Fixed32),this.writeFixed32(n)},writeSFixed32Field:function(o,n){this.writeTag(o,qr.Fixed32),this.writeSFixed32(n)},writeFixed64Field:function(o,n){this.writeTag(o,qr.Fixed64),this.writeFixed64(n)},writeSFixed64Field:function(o,n){this.writeTag(o,qr.Fixed64),this.writeSFixed64(n)},writeVarintField:function(o,n){this.writeTag(o,qr.Varint),this.writeVarint(n)},writeSVarintField:function(o,n){this.writeTag(o,qr.Varint),this.writeSVarint(n)},writeStringField:function(o,n){this.writeTag(o,qr.Bytes),this.writeString(n)},writeFloatField:function(o,n){this.writeTag(o,qr.Fixed32),this.writeFloat(n)},writeDoubleField:function(o,n){this.writeTag(o,qr.Fixed64),this.writeDouble(n)},writeBooleanField:function(o,n){this.writeVarintField(o,!!n)}};var iv=S(Cb);const ov=3;function NM(o,n,s){o===1&&s.readMessage($M,n)}function $M(o,n,s){if(o===3){const{id:h,bitmap:g,width:_,height:x,left:b,top:C,advance:P}=s.readMessage(jM,{});n.push({id:h,bitmap:new ad({width:_+2*ov,height:x+2*ov},g),metrics:{width:_,height:x,left:b,top:C,advance:P}})}}function jM(o,n,s){o===1?n.id=s.readVarint():o===2?n.bitmap=s.readBytes():o===3?n.width=s.readVarint():o===4?n.height=s.readVarint():o===5?n.left=s.readSVarint():o===6?n.top=s.readSVarint():o===7&&(n.advance=s.readVarint())}const Ab=ov;function zb(o){let n=0,s=0;for(const x of o)n+=x.w*x.h,s=Math.max(s,x.w);o.sort((x,b)=>b.h-x.h);const h=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),s),h:1/0}];let g=0,_=0;for(const x of o)for(let b=h.length-1;b>=0;b--){const C=h[b];if(!(x.w>C.w||x.h>C.h)){if(x.x=C.x,x.y=C.y,_=Math.max(_,x.y+x.h),g=Math.max(g,x.x+x.w),x.w===C.w&&x.h===C.h){const P=h.pop();b<h.length&&(h[b]=P)}else x.h===C.h?(C.x+=x.w,C.w-=x.w):x.w===C.w?(C.y+=x.h,C.h-=x.h):(h.push({x:C.x+x.w,y:C.y,w:C.w-x.w,h:x.h}),C.y+=x.h,C.h-=x.h);break}}return{w:g,h:_,fill:n/(g*_)||0}}const Ji=1;class av{constructor(n,{pixelRatio:s,version:h,stretchX:g,stretchY:_,content:x,textFitWidth:b,textFitHeight:C}){this.paddedRect=n,this.pixelRatio=s,this.stretchX=g,this.stretchY=_,this.content=x,this.version=h,this.textFitWidth=b,this.textFitHeight=C}get tl(){return[this.paddedRect.x+Ji,this.paddedRect.y+Ji]}get br(){return[this.paddedRect.x+this.paddedRect.w-Ji,this.paddedRect.y+this.paddedRect.h-Ji]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Ji)/this.pixelRatio,(this.paddedRect.h-2*Ji)/this.pixelRatio]}}class Rb{constructor(n,s){const h={},g={};this.haveRenderCallbacks=[];const _=[];this.addImages(n,h,_),this.addImages(s,g,_);const{w:x,h:b}=zb(_),C=new ko({width:x||1,height:b||1});for(const P in n){const R=n[P],D=h[P].paddedRect;ko.copy(R.data,C,{x:0,y:0},{x:D.x+Ji,y:D.y+Ji},R.data)}for(const P in s){const R=s[P],D=g[P].paddedRect,j=D.x+Ji,W=D.y+Ji,J=R.data.width,ee=R.data.height;ko.copy(R.data,C,{x:0,y:0},{x:j,y:W},R.data),ko.copy(R.data,C,{x:0,y:ee-1},{x:j,y:W-1},{width:J,height:1}),ko.copy(R.data,C,{x:0,y:0},{x:j,y:W+ee},{width:J,height:1}),ko.copy(R.data,C,{x:J-1,y:0},{x:j-1,y:W},{width:1,height:ee}),ko.copy(R.data,C,{x:0,y:0},{x:j+J,y:W},{width:1,height:ee})}this.image=C,this.iconPositions=h,this.patternPositions=g}addImages(n,s,h){for(const g in n){const _=n[g],x={x:0,y:0,w:_.data.width+2*Ji,h:_.data.height+2*Ji};h.push(x),s[g]=new av(x,_),_.hasRenderCallback&&this.haveRenderCallbacks.push(g)}}patchUpdatedImages(n,s){n.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const h in n.updatedImages)this.patchUpdatedImage(this.iconPositions[h],n.getImage(h),s),this.patchUpdatedImage(this.patternPositions[h],n.getImage(h),s)}patchUpdatedImage(n,s,h){if(!n||!s||n.version===s.version)return;n.version=s.version;const[g,_]=n.tl;h.update(s.data,void 0,{x:g,y:_})}}var Zs;_t("ImagePosition",av),_t("ImageAtlas",Rb),f.ai=void 0,(Zs=f.ai||(f.ai={}))[Zs.none=0]="none",Zs[Zs.horizontal=1]="horizontal",Zs[Zs.vertical=2]="vertical",Zs[Zs.horizontalOnly=3]="horizontalOnly";const fd=-17;class pd{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(n,s){const h=new pd;return h.scale=n||1,h.fontStack=s,h}static forImage(n){const s=new pd;return s.imageName=n,s}}class ou{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(n,s){const h=new ou;for(let g=0;g<n.sections.length;g++){const _=n.sections[g];_.image?h.addImageSection(_):h.addTextSection(_,s)}return h}length(){return this.text.length}getSection(n){return this.sections[this.sectionIndex[n]]}getSectionIndex(n){return this.sectionIndex[n]}getCharCode(n){return this.text.charCodeAt(n)}verticalizePunctuation(){this.text=function(n){let s="";for(let h=0;h<n.length;h++){const g=n.charCodeAt(h+1)||null,_=n.charCodeAt(h-1)||null;s+=g&&bp(g)&&!dd[n[h+1]]||_&&bp(_)&&!dd[n[h-1]]||!dd[n[h]]?n[h]:dd[n[h]]}return s}(this.text)}trim(){let n=0;for(let h=0;h<this.text.length&&Bp[this.text.charCodeAt(h)];h++)n++;let s=this.text.length;for(let h=this.text.length-1;h>=0&&h>=n&&Bp[this.text.charCodeAt(h)];h--)s--;this.text=this.text.substring(n,s),this.sectionIndex=this.sectionIndex.slice(n,s)}substring(n,s){const h=new ou;return h.text=this.text.substring(n,s),h.sectionIndex=this.sectionIndex.slice(n,s),h.sections=this.sections,h}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((n,s)=>Math.max(n,this.sections[s].scale),0)}addTextSection(n,s){this.text+=n.text,this.sections.push(pd.forText(n.scale,n.fontStack||s));const h=this.sections.length-1;for(let g=0;g<n.text.length;++g)this.sectionIndex.push(h)}addImageSection(n){const s=n.image?n.image.name:"";if(s.length===0)return void Ce("Can't add FormattedSection with an empty image.");const h=this.getNextImageSectionCharCode();h?(this.text+=String.fromCharCode(h),this.sections.push(pd.forImage(s)),this.sectionIndex.push(this.sections.length-1)):Ce("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Op(o,n,s,h,g,_,x,b,C,P,R,D,j,W,J){const ee=ou.fromFeature(o,g);let ce;D===f.ai.vertical&&ee.verticalizePunctuation();const{processBidirectionalText:pe,processStyledBidirectionalText:Ae}=Oa;if(pe&&ee.sections.length===1){ce=[];const Ne=pe(ee.toString(),sv(ee,P,_,n,h,W));for(const Je of Ne){const ft=new ou;ft.text=Je,ft.sections=ee.sections;for(let Ot=0;Ot<Je.length;Ot++)ft.sectionIndex.push(0);ce.push(ft)}}else if(Ae){ce=[];const Ne=Ae(ee.text,ee.sectionIndex,sv(ee,P,_,n,h,W));for(const Je of Ne){const ft=new ou;ft.text=Je[0],ft.sectionIndex=Je[1],ft.sections=ee.sections,ce.push(ft)}}else ce=function(Ne,Je){const ft=[],Ot=Ne.text;let ct=0;for(const at of Je)ft.push(Ne.substring(ct,at)),ct=at;return ct<Ot.length&&ft.push(Ne.substring(ct,Ot.length)),ft}(ee,sv(ee,P,_,n,h,W));const ve=[],Ee={positionedLines:ve,text:ee.toString(),top:R[1],bottom:R[1],left:R[0],right:R[0],writingMode:D,iconsInText:!1,verticalizable:!1};return function(Ne,Je,ft,Ot,ct,at,Pt,xt,yt,He,Mt,Ct){let Ht=0,Kr=fd,Wr=0,Zn=0;const Jo=xt==="right"?1:xt==="left"?0:.5;let di=0;for(const kn of ct){kn.trim();const Kn=kn.getMaxScale(),xi=(Kn-1)*Un,fi={positionedGlyphs:[],lineOffset:0};Ne.positionedLines[di]=fi;const Bi=fi.positionedGlyphs;let pi=0;if(!kn.length()){Kr+=at,++di;continue}for(let Yi=0;Yi<kn.length();Yi++){const Pr=kn.getSection(Yi),rn=kn.getSectionIndex(Yi),dn=kn.getCharCode(Yi);let uo=0,wn=null,cu=null,ja=null,Va=Un;const Yo=!(yt===f.ai.horizontal||!Mt&&!Kh(dn)||Mt&&(Bp[dn]||(In=dn,ut.Arabic(In)||ut["Arabic Supplement"](In)||ut["Arabic Extended-A"](In)||ut["Arabic Presentation Forms-A"](In)||ut["Arabic Presentation Forms-B"](In))));if(Pr.imageName){const zo=Ot[Pr.imageName];if(!zo)continue;ja=Pr.imageName,Ne.iconsInText=Ne.iconsInText||!0,cu=zo.paddedRect;const ri=zo.displaySize;Pr.scale=Pr.scale*Un/Ct,wn={width:ri[0],height:ri[1],left:Ji,top:-Ab,advance:Yo?ri[1]:ri[0]},uo=xi+(Un-ri[1]*Pr.scale),Va=wn.advance;const cs=Yo?ri[0]*Pr.scale-Un*Kn:ri[1]*Pr.scale-Un*Kn;cs>0&&cs>pi&&(pi=cs)}else{const zo=ft[Pr.fontStack],ri=zo&&zo[dn];if(ri&&ri.rect)cu=ri.rect,wn=ri.metrics;else{const cs=Je[Pr.fontStack],_d=cs&&cs[dn];if(!_d)continue;wn=_d.metrics}uo=(Kn-Pr.scale)*Un}Yo?(Ne.verticalizable=!0,Bi.push({glyph:dn,imageName:ja,x:Ht,y:Kr+uo,vertical:Yo,scale:Pr.scale,fontStack:Pr.fontStack,sectionIndex:rn,metrics:wn,rect:cu}),Ht+=Va*Pr.scale+He):(Bi.push({glyph:dn,imageName:ja,x:Ht,y:Kr+uo,vertical:Yo,scale:Pr.scale,fontStack:Pr.fontStack,sectionIndex:rn,metrics:wn,rect:cu}),Ht+=wn.advance*Pr.scale+He)}Bi.length!==0&&(Wr=Math.max(Ht-He,Wr),qM(Bi,0,Bi.length-1,Jo,pi)),Ht=0;const Ao=at*Kn+pi;fi.lineOffset=Math.max(pi,xi),Kr+=Ao,Zn=Math.max(Ao,Zn),++di}var In;const Di=Kr-fd,{horizontalAlign:Fi,verticalAlign:Oi}=lv(Pt);(function(kn,Kn,xi,fi,Bi,pi,Ao,Yi,Pr){const rn=(Kn-xi)*Bi;let dn=0;dn=pi!==Ao?-Yi*fi-fd:(-fi*Pr+.5)*Ao;for(const uo of kn)for(const wn of uo.positionedGlyphs)wn.x+=rn,wn.y+=dn})(Ne.positionedLines,Jo,Fi,Oi,Wr,Zn,at,Di,ct.length),Ne.top+=-Oi*Di,Ne.bottom=Ne.top+Di,Ne.left+=-Fi*Wr,Ne.right=Ne.left+Wr}(Ee,n,s,h,ce,x,b,C,D,P,j,J),!function(Ne){for(const Je of Ne)if(Je.positionedGlyphs.length!==0)return!1;return!0}(ve)&&Ee}const Bp={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},VM={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},UM={40:!0};function Lb(o,n,s,h,g,_){if(n.imageName){const x=h[n.imageName];return x?x.displaySize[0]*n.scale*Un/_+g:0}{const x=s[n.fontStack],b=x&&x[o];return b?b.metrics.advance*n.scale+g:0}}function Db(o,n,s,h){const g=Math.pow(o-n,2);return h?o<n?g/2:2*g:g+Math.abs(s)*s}function HM(o,n,s){let h=0;return o===10&&(h-=1e4),s&&(h+=150),o!==40&&o!==65288||(h+=50),n!==41&&n!==65289||(h+=50),h}function Fb(o,n,s,h,g,_){let x=null,b=Db(n,s,g,_);for(const C of h){const P=Db(n-C.x,s,g,_)+C.badness;P<=b&&(x=C,b=P)}return{index:o,x:n,priorBreak:x,badness:b}}function Ob(o){return o?Ob(o.priorBreak).concat(o.index):[]}function sv(o,n,s,h,g,_){if(!o)return[];const x=[],b=function(D,j,W,J,ee,ce){let pe=0;for(let Ae=0;Ae<D.length();Ae++){const ve=D.getSection(Ae);pe+=Lb(D.getCharCode(Ae),ve,J,ee,j,ce)}return pe/Math.max(1,Math.ceil(pe/W))}(o,n,s,h,g,_),C=o.text.indexOf("​")>=0;let P=0;for(let D=0;D<o.length();D++){const j=o.getSection(D),W=o.getCharCode(D);if(Bp[W]||(P+=Lb(W,j,h,g,n,_)),D<o.length()-1){const J=!((R=W)<11904||!(ut["Bopomofo Extended"](R)||ut.Bopomofo(R)||ut["CJK Compatibility Forms"](R)||ut["CJK Compatibility Ideographs"](R)||ut["CJK Compatibility"](R)||ut["CJK Radicals Supplement"](R)||ut["CJK Strokes"](R)||ut["CJK Symbols and Punctuation"](R)||ut["CJK Unified Ideographs Extension A"](R)||ut["CJK Unified Ideographs"](R)||ut["Enclosed CJK Letters and Months"](R)||ut["Halfwidth and Fullwidth Forms"](R)||ut.Hiragana(R)||ut["Ideographic Description Characters"](R)||ut["Kangxi Radicals"](R)||ut["Katakana Phonetic Extensions"](R)||ut.Katakana(R)||ut["Vertical Forms"](R)||ut["Yi Radicals"](R)||ut["Yi Syllables"](R)));(VM[W]||J||j.imageName||D!==o.length()-2&&UM[o.getCharCode(D+1)])&&x.push(Fb(D+1,P,b,x,HM(W,o.getCharCode(D+1),J&&C),!1))}}var R;return Ob(Fb(o.length(),P,b,x,0,!0))}function lv(o){let n=.5,s=.5;switch(o){case"right":case"top-right":case"bottom-right":n=1;break;case"left":case"top-left":case"bottom-left":n=0}switch(o){case"bottom":case"bottom-right":case"bottom-left":s=1;break;case"top":case"top-right":case"top-left":s=0}return{horizontalAlign:n,verticalAlign:s}}function qM(o,n,s,h,g){if(!h&&!g)return;const _=o[s],x=(o[s].x+_.metrics.advance*_.scale)*h;for(let b=n;b<=s;b++)o[b].x-=x,o[b].y+=g}function WM(o,n,s){const{horizontalAlign:h,verticalAlign:g}=lv(s),_=n[0]-o.displaySize[0]*h,x=n[1]-o.displaySize[1]*g;return{image:o,top:x,bottom:x+o.displaySize[1],left:_,right:_+o.displaySize[0]}}function Bb(o){var n,s;let h=o.left,g=o.top,_=o.right-h,x=o.bottom-g;const b=(n=o.image.textFitWidth)!==null&&n!==void 0?n:"stretchOrShrink",C=(s=o.image.textFitHeight)!==null&&s!==void 0?s:"stretchOrShrink",P=(o.image.content[2]-o.image.content[0])/(o.image.content[3]-o.image.content[1]);if(C==="proportional"){if(b==="stretchOnly"&&_/x<P||b==="proportional"){const R=Math.ceil(x*P);h*=R/_,_=R}}else if(b==="proportional"&&C==="stretchOnly"&&P!==0&&_/x>P){const R=Math.ceil(_/P);g*=R/x,x=R}return{x1:h,y1:g,x2:h+_,y2:g+x}}function Nb(o,n,s,h,g,_){const x=o.image;let b;if(x.content){const ce=x.content,pe=x.pixelRatio||1;b=[ce[0]/pe,ce[1]/pe,x.displaySize[0]-ce[2]/pe,x.displaySize[1]-ce[3]/pe]}const C=n.left*_,P=n.right*_;let R,D,j,W;s==="width"||s==="both"?(W=g[0]+C-h[3],D=g[0]+P+h[1]):(W=g[0]+(C+P-x.displaySize[0])/2,D=W+x.displaySize[0]);const J=n.top*_,ee=n.bottom*_;return s==="height"||s==="both"?(R=g[1]+J-h[0],j=g[1]+ee+h[2]):(R=g[1]+(J+ee-x.displaySize[1])/2,j=R+x.displaySize[1]),{image:x,top:R,right:D,bottom:j,left:W,collisionPadding:b}}const md=255,$a=128,Ks=md*$a;function $b(o,n){const{expression:s}=n;if(s.kind==="constant")return{kind:"constant",layoutSize:s.evaluate(new tn(o+1))};if(s.kind==="source")return{kind:"source"};{const{zoomStops:h,interpolationType:g}=s;let _=0;for(;_<h.length&&h[_]<=o;)_++;_=Math.max(0,_-1);let x=_;for(;x<h.length&&h[x]<o+1;)x++;x=Math.min(h.length-1,x);const b=h[_],C=h[x];return s.kind==="composite"?{kind:"composite",minZoom:b,maxZoom:C,interpolationType:g}:{kind:"camera",minZoom:b,maxZoom:C,minSize:s.evaluate(new tn(b)),maxSize:s.evaluate(new tn(C)),interpolationType:g}}}function cv(o,n,s){let h="never";const g=o.get(n);return g?h=g:o.get(s)&&(h="always"),h}const GM=Gs.VectorTileFeature.types,ZM=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Np(o,n,s,h,g,_,x,b,C,P,R,D,j){const W=b?Math.min(Ks,Math.round(b[0])):0,J=b?Math.min(Ks,Math.round(b[1])):0;o.emplaceBack(n,s,Math.round(32*h),Math.round(32*g),_,x,(W<<1)+(C?1:0),J,16*P,16*R,256*D,256*j)}function uv(o,n,s){o.emplaceBack(n.x,n.y,s),o.emplaceBack(n.x,n.y,s),o.emplaceBack(n.x,n.y,s),o.emplaceBack(n.x,n.y,s)}function KM(o){for(const n of o.sections)if(Xh(n.text))return!0;return!1}class hv{constructor(n){this.layoutVertexArray=new Io,this.indexArray=new Gn,this.programConfigurations=n,this.segments=new Vn,this.dynamicLayoutVertexArray=new Ba,this.opacityVertexArray=new Us,this.hasVisibleVertices=!1,this.placedSymbolArray=new un}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(n,s,h,g){this.isEmpty()||(h&&(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,EM.members),this.indexBuffer=n.createIndexBuffer(this.indexArray,s),this.dynamicLayoutVertexBuffer=n.createVertexBuffer(this.dynamicLayoutVertexArray,TM.members,!0),this.opacityVertexBuffer=n.createVertexBuffer(this.opacityVertexArray,ZM,!0),this.opacityVertexBuffer.itemSize=1),(h||g)&&this.programConfigurations.upload(n))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}_t("SymbolBuffers",hv);class dv{constructor(n,s,h){this.layoutVertexArray=new n,this.layoutAttributes=s,this.indexArray=new h,this.segments=new Vn,this.collisionVertexArray=new ui}upload(n){this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=n.createVertexBuffer(this.collisionVertexArray,PM.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}_t("CollisionBuffers",dv);class au{constructor(n){this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(x=>x.id),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Wy([]),this.placementViewportMatrix=Wy([]);const s=this.layers[0]._unevaluatedLayout._values;this.textSizeData=$b(this.zoom,s["text-size"]),this.iconSizeData=$b(this.zoom,s["icon-size"]);const h=this.layers[0].layout,g=h.get("symbol-sort-key"),_=h.get("symbol-z-order");this.canOverlap=cv(h,"text-overlap","text-allow-overlap")!=="never"||cv(h,"icon-overlap","icon-allow-overlap")!=="never"||h.get("text-ignore-placement")||h.get("icon-ignore-placement"),this.sortFeaturesByKey=_!=="viewport-y"&&!g.isConstant(),this.sortFeaturesByY=(_==="viewport-y"||_==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,h.get("symbol-placement")==="point"&&(this.writingModes=h.get("text-writing-mode").map(x=>f.ai[x])),this.stateDependentLayerIds=this.layers.filter(x=>x.isStateDependent()).map(x=>x.id),this.sourceID=n.sourceID}createArrays(){this.text=new hv(new ql(this.layers,this.zoom,n=>/^text/.test(n))),this.icon=new hv(new ql(this.layers,this.zoom,n=>/^icon/.test(n))),this.glyphOffsetArray=new hn,this.lineVertexArray=new Ri,this.symbolInstances=new To,this.textAnchorOffsets=new si}calculateGlyphDependencies(n,s,h,g,_){for(let x=0;x<n.length;x++)if(s[n.charCodeAt(x)]=!0,(h||g)&&_){const b=dd[n.charAt(x)];b&&(s[b.charCodeAt(0)]=!0)}}populate(n,s,h){const g=this.layers[0],_=g.layout,x=_.get("text-font"),b=_.get("text-field"),C=_.get("icon-image"),P=(b.value.kind!=="constant"||b.value.value instanceof An&&!b.value.value.isEmpty()||b.value.value.toString().length>0)&&(x.value.kind!=="constant"||x.value.value.length>0),R=C.value.kind!=="constant"||!!C.value.value||Object.keys(C.parameters).length>0,D=_.get("symbol-sort-key");if(this.features=[],!P&&!R)return;const j=s.iconDependencies,W=s.glyphDependencies,J=s.availableImages,ee=new tn(this.zoom);for(const{feature:ce,id:pe,index:Ae,sourceLayerIndex:ve}of n){const Ee=g._featureFilter.needGeometry,Ne=Gl(ce,Ee);if(!g._featureFilter.filter(ee,Ne,h))continue;let Je,ft;if(Ee||(Ne.geometry=Wl(ce)),P){const ct=g.getValueAndResolveTokens("text-field",Ne,h,J),at=An.factory(ct),Pt=this.hasRTLText=this.hasRTLText||KM(at);(!Pt||Oa.getRTLTextPluginStatus()==="unavailable"||Pt&&Oa.isParsed())&&(Je=kM(at,g,Ne))}if(R){const ct=g.getValueAndResolveTokens("icon-image",Ne,h,J);ft=ct instanceof jr?ct:jr.fromString(ct)}if(!Je&&!ft)continue;const Ot=this.sortFeaturesByKey?D.evaluate(Ne,{},h):void 0;if(this.features.push({id:pe,text:Je,icon:ft,index:Ae,sourceLayerIndex:ve,geometry:Ne.geometry,properties:ce.properties,type:GM[ce.type],sortKey:Ot}),ft&&(j[ft.name]=!0),Je){const ct=x.evaluate(Ne,{},h).join(","),at=_.get("text-rotation-alignment")!=="viewport"&&_.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(f.ai.vertical)>=0;for(const Pt of Je.sections)if(Pt.image)j[Pt.image.name]=!0;else{const xt=Zh(Je.toString()),yt=Pt.fontStack||ct,He=W[yt]=W[yt]||{};this.calculateGlyphDependencies(Pt.text,He,at,this.allowVerticalPlacement,xt)}}}_.get("symbol-placement")==="line"&&(this.features=function(ce){const pe={},Ae={},ve=[];let Ee=0;function Ne(ct){ve.push(ce[ct]),Ee++}function Je(ct,at,Pt){const xt=Ae[ct];return delete Ae[ct],Ae[at]=xt,ve[xt].geometry[0].pop(),ve[xt].geometry[0]=ve[xt].geometry[0].concat(Pt[0]),xt}function ft(ct,at,Pt){const xt=pe[at];return delete pe[at],pe[ct]=xt,ve[xt].geometry[0].shift(),ve[xt].geometry[0]=Pt[0].concat(ve[xt].geometry[0]),xt}function Ot(ct,at,Pt){const xt=Pt?at[0][at[0].length-1]:at[0][0];return`${ct}:${xt.x}:${xt.y}`}for(let ct=0;ct<ce.length;ct++){const at=ce[ct],Pt=at.geometry,xt=at.text?at.text.toString():null;if(!xt){Ne(ct);continue}const yt=Ot(xt,Pt),He=Ot(xt,Pt,!0);if(yt in Ae&&He in pe&&Ae[yt]!==pe[He]){const Mt=ft(yt,He,Pt),Ct=Je(yt,He,ve[Mt].geometry);delete pe[yt],delete Ae[He],Ae[Ot(xt,ve[Ct].geometry,!0)]=Ct,ve[Mt].geometry=null}else yt in Ae?Je(yt,He,Pt):He in pe?ft(yt,He,Pt):(Ne(ct),pe[yt]=Ee-1,Ae[He]=Ee-1)}return ve.filter(ct=>ct.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((ce,pe)=>ce.sortKey-pe.sortKey)}update(n,s,h){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(n,s,this.layers,h),this.icon.programConfigurations.updatePaintArrays(n,s,this.layers,h))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(n){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(n),this.iconCollisionBox.upload(n)),this.text.upload(n,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(n,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(n,s){const h=this.lineVertexArray.length;if(n.segment!==void 0){let g=n.dist(s[n.segment+1]),_=n.dist(s[n.segment]);const x={};for(let b=n.segment+1;b<s.length;b++)x[b]={x:s[b].x,y:s[b].y,tileUnitDistanceFromAnchor:g},b<s.length-1&&(g+=s[b+1].dist(s[b]));for(let b=n.segment||0;b>=0;b--)x[b]={x:s[b].x,y:s[b].y,tileUnitDistanceFromAnchor:_},b>0&&(_+=s[b-1].dist(s[b]));for(let b=0;b<s.length;b++){const C=x[b];this.lineVertexArray.emplaceBack(C.x,C.y,C.tileUnitDistanceFromAnchor)}}return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}}addSymbols(n,s,h,g,_,x,b,C,P,R,D,j){const W=n.indexArray,J=n.layoutVertexArray,ee=n.segments.prepareSegment(4*s.length,J,W,this.canOverlap?x.sortKey:void 0),ce=this.glyphOffsetArray.length,pe=ee.vertexLength,Ae=this.allowVerticalPlacement&&b===f.ai.vertical?Math.PI/2:0,ve=x.text&&x.text.sections;for(let Ee=0;Ee<s.length;Ee++){const{tl:Ne,tr:Je,bl:ft,br:Ot,tex:ct,pixelOffsetTL:at,pixelOffsetBR:Pt,minFontScaleX:xt,minFontScaleY:yt,glyphOffset:He,isSDF:Mt,sectionIndex:Ct}=s[Ee],Ht=ee.vertexLength,Kr=He[1];Np(J,C.x,C.y,Ne.x,Kr+Ne.y,ct.x,ct.y,h,Mt,at.x,at.y,xt,yt),Np(J,C.x,C.y,Je.x,Kr+Je.y,ct.x+ct.w,ct.y,h,Mt,Pt.x,at.y,xt,yt),Np(J,C.x,C.y,ft.x,Kr+ft.y,ct.x,ct.y+ct.h,h,Mt,at.x,Pt.y,xt,yt),Np(J,C.x,C.y,Ot.x,Kr+Ot.y,ct.x+ct.w,ct.y+ct.h,h,Mt,Pt.x,Pt.y,xt,yt),uv(n.dynamicLayoutVertexArray,C,Ae),W.emplaceBack(Ht,Ht+1,Ht+2),W.emplaceBack(Ht+1,Ht+2,Ht+3),ee.vertexLength+=4,ee.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(He[0]),Ee!==s.length-1&&Ct===s[Ee+1].sectionIndex||n.programConfigurations.populatePaintArrays(J.length,x,x.index,{},j,ve&&ve[Ct])}n.placedSymbolArray.emplaceBack(C.x,C.y,ce,this.glyphOffsetArray.length-ce,pe,P,R,C.segment,h?h[0]:0,h?h[1]:0,g[0],g[1],b,0,!1,0,D)}_addCollisionDebugVertex(n,s,h,g,_,x){return s.emplaceBack(0,0),n.emplaceBack(h.x,h.y,g,_,Math.round(x.x),Math.round(x.y))}addCollisionDebugVertices(n,s,h,g,_,x,b){const C=_.segments.prepareSegment(4,_.layoutVertexArray,_.indexArray),P=C.vertexLength,R=_.layoutVertexArray,D=_.collisionVertexArray,j=b.anchorX,W=b.anchorY;this._addCollisionDebugVertex(R,D,x,j,W,new A(n,s)),this._addCollisionDebugVertex(R,D,x,j,W,new A(h,s)),this._addCollisionDebugVertex(R,D,x,j,W,new A(h,g)),this._addCollisionDebugVertex(R,D,x,j,W,new A(n,g)),C.vertexLength+=4;const J=_.indexArray;J.emplaceBack(P,P+1),J.emplaceBack(P+1,P+2),J.emplaceBack(P+2,P+3),J.emplaceBack(P+3,P),C.primitiveLength+=4}addDebugCollisionBoxes(n,s,h,g){for(let _=n;_<s;_++){const x=this.collisionBoxArray.get(_);this.addCollisionDebugVertices(x.x1,x.y1,x.x2,x.y2,g?this.textCollisionBox:this.iconCollisionBox,x.anchorPoint,h)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new dv(ci,Sb.members,yn),this.iconCollisionBox=new dv(ci,Sb.members,yn);for(let n=0;n<this.symbolInstances.length;n++){const s=this.symbolInstances.get(n);this.addDebugCollisionBoxes(s.textBoxStartIndex,s.textBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.iconBoxStartIndex,s.iconBoxEndIndex,s,!1),this.addDebugCollisionBoxes(s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex,s,!1)}}_deserializeCollisionBoxesForSymbol(n,s,h,g,_,x,b,C,P){const R={};for(let D=s;D<h;D++){const j=n.get(D);R.textBox={x1:j.x1,y1:j.y1,x2:j.x2,y2:j.y2,anchorPointX:j.anchorPointX,anchorPointY:j.anchorPointY},R.textFeatureIndex=j.featureIndex;break}for(let D=g;D<_;D++){const j=n.get(D);R.verticalTextBox={x1:j.x1,y1:j.y1,x2:j.x2,y2:j.y2,anchorPointX:j.anchorPointX,anchorPointY:j.anchorPointY},R.verticalTextFeatureIndex=j.featureIndex;break}for(let D=x;D<b;D++){const j=n.get(D);R.iconBox={x1:j.x1,y1:j.y1,x2:j.x2,y2:j.y2,anchorPointX:j.anchorPointX,anchorPointY:j.anchorPointY},R.iconFeatureIndex=j.featureIndex;break}for(let D=C;D<P;D++){const j=n.get(D);R.verticalIconBox={x1:j.x1,y1:j.y1,x2:j.x2,y2:j.y2,anchorPointX:j.anchorPointX,anchorPointY:j.anchorPointY},R.verticalIconFeatureIndex=j.featureIndex;break}return R}deserializeCollisionBoxes(n){this.collisionArrays=[];for(let s=0;s<this.symbolInstances.length;s++){const h=this.symbolInstances.get(s);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(n,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(n,s){const h=n.placedSymbolArray.get(s),g=h.vertexStartIndex+4*h.numGlyphs;for(let _=h.vertexStartIndex;_<g;_+=4)n.indexArray.emplaceBack(_,_+1,_+2),n.indexArray.emplaceBack(_+1,_+2,_+3)}getSortedSymbolIndexes(n){if(this.sortedAngle===n&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const s=Math.sin(n),h=Math.cos(n),g=[],_=[],x=[];for(let b=0;b<this.symbolInstances.length;++b){x.push(b);const C=this.symbolInstances.get(b);g.push(0|Math.round(s*C.anchorX+h*C.anchorY)),_.push(C.featureIndex)}return x.sort((b,C)=>g[b]-g[C]||_[C]-_[b]),x}addToSortKeyRanges(n,s){const h=this.sortKeyRanges[this.sortKeyRanges.length-1];h&&h.sortKey===s?h.symbolInstanceEnd=n+1:this.sortKeyRanges.push({sortKey:s,symbolInstanceStart:n,symbolInstanceEnd:n+1})}sortFeatures(n){if(this.sortFeaturesByY&&this.sortedAngle!==n&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(n),this.sortedAngle=n,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const s of this.symbolInstanceIndexes){const h=this.symbolInstances.get(s);this.featureSortOrder.push(h.featureIndex),[h.rightJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.leftJustifiedTextSymbolIndex].forEach((g,_,x)=>{g>=0&&x.indexOf(g)===_&&this.addIndicesForPlacedSymbol(this.text,g)}),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,h.verticalPlacedTextSymbolIndex),h.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.placedIconSymbolIndex),h.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let jb,Vb;_t("SymbolBucket",au,{omit:["layers","collisionBoxArray","features","compareText"]}),au.MAX_GLYPHS=65535,au.addDynamicAttributes=uv;var fv={get paint(){return Vb=Vb||new p({"icon-opacity":new Bt(Te.paint_symbol["icon-opacity"]),"icon-color":new Bt(Te.paint_symbol["icon-color"]),"icon-halo-color":new Bt(Te.paint_symbol["icon-halo-color"]),"icon-halo-width":new Bt(Te.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Bt(Te.paint_symbol["icon-halo-blur"]),"icon-translate":new It(Te.paint_symbol["icon-translate"]),"icon-translate-anchor":new It(Te.paint_symbol["icon-translate-anchor"]),"text-opacity":new Bt(Te.paint_symbol["text-opacity"]),"text-color":new Bt(Te.paint_symbol["text-color"],{runtimeType:lr,getOverride:o=>o.textColor,hasOverride:o=>!!o.textColor}),"text-halo-color":new Bt(Te.paint_symbol["text-halo-color"]),"text-halo-width":new Bt(Te.paint_symbol["text-halo-width"]),"text-halo-blur":new Bt(Te.paint_symbol["text-halo-blur"]),"text-translate":new It(Te.paint_symbol["text-translate"]),"text-translate-anchor":new It(Te.paint_symbol["text-translate-anchor"])})},get layout(){return jb=jb||new p({"symbol-placement":new It(Te.layout_symbol["symbol-placement"]),"symbol-spacing":new It(Te.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new It(Te.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Bt(Te.layout_symbol["symbol-sort-key"]),"symbol-z-order":new It(Te.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new It(Te.layout_symbol["icon-allow-overlap"]),"icon-overlap":new It(Te.layout_symbol["icon-overlap"]),"icon-ignore-placement":new It(Te.layout_symbol["icon-ignore-placement"]),"icon-optional":new It(Te.layout_symbol["icon-optional"]),"icon-rotation-alignment":new It(Te.layout_symbol["icon-rotation-alignment"]),"icon-size":new Bt(Te.layout_symbol["icon-size"]),"icon-text-fit":new It(Te.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new It(Te.layout_symbol["icon-text-fit-padding"]),"icon-image":new Bt(Te.layout_symbol["icon-image"]),"icon-rotate":new Bt(Te.layout_symbol["icon-rotate"]),"icon-padding":new Bt(Te.layout_symbol["icon-padding"]),"icon-keep-upright":new It(Te.layout_symbol["icon-keep-upright"]),"icon-offset":new Bt(Te.layout_symbol["icon-offset"]),"icon-anchor":new Bt(Te.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new It(Te.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new It(Te.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new It(Te.layout_symbol["text-rotation-alignment"]),"text-field":new Bt(Te.layout_symbol["text-field"]),"text-font":new Bt(Te.layout_symbol["text-font"]),"text-size":new Bt(Te.layout_symbol["text-size"]),"text-max-width":new Bt(Te.layout_symbol["text-max-width"]),"text-line-height":new It(Te.layout_symbol["text-line-height"]),"text-letter-spacing":new Bt(Te.layout_symbol["text-letter-spacing"]),"text-justify":new Bt(Te.layout_symbol["text-justify"]),"text-radial-offset":new Bt(Te.layout_symbol["text-radial-offset"]),"text-variable-anchor":new It(Te.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Bt(Te.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Bt(Te.layout_symbol["text-anchor"]),"text-max-angle":new It(Te.layout_symbol["text-max-angle"]),"text-writing-mode":new It(Te.layout_symbol["text-writing-mode"]),"text-rotate":new Bt(Te.layout_symbol["text-rotate"]),"text-padding":new It(Te.layout_symbol["text-padding"]),"text-keep-upright":new It(Te.layout_symbol["text-keep-upright"]),"text-transform":new Bt(Te.layout_symbol["text-transform"]),"text-offset":new Bt(Te.layout_symbol["text-offset"]),"text-allow-overlap":new It(Te.layout_symbol["text-allow-overlap"]),"text-overlap":new It(Te.layout_symbol["text-overlap"]),"text-ignore-placement":new It(Te.layout_symbol["text-ignore-placement"]),"text-optional":new It(Te.layout_symbol["text-optional"])})}};class Ub{constructor(n){if(n.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=n.property.overrides?n.property.overrides.runtimeType:Lr,this.defaultValue=n}evaluate(n){if(n.formattedSection){const s=this.defaultValue.property.overrides;if(s&&s.hasOverride(n.formattedSection))return s.getOverride(n.formattedSection)}return n.feature&&n.featureState?this.defaultValue.evaluate(n.feature,n.featureState):this.defaultValue.property.specification.default}eachChild(n){this.defaultValue.isConstant()||n(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}_t("FormatSectionOverride",Ub,{omit:["defaultValue"]});class $p extends v{constructor(n){super(n,fv)}recalculate(n,s){if(super.recalculate(n,s),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const h=this.layout.get("text-writing-mode");if(h){const g=[];for(const _ of h)g.indexOf(_)<0&&g.push(_);this.layout._values["text-writing-mode"]=g}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(n,s,h,g){const _=this.layout.get(n).evaluate(s,{},h,g),x=this._unevaluatedLayout._values[n];return x.isDataDriven()||Dl(x.value)||!_?_:function(b,C){return C.replace(/{([^{}]+)}/g,(P,R)=>b&&R in b?String(b[R]):"")}(s.properties,_)}createBucket(n){return new au(n)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const n of fv.paint.overridableProperties){if(!$p.hasPaintOverride(this.layout,n))continue;const s=this.paint.get(n),h=new Ub(s),g=new Nc(h,s.property.specification);let _=null;_=s.value.kind==="constant"||s.value.kind==="source"?new Ph("source",g):new Ih("composite",g,s.value.zoomStops),this.paint._values[n]=new Xo(s.property,_,s.parameters)}}_handleOverridablePaintPropertyUpdate(n,s,h){return!(!this.layout||s.isDataDriven()||h.isDataDriven())&&$p.hasPaintOverride(this.layout,n)}static hasPaintOverride(n,s){const h=n.get("text-field"),g=fv.paint.properties[s];let _=!1;const x=b=>{for(const C of b)if(g.overrides&&g.overrides.hasOverride(C))return void(_=!0)};if(h.value.kind==="constant"&&h.value.value instanceof An)x(h.value.value.sections);else if(h.value.kind==="source"){const b=P=>{_||(P instanceof Wn&&Yr(P.value)===Fr?x(P.value.sections):P instanceof Tc?x(P.sections):P.eachChild(b))},C=h.value;C._styleExpression&&b(C._styleExpression.expression)}return _}}let Hb;var XM={get paint(){return Hb=Hb||new p({"background-color":new It(Te.paint_background["background-color"]),"background-pattern":new i(Te.paint_background["background-pattern"]),"background-opacity":new It(Te.paint_background["background-opacity"])})}};class JM extends v{constructor(n){super(n,XM)}}let qb;var YM={get paint(){return qb=qb||new p({"raster-opacity":new It(Te.paint_raster["raster-opacity"]),"raster-hue-rotate":new It(Te.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new It(Te.paint_raster["raster-brightness-min"]),"raster-brightness-max":new It(Te.paint_raster["raster-brightness-max"]),"raster-saturation":new It(Te.paint_raster["raster-saturation"]),"raster-contrast":new It(Te.paint_raster["raster-contrast"]),"raster-resampling":new It(Te.paint_raster["raster-resampling"]),"raster-fade-duration":new It(Te.paint_raster["raster-fade-duration"])})}};class QM extends v{constructor(n){super(n,YM)}}class eA extends v{constructor(n){super(n,{}),this.onAdd=s=>{this.implementation.onAdd&&this.implementation.onAdd(s,s.painter.context.gl)},this.onRemove=s=>{this.implementation.onRemove&&this.implementation.onRemove(s,s.painter.context.gl)},this.implementation=n}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class tA{constructor(n){this._methodToThrottle=n,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const pv=63710088e-1;class Xs{constructor(n,s){if(isNaN(n)||isNaN(s))throw new Error(`Invalid LngLat object: (${n}, ${s})`);if(this.lng=+n,this.lat=+s,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Xs(fe(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(n){const s=Math.PI/180,h=this.lat*s,g=n.lat*s,_=Math.sin(h)*Math.sin(g)+Math.cos(h)*Math.cos(g)*Math.cos((n.lng-this.lng)*s);return pv*Math.acos(Math.min(_,1))}static convert(n){if(n instanceof Xs)return n;if(Array.isArray(n)&&(n.length===2||n.length===3))return new Xs(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&typeof n=="object"&&n!==null)return new Xs(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Wb=2*Math.PI*pv;function Gb(o){return Wb*Math.cos(o*Math.PI/180)}function Zb(o){return(180+o)/360}function Kb(o){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o*Math.PI/360)))/360}function Xb(o,n){return o/Gb(n)}function mv(o){return 360/Math.PI*Math.atan(Math.exp((180-360*o)*Math.PI/180))-90}class jp{constructor(n,s,h=0){this.x=+n,this.y=+s,this.z=+h}static fromLngLat(n,s=0){const h=Xs.convert(n);return new jp(Zb(h.lng),Kb(h.lat),Xb(s,h.lat))}toLngLat(){return new Xs(360*this.x-180,mv(this.y))}toAltitude(){return this.z*Gb(mv(this.y))}meterInMercatorCoordinateUnits(){return 1/Wb*(n=mv(this.y),1/Math.cos(n*Math.PI/180));var n}}function Jb(o,n,s){var h=2*Math.PI*6378137/256/Math.pow(2,s);return[o*h-2*Math.PI*6378137/2,n*h-2*Math.PI*6378137/2]}class gv{constructor(n,s,h){if(n<0||n>25||h<0||h>=Math.pow(2,n)||s<0||s>=Math.pow(2,n))throw new Error(`x=${s}, y=${h}, z=${n} outside of bounds. 0<=x<${Math.pow(2,n)}, 0<=y<${Math.pow(2,n)} 0<=z<=25 `);this.z=n,this.x=s,this.y=h,this.key=gd(0,n,n,s,h)}equals(n){return this.z===n.z&&this.x===n.x&&this.y===n.y}url(n,s,h){const g=(x=this.y,b=this.z,C=Jb(256*(_=this.x),256*(x=Math.pow(2,b)-x-1),b),P=Jb(256*(_+1),256*(x+1),b),C[0]+","+C[1]+","+P[0]+","+P[1]);var _,x,b,C,P;const R=function(D,j,W){let J,ee="";for(let ce=D;ce>0;ce--)J=1<<ce-1,ee+=(j&J?1:0)+(W&J?2:0);return ee}(this.z,this.x,this.y);return n[(this.x+this.y)%n.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(h==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,s>1?"@2x":"").replace(/{quadkey}/g,R).replace(/{bbox-epsg-3857}/g,g)}isChildOf(n){const s=this.z-n.z;return s>0&&n.x===this.x>>s&&n.y===this.y>>s}getTilePoint(n){const s=Math.pow(2,this.z);return new A((n.x*s-this.x)*On,(n.y*s-this.y)*On)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Yb{constructor(n,s){this.wrap=n,this.canonical=s,this.key=gd(n,s.z,s.z,s.x,s.y)}}class Mo{constructor(n,s,h,g,_){if(n<h)throw new Error(`overscaledZ should be >= z; overscaledZ = ${n}; z = ${h}`);this.overscaledZ=n,this.wrap=s,this.canonical=new gv(h,+g,+_),this.key=gd(s,n,h,g,_)}clone(){return new Mo(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(n){return this.overscaledZ===n.overscaledZ&&this.wrap===n.wrap&&this.canonical.equals(n.canonical)}scaledTo(n){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const s=this.canonical.z-n;return n>this.canonical.z?new Mo(n,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Mo(n,this.wrap,n,this.canonical.x>>s,this.canonical.y>>s)}calculateScaledKey(n,s){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const h=this.canonical.z-n;return n>this.canonical.z?gd(this.wrap*+s,n,this.canonical.z,this.canonical.x,this.canonical.y):gd(this.wrap*+s,n,n,this.canonical.x>>h,this.canonical.y>>h)}isChildOf(n){if(n.wrap!==this.wrap)return!1;const s=this.canonical.z-n.canonical.z;return n.overscaledZ===0||n.overscaledZ<this.overscaledZ&&n.canonical.x===this.canonical.x>>s&&n.canonical.y===this.canonical.y>>s}children(n){if(this.overscaledZ>=n)return[new Mo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const s=this.canonical.z+1,h=2*this.canonical.x,g=2*this.canonical.y;return[new Mo(s,this.wrap,s,h,g),new Mo(s,this.wrap,s,h+1,g),new Mo(s,this.wrap,s,h,g+1),new Mo(s,this.wrap,s,h+1,g+1)]}isLessThan(n){return this.wrap<n.wrap||!(this.wrap>n.wrap)&&(this.overscaledZ<n.overscaledZ||!(this.overscaledZ>n.overscaledZ)&&(this.canonical.x<n.canonical.x||!(this.canonical.x>n.canonical.x)&&this.canonical.y<n.canonical.y))}wrapped(){return new Mo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(n){return new Mo(this.overscaledZ,n,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Yb(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(n){return this.canonical.getTilePoint(new jp(n.x-this.wrap,n.y))}}function gd(o,n,s,h,g){(o*=2)<0&&(o=-1*o-1);const _=1<<s;return(_*_*o+_*g+h).toString(36)+s.toString(36)+n.toString(36)}_t("CanonicalTileID",gv),_t("OverscaledTileID",Mo,{omit:["posMatrix"]});class Qb{constructor(n,s,h,g=1,_=1,x=1,b=0){if(this.uid=n,s.height!==s.width)throw new RangeError("DEM tiles must be square");if(h&&!["mapbox","terrarium","custom"].includes(h))return void Ce(`"${h}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=s.height;const C=this.dim=s.height-2;switch(this.data=new Uint32Array(s.data.buffer),h){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=g,this.greenFactor=_,this.blueFactor=x,this.baseShift=b;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let P=0;P<C;P++)this.data[this._idx(-1,P)]=this.data[this._idx(0,P)],this.data[this._idx(C,P)]=this.data[this._idx(C-1,P)],this.data[this._idx(P,-1)]=this.data[this._idx(P,0)],this.data[this._idx(P,C)]=this.data[this._idx(P,C-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(C,-1)]=this.data[this._idx(C-1,0)],this.data[this._idx(-1,C)]=this.data[this._idx(0,C-1)],this.data[this._idx(C,C)]=this.data[this._idx(C-1,C-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let P=0;P<C;P++)for(let R=0;R<C;R++){const D=this.get(P,R);D>this.max&&(this.max=D),D<this.min&&(this.min=D)}}get(n,s){const h=new Uint8Array(this.data.buffer),g=4*this._idx(n,s);return this.unpack(h[g],h[g+1],h[g+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(n,s){if(n<-1||n>=this.dim+1||s<-1||s>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(s+1)*this.stride+(n+1)}unpack(n,s,h){return n*this.redFactor+s*this.greenFactor+h*this.blueFactor-this.baseShift}getPixels(){return new ko({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(n,s,h){if(this.dim!==n.dim)throw new Error("dem dimension mismatch");let g=s*this.dim,_=s*this.dim+this.dim,x=h*this.dim,b=h*this.dim+this.dim;switch(s){case-1:g=_-1;break;case 1:_=g+1}switch(h){case-1:x=b-1;break;case 1:b=x+1}const C=-s*this.dim,P=-h*this.dim;for(let R=x;R<b;R++)for(let D=g;D<_;D++)this.data[this._idx(D,R)]=n.data[this._idx(D+C,R+P)]}}_t("DEMData",Qb);class ew{constructor(n){this._stringToNumber={},this._numberToString=[];for(let s=0;s<n.length;s++){const h=n[s];this._stringToNumber[h]=s,this._numberToString[s]=h}}encode(n){return this._stringToNumber[n]}decode(n){if(n>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${n} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[n]}}class tw{constructor(n,s,h,g,_){this.type="Feature",this._vectorTileFeature=n,n._z=s,n._x=h,n._y=g,this.properties=n.properties,this.id=_}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(n){this._geometry=n}toJSON(){const n={geometry:this.geometry};for(const s in this)s!=="_geometry"&&s!=="_vectorTileFeature"&&(n[s]=this[s]);return n}}class rw{constructor(n,s){this.tileID=n,this.x=n.canonical.x,this.y=n.canonical.y,this.z=n.canonical.z,this.grid=new Ns(On,16,0),this.grid3D=new Ns(On,16,0),this.featureIndexArray=new Po,this.promoteId=s}insert(n,s,h,g,_,x){const b=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,g,_);const C=x?this.grid3D:this.grid;for(let P=0;P<s.length;P++){const R=s[P],D=[1/0,1/0,-1/0,-1/0];for(let j=0;j<R.length;j++){const W=R[j];D[0]=Math.min(D[0],W.x),D[1]=Math.min(D[1],W.y),D[2]=Math.max(D[2],W.x),D[3]=Math.max(D[3],W.y)}D[0]<On&&D[1]<On&&D[2]>=0&&D[3]>=0&&C.insert(b,D[0],D[1],D[2],D[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Gs.VectorTile(new iv(this.rawTileData)).layers,this.sourceLayerCoder=new ew(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(n,s,h,g){this.loadVTLayers();const _=n.params||{},x=On/n.tileSize/n.scale,b=vi(_.filter),C=n.queryGeometry,P=n.queryPadding*x,R=iw(C),D=this.grid.query(R.minX-P,R.minY-P,R.maxX+P,R.maxY+P),j=iw(n.cameraQueryGeometry),W=this.grid3D.query(j.minX-P,j.minY-P,j.maxX+P,j.maxY+P,(ce,pe,Ae,ve)=>function(Ee,Ne,Je,ft,Ot){for(const at of Ee)if(Ne<=at.x&&Je<=at.y&&ft>=at.x&&Ot>=at.y)return!0;const ct=[new A(Ne,Je),new A(Ne,Ot),new A(ft,Ot),new A(ft,Je)];if(Ee.length>2){for(const at of ct)if(Qc(Ee,at))return!0}for(let at=0;at<Ee.length-1;at++)if(Dk(Ee[at],Ee[at+1],ct))return!0;return!1}(n.cameraQueryGeometry,ce-P,pe-P,Ae+P,ve+P));for(const ce of W)D.push(ce);D.sort(rA);const J={};let ee;for(let ce=0;ce<D.length;ce++){const pe=D[ce];if(pe===ee)continue;ee=pe;const Ae=this.featureIndexArray.get(pe);let ve=null;this.loadMatchingFeature(J,Ae.bucketIndex,Ae.sourceLayerIndex,Ae.featureIndex,b,_.layers,_.availableImages,s,h,g,(Ee,Ne,Je)=>(ve||(ve=Wl(Ee)),Ne.queryIntersectsFeature(C,Ee,Je,ve,this.z,n.transform,x,n.pixelPosMatrix)))}return J}loadMatchingFeature(n,s,h,g,_,x,b,C,P,R,D){const j=this.bucketLayerIDs[s];if(x&&!function(ce,pe){for(let Ae=0;Ae<ce.length;Ae++)if(pe.indexOf(ce[Ae])>=0)return!0;return!1}(x,j))return;const W=this.sourceLayerCoder.decode(h),J=this.vtLayers[W].feature(g);if(_.needGeometry){const ce=Gl(J,!0);if(!_.filter(new tn(this.tileID.overscaledZ),ce,this.tileID.canonical))return}else if(!_.filter(new tn(this.tileID.overscaledZ),J))return;const ee=this.getId(J,W);for(let ce=0;ce<j.length;ce++){const pe=j[ce];if(x&&x.indexOf(pe)<0)continue;const Ae=C[pe];if(!Ae)continue;let ve={};ee&&R&&(ve=R.getState(Ae.sourceLayer||"_geojsonTileLayer",ee));const Ee=ie({},P[pe]);Ee.paint=nw(Ee.paint,Ae.paint,J,ve,b),Ee.layout=nw(Ee.layout,Ae.layout,J,ve,b);const Ne=!D||D(J,Ae,ve);if(!Ne)continue;const Je=new tw(J,this.z,this.x,this.y,ee);Je.layer=Ee;let ft=n[pe];ft===void 0&&(ft=n[pe]=[]),ft.push({featureIndex:g,feature:Je,intersectionZ:Ne})}}lookupSymbolFeatures(n,s,h,g,_,x,b,C){const P={};this.loadVTLayers();const R=vi(_);for(const D of n)this.loadMatchingFeature(P,h,g,D,R,x,b,C,s);return P}hasLayer(n){for(const s of this.bucketLayerIDs)for(const h of s)if(n===h)return!0;return!1}getId(n,s){let h=n.id;return this.promoteId&&(h=n.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[s]],typeof h=="boolean"&&(h=Number(h))),h}}function nw(o,n,s,h,g){return be(o,(_,x)=>{const b=n instanceof Wc?n.get(x):null;return b&&b.evaluate?b.evaluate(s,h,g):b})}function iw(o){let n=1/0,s=1/0,h=-1/0,g=-1/0;for(const _ of o)n=Math.min(n,_.x),s=Math.min(s,_.y),h=Math.max(h,_.x),g=Math.max(g,_.y);return{minX:n,minY:s,maxX:h,maxY:g}}function rA(o,n){return n-o}function ow(o,n,s,h,g){const _=[];for(let x=0;x<o.length;x++){const b=o[x];let C;for(let P=0;P<b.length-1;P++){let R=b[P],D=b[P+1];R.x<n&&D.x<n||(R.x<n?R=new A(n,R.y+(n-R.x)/(D.x-R.x)*(D.y-R.y))._round():D.x<n&&(D=new A(n,R.y+(n-R.x)/(D.x-R.x)*(D.y-R.y))._round()),R.y<s&&D.y<s||(R.y<s?R=new A(R.x+(s-R.y)/(D.y-R.y)*(D.x-R.x),s)._round():D.y<s&&(D=new A(R.x+(s-R.y)/(D.y-R.y)*(D.x-R.x),s)._round()),R.x>=h&&D.x>=h||(R.x>=h?R=new A(h,R.y+(h-R.x)/(D.x-R.x)*(D.y-R.y))._round():D.x>=h&&(D=new A(h,R.y+(h-R.x)/(D.x-R.x)*(D.y-R.y))._round()),R.y>=g&&D.y>=g||(R.y>=g?R=new A(R.x+(g-R.y)/(D.y-R.y)*(D.x-R.x),g)._round():D.y>=g&&(D=new A(R.x+(g-R.y)/(D.y-R.y)*(D.x-R.x),g)._round()),C&&R.equals(C[C.length-1])||(C=[R],_.push(C)),C.push(D)))))}}return _}_t("FeatureIndex",rw,{omit:["rawTileData","sourceLayerCoder"]});class Js extends A{constructor(n,s,h,g){super(n,s),this.angle=h,g!==void 0&&(this.segment=g)}clone(){return new Js(this.x,this.y,this.angle,this.segment)}}function aw(o,n,s,h,g){if(n.segment===void 0||s===0)return!0;let _=n,x=n.segment+1,b=0;for(;b>-s/2;){if(x--,x<0)return!1;b-=o[x].dist(_),_=o[x]}b+=o[x].dist(o[x+1]),x++;const C=[];let P=0;for(;b<s/2;){const R=o[x],D=o[x+1];if(!D)return!1;let j=o[x-1].angleTo(R)-R.angleTo(D);for(j=Math.abs((j+3*Math.PI)%(2*Math.PI)-Math.PI),C.push({distance:b,angleDelta:j}),P+=j;b-C[0].distance>h;)P-=C.shift().angleDelta;if(P>g)return!1;x++,b+=R.dist(D)}return!0}function sw(o){let n=0;for(let s=0;s<o.length-1;s++)n+=o[s].dist(o[s+1]);return n}function lw(o,n,s){return o?.6*n*s:0}function cw(o,n){return Math.max(o?o.right-o.left:0,n?n.right-n.left:0)}function nA(o,n,s,h,g,_){const x=lw(s,g,_),b=cw(s,h)*_;let C=0;const P=sw(o)/2;for(let R=0;R<o.length-1;R++){const D=o[R],j=o[R+1],W=D.dist(j);if(C+W>P){const J=(P-C)/W,ee=Qn.number(D.x,j.x,J),ce=Qn.number(D.y,j.y,J),pe=new Js(ee,ce,j.angleTo(D),R);return pe._round(),!x||aw(o,pe,b,x,n)?pe:void 0}C+=W}}function iA(o,n,s,h,g,_,x,b,C){const P=lw(h,_,x),R=cw(h,g),D=R*x,j=o[0].x===0||o[0].x===C||o[0].y===0||o[0].y===C;return n-D<n/4&&(n=D+n/4),uw(o,j?n/2*b%n:(R/2+2*_)*x*b%n,n,P,s,D,j,!1,C)}function uw(o,n,s,h,g,_,x,b,C){const P=_/2,R=sw(o);let D=0,j=n-s,W=[];for(let J=0;J<o.length-1;J++){const ee=o[J],ce=o[J+1],pe=ee.dist(ce),Ae=ce.angleTo(ee);for(;j+s<D+pe;){j+=s;const ve=(j-D)/pe,Ee=Qn.number(ee.x,ce.x,ve),Ne=Qn.number(ee.y,ce.y,ve);if(Ee>=0&&Ee<C&&Ne>=0&&Ne<C&&j-P>=0&&j+P<=R){const Je=new Js(Ee,Ne,Ae,J);Je._round(),h&&!aw(o,Je,_,h,g)||W.push(Je)}}D+=pe}return b||W.length||x||(W=uw(o,D/2,s,h,g,_,x,!0,C)),W}_t("Anchor",Js);const su=Ji;function hw(o,n,s,h){const g=[],_=o.image,x=_.pixelRatio,b=_.paddedRect.w-2*su,C=_.paddedRect.h-2*su;let P={x1:o.left,y1:o.top,x2:o.right,y2:o.bottom};const R=_.stretchX||[[0,b]],D=_.stretchY||[[0,C]],j=(He,Mt)=>He+Mt[1]-Mt[0],W=R.reduce(j,0),J=D.reduce(j,0),ee=b-W,ce=C-J;let pe=0,Ae=W,ve=0,Ee=J,Ne=0,Je=ee,ft=0,Ot=ce;if(_.content&&h){const He=_.content,Mt=He[2]-He[0],Ct=He[3]-He[1];(_.textFitWidth||_.textFitHeight)&&(P=Bb(o)),pe=Vp(R,0,He[0]),ve=Vp(D,0,He[1]),Ae=Vp(R,He[0],He[2]),Ee=Vp(D,He[1],He[3]),Ne=He[0]-pe,ft=He[1]-ve,Je=Mt-Ae,Ot=Ct-Ee}const ct=P.x1,at=P.y1,Pt=P.x2-ct,xt=P.y2-at,yt=(He,Mt,Ct,Ht)=>{const Kr=Up(He.stretch-pe,Ae,Pt,ct),Wr=Hp(He.fixed-Ne,Je,He.stretch,W),Zn=Up(Mt.stretch-ve,Ee,xt,at),Jo=Hp(Mt.fixed-ft,Ot,Mt.stretch,J),di=Up(Ct.stretch-pe,Ae,Pt,ct),In=Hp(Ct.fixed-Ne,Je,Ct.stretch,W),Di=Up(Ht.stretch-ve,Ee,xt,at),Fi=Hp(Ht.fixed-ft,Ot,Ht.stretch,J),Oi=new A(Kr,Zn),kn=new A(di,Zn),Kn=new A(di,Di),xi=new A(Kr,Di),fi=new A(Wr/x,Jo/x),Bi=new A(In/x,Fi/x),pi=n*Math.PI/180;if(pi){const Pr=Math.sin(pi),rn=Math.cos(pi),dn=[rn,-Pr,Pr,rn];Oi._matMult(dn),kn._matMult(dn),xi._matMult(dn),Kn._matMult(dn)}const Ao=He.stretch+He.fixed,Yi=Mt.stretch+Mt.fixed;return{tl:Oi,tr:kn,bl:xi,br:Kn,tex:{x:_.paddedRect.x+su+Ao,y:_.paddedRect.y+su+Yi,w:Ct.stretch+Ct.fixed-Ao,h:Ht.stretch+Ht.fixed-Yi},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:fi,pixelOffsetBR:Bi,minFontScaleX:Je/x/Pt,minFontScaleY:Ot/x/xt,isSDF:s}};if(h&&(_.stretchX||_.stretchY)){const He=dw(R,ee,W),Mt=dw(D,ce,J);for(let Ct=0;Ct<He.length-1;Ct++){const Ht=He[Ct],Kr=He[Ct+1];for(let Wr=0;Wr<Mt.length-1;Wr++)g.push(yt(Ht,Mt[Wr],Kr,Mt[Wr+1]))}}else g.push(yt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:b+1},{fixed:0,stretch:C+1}));return g}function Vp(o,n,s){let h=0;for(const g of o)h+=Math.max(n,Math.min(s,g[1]))-Math.max(n,Math.min(s,g[0]));return h}function dw(o,n,s){const h=[{fixed:-su,stretch:0}];for(const[g,_]of o){const x=h[h.length-1];h.push({fixed:g-x.stretch,stretch:x.stretch}),h.push({fixed:g-x.stretch,stretch:x.stretch+(_-g)})}return h.push({fixed:n+su,stretch:s}),h}function Up(o,n,s,h){return o/n*s+h}function Hp(o,n,s,h){return o-n*s/h}class qp{constructor(n,s,h,g,_,x,b,C,P,R){var D;if(this.boxStartIndex=n.length,P){let j=x.top,W=x.bottom;const J=x.collisionPadding;J&&(j-=J[1],W+=J[3]);let ee=W-j;ee>0&&(ee=Math.max(10,ee),this.circleDiameter=ee)}else{const j=!((D=x.image)===null||D===void 0)&&D.content&&(x.image.textFitWidth||x.image.textFitHeight)?Bb(x):{x1:x.left,y1:x.top,x2:x.right,y2:x.bottom};j.y1=j.y1*b-C[0],j.y2=j.y2*b+C[2],j.x1=j.x1*b-C[3],j.x2=j.x2*b+C[1];const W=x.collisionPadding;if(W&&(j.x1-=W[0]*b,j.y1-=W[1]*b,j.x2+=W[2]*b,j.y2+=W[3]*b),R){const J=new A(j.x1,j.y1),ee=new A(j.x2,j.y1),ce=new A(j.x1,j.y2),pe=new A(j.x2,j.y2),Ae=R*Math.PI/180;J._rotate(Ae),ee._rotate(Ae),ce._rotate(Ae),pe._rotate(Ae),j.x1=Math.min(J.x,ee.x,ce.x,pe.x),j.x2=Math.max(J.x,ee.x,ce.x,pe.x),j.y1=Math.min(J.y,ee.y,ce.y,pe.y),j.y2=Math.max(J.y,ee.y,ce.y,pe.y)}n.emplaceBack(s.x,s.y,j.x1,j.y1,j.x2,j.y2,h,g,_)}this.boxEndIndex=n.length}}class oA{constructor(n=[],s=(h,g)=>h<g?-1:h>g?1:0){if(this.data=n,this.length=this.data.length,this.compare=s,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(n){this.data.push(n),this._up(this.length++)}pop(){if(this.length===0)return;const n=this.data[0],s=this.data.pop();return--this.length>0&&(this.data[0]=s,this._down(0)),n}peek(){return this.data[0]}_up(n){const{data:s,compare:h}=this,g=s[n];for(;n>0;){const _=n-1>>1,x=s[_];if(h(g,x)>=0)break;s[n]=x,n=_}s[n]=g}_down(n){const{data:s,compare:h}=this,g=this.length>>1,_=s[n];for(;n<g;){let x=1+(n<<1);const b=x+1;if(b<this.length&&h(s[b],s[x])<0&&(x=b),h(s[x],_)>=0)break;s[n]=s[x],n=x}s[n]=_}}function aA(o,n=1,s=!1){let h=1/0,g=1/0,_=-1/0,x=-1/0;const b=o[0];for(let W=0;W<b.length;W++){const J=b[W];(!W||J.x<h)&&(h=J.x),(!W||J.y<g)&&(g=J.y),(!W||J.x>_)&&(_=J.x),(!W||J.y>x)&&(x=J.y)}const C=Math.min(_-h,x-g);let P=C/2;const R=new oA([],sA);if(C===0)return new A(h,g);for(let W=h;W<_;W+=C)for(let J=g;J<x;J+=C)R.push(new lu(W+P,J+P,P,o));let D=function(W){let J=0,ee=0,ce=0;const pe=W[0];for(let Ae=0,ve=pe.length,Ee=ve-1;Ae<ve;Ee=Ae++){const Ne=pe[Ae],Je=pe[Ee],ft=Ne.x*Je.y-Je.x*Ne.y;ee+=(Ne.x+Je.x)*ft,ce+=(Ne.y+Je.y)*ft,J+=3*ft}return new lu(ee/J,ce/J,0,W)}(o),j=R.length;for(;R.length;){const W=R.pop();(W.d>D.d||!D.d)&&(D=W,s&&console.log("found best %d after %d probes",Math.round(1e4*W.d)/1e4,j)),W.max-D.d<=n||(P=W.h/2,R.push(new lu(W.p.x-P,W.p.y-P,P,o)),R.push(new lu(W.p.x+P,W.p.y-P,P,o)),R.push(new lu(W.p.x-P,W.p.y+P,P,o)),R.push(new lu(W.p.x+P,W.p.y+P,P,o)),j+=4)}return s&&(console.log(`num probes: ${j}`),console.log(`best distance: ${D.d}`)),D.p}function sA(o,n){return n.max-o.max}function lu(o,n,s,h){this.p=new A(o,n),this.h=s,this.d=function(g,_){let x=!1,b=1/0;for(let C=0;C<_.length;C++){const P=_[C];for(let R=0,D=P.length,j=D-1;R<D;j=R++){const W=P[R],J=P[j];W.y>g.y!=J.y>g.y&&g.x<(J.x-W.x)*(g.y-W.y)/(J.y-W.y)+W.x&&(x=!x),b=Math.min(b,Kx(g,W,J))}}return(x?1:-1)*Math.sqrt(b)}(this.p,h),this.max=this.d+this.h*Math.SQRT2}var hi;f.ar=void 0,(hi=f.ar||(f.ar={}))[hi.center=1]="center",hi[hi.left=2]="left",hi[hi.right=3]="right",hi[hi.top=4]="top",hi[hi.bottom=5]="bottom",hi[hi["top-left"]=6]="top-left",hi[hi["top-right"]=7]="top-right",hi[hi["bottom-left"]=8]="bottom-left",hi[hi["bottom-right"]=9]="bottom-right";const Ys=7,yv=Number.POSITIVE_INFINITY;function fw(o,n){return n[1]!==yv?function(s,h,g){let _=0,x=0;switch(h=Math.abs(h),g=Math.abs(g),s){case"top-right":case"top-left":case"top":x=g-Ys;break;case"bottom-right":case"bottom-left":case"bottom":x=-g+Ys}switch(s){case"top-right":case"bottom-right":case"right":_=-h;break;case"top-left":case"bottom-left":case"left":_=h}return[_,x]}(o,n[0],n[1]):function(s,h){let g=0,_=0;h<0&&(h=0);const x=h/Math.SQRT2;switch(s){case"top-right":case"top-left":_=x-Ys;break;case"bottom-right":case"bottom-left":_=-x+Ys;break;case"bottom":_=-h+Ys;break;case"top":_=h-Ys}switch(s){case"top-right":case"bottom-right":g=-x;break;case"top-left":case"bottom-left":g=x;break;case"left":g=h;break;case"right":g=-h}return[g,_]}(o,n[0])}function pw(o,n,s){var h;const g=o.layout,_=(h=g.get("text-variable-anchor-offset"))===null||h===void 0?void 0:h.evaluate(n,{},s);if(_){const b=_.values,C=[];for(let P=0;P<b.length;P+=2){const R=C[P]=b[P],D=b[P+1].map(j=>j*Un);R.startsWith("top")?D[1]-=Ys:R.startsWith("bottom")&&(D[1]+=Ys),C[P+1]=D}return new $n(C)}const x=g.get("text-variable-anchor");if(x){let b;b=o._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[g.get("text-radial-offset").evaluate(n,{},s)*Un,yv]:g.get("text-offset").evaluate(n,{},s).map(P=>P*Un);const C=[];for(const P of x)C.push(P,fw(P,b));return new $n(C)}return null}function vv(o){switch(o){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function lA(o,n,s,h,g,_,x,b,C,P,R){let D=_.textMaxSize.evaluate(n,{});D===void 0&&(D=x);const j=o.layers[0].layout,W=j.get("icon-offset").evaluate(n,{},R),J=gw(s.horizontal),ee=x/24,ce=o.tilePixelRatio*ee,pe=o.tilePixelRatio*D/24,Ae=o.tilePixelRatio*b,ve=o.tilePixelRatio*j.get("symbol-spacing"),Ee=j.get("text-padding")*o.tilePixelRatio,Ne=function(He,Mt,Ct,Ht=1){const Kr=He.get("icon-padding").evaluate(Mt,{},Ct),Wr=Kr&&Kr.values;return[Wr[0]*Ht,Wr[1]*Ht,Wr[2]*Ht,Wr[3]*Ht]}(j,n,R,o.tilePixelRatio),Je=j.get("text-max-angle")/180*Math.PI,ft=j.get("text-rotation-alignment")!=="viewport"&&j.get("symbol-placement")!=="point",Ot=j.get("icon-rotation-alignment")==="map"&&j.get("symbol-placement")!=="point",ct=j.get("symbol-placement"),at=ve/2,Pt=j.get("icon-text-fit");let xt;h&&Pt!=="none"&&(o.allowVerticalPlacement&&s.vertical&&(xt=Nb(h,s.vertical,Pt,j.get("icon-text-fit-padding"),W,ee)),J&&(h=Nb(h,J,Pt,j.get("icon-text-fit-padding"),W,ee)));const yt=(He,Mt)=>{Mt.x<0||Mt.x>=On||Mt.y<0||Mt.y>=On||function(Ct,Ht,Kr,Wr,Zn,Jo,di,In,Di,Fi,Oi,kn,Kn,xi,fi,Bi,pi,Ao,Yi,Pr,rn,dn,uo,wn,cu){const ja=Ct.addToLineVertexArray(Ht,Kr);let Va,Yo,zo,ri,cs=0,_d=0,xw=0,bw=0,Tv=-1,Pv=-1;const us={};let ww=Jc("");if(Ct.allowVerticalPlacement&&Wr.vertical){const bi=In.layout.get("text-rotate").evaluate(rn,{},wn)+90;zo=new qp(Di,Ht,Fi,Oi,kn,Wr.vertical,Kn,xi,fi,bi),di&&(ri=new qp(Di,Ht,Fi,Oi,kn,di,pi,Ao,fi,bi))}if(Zn){const bi=In.layout.get("icon-rotate").evaluate(rn,{}),Ro=In.layout.get("icon-text-fit")!=="none",Kl=hw(Zn,bi,uo,Ro),ga=di?hw(di,bi,uo,Ro):void 0;Yo=new qp(Di,Ht,Fi,Oi,kn,Zn,pi,Ao,!1,bi),cs=4*Kl.length;const Xl=Ct.iconSizeData;let Ua=null;Xl.kind==="source"?(Ua=[$a*In.layout.get("icon-size").evaluate(rn,{})],Ua[0]>Ks&&Ce(`${Ct.layerIds[0]}: Value for "icon-size" is >= ${md}. Reduce your "icon-size".`)):Xl.kind==="composite"&&(Ua=[$a*dn.compositeIconSizes[0].evaluate(rn,{},wn),$a*dn.compositeIconSizes[1].evaluate(rn,{},wn)],(Ua[0]>Ks||Ua[1]>Ks)&&Ce(`${Ct.layerIds[0]}: Value for "icon-size" is >= ${md}. Reduce your "icon-size".`)),Ct.addSymbols(Ct.icon,Kl,Ua,Pr,Yi,rn,f.ai.none,Ht,ja.lineStartIndex,ja.lineLength,-1,wn),Tv=Ct.icon.placedSymbolArray.length-1,ga&&(_d=4*ga.length,Ct.addSymbols(Ct.icon,ga,Ua,Pr,Yi,rn,f.ai.vertical,Ht,ja.lineStartIndex,ja.lineLength,-1,wn),Pv=Ct.icon.placedSymbolArray.length-1)}const Sw=Object.keys(Wr.horizontal);for(const bi of Sw){const Ro=Wr.horizontal[bi];if(!Va){ww=Jc(Ro.text);const ga=In.layout.get("text-rotate").evaluate(rn,{},wn);Va=new qp(Di,Ht,Fi,Oi,kn,Ro,Kn,xi,fi,ga)}const Kl=Ro.positionedLines.length===1;if(xw+=mw(Ct,Ht,Ro,Jo,In,fi,rn,Bi,ja,Wr.vertical?f.ai.horizontal:f.ai.horizontalOnly,Kl?Sw:[bi],us,Tv,dn,wn),Kl)break}Wr.vertical&&(bw+=mw(Ct,Ht,Wr.vertical,Jo,In,fi,rn,Bi,ja,f.ai.vertical,["vertical"],us,Pv,dn,wn));const hA=Va?Va.boxStartIndex:Ct.collisionBoxArray.length,dA=Va?Va.boxEndIndex:Ct.collisionBoxArray.length,fA=zo?zo.boxStartIndex:Ct.collisionBoxArray.length,pA=zo?zo.boxEndIndex:Ct.collisionBoxArray.length,mA=Yo?Yo.boxStartIndex:Ct.collisionBoxArray.length,gA=Yo?Yo.boxEndIndex:Ct.collisionBoxArray.length,yA=ri?ri.boxStartIndex:Ct.collisionBoxArray.length,vA=ri?ri.boxEndIndex:Ct.collisionBoxArray.length;let ma=-1;const Gp=(bi,Ro)=>bi&&bi.circleDiameter?Math.max(bi.circleDiameter,Ro):Ro;ma=Gp(Va,ma),ma=Gp(zo,ma),ma=Gp(Yo,ma),ma=Gp(ri,ma);const Cw=ma>-1?1:0;Cw&&(ma*=cu/Un),Ct.glyphOffsetArray.length>=au.MAX_GLYPHS&&Ce("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),rn.sortKey!==void 0&&Ct.addToSortKeyRanges(Ct.symbolInstances.length,rn.sortKey);const _A=pw(In,rn,wn),[xA,bA]=function(bi,Ro){const Kl=bi.length,ga=Ro==null?void 0:Ro.values;if((ga==null?void 0:ga.length)>0)for(let Xl=0;Xl<ga.length;Xl+=2){const Ua=ga[Xl+1];bi.emplaceBack(f.ar[ga[Xl]],Ua[0],Ua[1])}return[Kl,bi.length]}(Ct.textAnchorOffsets,_A);Ct.symbolInstances.emplaceBack(Ht.x,Ht.y,us.right>=0?us.right:-1,us.center>=0?us.center:-1,us.left>=0?us.left:-1,us.vertical||-1,Tv,Pv,ww,hA,dA,fA,pA,mA,gA,yA,vA,Fi,xw,bw,cs,_d,Cw,0,Kn,ma,xA,bA)}(o,Mt,He,s,h,g,xt,o.layers[0],o.collisionBoxArray,n.index,n.sourceLayerIndex,o.index,ce,[Ee,Ee,Ee,Ee],ft,C,Ae,Ne,Ot,W,n,_,P,R,x)};if(ct==="line")for(const He of ow(n.geometry,0,0,On,On)){const Mt=iA(He,ve,Je,s.vertical||J,h,24,pe,o.overscaling,On);for(const Ct of Mt)J&&cA(o,J.text,at,Ct)||yt(He,Ct)}else if(ct==="line-center"){for(const He of n.geometry)if(He.length>1){const Mt=nA(He,Je,s.vertical||J,h,24,pe);Mt&&yt(He,Mt)}}else if(n.type==="Polygon")for(const He of Ic(n.geometry,0)){const Mt=aA(He,16);yt(He[0],new Js(Mt.x,Mt.y,0))}else if(n.type==="LineString")for(const He of n.geometry)yt(He,new Js(He[0].x,He[0].y,0));else if(n.type==="Point")for(const He of n.geometry)for(const Mt of He)yt([Mt],new Js(Mt.x,Mt.y,0))}function mw(o,n,s,h,g,_,x,b,C,P,R,D,j,W,J){const ee=function(Ae,ve,Ee,Ne,Je,ft,Ot,ct){const at=Ne.layout.get("text-rotate").evaluate(ft,{})*Math.PI/180,Pt=[];for(const xt of ve.positionedLines)for(const yt of xt.positionedGlyphs){if(!yt.rect)continue;const He=yt.rect||{};let Mt=Ab+1,Ct=!0,Ht=1,Kr=0;const Wr=(Je||ct)&&yt.vertical,Zn=yt.metrics.advance*yt.scale/2;if(ct&&ve.verticalizable&&(Kr=xt.lineOffset/2-(yt.imageName?-(Un-yt.metrics.width*yt.scale)/2:(yt.scale-1)*Un)),yt.imageName){const Pr=Ot[yt.imageName];Ct=Pr.sdf,Ht=Pr.pixelRatio,Mt=Ji/Ht}const Jo=Je?[yt.x+Zn,yt.y]:[0,0];let di=Je?[0,0]:[yt.x+Zn+Ee[0],yt.y+Ee[1]-Kr],In=[0,0];Wr&&(In=di,di=[0,0]);const Di=yt.metrics.isDoubleResolution?2:1,Fi=(yt.metrics.left-Mt)*yt.scale-Zn+di[0],Oi=(-yt.metrics.top-Mt)*yt.scale+di[1],kn=Fi+He.w/Di*yt.scale/Ht,Kn=Oi+He.h/Di*yt.scale/Ht,xi=new A(Fi,Oi),fi=new A(kn,Oi),Bi=new A(Fi,Kn),pi=new A(kn,Kn);if(Wr){const Pr=new A(-Zn,Zn-fd),rn=-Math.PI/2,dn=Un/2-Zn,uo=new A(5-fd-dn,-(yt.imageName?dn:0)),wn=new A(...In);xi._rotateAround(rn,Pr)._add(uo)._add(wn),fi._rotateAround(rn,Pr)._add(uo)._add(wn),Bi._rotateAround(rn,Pr)._add(uo)._add(wn),pi._rotateAround(rn,Pr)._add(uo)._add(wn)}if(at){const Pr=Math.sin(at),rn=Math.cos(at),dn=[rn,-Pr,Pr,rn];xi._matMult(dn),fi._matMult(dn),Bi._matMult(dn),pi._matMult(dn)}const Ao=new A(0,0),Yi=new A(0,0);Pt.push({tl:xi,tr:fi,bl:Bi,br:pi,tex:He,writingMode:ve.writingMode,glyphOffset:Jo,sectionIndex:yt.sectionIndex,isSDF:Ct,pixelOffsetTL:Ao,pixelOffsetBR:Yi,minFontScaleX:0,minFontScaleY:0})}return Pt}(0,s,b,g,_,x,h,o.allowVerticalPlacement),ce=o.textSizeData;let pe=null;ce.kind==="source"?(pe=[$a*g.layout.get("text-size").evaluate(x,{})],pe[0]>Ks&&Ce(`${o.layerIds[0]}: Value for "text-size" is >= ${md}. Reduce your "text-size".`)):ce.kind==="composite"&&(pe=[$a*W.compositeTextSizes[0].evaluate(x,{},J),$a*W.compositeTextSizes[1].evaluate(x,{},J)],(pe[0]>Ks||pe[1]>Ks)&&Ce(`${o.layerIds[0]}: Value for "text-size" is >= ${md}. Reduce your "text-size".`)),o.addSymbols(o.text,ee,pe,b,_,x,P,n,C.lineStartIndex,C.lineLength,j,J);for(const Ae of R)D[Ae]=o.text.placedSymbolArray.length-1;return 4*ee.length}function gw(o){for(const n in o)return o[n];return null}function cA(o,n,s,h){const g=o.compareText;if(n in g){const _=g[n];for(let x=_.length-1;x>=0;x--)if(h.dist(_[x])<s)return!0}else g[n]=[];return g[n].push(h),!1}const yw=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class _v{static from(n){if(!(n instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[s,h]=new Uint8Array(n,0,2);if(s!==219)throw new Error("Data does not appear to be in a KDBush format.");const g=h>>4;if(g!==1)throw new Error(`Got v${g} data when expected v1.`);const _=yw[15&h];if(!_)throw new Error("Unrecognized array type.");const[x]=new Uint16Array(n,2,1),[b]=new Uint32Array(n,4,1);return new _v(b,x,_,n)}constructor(n,s=64,h=Float64Array,g){if(isNaN(n)||n<0)throw new Error(`Unpexpected numItems value: ${n}.`);this.numItems=+n,this.nodeSize=Math.min(Math.max(+s,2),65535),this.ArrayType=h,this.IndexArrayType=n<65536?Uint16Array:Uint32Array;const _=yw.indexOf(this.ArrayType),x=2*n*this.ArrayType.BYTES_PER_ELEMENT,b=n*this.IndexArrayType.BYTES_PER_ELEMENT,C=(8-b%8)%8;if(_<0)throw new Error(`Unexpected typed array class: ${h}.`);g&&g instanceof ArrayBuffer?(this.data=g,this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+b+C,2*n),this._pos=2*n,this._finished=!0):(this.data=new ArrayBuffer(8+x+b+C),this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+b+C,2*n),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+_]),new Uint16Array(this.data,2,1)[0]=s,new Uint32Array(this.data,4,1)[0]=n)}add(n,s){const h=this._pos>>1;return this.ids[h]=h,this.coords[this._pos++]=n,this.coords[this._pos++]=s,h}finish(){const n=this._pos>>1;if(n!==this.numItems)throw new Error(`Added ${n} items when expected ${this.numItems}.`);return xv(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(n,s,h,g){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:_,coords:x,nodeSize:b}=this,C=[0,_.length-1,0],P=[];for(;C.length;){const R=C.pop()||0,D=C.pop()||0,j=C.pop()||0;if(D-j<=b){for(let ce=j;ce<=D;ce++){const pe=x[2*ce],Ae=x[2*ce+1];pe>=n&&pe<=h&&Ae>=s&&Ae<=g&&P.push(_[ce])}continue}const W=j+D>>1,J=x[2*W],ee=x[2*W+1];J>=n&&J<=h&&ee>=s&&ee<=g&&P.push(_[W]),(R===0?n<=J:s<=ee)&&(C.push(j),C.push(W-1),C.push(1-R)),(R===0?h>=J:g>=ee)&&(C.push(W+1),C.push(D),C.push(1-R))}return P}within(n,s,h){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:g,coords:_,nodeSize:x}=this,b=[0,g.length-1,0],C=[],P=h*h;for(;b.length;){const R=b.pop()||0,D=b.pop()||0,j=b.pop()||0;if(D-j<=x){for(let ce=j;ce<=D;ce++)_w(_[2*ce],_[2*ce+1],n,s)<=P&&C.push(g[ce]);continue}const W=j+D>>1,J=_[2*W],ee=_[2*W+1];_w(J,ee,n,s)<=P&&C.push(g[W]),(R===0?n-h<=J:s-h<=ee)&&(b.push(j),b.push(W-1),b.push(1-R)),(R===0?n+h>=J:s+h>=ee)&&(b.push(W+1),b.push(D),b.push(1-R))}return C}}function xv(o,n,s,h,g,_){if(g-h<=s)return;const x=h+g>>1;vw(o,n,x,h,g,_),xv(o,n,s,h,x-1,1-_),xv(o,n,s,x+1,g,1-_)}function vw(o,n,s,h,g,_){for(;g>h;){if(g-h>600){const P=g-h+1,R=s-h+1,D=Math.log(P),j=.5*Math.exp(2*D/3),W=.5*Math.sqrt(D*j*(P-j)/P)*(R-P/2<0?-1:1);vw(o,n,s,Math.max(h,Math.floor(s-R*j/P+W)),Math.min(g,Math.floor(s+(P-R)*j/P+W)),_)}const x=n[2*s+_];let b=h,C=g;for(yd(o,n,h,s),n[2*g+_]>x&&yd(o,n,h,g);b<C;){for(yd(o,n,b,C),b++,C--;n[2*b+_]<x;)b++;for(;n[2*C+_]>x;)C--}n[2*h+_]===x?yd(o,n,h,C):(C++,yd(o,n,C,g)),C<=s&&(h=C+1),s<=C&&(g=C-1)}}function yd(o,n,s,h){bv(o,s,h),bv(n,2*s,2*h),bv(n,2*s+1,2*h+1)}function bv(o,n,s){const h=o[n];o[n]=o[s],o[s]=h}function _w(o,n,s,h){const g=o-s,_=n-h;return g*g+_*_}var wv;f.bf=void 0,(wv=f.bf||(f.bf={})).create="create",wv.load="load",wv.fullLoad="fullLoad";let Wp=null,vd=[];const Sv=1e3/60,Cv="loadTime",Ev="fullLoadTime",uA={mark(o){performance.mark(o)},frame(o){const n=o;Wp!=null&&vd.push(n-Wp),Wp=n},clearMetrics(){Wp=null,vd=[],performance.clearMeasures(Cv),performance.clearMeasures(Ev);for(const o in f.bf)performance.clearMarks(f.bf[o])},getPerformanceMetrics(){performance.measure(Cv,f.bf.create,f.bf.load),performance.measure(Ev,f.bf.create,f.bf.fullLoad);const o=performance.getEntriesByName(Cv)[0].duration,n=performance.getEntriesByName(Ev)[0].duration,s=vd.length,h=1/(vd.reduce((_,x)=>_+x,0)/s/1e3),g=vd.filter(_=>_>Sv).reduce((_,x)=>_+(x-Sv)/Sv,0);return{loadTime:o,fullLoadTime:n,fps:h,percentDroppedFrames:g/(s+g)*100,totalFrames:s}}};f.$=class extends Q{},f.A=eu,f.B=qh,f.C=function(o){if(ke==null){const n=o.navigator?o.navigator.userAgent:null;ke=!!o.safari||!(!n||!(/\b(iPad|iPhone|iPod)\b/.test(n)||n.match("Safari")&&!n.match("Chrome")))}return ke},f.D=It,f.E=Br,f.F=class{constructor(o,n){this.target=o,this.mapId=n,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new tA(()=>this.process()),this.subscription=function(s,h,g,_){return s.addEventListener(h,g,!1),{unsubscribe:()=>{s.removeEventListener(h,g,!1)}}}(this.target,"message",s=>this.receive(s)),this.globalScope=Ke(self)?o:window}registerMessageHandler(o,n){this.messageHandlers[o]=n}sendAsync(o,n){return new Promise((s,h)=>{const g=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[g]={resolve:s,reject:h},n&&n.signal.addEventListener("abort",()=>{delete this.resolveRejects[g];const b={id:g,type:"<cancel>",origin:location.origin,targetMapId:o.targetMapId,sourceMapId:this.mapId};this.target.postMessage(b)},{once:!0});const _=[],x=Object.assign(Object.assign({},o),{id:g,sourceMapId:this.mapId,origin:location.origin,data:Vl(o.data,_)});this.target.postMessage(x,{transfer:_})})}receive(o){const n=o.data,s=n.id;if(!(n.origin!=="file://"&&location.origin!=="file://"&&n.origin!=="resource://android"&&location.origin!=="resource://android"&&n.origin!==location.origin||n.targetMapId&&this.mapId!==n.targetMapId)){if(n.type==="<cancel>"){delete this.tasks[s];const h=this.abortControllers[s];return delete this.abortControllers[s],void(h&&h.abort())}if(Ke(self)||n.mustQueue)return this.tasks[s]=n,this.taskQueue.push(s),void this.invoker.trigger();this.processTask(s,n)}}process(){if(this.taskQueue.length===0)return;const o=this.taskQueue.shift(),n=this.tasks[o];delete this.tasks[o],this.taskQueue.length>0&&this.invoker.trigger(),n&&this.processTask(o,n)}processTask(o,n){return u(this,void 0,void 0,function*(){if(n.type==="<response>"){const g=this.resolveRejects[o];return delete this.resolveRejects[o],g?void(n.error?g.reject(Ko(n.error)):g.resolve(Ko(n.data))):void 0}if(!this.messageHandlers[n.type])return void this.completeTask(o,new Error(`Could not find a registered handler for ${n.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const s=Ko(n.data),h=new AbortController;this.abortControllers[o]=h;try{const g=yield this.messageHandlers[n.type](n.sourceMapId,s,h);this.completeTask(o,null,g)}catch(g){this.completeTask(o,g)}})}completeTask(o,n,s){const h=[];delete this.abortControllers[o];const g={id:o,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:n?Vl(n):null,data:Vl(s,h)};this.target.postMessage(g,{transfer:h})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},f.G=Et,f.H=function(){var o=new eu(16);return eu!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0),o[0]=1,o[5]=1,o[10]=1,o[15]=1,o},f.I=av,f.J=function(o,n,s){var h,g,_,x,b,C,P,R,D,j,W,J,ee=s[0],ce=s[1],pe=s[2];return n===o?(o[12]=n[0]*ee+n[4]*ce+n[8]*pe+n[12],o[13]=n[1]*ee+n[5]*ce+n[9]*pe+n[13],o[14]=n[2]*ee+n[6]*ce+n[10]*pe+n[14],o[15]=n[3]*ee+n[7]*ce+n[11]*pe+n[15]):(g=n[1],_=n[2],x=n[3],b=n[4],C=n[5],P=n[6],R=n[7],D=n[8],j=n[9],W=n[10],J=n[11],o[0]=h=n[0],o[1]=g,o[2]=_,o[3]=x,o[4]=b,o[5]=C,o[6]=P,o[7]=R,o[8]=D,o[9]=j,o[10]=W,o[11]=J,o[12]=h*ee+b*ce+D*pe+n[12],o[13]=g*ee+C*ce+j*pe+n[13],o[14]=_*ee+P*ce+W*pe+n[14],o[15]=x*ee+R*ce+J*pe+n[15]),o},f.K=function(o,n,s){var h=s[0],g=s[1],_=s[2];return o[0]=n[0]*h,o[1]=n[1]*h,o[2]=n[2]*h,o[3]=n[3]*h,o[4]=n[4]*g,o[5]=n[5]*g,o[6]=n[6]*g,o[7]=n[7]*g,o[8]=n[8]*_,o[9]=n[9]*_,o[10]=n[10]*_,o[11]=n[11]*_,o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15],o},f.L=Qx,f.M=function(o,n){const s={};for(let h=0;h<n.length;h++){const g=n[h];g in o&&(s[g]=o[g])}return s},f.N=Xs,f.O=Zb,f.P=A,f.Q=Kb,f.R=ko,f.S=Mo,f.T=js,f.U=V,f.V=F,f.W=Fe,f.X=On,f.Y=z,f.Z=jp,f._=u,f.a=st,f.a$=function(o,n){var s=o[0],h=o[1],g=o[2],_=o[3],x=o[4],b=o[5],C=o[6],P=o[7],R=o[8],D=o[9],j=o[10],W=o[11],J=o[12],ee=o[13],ce=o[14],pe=o[15],Ae=n[0],ve=n[1],Ee=n[2],Ne=n[3],Je=n[4],ft=n[5],Ot=n[6],ct=n[7],at=n[8],Pt=n[9],xt=n[10],yt=n[11],He=n[12],Mt=n[13],Ct=n[14],Ht=n[15];return Math.abs(s-Ae)<=Li*Math.max(1,Math.abs(s),Math.abs(Ae))&&Math.abs(h-ve)<=Li*Math.max(1,Math.abs(h),Math.abs(ve))&&Math.abs(g-Ee)<=Li*Math.max(1,Math.abs(g),Math.abs(Ee))&&Math.abs(_-Ne)<=Li*Math.max(1,Math.abs(_),Math.abs(Ne))&&Math.abs(x-Je)<=Li*Math.max(1,Math.abs(x),Math.abs(Je))&&Math.abs(b-ft)<=Li*Math.max(1,Math.abs(b),Math.abs(ft))&&Math.abs(C-Ot)<=Li*Math.max(1,Math.abs(C),Math.abs(Ot))&&Math.abs(P-ct)<=Li*Math.max(1,Math.abs(P),Math.abs(ct))&&Math.abs(R-at)<=Li*Math.max(1,Math.abs(R),Math.abs(at))&&Math.abs(D-Pt)<=Li*Math.max(1,Math.abs(D),Math.abs(Pt))&&Math.abs(j-xt)<=Li*Math.max(1,Math.abs(j),Math.abs(xt))&&Math.abs(W-yt)<=Li*Math.max(1,Math.abs(W),Math.abs(yt))&&Math.abs(J-He)<=Li*Math.max(1,Math.abs(J),Math.abs(He))&&Math.abs(ee-Mt)<=Li*Math.max(1,Math.abs(ee),Math.abs(Mt))&&Math.abs(ce-Ct)<=Li*Math.max(1,Math.abs(ce),Math.abs(Ct))&&Math.abs(pe-Ht)<=Li*Math.max(1,Math.abs(pe),Math.abs(Ht))},f.a0=Vn,f.a1=gv,f.a2=Xe,f.a3=o=>{const n=window.document.createElement("video");return n.muted=!0,new Promise(s=>{n.onloadstart=()=>{s(n)};for(const h of o){const g=window.document.createElement("source");Jt(h)||(n.crossOrigin="Anonymous"),g.src=h,n.appendChild(g)}})},f.a4=function(){return _e++},f.a5=er,f.a6=au,f.a7=vi,f.a8=Gl,f.a9=tn,f.aA=function(o){o=o.slice();const n=Object.create(null);for(let s=0;s<o.length;s++)n[o[s].id]=o[s];for(let s=0;s<o.length;s++)"ref"in o[s]&&(o[s]=yr(o[s],n[o[s].ref]));return o},f.aB=function(o){if(o.type==="custom")return new eA(o);switch(o.type){case"background":return new JM(o);case"circle":return new Bk(o);case"fill":return new tM(o);case"fill-extrusion":return new gM(o);case"heatmap":return new $k(o);case"hillshade":return new Vk(o);case"line":return new CM(o);case"raster":return new QM(o);case"symbol":return new $p(o)}},f.aC=ze,f.aD=function(o,n){if(!o)return[{command:"setStyle",args:[n]}];let s=[];try{if(!mt(o.version,n.version))return[{command:"setStyle",args:[n]}];mt(o.center,n.center)||s.push({command:"setCenter",args:[n.center]}),mt(o.zoom,n.zoom)||s.push({command:"setZoom",args:[n.zoom]}),mt(o.bearing,n.bearing)||s.push({command:"setBearing",args:[n.bearing]}),mt(o.pitch,n.pitch)||s.push({command:"setPitch",args:[n.pitch]}),mt(o.sprite,n.sprite)||s.push({command:"setSprite",args:[n.sprite]}),mt(o.glyphs,n.glyphs)||s.push({command:"setGlyphs",args:[n.glyphs]}),mt(o.transition,n.transition)||s.push({command:"setTransition",args:[n.transition]}),mt(o.light,n.light)||s.push({command:"setLight",args:[n.light]}),mt(o.terrain,n.terrain)||s.push({command:"setTerrain",args:[n.terrain]}),mt(o.sky,n.sky)||s.push({command:"setSky",args:[n.sky]}),mt(o.projection,n.projection)||s.push({command:"setProjection",args:[n.projection]});const h={},g=[];(function(x,b,C,P){let R;for(R in b=b||{},x=x||{})Object.prototype.hasOwnProperty.call(x,R)&&(Object.prototype.hasOwnProperty.call(b,R)||Sr(R,C,P));for(R in b)Object.prototype.hasOwnProperty.call(b,R)&&(Object.prototype.hasOwnProperty.call(x,R)?mt(x[R],b[R])||(x[R].type==="geojson"&&b[R].type==="geojson"&&Qt(x,b,R)?Ft(C,{command:"setGeoJSONSourceData",args:[R,b[R].data]}):Zt(R,b,C,P)):Xt(R,b,C))})(o.sources,n.sources,g,h);const _=[];o.layers&&o.layers.forEach(x=>{"source"in x&&h[x.source]?s.push({command:"removeLayer",args:[x.id]}):_.push(x)}),s=s.concat(g),function(x,b,C){b=b||[];const P=(x=x||[]).map(vr),R=b.map(vr),D=x.reduce(Nn,{}),j=b.reduce(Nn,{}),W=P.slice(),J=Object.create(null);let ee,ce,pe,Ae,ve;for(let Ee=0,Ne=0;Ee<P.length;Ee++)ee=P[Ee],Object.prototype.hasOwnProperty.call(j,ee)?Ne++:(Ft(C,{command:"removeLayer",args:[ee]}),W.splice(W.indexOf(ee,Ne),1));for(let Ee=0,Ne=0;Ee<R.length;Ee++)ee=R[R.length-1-Ee],W[W.length-1-Ee]!==ee&&(Object.prototype.hasOwnProperty.call(D,ee)?(Ft(C,{command:"removeLayer",args:[ee]}),W.splice(W.lastIndexOf(ee,W.length-Ne),1)):Ne++,Ae=W[W.length-Ee],Ft(C,{command:"addLayer",args:[j[ee],Ae]}),W.splice(W.length-Ee,0,ee),J[ee]=!0);for(let Ee=0;Ee<R.length;Ee++)if(ee=R[Ee],ce=D[ee],pe=j[ee],!J[ee]&&!mt(ce,pe))if(mt(ce.source,pe.source)&&mt(ce["source-layer"],pe["source-layer"])&&mt(ce.type,pe.type)){for(ve in Cr(ce.layout,pe.layout,C,ee,null,"setLayoutProperty"),Cr(ce.paint,pe.paint,C,ee,null,"setPaintProperty"),mt(ce.filter,pe.filter)||Ft(C,{command:"setFilter",args:[ee,pe.filter]}),mt(ce.minzoom,pe.minzoom)&&mt(ce.maxzoom,pe.maxzoom)||Ft(C,{command:"setLayerZoomRange",args:[ee,pe.minzoom,pe.maxzoom]}),ce)Object.prototype.hasOwnProperty.call(ce,ve)&&ve!=="layout"&&ve!=="paint"&&ve!=="filter"&&ve!=="metadata"&&ve!=="minzoom"&&ve!=="maxzoom"&&(ve.indexOf("paint.")===0?Cr(ce[ve],pe[ve],C,ee,ve.slice(6),"setPaintProperty"):mt(ce[ve],pe[ve])||Ft(C,{command:"setLayerProperty",args:[ee,ve,pe[ve]]}));for(ve in pe)Object.prototype.hasOwnProperty.call(pe,ve)&&!Object.prototype.hasOwnProperty.call(ce,ve)&&ve!=="layout"&&ve!=="paint"&&ve!=="filter"&&ve!=="metadata"&&ve!=="minzoom"&&ve!=="maxzoom"&&(ve.indexOf("paint.")===0?Cr(ce[ve],pe[ve],C,ee,ve.slice(6),"setPaintProperty"):mt(ce[ve],pe[ve])||Ft(C,{command:"setLayerProperty",args:[ee,ve,pe[ve]]}))}else Ft(C,{command:"removeLayer",args:[ee]}),Ae=W[W.lastIndexOf(ee)+1],Ft(C,{command:"addLayer",args:[pe,Ae]})}(_,n.layers,s)}catch(h){console.warn("Unable to compute style diff:",h),s=[{command:"setStyle",args:[n]}]}return s},f.aE=function(o){const n=[],s=o.id;return s===void 0&&n.push({message:`layers.${s}: missing required property "id"`}),o.render===void 0&&n.push({message:`layers.${s}: missing required method "render"`}),o.renderingMode&&o.renderingMode!=="2d"&&o.renderingMode!=="3d"&&n.push({message:`layers.${s}: property "renderingMode" must be either "2d" or "3d"`}),n},f.aF=function o(n,s){if(Array.isArray(n)){if(!Array.isArray(s)||n.length!==s.length)return!1;for(let h=0;h<n.length;h++)if(!o(n[h],s[h]))return!1;return!0}if(typeof n=="object"&&n!==null&&s!==null){if(typeof s!="object"||Object.keys(n).length!==Object.keys(s).length)return!1;for(const h in n)if(!o(n[h],s[h]))return!1;return!0}return n===s},f.aG=be,f.aH=Pe,f.aI=class extends Hl{constructor(o,n){super(o,n),this.current=0}set(o){this.current!==o&&(this.current=o,this.gl.uniform1i(this.location,o))}},f.aJ=Pp,f.aK=class extends Hl{constructor(o,n){super(o,n),this.current=Mk}set(o){if(o[12]!==this.current[12]||o[0]!==this.current[0])return this.current=o,void this.gl.uniformMatrix4fv(this.location,!1,o);for(let n=1;n<16;n++)if(o[n]!==this.current[n]){this.current=o,this.gl.uniformMatrix4fv(this.location,!1,o);break}}},f.aL=Vx,f.aM=Ux,f.aN=pr,f.aO=class extends Hl{constructor(o,n){super(o,n),this.current=[0,0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]||(this.current=o,this.gl.uniform3f(this.location,o[0],o[1],o[2]))}},f.aP=class extends Hl{constructor(o,n){super(o,n),this.current=[0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]||(this.current=o,this.gl.uniform2f(this.location,o[0],o[1]))}},f.aQ=function(o,n,s,h,g,_,x){var b=1/(n-s),C=1/(h-g),P=1/(_-x);return o[0]=-2*b,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*C,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*P,o[11]=0,o[12]=(n+s)*b,o[13]=(g+h)*C,o[14]=(x+_)*P,o[15]=1,o},f.aR=Ok,f.aS=class extends Ge{},f.aT=IM,f.aU=class extends dt{},f.aV=function(o){return o<=1?1:Math.pow(2,Math.ceil(Math.log(o)/Math.LN2))},f.aW=ib,f.aX=os,f.aY=Gn,f.aZ=class extends lt{},f.a_=function(o,n){return o[0]===n[0]&&o[1]===n[1]&&o[2]===n[2]&&o[3]===n[3]&&o[4]===n[4]&&o[5]===n[5]&&o[6]===n[6]&&o[7]===n[7]&&o[8]===n[8]&&o[9]===n[9]&&o[10]===n[10]&&o[11]===n[11]&&o[12]===n[12]&&o[13]===n[13]&&o[14]===n[14]&&o[15]===n[15]},f.aa=tw,f.ab=function(o){const n={};if(o.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(s,h,g,_)=>{const x=g||_;return n[h]=!x||x.toLowerCase(),""}),n["max-age"]){const s=parseInt(n["max-age"],10);isNaN(s)?delete n["max-age"]:n["max-age"]=s}return n},f.ac=function(o,n){const s=[];for(const h in o)h in n||s.push(h);return s},f.ad=ne,f.ae=function(o,n,s){var h=Math.sin(s),g=Math.cos(s),_=n[0],x=n[1],b=n[2],C=n[3],P=n[4],R=n[5],D=n[6],j=n[7];return n!==o&&(o[8]=n[8],o[9]=n[9],o[10]=n[10],o[11]=n[11],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15]),o[0]=_*g+P*h,o[1]=x*g+R*h,o[2]=b*g+D*h,o[3]=C*g+j*h,o[4]=P*g-_*h,o[5]=R*g-x*h,o[6]=D*g-b*h,o[7]=j*g-C*h,o},f.af=function(o){var n=new eu(16);return n[0]=o[0],n[1]=o[1],n[2]=o[2],n[3]=o[3],n[4]=o[4],n[5]=o[5],n[6]=o[6],n[7]=o[7],n[8]=o[8],n[9]=o[9],n[10]=o[10],n[11]=o[11],n[12]=o[12],n[13]=o[13],n[14]=o[14],n[15]=o[15],n},f.ag=Ap,f.ah=function(o,n){let s=0,h=0;if(o.kind==="constant")h=o.layoutSize;else if(o.kind!=="source"){const{interpolationType:g,minZoom:_,maxZoom:x}=o,b=g?ne(ei.interpolationFactor(g,n,_,x),0,1):0;o.kind==="camera"?h=Qn.number(o.minSize,o.maxSize,b):s=b}return{uSizeT:s,uSize:h}},f.aj=function(o,{uSize:n,uSizeT:s},{lowerSize:h,upperSize:g}){return o.kind==="source"?h/$a:o.kind==="composite"?Qn.number(h/$a,g/$a,s):n},f.ak=uv,f.al=function(o,n,s,h){const g=n.y-o.y,_=n.x-o.x,x=h.y-s.y,b=h.x-s.x,C=x*_-b*g;if(C===0)return null;const P=(b*(o.y-s.y)-x*(o.x-s.x))/C;return new A(o.x+P*_,o.y+P*g)},f.am=ow,f.an=Gx,f.ao=Wy,f.ap=function(o){let n=1/0,s=1/0,h=-1/0,g=-1/0;for(const _ of o)n=Math.min(n,_.x),s=Math.min(s,_.y),h=Math.max(h,_.x),g=Math.max(g,_.y);return[n,s,h,g]},f.aq=Un,f.as=cv,f.at=function(o,n){var s=n[0],h=n[1],g=n[2],_=n[3],x=n[4],b=n[5],C=n[6],P=n[7],R=n[8],D=n[9],j=n[10],W=n[11],J=n[12],ee=n[13],ce=n[14],pe=n[15],Ae=s*b-h*x,ve=s*C-g*x,Ee=s*P-_*x,Ne=h*C-g*b,Je=h*P-_*b,ft=g*P-_*C,Ot=R*ee-D*J,ct=R*ce-j*J,at=R*pe-W*J,Pt=D*ce-j*ee,xt=D*pe-W*ee,yt=j*pe-W*ce,He=Ae*yt-ve*xt+Ee*Pt+Ne*at-Je*ct+ft*Ot;return He?(o[0]=(b*yt-C*xt+P*Pt)*(He=1/He),o[1]=(g*xt-h*yt-_*Pt)*He,o[2]=(ee*ft-ce*Je+pe*Ne)*He,o[3]=(j*Je-D*ft-W*Ne)*He,o[4]=(C*at-x*yt-P*ct)*He,o[5]=(s*yt-g*at+_*ct)*He,o[6]=(ce*Ee-J*ft-pe*ve)*He,o[7]=(R*ft-j*Ee+W*ve)*He,o[8]=(x*xt-b*at+P*Ot)*He,o[9]=(h*at-s*xt-_*Ot)*He,o[10]=(J*Je-ee*Ee+pe*Ae)*He,o[11]=(D*Ee-R*Je-W*Ae)*He,o[12]=(b*ct-x*Pt-C*Ot)*He,o[13]=(s*Pt-h*ct+g*Ot)*He,o[14]=(ee*ve-J*Ne-ce*Ae)*He,o[15]=(R*Ne-D*ve+j*Ae)*He,o):null},f.au=vv,f.av=lv,f.aw=_v,f.ax=function(){const o={},n=Te.$version;for(const s in Te.$root){const h=Te.$root[s];if(h.required){let g=null;g=s==="version"?n:h.type==="array"?[]:{},g!=null&&(o[s]=g)}}return o},f.ay=_p,f.az=Vt,f.b=Se,f.b0=function(o,n){return o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],o[4]=n[4],o[5]=n[5],o[6]=n[6],o[7]=n[7],o[8]=n[8],o[9]=n[9],o[10]=n[10],o[11]=n[11],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15],o},f.b1=function(o,n,s){return o[0]=n[0]*s[0],o[1]=n[1]*s[1],o[2]=n[2]*s[2],o[3]=n[3]*s[3],o},f.b2=function(o,n){return o[0]*n[0]+o[1]*n[1]+o[2]*n[2]+o[3]*n[3]},f.b3=fe,f.b4=Yb,f.b5=Xb,f.b6=function(o,n,s,h,g){var _,x=1/Math.tan(n/2);return o[0]=x/s,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=x,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=-1,o[12]=0,o[13]=0,o[15]=0,g!=null&&g!==1/0?(o[10]=(g+h)*(_=1/(h-g)),o[14]=2*g*h*_):(o[10]=-1,o[14]=-2*h),o},f.b7=function(o,n,s){var h=Math.sin(s),g=Math.cos(s),_=n[4],x=n[5],b=n[6],C=n[7],P=n[8],R=n[9],D=n[10],j=n[11];return n!==o&&(o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15]),o[4]=_*g+P*h,o[5]=x*g+R*h,o[6]=b*g+D*h,o[7]=C*g+j*h,o[8]=P*g-_*h,o[9]=R*g-x*h,o[10]=D*g-b*h,o[11]=j*g-C*h,o},f.b8=H,f.b9=Y,f.bA=function(o){return o.message===Ze},f.bB=rs,f.bC=Oa,f.ba=function(o){return o*Math.PI/180},f.bb=function(o,n){return o[0]=n[0],o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=n[1],o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=n[2],o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o},f.bc=class extends K{},f.bd=pv,f.be=uA,f.bg=Lt,f.bh=function(o,n){st.REGISTERED_PROTOCOLS[o]=n},f.bi=function(o){delete st.REGISTERED_PROTOCOLS[o]},f.bj=function(o,n){const s={};for(let g=0;g<o.length;g++){const _=n&&n[o[g].id]||Rh(o[g]);n&&(n[o[g].id]=_);let x=s[_];x||(x=s[_]=[]),x.push(o[g])}const h=[];for(const g in s)h.push(s[g]);return h},f.bk=_t,f.bl=ew,f.bm=rw,f.bn=Rb,f.bo=function(o){o.bucket.createArrays(),o.bucket.tilePixelRatio=On/(512*o.bucket.overscaling),o.bucket.compareText={},o.bucket.iconsNeedLinear=!1;const n=o.bucket.layers[0],s=n.layout,h=n._unevaluatedLayout._values,g={layoutIconSize:h["icon-size"].possiblyEvaluate(new tn(o.bucket.zoom+1),o.canonical),layoutTextSize:h["text-size"].possiblyEvaluate(new tn(o.bucket.zoom+1),o.canonical),textMaxSize:h["text-size"].possiblyEvaluate(new tn(18))};if(o.bucket.textSizeData.kind==="composite"){const{minZoom:P,maxZoom:R}=o.bucket.textSizeData;g.compositeTextSizes=[h["text-size"].possiblyEvaluate(new tn(P),o.canonical),h["text-size"].possiblyEvaluate(new tn(R),o.canonical)]}if(o.bucket.iconSizeData.kind==="composite"){const{minZoom:P,maxZoom:R}=o.bucket.iconSizeData;g.compositeIconSizes=[h["icon-size"].possiblyEvaluate(new tn(P),o.canonical),h["icon-size"].possiblyEvaluate(new tn(R),o.canonical)]}const _=s.get("text-line-height")*Un,x=s.get("text-rotation-alignment")!=="viewport"&&s.get("symbol-placement")!=="point",b=s.get("text-keep-upright"),C=s.get("text-size");for(const P of o.bucket.features){const R=s.get("text-font").evaluate(P,{},o.canonical).join(","),D=C.evaluate(P,{},o.canonical),j=g.layoutTextSize.evaluate(P,{},o.canonical),W=g.layoutIconSize.evaluate(P,{},o.canonical),J={horizontal:{},vertical:void 0},ee=P.text;let ce,pe=[0,0];if(ee){const Ee=ee.toString(),Ne=s.get("text-letter-spacing").evaluate(P,{},o.canonical)*Un,Je=Ny(Ee)?Ne:0,ft=s.get("text-anchor").evaluate(P,{},o.canonical),Ot=pw(n,P,o.canonical);if(!Ot){const xt=s.get("text-radial-offset").evaluate(P,{},o.canonical);pe=xt?fw(ft,[xt*Un,yv]):s.get("text-offset").evaluate(P,{},o.canonical).map(yt=>yt*Un)}let ct=x?"center":s.get("text-justify").evaluate(P,{},o.canonical);const at=s.get("symbol-placement")==="point"?s.get("text-max-width").evaluate(P,{},o.canonical)*Un:1/0,Pt=()=>{o.bucket.allowVerticalPlacement&&Zh(Ee)&&(J.vertical=Op(ee,o.glyphMap,o.glyphPositions,o.imagePositions,R,at,_,ft,"left",Je,pe,f.ai.vertical,!0,j,D))};if(!x&&Ot){const xt=new Set;if(ct==="auto")for(let He=0;He<Ot.values.length;He+=2)xt.add(vv(Ot.values[He]));else xt.add(ct);let yt=!1;for(const He of xt)if(!J.horizontal[He])if(yt)J.horizontal[He]=J.horizontal[0];else{const Mt=Op(ee,o.glyphMap,o.glyphPositions,o.imagePositions,R,at,_,"center",He,Je,pe,f.ai.horizontal,!1,j,D);Mt&&(J.horizontal[He]=Mt,yt=Mt.positionedLines.length===1)}Pt()}else{ct==="auto"&&(ct=vv(ft));const xt=Op(ee,o.glyphMap,o.glyphPositions,o.imagePositions,R,at,_,ft,ct,Je,pe,f.ai.horizontal,!1,j,D);xt&&(J.horizontal[ct]=xt),Pt(),Zh(Ee)&&x&&b&&(J.vertical=Op(ee,o.glyphMap,o.glyphPositions,o.imagePositions,R,at,_,ft,ct,Je,pe,f.ai.vertical,!1,j,D))}}let Ae=!1;if(P.icon&&P.icon.name){const Ee=o.imageMap[P.icon.name];Ee&&(ce=WM(o.imagePositions[P.icon.name],s.get("icon-offset").evaluate(P,{},o.canonical),s.get("icon-anchor").evaluate(P,{},o.canonical)),Ae=!!Ee.sdf,o.bucket.sdfIcons===void 0?o.bucket.sdfIcons=Ae:o.bucket.sdfIcons!==Ae&&Ce("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ee.pixelRatio!==o.bucket.pixelRatio||s.get("icon-rotate").constantOr(1)!==0)&&(o.bucket.iconsNeedLinear=!0))}const ve=gw(J.horizontal)||J.vertical;o.bucket.iconsInText=!!ve&&ve.iconsInText,(ve||ce)&&lA(o.bucket,P,J,ce,o.imageMap,g,j,W,pe,Ae,o.canonical)}o.showCollisionBoxes&&o.bucket.generateCollisionDebugBuffers()},f.bp=rv,f.bq=Qy,f.br=tv,f.bs=Gs,f.bt=iv,f.bu=class{constructor(o){this._marks={start:[o.url,"start"].join("#"),end:[o.url,"end"].join("#"),measure:o.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let o=performance.getEntriesByName(this._marks.measure);return o.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),o=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),o}},f.bv=function(o,n,s,h,g){return u(this,void 0,void 0,function*(){if(F())try{return yield Fe(o,n,s,h,g)}catch{}return function(_,x,b,C,P){const R=_.width,D=_.height;Be&&Ve||(Be=new OffscreenCanvas(R,D),Ve=Be.getContext("2d",{willReadFrequently:!0})),Be.width=R,Be.height=D,Ve.drawImage(_,0,0,R,D);const j=Ve.getImageData(x,b,C,P);return Ve.clearRect(0,0,R,D),j.data}(o,n,s,h,g)})},f.bw=Qb,f.bx=S,f.by=T,f.bz=Cb,f.c=gt,f.d=o=>u(void 0,void 0,void 0,function*(){if(o.byteLength===0)return createImageBitmap(new ImageData(1,1));const n=new Blob([new Uint8Array(o)],{type:"image/png"});try{return createImageBitmap(n)}catch(s){throw new Error(`Could not load image because of ${s.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),f.e=ie,f.f=o=>new Promise((n,s)=>{const h=new Image;h.onload=()=>{n(h),URL.revokeObjectURL(h.src),h.onload=null,window.requestAnimationFrame(()=>{h.src=ge})},h.onerror=()=>s(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const g=new Blob([new Uint8Array(o)],{type:"image/png"});h.src=o.byteLength?URL.createObjectURL(g):ge}),f.g=St,f.h=(o,n)=>or(ie(o,{type:"json"}),n),f.i=Ke,f.j=sr,f.k=Gr,f.l=(o,n)=>or(ie(o,{type:"arrayBuffer"}),n),f.m=or,f.n=function(o){return new iv(o).readFields(NM,[])},f.o=ad,f.p=zb,f.q=p,f.r=Fy,f.s=Jt,f.t=Wh,f.u=ut,f.v=Te,f.w=Ce,f.x=fa,f.y=function([o,n,s]){return n+=90,n*=Math.PI/180,s*=Math.PI/180,{x:o*Math.cos(n)*Math.sin(s),y:o*Math.sin(n)*Math.sin(s),z:o*Math.cos(s)}},f.z=Qn}),l("worker",["./shared"],function(f){class u{constructor(U){this.keyCache={},U&&this.replace(U)}replace(U){this._layerConfigs={},this._layers={},this.update(U,[])}update(U,$){for(const te of U){this._layerConfigs[te.id]=te;const se=this._layers[te.id]=f.aB(te);se._featureFilter=f.a7(se.filter),this.keyCache[te.id]&&delete this.keyCache[te.id]}for(const te of $)delete this.keyCache[te],delete this._layerConfigs[te],delete this._layers[te];this.familiesBySource={};const X=f.bj(Object.values(this._layerConfigs),this.keyCache);for(const te of X){const se=te.map(Le=>this._layers[Le.id]),me=se[0];if(me.visibility==="none")continue;const xe=me.source||"";let ue=this.familiesBySource[xe];ue||(ue=this.familiesBySource[xe]={});const Re=me.sourceLayer||"_geojsonTileLayer";let je=ue[Re];je||(je=ue[Re]=[]),je.push(se)}}}class S{constructor(U){const $={},X=[];for(const xe in U){const ue=U[xe],Re=$[xe]={};for(const je in ue){const Le=ue[+je];if(!Le||Le.bitmap.width===0||Le.bitmap.height===0)continue;const Qe={x:0,y:0,w:Le.bitmap.width+2,h:Le.bitmap.height+2};X.push(Qe),Re[je]={rect:Qe,metrics:Le.metrics}}}const{w:te,h:se}=f.p(X),me=new f.o({width:te||1,height:se||1});for(const xe in U){const ue=U[xe];for(const Re in ue){const je=ue[+Re];if(!je||je.bitmap.width===0||je.bitmap.height===0)continue;const Le=$[xe][Re].rect;f.o.copy(je.bitmap,me,{x:0,y:0},{x:Le.x+1,y:Le.y+1},je.bitmap)}}this.image=me,this.positions=$}}f.bk("GlyphAtlas",S);class T{constructor(U){this.tileID=new f.S(U.tileID.overscaledZ,U.tileID.wrap,U.tileID.canonical.z,U.tileID.canonical.x,U.tileID.canonical.y),this.uid=U.uid,this.zoom=U.zoom,this.pixelRatio=U.pixelRatio,this.tileSize=U.tileSize,this.source=U.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=U.showCollisionBoxes,this.collectResourceTiming=!!U.collectResourceTiming,this.returnDependencies=!!U.returnDependencies,this.promoteId=U.promoteId,this.inFlightDependencies=[]}parse(U,$,X,te){return f._(this,void 0,void 0,function*(){this.status="parsing",this.data=U,this.collisionBoxArray=new f.a5;const se=new f.bl(Object.keys(U.layers).sort()),me=new f.bm(this.tileID,this.promoteId);me.bucketLayerIDs=[];const xe={},ue={featureIndex:me,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:X},Re=$.familiesBySource[this.source];for(const Ut in Re){const fr=U.layers[Ut];if(!fr)continue;fr.version===1&&f.w(`Vector tile source "${this.source}" layer "${Ut}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Er=se.encode(Ut),$r=[];for(let Rr=0;Rr<fr.length;Rr++){const En=fr.feature(Rr),oo=me.getId(En,Ut);$r.push({feature:En,id:oo,index:Rr,sourceLayerIndex:Er})}for(const Rr of Re[Ut]){const En=Rr[0];En.source!==this.source&&f.w(`layer.source = ${En.source} does not equal this.source = ${this.source}`),En.minzoom&&this.zoom<Math.floor(En.minzoom)||En.maxzoom&&this.zoom>=En.maxzoom||En.visibility!=="none"&&(M(Rr,this.zoom,X),(xe[En.id]=En.createBucket({index:me.bucketLayerIDs.length,layers:Rr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Er,sourceID:this.source})).populate($r,ue,this.tileID.canonical),me.bucketLayerIDs.push(Rr.map(oo=>oo.id)))}}const je=f.aG(ue.glyphDependencies,Ut=>Object.keys(Ut).map(Number));this.inFlightDependencies.forEach(Ut=>Ut==null?void 0:Ut.abort()),this.inFlightDependencies=[];let Le=Promise.resolve({});if(Object.keys(je).length){const Ut=new AbortController;this.inFlightDependencies.push(Ut),Le=te.sendAsync({type:"GG",data:{stacks:je,source:this.source,tileID:this.tileID,type:"glyphs"}},Ut)}const Qe=Object.keys(ue.iconDependencies);let vt=Promise.resolve({});if(Qe.length){const Ut=new AbortController;this.inFlightDependencies.push(Ut),vt=te.sendAsync({type:"GI",data:{icons:Qe,source:this.source,tileID:this.tileID,type:"icons"}},Ut)}const wt=Object.keys(ue.patternDependencies);let At=Promise.resolve({});if(wt.length){const Ut=new AbortController;this.inFlightDependencies.push(Ut),At=te.sendAsync({type:"GI",data:{icons:wt,source:this.source,tileID:this.tileID,type:"patterns"}},Ut)}const[Kt,zt,Yt]=yield Promise.all([Le,vt,At]),zr=new S(Kt),cr=new f.bn(zt,Yt);for(const Ut in xe){const fr=xe[Ut];fr instanceof f.a6?(M(fr.layers,this.zoom,X),f.bo({bucket:fr,glyphMap:Kt,glyphPositions:zr.positions,imageMap:zt,imagePositions:cr.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):fr.hasPattern&&(fr instanceof f.bp||fr instanceof f.bq||fr instanceof f.br)&&(M(fr.layers,this.zoom,X),fr.addFeatures(ue,this.tileID.canonical,cr.patternPositions))}return this.status="done",{buckets:Object.values(xe).filter(Ut=>!Ut.isEmpty()),featureIndex:me,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:zr.image,imageAtlas:cr,glyphMap:this.returnDependencies?Kt:null,iconMap:this.returnDependencies?zt:null,glyphPositions:this.returnDependencies?zr.positions:null}})}}function M(oe,U,$){const X=new f.a9(U);for(const te of oe)te.recalculate(X,$)}class A{constructor(U,$,X){this.actor=U,this.layerIndex=$,this.availableImages=X,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(U,$){return f._(this,void 0,void 0,function*(){const X=yield f.l(U.request,$);try{return{vectorTile:new f.bs.VectorTile(new f.bt(X.data)),rawData:X.data,cacheControl:X.cacheControl,expires:X.expires}}catch(te){const se=new Uint8Array(X.data);let me=`Unable to parse the tile at ${U.request.url}, `;throw me+=se[0]===31&&se[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${te.message}`,new Error(me)}})}loadTile(U){return f._(this,void 0,void 0,function*(){const $=U.uid,X=!!(U&&U.request&&U.request.collectResourceTiming)&&new f.bu(U.request),te=new T(U);this.loading[$]=te;const se=new AbortController;te.abort=se;try{const me=yield this.loadVectorTile(U,se);if(delete this.loading[$],!me)return null;const xe=me.rawData,ue={};me.expires&&(ue.expires=me.expires),me.cacheControl&&(ue.cacheControl=me.cacheControl);const Re={};if(X){const Le=X.finish();Le&&(Re.resourceTiming=JSON.parse(JSON.stringify(Le)))}te.vectorTile=me.vectorTile;const je=te.parse(me.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[$]=te,this.fetching[$]={rawTileData:xe,cacheControl:ue,resourceTiming:Re};try{const Le=yield je;return f.e({rawTileData:xe.slice(0)},Le,ue,Re)}finally{delete this.fetching[$]}}catch(me){throw delete this.loading[$],te.status="done",this.loaded[$]=te,me}})}reloadTile(U){return f._(this,void 0,void 0,function*(){const $=U.uid;if(!this.loaded||!this.loaded[$])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const X=this.loaded[$];if(X.showCollisionBoxes=U.showCollisionBoxes,X.status==="parsing"){const te=yield X.parse(X.vectorTile,this.layerIndex,this.availableImages,this.actor);let se;if(this.fetching[$]){const{rawTileData:me,cacheControl:xe,resourceTiming:ue}=this.fetching[$];delete this.fetching[$],se=f.e({rawTileData:me.slice(0)},te,xe,ue)}else se=te;return se}if(X.status==="done"&&X.vectorTile)return X.parse(X.vectorTile,this.layerIndex,this.availableImages,this.actor)})}abortTile(U){return f._(this,void 0,void 0,function*(){const $=this.loading,X=U.uid;$&&$[X]&&$[X].abort&&($[X].abort.abort(),delete $[X])})}removeTile(U){return f._(this,void 0,void 0,function*(){this.loaded&&this.loaded[U.uid]&&delete this.loaded[U.uid]})}}class I{constructor(){this.loaded={}}loadTile(U){return f._(this,void 0,void 0,function*(){const{uid:$,encoding:X,rawImageData:te,redFactor:se,greenFactor:me,blueFactor:xe,baseShift:ue}=U,Re=te.width+2,je=te.height+2,Le=f.b(te)?new f.R({width:Re,height:je},yield f.bv(te,-1,-1,Re,je)):te,Qe=new f.bw($,Le,X,se,me,xe,ue);return this.loaded=this.loaded||{},this.loaded[$]=Qe,Qe})}removeTile(U){const $=this.loaded,X=U.uid;$&&$[X]&&delete $[X]}}function G(oe,U){if(oe.length!==0){N(oe[0],U);for(var $=1;$<oe.length;$++)N(oe[$],!U)}}function N(oe,U){for(var $=0,X=0,te=0,se=oe.length,me=se-1;te<se;me=te++){var xe=(oe[te][0]-oe[me][0])*(oe[me][1]+oe[te][1]),ue=$+xe;X+=Math.abs($)>=Math.abs(xe)?$-ue+xe:xe-ue+$,$=ue}$+X>=0!=!!U&&oe.reverse()}var q=f.bx(function oe(U,$){var X,te=U&&U.type;if(te==="FeatureCollection")for(X=0;X<U.features.length;X++)oe(U.features[X],$);else if(te==="GeometryCollection")for(X=0;X<U.geometries.length;X++)oe(U.geometries[X],$);else if(te==="Feature")oe(U.geometry,$);else if(te==="Polygon")G(U.coordinates,$);else if(te==="MultiPolygon")for(X=0;X<U.coordinates.length;X++)G(U.coordinates[X],$);return U});const Z=f.bs.VectorTileFeature.prototype.toGeoJSON;var V={exports:{}},F=f.by,H=f.bs.VectorTileFeature,Y=ne;function ne(oe,U){this.options=U||{},this.features=oe,this.length=oe.length}function fe(oe,U){this.id=typeof oe.id=="number"?oe.id:void 0,this.type=oe.type,this.rawGeometry=oe.type===1?[oe.geometry]:oe.geometry,this.properties=oe.tags,this.extent=U||4096}ne.prototype.feature=function(oe){return new fe(this.features[oe],this.options.extent)},fe.prototype.loadGeometry=function(){var oe=this.rawGeometry;this.geometry=[];for(var U=0;U<oe.length;U++){for(var $=oe[U],X=[],te=0;te<$.length;te++)X.push(new F($[te][0],$[te][1]));this.geometry.push(X)}return this.geometry},fe.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var oe=this.geometry,U=1/0,$=-1/0,X=1/0,te=-1/0,se=0;se<oe.length;se++)for(var me=oe[se],xe=0;xe<me.length;xe++){var ue=me[xe];U=Math.min(U,ue.x),$=Math.max($,ue.x),X=Math.min(X,ue.y),te=Math.max(te,ue.y)}return[U,X,$,te]},fe.prototype.toGeoJSON=H.prototype.toGeoJSON;var ie=f.bz,_e=Y;function be(oe){var U=new ie;return function($,X){for(var te in $.layers)X.writeMessage(3,Pe,$.layers[te])}(oe,U),U.finish()}function Pe(oe,U){var $;U.writeVarintField(15,oe.version||1),U.writeStringField(1,oe.name||""),U.writeVarintField(5,oe.extent||4096);var X={keys:[],values:[],keycache:{},valuecache:{}};for($=0;$<oe.length;$++)X.feature=oe.feature($),U.writeMessage(2,ze,X);var te=X.keys;for($=0;$<te.length;$++)U.writeStringField(3,te[$]);var se=X.values;for($=0;$<se.length;$++)U.writeMessage(4,ke,se[$])}function ze(oe,U){var $=oe.feature;$.id!==void 0&&U.writeVarintField(1,$.id),U.writeMessage(2,We,oe),U.writeVarintField(3,$.type),U.writeMessage(4,Ke,$)}function We(oe,U){var $=oe.feature,X=oe.keys,te=oe.values,se=oe.keycache,me=oe.valuecache;for(var xe in $.properties){var ue=$.properties[xe],Re=se[xe];if(ue!==null){Re===void 0&&(X.push(xe),se[xe]=Re=X.length-1),U.writeVarint(Re);var je=typeof ue;je!=="string"&&je!=="boolean"&&je!=="number"&&(ue=JSON.stringify(ue));var Le=je+":"+ue,Qe=me[Le];Qe===void 0&&(te.push(ue),me[Le]=Qe=te.length-1),U.writeVarint(Qe)}}}function Ce(oe,U){return(U<<3)+(7&oe)}function Ie(oe){return oe<<1^oe>>31}function Ke(oe,U){for(var $=oe.loadGeometry(),X=oe.type,te=0,se=0,me=$.length,xe=0;xe<me;xe++){var ue=$[xe],Re=1;X===1&&(Re=ue.length),U.writeVarint(Ce(1,Re));for(var je=X===3?ue.length-1:ue.length,Le=0;Le<je;Le++){Le===1&&X!==1&&U.writeVarint(Ce(2,je-1));var Qe=ue[Le].x-te,vt=ue[Le].y-se;U.writeVarint(Ie(Qe)),U.writeVarint(Ie(vt)),te+=Qe,se+=vt}X===3&&U.writeVarint(Ce(7,1))}}function ke(oe,U){var $=typeof oe;$==="string"?U.writeStringField(1,oe):$==="boolean"?U.writeBooleanField(7,oe):$==="number"&&(oe%1!=0?U.writeDoubleField(3,oe):oe<0?U.writeSVarintField(6,oe):U.writeVarintField(5,oe))}V.exports=be,V.exports.fromVectorTileJs=be,V.exports.fromGeojsonVt=function(oe,U){U=U||{};var $={};for(var X in oe)$[X]=new _e(oe[X].features,U),$[X].name=X,$[X].version=U.version,$[X].extent=U.extent;return be({layers:$})},V.exports.GeoJSONWrapper=_e;var Se=f.bx(V.exports);const ge={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:oe=>oe},Fe=Math.fround||(Be=new Float32Array(1),oe=>(Be[0]=+oe,Be[0]));var Be;const Ve=3,Ze=5,gt=6;class st{constructor(U){this.options=Object.assign(Object.create(ge),U),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(U){const{log:$,minZoom:X,maxZoom:te}=this.options;$&&console.time("total time");const se=`prepare ${U.length} points`;$&&console.time(se),this.points=U;const me=[];for(let ue=0;ue<U.length;ue++){const Re=U[ue];if(!Re.geometry)continue;const[je,Le]=Re.geometry.coordinates,Qe=Fe(Lt(je)),vt=Fe(Vt(Le));me.push(Qe,vt,1/0,ue,-1,1),this.options.reduce&&me.push(0)}let xe=this.trees[te+1]=this._createTree(me);$&&console.timeEnd(se);for(let ue=te;ue>=X;ue--){const Re=+Date.now();xe=this.trees[ue]=this._createTree(this._cluster(xe,ue)),$&&console.log("z%d: %d clusters in %dms",ue,xe.numItems,+Date.now()-Re)}return $&&console.timeEnd("total time"),this}getClusters(U,$){let X=((U[0]+180)%360+360)%360-180;const te=Math.max(-90,Math.min(90,U[1]));let se=U[2]===180?180:((U[2]+180)%360+360)%360-180;const me=Math.max(-90,Math.min(90,U[3]));if(U[2]-U[0]>=360)X=-180,se=180;else if(X>se){const Le=this.getClusters([X,te,180,me],$),Qe=this.getClusters([-180,te,se,me],$);return Le.concat(Qe)}const xe=this.trees[this._limitZoom($)],ue=xe.range(Lt(X),Vt(me),Lt(se),Vt(te)),Re=xe.data,je=[];for(const Le of ue){const Qe=this.stride*Le;je.push(Re[Qe+Ze]>1?St(Re,Qe,this.clusterProps):this.points[Re[Qe+Ve]])}return je}getChildren(U){const $=this._getOriginId(U),X=this._getOriginZoom(U),te="No cluster with the specified id.",se=this.trees[X];if(!se)throw new Error(te);const me=se.data;if($*this.stride>=me.length)throw new Error(te);const xe=this.options.radius/(this.options.extent*Math.pow(2,X-1)),ue=se.within(me[$*this.stride],me[$*this.stride+1],xe),Re=[];for(const je of ue){const Le=je*this.stride;me[Le+4]===U&&Re.push(me[Le+Ze]>1?St(me,Le,this.clusterProps):this.points[me[Le+Ve]])}if(Re.length===0)throw new Error(te);return Re}getLeaves(U,$,X){const te=[];return this._appendLeaves(te,U,$=$||10,X=X||0,0),te}getTile(U,$,X){const te=this.trees[this._limitZoom(U)],se=Math.pow(2,U),{extent:me,radius:xe}=this.options,ue=xe/me,Re=(X-ue)/se,je=(X+1+ue)/se,Le={features:[]};return this._addTileFeatures(te.range(($-ue)/se,Re,($+1+ue)/se,je),te.data,$,X,se,Le),$===0&&this._addTileFeatures(te.range(1-ue/se,Re,1,je),te.data,se,X,se,Le),$===se-1&&this._addTileFeatures(te.range(0,Re,ue/se,je),te.data,-1,X,se,Le),Le.features.length?Le:null}getClusterExpansionZoom(U){let $=this._getOriginZoom(U)-1;for(;$<=this.options.maxZoom;){const X=this.getChildren(U);if($++,X.length!==1)break;U=X[0].properties.cluster_id}return $}_appendLeaves(U,$,X,te,se){const me=this.getChildren($);for(const xe of me){const ue=xe.properties;if(ue&&ue.cluster?se+ue.point_count<=te?se+=ue.point_count:se=this._appendLeaves(U,ue.cluster_id,X,te,se):se<te?se++:U.push(xe),U.length===X)break}return se}_createTree(U){const $=new f.aw(U.length/this.stride|0,this.options.nodeSize,Float32Array);for(let X=0;X<U.length;X+=this.stride)$.add(U[X],U[X+1]);return $.finish(),$.data=U,$}_addTileFeatures(U,$,X,te,se,me){for(const xe of U){const ue=xe*this.stride,Re=$[ue+Ze]>1;let je,Le,Qe;if(Re)je=Et($,ue,this.clusterProps),Le=$[ue],Qe=$[ue+1];else{const At=this.points[$[ue+Ve]];je=At.properties;const[Kt,zt]=At.geometry.coordinates;Le=Lt(Kt),Qe=Vt(zt)}const vt={type:1,geometry:[[Math.round(this.options.extent*(Le*se-X)),Math.round(this.options.extent*(Qe*se-te))]],tags:je};let wt;wt=Re||this.options.generateId?$[ue+Ve]:this.points[$[ue+Ve]].id,wt!==void 0&&(vt.id=wt),me.features.push(vt)}}_limitZoom(U){return Math.max(this.options.minZoom,Math.min(Math.floor(+U),this.options.maxZoom+1))}_cluster(U,$){const{radius:X,extent:te,reduce:se,minPoints:me}=this.options,xe=X/(te*Math.pow(2,$)),ue=U.data,Re=[],je=this.stride;for(let Le=0;Le<ue.length;Le+=je){if(ue[Le+2]<=$)continue;ue[Le+2]=$;const Qe=ue[Le],vt=ue[Le+1],wt=U.within(ue[Le],ue[Le+1],xe),At=ue[Le+Ze];let Kt=At;for(const zt of wt){const Yt=zt*je;ue[Yt+2]>$&&(Kt+=ue[Yt+Ze])}if(Kt>At&&Kt>=me){let zt,Yt=Qe*At,zr=vt*At,cr=-1;const Ut=((Le/je|0)<<5)+($+1)+this.points.length;for(const fr of wt){const Er=fr*je;if(ue[Er+2]<=$)continue;ue[Er+2]=$;const $r=ue[Er+Ze];Yt+=ue[Er]*$r,zr+=ue[Er+1]*$r,ue[Er+4]=Ut,se&&(zt||(zt=this._map(ue,Le,!0),cr=this.clusterProps.length,this.clusterProps.push(zt)),se(zt,this._map(ue,Er)))}ue[Le+4]=Ut,Re.push(Yt/Kt,zr/Kt,1/0,Ut,-1,Kt),se&&Re.push(cr)}else{for(let zt=0;zt<je;zt++)Re.push(ue[Le+zt]);if(Kt>1)for(const zt of wt){const Yt=zt*je;if(!(ue[Yt+2]<=$)){ue[Yt+2]=$;for(let zr=0;zr<je;zr++)Re.push(ue[Yt+zr])}}}}return Re}_getOriginId(U){return U-this.points.length>>5}_getOriginZoom(U){return(U-this.points.length)%32}_map(U,$,X){if(U[$+Ze]>1){const me=this.clusterProps[U[$+gt]];return X?Object.assign({},me):me}const te=this.points[U[$+Ve]].properties,se=this.options.map(te);return X&&se===te?Object.assign({},se):se}}function St(oe,U,$){return{type:"Feature",id:oe[U+Ve],properties:Et(oe,U,$),geometry:{type:"Point",coordinates:[(X=oe[U],360*(X-.5)),or(oe[U+1])]}};var X}function Et(oe,U,$){const X=oe[U+Ze],te=X>=1e4?`${Math.round(X/1e3)}k`:X>=1e3?Math.round(X/100)/10+"k":X,se=oe[U+gt],me=se===-1?{}:Object.assign({},$[se]);return Object.assign(me,{cluster:!0,cluster_id:oe[U+Ve],point_count:X,point_count_abbreviated:te})}function Lt(oe){return oe/360+.5}function Vt(oe){const U=Math.sin(oe*Math.PI/180),$=.5-.25*Math.log((1+U)/(1-U))/Math.PI;return $<0?0:$>1?1:$}function or(oe){const U=(180-360*oe)*Math.PI/180;return 360*Math.atan(Math.exp(U))/Math.PI-90}function Jt(oe,U,$,X){let te=X;const se=U+($-U>>1);let me,xe=$-U;const ue=oe[U],Re=oe[U+1],je=oe[$],Le=oe[$+1];for(let Qe=U+3;Qe<$;Qe+=3){const vt=tr(oe[Qe],oe[Qe+1],ue,Re,je,Le);if(vt>te)me=Qe,te=vt;else if(vt===te){const wt=Math.abs(Qe-se);wt<xe&&(me=Qe,xe=wt)}}te>X&&(me-U>3&&Jt(oe,U,me,X),oe[me+2]=te,$-me>3&&Jt(oe,me,$,X))}function tr(oe,U,$,X,te,se){let me=te-$,xe=se-X;if(me!==0||xe!==0){const ue=((oe-$)*me+(U-X)*xe)/(me*me+xe*xe);ue>1?($=te,X=se):ue>0&&($+=me*ue,X+=xe*ue)}return me=oe-$,xe=U-X,me*me+xe*xe}function rr(oe,U,$,X){const te={id:oe??null,type:U,geometry:$,tags:X,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(U==="Point"||U==="MultiPoint"||U==="LineString")Gr(te,$);else if(U==="Polygon")Gr(te,$[0]);else if(U==="MultiLineString")for(const se of $)Gr(te,se);else if(U==="MultiPolygon")for(const se of $)Gr(te,se[0]);return te}function Gr(oe,U){for(let $=0;$<U.length;$+=3)oe.minX=Math.min(oe.minX,U[$]),oe.minY=Math.min(oe.minY,U[$+1]),oe.maxX=Math.max(oe.maxX,U[$]),oe.maxY=Math.max(oe.maxY,U[$+1])}function sr(oe,U,$,X){if(!U.geometry)return;const te=U.geometry.coordinates;if(te&&te.length===0)return;const se=U.geometry.type,me=Math.pow($.tolerance/((1<<$.maxZoom)*$.extent),2);let xe=[],ue=U.id;if($.promoteId?ue=U.properties[$.promoteId]:$.generateId&&(ue=X||0),se==="Point")Br(te,xe);else if(se==="MultiPoint")for(const Re of te)Br(Re,xe);else if(se==="LineString")Te(te,xe,me,!1);else if(se==="MultiLineString"){if($.lineMetrics){for(const Re of te)xe=[],Te(Re,xe,me,!1),oe.push(rr(ue,"LineString",xe,U.properties));return}Ar(te,xe,me,!1)}else if(se==="Polygon")Ar(te,xe,me,!0);else{if(se!=="MultiPolygon"){if(se==="GeometryCollection"){for(const Re of U.geometry.geometries)sr(oe,{id:ue,geometry:Re,properties:U.properties},$,X);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const Re of te){const je=[];Ar(Re,je,me,!0),xe.push(je)}}oe.push(rr(ue,se,xe,U.properties))}function Br(oe,U){U.push(yr(oe[0]),mt(oe[1]),0)}function Te(oe,U,$,X){let te,se,me=0;for(let ue=0;ue<oe.length;ue++){const Re=yr(oe[ue][0]),je=mt(oe[ue][1]);U.push(Re,je,0),ue>0&&(me+=X?(te*je-Re*se)/2:Math.sqrt(Math.pow(Re-te,2)+Math.pow(je-se,2))),te=Re,se=je}const xe=U.length-3;U[2]=1,Jt(U,0,xe,$),U[xe+2]=1,U.size=Math.abs(me),U.start=0,U.end=U.size}function Ar(oe,U,$,X){for(let te=0;te<oe.length;te++){const se=[];Te(oe[te],se,$,X),U.push(se)}}function yr(oe){return oe/360+.5}function mt(oe){const U=Math.sin(oe*Math.PI/180),$=.5-.25*Math.log((1+U)/(1-U))/Math.PI;return $<0?0:$>1?1:$}function Ft(oe,U,$,X,te,se,me,xe){if(X/=U,se>=($/=U)&&me<X)return oe;if(me<$||se>=X)return null;const ue=[];for(const Re of oe){const je=Re.geometry;let Le=Re.type;const Qe=te===0?Re.minX:Re.minY,vt=te===0?Re.maxX:Re.maxY;if(Qe>=$&&vt<X){ue.push(Re);continue}if(vt<$||Qe>=X)continue;let wt=[];if(Le==="Point"||Le==="MultiPoint")Xt(je,wt,$,X,te);else if(Le==="LineString")Sr(je,wt,$,X,te,!1,xe.lineMetrics);else if(Le==="MultiLineString")Qt(je,wt,$,X,te,!1);else if(Le==="Polygon")Qt(je,wt,$,X,te,!0);else if(Le==="MultiPolygon")for(const At of je){const Kt=[];Qt(At,Kt,$,X,te,!0),Kt.length&&wt.push(Kt)}if(wt.length){if(xe.lineMetrics&&Le==="LineString"){for(const At of wt)ue.push(rr(Re.id,Le,At,Re.tags));continue}Le!=="LineString"&&Le!=="MultiLineString"||(wt.length===1?(Le="LineString",wt=wt[0]):Le="MultiLineString"),Le!=="Point"&&Le!=="MultiPoint"||(Le=wt.length===3?"Point":"MultiPoint"),ue.push(rr(Re.id,Le,wt,Re.tags))}}return ue.length?ue:null}function Xt(oe,U,$,X,te){for(let se=0;se<oe.length;se+=3){const me=oe[se+te];me>=$&&me<=X&&Cr(U,oe[se],oe[se+1],oe[se+2])}}function Sr(oe,U,$,X,te,se,me){let xe=Zt(oe);const ue=te===0?vr:Nn;let Re,je,Le=oe.start;for(let Kt=0;Kt<oe.length-3;Kt+=3){const zt=oe[Kt],Yt=oe[Kt+1],zr=oe[Kt+2],cr=oe[Kt+3],Ut=oe[Kt+4],fr=te===0?zt:Yt,Er=te===0?cr:Ut;let $r=!1;me&&(Re=Math.sqrt(Math.pow(zt-cr,2)+Math.pow(Yt-Ut,2))),fr<$?Er>$&&(je=ue(xe,zt,Yt,cr,Ut,$),me&&(xe.start=Le+Re*je)):fr>X?Er<X&&(je=ue(xe,zt,Yt,cr,Ut,X),me&&(xe.start=Le+Re*je)):Cr(xe,zt,Yt,zr),Er<$&&fr>=$&&(je=ue(xe,zt,Yt,cr,Ut,$),$r=!0),Er>X&&fr<=X&&(je=ue(xe,zt,Yt,cr,Ut,X),$r=!0),!se&&$r&&(me&&(xe.end=Le+Re*je),U.push(xe),xe=Zt(oe)),me&&(Le+=Re)}let Qe=oe.length-3;const vt=oe[Qe],wt=oe[Qe+1],At=te===0?vt:wt;At>=$&&At<=X&&Cr(xe,vt,wt,oe[Qe+2]),Qe=xe.length-3,se&&Qe>=3&&(xe[Qe]!==xe[0]||xe[Qe+1]!==xe[1])&&Cr(xe,xe[0],xe[1],xe[2]),xe.length&&U.push(xe)}function Zt(oe){const U=[];return U.size=oe.size,U.start=oe.start,U.end=oe.end,U}function Qt(oe,U,$,X,te,se){for(const me of oe)Sr(me,U,$,X,te,se,!1)}function Cr(oe,U,$,X){oe.push(U,$,X)}function vr(oe,U,$,X,te,se){const me=(se-U)/(X-U);return Cr(oe,se,$+(te-$)*me,1),me}function Nn(oe,U,$,X,te,se){const me=(se-$)/(te-$);return Cr(oe,U+(X-U)*me,se,1),me}function Xe(oe,U){const $=[];for(let X=0;X<oe.length;X++){const te=oe[X],se=te.type;let me;if(se==="Point"||se==="MultiPoint"||se==="LineString")me=_r(te.geometry,U);else if(se==="MultiLineString"||se==="Polygon"){me=[];for(const xe of te.geometry)me.push(_r(xe,U))}else if(se==="MultiPolygon"){me=[];for(const xe of te.geometry){const ue=[];for(const Re of xe)ue.push(_r(Re,U));me.push(ue)}}$.push(rr(te.id,se,me,te.tags))}return $}function _r(oe,U){const $=[];$.size=oe.size,oe.start!==void 0&&($.start=oe.start,$.end=oe.end);for(let X=0;X<oe.length;X+=3)$.push(oe[X]+U,oe[X+1],oe[X+2]);return $}function nr(oe,U){if(oe.transformed)return oe;const $=1<<oe.z,X=oe.x,te=oe.y;for(const se of oe.features){const me=se.geometry,xe=se.type;if(se.geometry=[],xe===1)for(let ue=0;ue<me.length;ue+=2)se.geometry.push(Nr(me[ue],me[ue+1],U,$,X,te));else for(let ue=0;ue<me.length;ue++){const Re=[];for(let je=0;je<me[ue].length;je+=2)Re.push(Nr(me[ue][je],me[ue][je+1],U,$,X,te));se.geometry.push(Re)}}return oe.transformed=!0,oe}function Nr(oe,U,$,X,te,se){return[Math.round($*(oe*X-te)),Math.round($*(U*X-se))]}function Lr(oe,U,$,X,te){const se=U===te.maxZoom?0:te.tolerance/((1<<U)*te.extent),me={features:[],numPoints:0,numSimplified:0,numFeatures:oe.length,source:null,x:$,y:X,z:U,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const xe of oe)Ye(me,xe,se,te);return me}function Ye(oe,U,$,X){const te=U.geometry,se=U.type,me=[];if(oe.minX=Math.min(oe.minX,U.minX),oe.minY=Math.min(oe.minY,U.minY),oe.maxX=Math.max(oe.maxX,U.maxX),oe.maxY=Math.max(oe.maxY,U.maxY),se==="Point"||se==="MultiPoint")for(let xe=0;xe<te.length;xe+=3)me.push(te[xe],te[xe+1]),oe.numPoints++,oe.numSimplified++;else if(se==="LineString")Dt(me,te,oe,$,!1,!1);else if(se==="MultiLineString"||se==="Polygon")for(let xe=0;xe<te.length;xe++)Dt(me,te[xe],oe,$,se==="Polygon",xe===0);else if(se==="MultiPolygon")for(let xe=0;xe<te.length;xe++){const ue=te[xe];for(let Re=0;Re<ue.length;Re++)Dt(me,ue[Re],oe,$,!0,Re===0)}if(me.length){let xe=U.tags||null;if(se==="LineString"&&X.lineMetrics){xe={};for(const Re in U.tags)xe[Re]=U.tags[Re];xe.mapbox_clip_start=te.start/te.size,xe.mapbox_clip_end=te.end/te.size}const ue={geometry:me,type:se==="Polygon"||se==="MultiPolygon"?3:se==="LineString"||se==="MultiLineString"?2:1,tags:xe};U.id!==null&&(ue.id=U.id),oe.features.push(ue)}}function Dt(oe,U,$,X,te,se){const me=X*X;if(X>0&&U.size<(te?me:X))return void($.numPoints+=U.length/3);const xe=[];for(let ue=0;ue<U.length;ue+=3)(X===0||U[ue+2]>me)&&($.numSimplified++,xe.push(U[ue],U[ue+1])),$.numPoints++;te&&function(ue,Re){let je=0;for(let Le=0,Qe=ue.length,vt=Qe-2;Le<Qe;vt=Le,Le+=2)je+=(ue[Le]-ue[vt])*(ue[Le+1]+ue[vt+1]);if(je>0===Re)for(let Le=0,Qe=ue.length;Le<Qe/2;Le+=2){const vt=ue[Le],wt=ue[Le+1];ue[Le]=ue[Qe-2-Le],ue[Le+1]=ue[Qe-1-Le],ue[Qe-2-Le]=vt,ue[Qe-1-Le]=wt}}(xe,se),oe.push(xe)}const ht={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class lr{constructor(U,$){const X=($=this.options=function(se,me){for(const xe in me)se[xe]=me[xe];return se}(Object.create(ht),$)).debug;if(X&&console.time("preprocess data"),$.maxZoom<0||$.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if($.promoteId&&$.generateId)throw new Error("promoteId and generateId cannot be used together.");let te=function(se,me){const xe=[];if(se.type==="FeatureCollection")for(let ue=0;ue<se.features.length;ue++)sr(xe,se.features[ue],me,ue);else sr(xe,se.type==="Feature"?se:{geometry:se},me);return xe}(U,$);this.tiles={},this.tileCoords=[],X&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",$.indexMaxZoom,$.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),te=function(se,me){const xe=me.buffer/me.extent;let ue=se;const Re=Ft(se,1,-1-xe,xe,0,-1,2,me),je=Ft(se,1,1-xe,2+xe,0,-1,2,me);return(Re||je)&&(ue=Ft(se,1,-xe,1+xe,0,-1,2,me)||[],Re&&(ue=Xe(Re,1).concat(ue)),je&&(ue=ue.concat(Xe(je,-1)))),ue}(te,$),te.length&&this.splitTile(te,0,0,0),X&&(te.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(U,$,X,te,se,me,xe){const ue=[U,$,X,te],Re=this.options,je=Re.debug;for(;ue.length;){te=ue.pop(),X=ue.pop(),$=ue.pop(),U=ue.pop();const Le=1<<$,Qe=Dr($,X,te);let vt=this.tiles[Qe];if(!vt&&(je>1&&console.time("creation"),vt=this.tiles[Qe]=Lr(U,$,X,te,Re),this.tileCoords.push({z:$,x:X,y:te}),je)){je>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",$,X,te,vt.numFeatures,vt.numPoints,vt.numSimplified),console.timeEnd("creation"));const $r=`z${$}`;this.stats[$r]=(this.stats[$r]||0)+1,this.total++}if(vt.source=U,se==null){if($===Re.indexMaxZoom||vt.numPoints<=Re.indexMaxPoints)continue}else{if($===Re.maxZoom||$===se)continue;if(se!=null){const $r=se-$;if(X!==me>>$r||te!==xe>>$r)continue}}if(vt.source=null,U.length===0)continue;je>1&&console.time("clipping");const wt=.5*Re.buffer/Re.extent,At=.5-wt,Kt=.5+wt,zt=1+wt;let Yt=null,zr=null,cr=null,Ut=null,fr=Ft(U,Le,X-wt,X+Kt,0,vt.minX,vt.maxX,Re),Er=Ft(U,Le,X+At,X+zt,0,vt.minX,vt.maxX,Re);U=null,fr&&(Yt=Ft(fr,Le,te-wt,te+Kt,1,vt.minY,vt.maxY,Re),zr=Ft(fr,Le,te+At,te+zt,1,vt.minY,vt.maxY,Re),fr=null),Er&&(cr=Ft(Er,Le,te-wt,te+Kt,1,vt.minY,vt.maxY,Re),Ut=Ft(Er,Le,te+At,te+zt,1,vt.minY,vt.maxY,Re),Er=null),je>1&&console.timeEnd("clipping"),ue.push(Yt||[],$+1,2*X,2*te),ue.push(zr||[],$+1,2*X,2*te+1),ue.push(cr||[],$+1,2*X+1,2*te),ue.push(Ut||[],$+1,2*X+1,2*te+1)}}getTile(U,$,X){U=+U,$=+$,X=+X;const te=this.options,{extent:se,debug:me}=te;if(U<0||U>24)return null;const xe=1<<U,ue=Dr(U,$=$+xe&xe-1,X);if(this.tiles[ue])return nr(this.tiles[ue],se);me>1&&console.log("drilling down to z%d-%d-%d",U,$,X);let Re,je=U,Le=$,Qe=X;for(;!Re&&je>0;)je--,Le>>=1,Qe>>=1,Re=this.tiles[Dr(je,Le,Qe)];return Re&&Re.source?(me>1&&(console.log("found parent tile z%d-%d-%d",je,Le,Qe),console.time("drilling down")),this.splitTile(Re.source,je,Le,Qe,U,$,X),me>1&&console.timeEnd("drilling down"),this.tiles[ue]?nr(this.tiles[ue],se):null):null}}function Dr(oe,U,$){return 32*((1<<oe)*$+U)+oe}function kt(oe,U){return U?oe.properties[U]:oe.id}function Zr(oe,U){if(oe==null)return!0;if(oe.type==="Feature")return kt(oe,U)!=null;if(oe.type==="FeatureCollection"){const $=new Set;for(const X of oe.features){const te=kt(X,U);if(te==null||$.has(te))return!1;$.add(te)}return!0}return!1}function Fr(oe,U){const $=new Map;if(oe!=null)if(oe.type==="Feature")$.set(kt(oe,U),oe);else for(const X of oe.features)$.set(kt(X,U),X);return $}class Xr extends A{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(U,$){return f._(this,void 0,void 0,function*(){const X=U.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const te=this._geoJSONIndex.getTile(X.z,X.x,X.y);if(!te)return null;const se=new class{constructor(xe){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=f.X,this.length=xe.length,this._features=xe}feature(xe){return new class{constructor(ue){this._feature=ue,this.extent=f.X,this.type=ue.type,this.properties=ue.tags,"id"in ue&&!isNaN(ue.id)&&(this.id=parseInt(ue.id,10))}loadGeometry(){if(this._feature.type===1){const ue=[];for(const Re of this._feature.geometry)ue.push([new f.P(Re[0],Re[1])]);return ue}{const ue=[];for(const Re of this._feature.geometry){const je=[];for(const Le of Re)je.push(new f.P(Le[0],Le[1]));ue.push(je)}return ue}}toGeoJSON(ue,Re,je){return Z.call(this,ue,Re,je)}}(this._features[xe])}}(te.features);let me=Se(se);return me.byteOffset===0&&me.byteLength===me.buffer.byteLength||(me=new Uint8Array(me)),{vectorTile:se,rawData:me.buffer}})}loadData(U){return f._(this,void 0,void 0,function*(){var $;($=this._pendingRequest)===null||$===void 0||$.abort();const X=!!(U&&U.request&&U.request.collectResourceTiming)&&new f.bu(U.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(U,this._pendingRequest),this._geoJSONIndex=U.cluster?new st(function({superclusterOptions:me,clusterProperties:xe}){if(!xe||!me)return me;const ue={},Re={},je={accumulated:null,zoom:0},Le={properties:null},Qe=Object.keys(xe);for(const vt of Qe){const[wt,At]=xe[vt],Kt=f.bB(At),zt=f.bB(typeof wt=="string"?[wt,["accumulated"],["get",vt]]:wt);ue[vt]=Kt.value,Re[vt]=zt.value}return me.map=vt=>{Le.properties=vt;const wt={};for(const At of Qe)wt[At]=ue[At].evaluate(je,Le);return wt},me.reduce=(vt,wt)=>{Le.properties=wt;for(const At of Qe)je.accumulated=vt[At],vt[At]=Re[At].evaluate(je,Le)},me}(U)).load((yield this._pendingData).features):(te=yield this._pendingData,new lr(te,U.geojsonVtOptions)),this.loaded={};const se={};if(X){const me=X.finish();me&&(se.resourceTiming={},se.resourceTiming[U.source]=JSON.parse(JSON.stringify(me)))}return se}catch(se){if(delete this._pendingRequest,f.bA(se))return{abandoned:!0};throw se}var te})}getData(){return f._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(U){const $=this.loaded;return $&&$[U.uid]?super.reloadTile(U):this.loadTile(U)}loadAndProcessGeoJSON(U,$){return f._(this,void 0,void 0,function*(){let X=yield this.loadGeoJSON(U,$);if(delete this._pendingRequest,typeof X!="object")throw new Error(`Input data given to '${U.source}' is not a valid GeoJSON object.`);if(q(X,!0),U.filter){const te=f.bB(U.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(te.result==="error")throw new Error(te.value.map(me=>`${me.key}: ${me.message}`).join(", "));X={type:"FeatureCollection",features:X.features.filter(me=>te.value.evaluate({zoom:0},me))}}return X})}loadGeoJSON(U,$){return f._(this,void 0,void 0,function*(){const{promoteId:X}=U;if(U.request){const te=yield f.h(U.request,$);return this._dataUpdateable=Zr(te.data,X)?Fr(te.data,X):void 0,te.data}if(typeof U.data=="string")try{const te=JSON.parse(U.data);return this._dataUpdateable=Zr(te,X)?Fr(te,X):void 0,te}catch{throw new Error(`Input data given to '${U.source}' is not a valid GeoJSON object.`)}if(!U.dataDiff)throw new Error(`Input data given to '${U.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${U.source}`);return function(te,se,me){var xe,ue,Re,je;if(se.removeAll&&te.clear(),se.remove)for(const Le of se.remove)te.delete(Le);if(se.add)for(const Le of se.add){const Qe=kt(Le,me);Qe!=null&&te.set(Qe,Le)}if(se.update)for(const Le of se.update){let Qe=te.get(Le.id);if(Qe==null)continue;const vt=!Le.removeAllProperties&&(((xe=Le.removeProperties)===null||xe===void 0?void 0:xe.length)>0||((ue=Le.addOrUpdateProperties)===null||ue===void 0?void 0:ue.length)>0);if((Le.newGeometry||Le.removeAllProperties||vt)&&(Qe=Object.assign({},Qe),te.set(Le.id,Qe),vt&&(Qe.properties=Object.assign({},Qe.properties))),Le.newGeometry&&(Qe.geometry=Le.newGeometry),Le.removeAllProperties)Qe.properties={};else if(((Re=Le.removeProperties)===null||Re===void 0?void 0:Re.length)>0)for(const wt of Le.removeProperties)Object.prototype.hasOwnProperty.call(Qe.properties,wt)&&delete Qe.properties[wt];if(((je=Le.addOrUpdateProperties)===null||je===void 0?void 0:je.length)>0)for(const{key:wt,value:At}of Le.addOrUpdateProperties)Qe.properties[wt]=At}}(this._dataUpdateable,U.dataDiff,X),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(U){return f._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(U){return this._geoJSONIndex.getClusterExpansionZoom(U.clusterId)}getClusterChildren(U){return this._geoJSONIndex.getChildren(U.clusterId)}getClusterLeaves(U){return this._geoJSONIndex.getLeaves(U.clusterId,U.limit,U.offset)}}class Jr{constructor(U){this.self=U,this.actor=new f.F(U),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=($,X)=>{if(this.externalWorkerSourceTypes[$])throw new Error(`Worker source with name "${$}" already registered.`);this.externalWorkerSourceTypes[$]=X},this.self.addProtocol=f.bh,this.self.removeProtocol=f.bi,this.self.registerRTLTextPlugin=$=>{if(f.bC.isParsed())throw new Error("RTL text plugin already registered.");f.bC.setMethods($)},this.actor.registerMessageHandler("LDT",($,X)=>this._getDEMWorkerSource($,X.source).loadTile(X)),this.actor.registerMessageHandler("RDT",($,X)=>f._(this,void 0,void 0,function*(){this._getDEMWorkerSource($,X.source).removeTile(X)})),this.actor.registerMessageHandler("GCEZ",($,X)=>f._(this,void 0,void 0,function*(){return this._getWorkerSource($,X.type,X.source).getClusterExpansionZoom(X)})),this.actor.registerMessageHandler("GCC",($,X)=>f._(this,void 0,void 0,function*(){return this._getWorkerSource($,X.type,X.source).getClusterChildren(X)})),this.actor.registerMessageHandler("GCL",($,X)=>f._(this,void 0,void 0,function*(){return this._getWorkerSource($,X.type,X.source).getClusterLeaves(X)})),this.actor.registerMessageHandler("LD",($,X)=>this._getWorkerSource($,X.type,X.source).loadData(X)),this.actor.registerMessageHandler("GD",($,X)=>this._getWorkerSource($,X.type,X.source).getData()),this.actor.registerMessageHandler("LT",($,X)=>this._getWorkerSource($,X.type,X.source).loadTile(X)),this.actor.registerMessageHandler("RT",($,X)=>this._getWorkerSource($,X.type,X.source).reloadTile(X)),this.actor.registerMessageHandler("AT",($,X)=>this._getWorkerSource($,X.type,X.source).abortTile(X)),this.actor.registerMessageHandler("RMT",($,X)=>this._getWorkerSource($,X.type,X.source).removeTile(X)),this.actor.registerMessageHandler("RS",($,X)=>f._(this,void 0,void 0,function*(){if(!this.workerSources[$]||!this.workerSources[$][X.type]||!this.workerSources[$][X.type][X.source])return;const te=this.workerSources[$][X.type][X.source];delete this.workerSources[$][X.type][X.source],te.removeSource!==void 0&&te.removeSource(X)})),this.actor.registerMessageHandler("RM",$=>f._(this,void 0,void 0,function*(){delete this.layerIndexes[$],delete this.availableImages[$],delete this.workerSources[$],delete this.demWorkerSources[$]})),this.actor.registerMessageHandler("SR",($,X)=>f._(this,void 0,void 0,function*(){this.referrer=X})),this.actor.registerMessageHandler("SRPS",($,X)=>this._syncRTLPluginState($,X)),this.actor.registerMessageHandler("IS",($,X)=>f._(this,void 0,void 0,function*(){this.self.importScripts(X)})),this.actor.registerMessageHandler("SI",($,X)=>this._setImages($,X)),this.actor.registerMessageHandler("UL",($,X)=>f._(this,void 0,void 0,function*(){this._getLayerIndex($).update(X.layers,X.removedIds)})),this.actor.registerMessageHandler("SL",($,X)=>f._(this,void 0,void 0,function*(){this._getLayerIndex($).replace(X)}))}_setImages(U,$){return f._(this,void 0,void 0,function*(){this.availableImages[U]=$;for(const X in this.workerSources[U]){const te=this.workerSources[U][X];for(const se in te)te[se].availableImages=$}})}_syncRTLPluginState(U,$){return f._(this,void 0,void 0,function*(){if(f.bC.isParsed())return f.bC.getState();if($.pluginStatus!=="loading")return f.bC.setState($),$;const X=$.pluginURL;if(this.self.importScripts(X),f.bC.isParsed()){const te={pluginStatus:"loaded",pluginURL:X};return f.bC.setState(te),te}throw f.bC.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${X}`)})}_getAvailableImages(U){let $=this.availableImages[U];return $||($=[]),$}_getLayerIndex(U){let $=this.layerIndexes[U];return $||($=this.layerIndexes[U]=new u),$}_getWorkerSource(U,$,X){if(this.workerSources[U]||(this.workerSources[U]={}),this.workerSources[U][$]||(this.workerSources[U][$]={}),!this.workerSources[U][$][X]){const te={sendAsync:(se,me)=>(se.targetMapId=U,this.actor.sendAsync(se,me))};switch($){case"vector":this.workerSources[U][$][X]=new A(te,this._getLayerIndex(U),this._getAvailableImages(U));break;case"geojson":this.workerSources[U][$][X]=new Xr(te,this._getLayerIndex(U),this._getAvailableImages(U));break;default:this.workerSources[U][$][X]=new this.externalWorkerSourceTypes[$](te,this._getLayerIndex(U),this._getAvailableImages(U))}}return this.workerSources[U][$][X]}_getDEMWorkerSource(U,$){return this.demWorkerSources[U]||(this.demWorkerSources[U]={}),this.demWorkerSources[U][$]||(this.demWorkerSources[U][$]=new I),this.demWorkerSources[U][$]}}return f.i(self)&&(self.worker=new Jr(self)),Jr}),l("index",["exports","./shared"],function(f,u){var S="4.5.1";let T,M;const A={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:y=>new Promise((i,c)=>{const p=requestAnimationFrame(i);y.signal.addEventListener("abort",()=>{cancelAnimationFrame(p),c(u.c())})}),getImageData(y,i=0){return this.getImageCanvasContext(y).getImageData(-i,-i,y.width+2*i,y.height+2*i)},getImageCanvasContext(y){const i=window.document.createElement("canvas"),c=i.getContext("2d",{willReadFrequently:!0});if(!c)throw new Error("failed to create canvas 2d context");return i.width=y.width,i.height=y.height,c.drawImage(y,0,0,y.width,y.height),c},resolveURL:y=>(T||(T=document.createElement("a")),T.href=y,T.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(M==null&&(M=matchMedia("(prefers-reduced-motion: reduce)")),M.matches)}};class I{static testProp(i){if(!I.docStyle)return i[0];for(let c=0;c<i.length;c++)if(i[c]in I.docStyle)return i[c];return i[0]}static create(i,c,p){const m=window.document.createElement(i);return c!==void 0&&(m.className=c),p&&p.appendChild(m),m}static createNS(i,c){return window.document.createElementNS(i,c)}static disableDrag(){I.docStyle&&I.selectProp&&(I.userSelect=I.docStyle[I.selectProp],I.docStyle[I.selectProp]="none")}static enableDrag(){I.docStyle&&I.selectProp&&(I.docStyle[I.selectProp]=I.userSelect)}static setTransform(i,c){i.style[I.transformProp]=c}static addEventListener(i,c,p,m={}){i.addEventListener(c,p,"passive"in m?m:m.capture)}static removeEventListener(i,c,p,m={}){i.removeEventListener(c,p,"passive"in m?m:m.capture)}static suppressClickInternal(i){i.preventDefault(),i.stopPropagation(),window.removeEventListener("click",I.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",I.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",I.suppressClickInternal,!0)},0)}static getScale(i){const c=i.getBoundingClientRect();return{x:c.width/i.offsetWidth||1,y:c.height/i.offsetHeight||1,boundingClientRect:c}}static getPoint(i,c,p){const m=c.boundingClientRect;return new u.P((p.clientX-m.left)/c.x-i.clientLeft,(p.clientY-m.top)/c.y-i.clientTop)}static mousePos(i,c){const p=I.getScale(i);return I.getPoint(i,p,c)}static touchPos(i,c){const p=[],m=I.getScale(i);for(let v=0;v<c.length;v++)p.push(I.getPoint(i,m,c[v]));return p}static mouseButton(i){return i.button}static remove(i){i.parentNode&&i.parentNode.removeChild(i)}}I.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,I.selectProp=I.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),I.transformProp=I.testProp(["transform","WebkitTransform"]);const G={supported:!1,testSupport:function(y){!Z&&q&&(V?F(y):N=y)}};let N,q,Z=!1,V=!1;function F(y){const i=y.createTexture();y.bindTexture(y.TEXTURE_2D,i);try{if(y.texImage2D(y.TEXTURE_2D,0,y.RGBA,y.RGBA,y.UNSIGNED_BYTE,q),y.isContextLost())return;G.supported=!0}catch{}y.deleteTexture(i),Z=!0}var H;typeof document<"u"&&(q=document.createElement("img"),q.onload=()=>{N&&F(N),N=null,V=!0},q.onerror=()=>{Z=!0,N=null},q.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(y){let i,c,p,m;y.resetRequestQueue=()=>{i=[],c=0,p=0,m={}},y.addThrottleControl=k=>{const z=p++;return m[z]=k,z},y.removeThrottleControl=k=>{delete m[k],w()},y.getImage=(k,z,B=!0)=>new Promise((O,K)=>{G.supported&&(k.headers||(k.headers={}),k.headers.accept="image/webp,*/*"),u.e(k,{type:"image"}),i.push({abortController:z,requestParameters:k,supportImageRefresh:B,state:"queued",onError:Q=>{K(Q)},onSuccess:Q=>{O(Q)}}),w()});const v=k=>u._(this,void 0,void 0,function*(){k.state="running";const{requestParameters:z,supportImageRefresh:B,onError:O,onSuccess:K,abortController:Q}=k,re=B===!1&&!u.i(self)&&!u.g(z.url)&&(!z.headers||Object.keys(z.headers).reduce((de,ye)=>de&&ye==="accept",!0));c++;const he=re?E(z,Q):u.m(z,Q);try{const de=yield he;delete k.abortController,k.state="completed",de.data instanceof HTMLImageElement||u.b(de.data)?K(de):de.data&&K({data:yield(le=de.data,typeof createImageBitmap=="function"?u.d(le):u.f(le)),cacheControl:de.cacheControl,expires:de.expires})}catch(de){delete k.abortController,O(de)}finally{c--,w()}var le}),w=()=>{const k=(()=>{for(const z of Object.keys(m))if(m[z]())return!0;return!1})()?u.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:u.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let z=c;z<k&&i.length>0;z++){const B=i.shift();B.abortController.signal.aborted?z--:v(B)}},E=(k,z)=>new Promise((B,O)=>{const K=new Image,Q=k.url,re=k.credentials;re&&re==="include"?K.crossOrigin="use-credentials":(re&&re==="same-origin"||!u.s(Q))&&(K.crossOrigin="anonymous"),z.signal.addEventListener("abort",()=>{K.src="",O(u.c())}),K.fetchPriority="high",K.onload=()=>{K.onerror=K.onload=null,B({data:K})},K.onerror=()=>{K.onerror=K.onload=null,z.signal.aborted||O(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},K.src=Q})}(H||(H={})),H.resetRequestQueue();class Y{constructor(i){this._transformRequestFn=i}transformRequest(i,c){return this._transformRequestFn&&this._transformRequestFn(i,c)||{url:i}}setTransformRequest(i){this._transformRequestFn=i}}function ne(y){var i=new u.A(3);return i[0]=y[0],i[1]=y[1],i[2]=y[2],i}var fe,ie=function(y,i,c){return y[0]=i[0]-c[0],y[1]=i[1]-c[1],y[2]=i[2]-c[2],y};fe=new u.A(3),u.A!=Float32Array&&(fe[0]=0,fe[1]=0,fe[2]=0);var _e=function(y){var i=y[0],c=y[1];return i*i+c*c};function be(y){const i=[];if(typeof y=="string")i.push({id:"default",url:y});else if(y&&y.length>0){const c=[];for(const{id:p,url:m}of y){const v=`${p}${m}`;c.indexOf(v)===-1&&(c.push(v),i.push({id:p,url:m}))}}return i}function Pe(y,i,c){const p=y.split("?");return p[0]+=`${i}${c}`,p.join("?")}(function(){var y=new u.A(2);u.A!=Float32Array&&(y[0]=0,y[1]=0)})();class ze{constructor(i,c,p,m){this.context=i,this.format=p,this.texture=i.gl.createTexture(),this.update(c,m)}update(i,c,p){const{width:m,height:v}=i,w=!(this.size&&this.size[0]===m&&this.size[1]===v||p),{context:E}=this,{gl:k}=E;if(this.useMipmap=!!(c&&c.useMipmap),k.bindTexture(k.TEXTURE_2D,this.texture),E.pixelStoreUnpackFlipY.set(!1),E.pixelStoreUnpack.set(1),E.pixelStoreUnpackPremultiplyAlpha.set(this.format===k.RGBA&&(!c||c.premultiply!==!1)),w)this.size=[m,v],i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||u.b(i)?k.texImage2D(k.TEXTURE_2D,0,this.format,this.format,k.UNSIGNED_BYTE,i):k.texImage2D(k.TEXTURE_2D,0,this.format,m,v,0,this.format,k.UNSIGNED_BYTE,i.data);else{const{x:z,y:B}=p||{x:0,y:0};i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||u.b(i)?k.texSubImage2D(k.TEXTURE_2D,0,z,B,k.RGBA,k.UNSIGNED_BYTE,i):k.texSubImage2D(k.TEXTURE_2D,0,z,B,m,v,k.RGBA,k.UNSIGNED_BYTE,i.data)}this.useMipmap&&this.isSizePowerOfTwo()&&k.generateMipmap(k.TEXTURE_2D)}bind(i,c,p){const{context:m}=this,{gl:v}=m;v.bindTexture(v.TEXTURE_2D,this.texture),p!==v.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(p=v.LINEAR),i!==this.filter&&(v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,i),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,p||i),this.filter=i),c!==this.wrap&&(v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,c),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,c),this.wrap=c)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:i}=this.context;i.deleteTexture(this.texture),this.texture=null}}function We(y){const{userImage:i}=y;return!!(i&&i.render&&i.render())&&(y.data.replace(new Uint8Array(i.data.buffer)),!0)}class Ce extends u.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new u.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(i){if(this.loaded!==i&&(this.loaded=i,i)){for(const{ids:c,promiseResolve:p}of this.requestors)p(this._getImagesForIds(c));this.requestors=[]}}getImage(i){const c=this.images[i];if(c&&!c.data&&c.spriteData){const p=c.spriteData;c.data=new u.R({width:p.width,height:p.height},p.context.getImageData(p.x,p.y,p.width,p.height).data),c.spriteData=null}return c}addImage(i,c){if(this.images[i])throw new Error(`Image id ${i} already exist, use updateImage instead`);this._validate(i,c)&&(this.images[i]=c)}_validate(i,c){let p=!0;const m=c.data||c.spriteData;return this._validateStretch(c.stretchX,m&&m.width)||(this.fire(new u.j(new Error(`Image "${i}" has invalid "stretchX" value`))),p=!1),this._validateStretch(c.stretchY,m&&m.height)||(this.fire(new u.j(new Error(`Image "${i}" has invalid "stretchY" value`))),p=!1),this._validateContent(c.content,c)||(this.fire(new u.j(new Error(`Image "${i}" has invalid "content" value`))),p=!1),p}_validateStretch(i,c){if(!i)return!0;let p=0;for(const m of i){if(m[0]<p||m[1]<m[0]||c<m[1])return!1;p=m[1]}return!0}_validateContent(i,c){if(!i)return!0;if(i.length!==4)return!1;const p=c.spriteData,m=p&&p.width||c.data.width,v=p&&p.height||c.data.height;return!(i[0]<0||m<i[0]||i[1]<0||v<i[1]||i[2]<0||m<i[2]||i[3]<0||v<i[3]||i[2]<i[0]||i[3]<i[1])}updateImage(i,c,p=!0){const m=this.getImage(i);if(p&&(m.data.width!==c.data.width||m.data.height!==c.data.height))throw new Error(`size mismatch between old image (${m.data.width}x${m.data.height}) and new image (${c.data.width}x${c.data.height}).`);c.version=m.version+1,this.images[i]=c,this.updatedImages[i]=!0}removeImage(i){const c=this.images[i];delete this.images[i],delete this.patterns[i],c.userImage&&c.userImage.onRemove&&c.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(i){return new Promise((c,p)=>{let m=!0;if(!this.isLoaded())for(const v of i)this.images[v]||(m=!1);this.isLoaded()||m?c(this._getImagesForIds(i)):this.requestors.push({ids:i,promiseResolve:c})})}_getImagesForIds(i){const c={};for(const p of i){let m=this.getImage(p);m||(this.fire(new u.k("styleimagemissing",{id:p})),m=this.getImage(p)),m?c[p]={data:m.data.clone(),pixelRatio:m.pixelRatio,sdf:m.sdf,version:m.version,stretchX:m.stretchX,stretchY:m.stretchY,content:m.content,textFitWidth:m.textFitWidth,textFitHeight:m.textFitHeight,hasRenderCallback:!!(m.userImage&&m.userImage.render)}:u.w(`Image "${p}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return c}getPixelSize(){const{width:i,height:c}=this.atlasImage;return{width:i,height:c}}getPattern(i){const c=this.patterns[i],p=this.getImage(i);if(!p)return null;if(c&&c.position.version===p.version)return c.position;if(c)c.position.version=p.version;else{const m={w:p.data.width+2,h:p.data.height+2,x:0,y:0},v=new u.I(m,p);this.patterns[i]={bin:m,position:v}}return this._updatePatternAtlas(),this.patterns[i].position}bind(i){const c=i.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new ze(i,this.atlasImage,c.RGBA),this.atlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE)}_updatePatternAtlas(){const i=[];for(const v in this.patterns)i.push(this.patterns[v].bin);const{w:c,h:p}=u.p(i),m=this.atlasImage;m.resize({width:c||1,height:p||1});for(const v in this.patterns){const{bin:w}=this.patterns[v],E=w.x+1,k=w.y+1,z=this.getImage(v).data,B=z.width,O=z.height;u.R.copy(z,m,{x:0,y:0},{x:E,y:k},{width:B,height:O}),u.R.copy(z,m,{x:0,y:O-1},{x:E,y:k-1},{width:B,height:1}),u.R.copy(z,m,{x:0,y:0},{x:E,y:k+O},{width:B,height:1}),u.R.copy(z,m,{x:B-1,y:0},{x:E-1,y:k},{width:1,height:O}),u.R.copy(z,m,{x:0,y:0},{x:E+B,y:k},{width:1,height:O})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(i){for(const c of i){if(this.callbackDispatchedThisFrame[c])continue;this.callbackDispatchedThisFrame[c]=!0;const p=this.getImage(c);p||u.w(`Image with ID: "${c}" was not found`),We(p)&&this.updateImage(c,p)}}}const Ie=1e20;function Ke(y,i,c,p,m,v,w,E,k){for(let z=i;z<i+p;z++)ke(y,c*v+z,v,m,w,E,k);for(let z=c;z<c+m;z++)ke(y,z*v+i,1,p,w,E,k)}function ke(y,i,c,p,m,v,w){v[0]=0,w[0]=-Ie,w[1]=Ie,m[0]=y[i];for(let E=1,k=0,z=0;E<p;E++){m[E]=y[i+E*c];const B=E*E;do{const O=v[k];z=(m[E]-m[O]+B-O*O)/(E-O)/2}while(z<=w[k]&&--k>-1);k++,v[k]=E,w[k]=z,w[k+1]=Ie}for(let E=0,k=0;E<p;E++){for(;w[k+1]<E;)k++;const z=v[k],B=E-z;y[i+E*c]=m[z]+B*B}}class Se{constructor(i,c){this.requestManager=i,this.localIdeographFontFamily=c,this.entries={}}setURL(i){this.url=i}getGlyphs(i){return u._(this,void 0,void 0,function*(){const c=[];for(const v in i)for(const w of i[v])c.push(this._getAndCacheGlyphsPromise(v,w));const p=yield Promise.all(c),m={};for(const{stack:v,id:w,glyph:E}of p)m[v]||(m[v]={}),m[v][w]=E&&{id:E.id,bitmap:E.bitmap.clone(),metrics:E.metrics};return m})}_getAndCacheGlyphsPromise(i,c){return u._(this,void 0,void 0,function*(){let p=this.entries[i];p||(p=this.entries[i]={glyphs:{},requests:{},ranges:{}});let m=p.glyphs[c];if(m!==void 0)return{stack:i,id:c,glyph:m};if(m=this._tinySDF(p,i,c),m)return p.glyphs[c]=m,{stack:i,id:c,glyph:m};const v=Math.floor(c/256);if(256*v>65535)throw new Error("glyphs > 65535 not supported");if(p.ranges[v])return{stack:i,id:c,glyph:m};if(!this.url)throw new Error("glyphsUrl is not set");if(!p.requests[v]){const E=Se.loadGlyphRange(i,v,this.url,this.requestManager);p.requests[v]=E}const w=yield p.requests[v];for(const E in w)this._doesCharSupportLocalGlyph(+E)||(p.glyphs[+E]=w[+E]);return p.ranges[v]=!0,{stack:i,id:c,glyph:w[c]||null}})}_doesCharSupportLocalGlyph(i){return!!this.localIdeographFontFamily&&(u.u["CJK Unified Ideographs"](i)||u.u["Hangul Syllables"](i)||u.u.Hiragana(i)||u.u.Katakana(i))}_tinySDF(i,c,p){const m=this.localIdeographFontFamily;if(!m||!this._doesCharSupportLocalGlyph(p))return;let v=i.tinySDF;if(!v){let E="400";/bold/i.test(c)?E="900":/medium/i.test(c)?E="500":/light/i.test(c)&&(E="200"),v=i.tinySDF=new Se.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:m,fontWeight:E})}const w=v.draw(String.fromCharCode(p));return{id:p,bitmap:new u.o({width:w.width||60,height:w.height||60},w.data),metrics:{width:w.glyphWidth/2||24,height:w.glyphHeight/2||24,left:w.glyphLeft/2+.5||0,top:w.glyphTop/2-27.5||-8,advance:w.glyphAdvance/2||24,isDoubleResolution:!0}}}}Se.loadGlyphRange=function(y,i,c,p){return u._(this,void 0,void 0,function*(){const m=256*i,v=m+255,w=p.transformRequest(c.replace("{fontstack}",y).replace("{range}",`${m}-${v}`),"Glyphs"),E=yield u.l(w,new AbortController);if(!E||!E.data)throw new Error(`Could not load glyph range. range: ${i}, ${m}-${v}`);const k={};for(const z of u.n(E.data))k[z.id]=z;return k})},Se.TinySDF=class{constructor({fontSize:y=24,buffer:i=3,radius:c=8,cutoff:p=.25,fontFamily:m="sans-serif",fontWeight:v="normal",fontStyle:w="normal"}={}){this.buffer=i,this.cutoff=p,this.radius=c;const E=this.size=y+4*i,k=this._createCanvas(E),z=this.ctx=k.getContext("2d",{willReadFrequently:!0});z.font=`${w} ${v} ${y}px ${m}`,z.textBaseline="alphabetic",z.textAlign="left",z.fillStyle="black",this.gridOuter=new Float64Array(E*E),this.gridInner=new Float64Array(E*E),this.f=new Float64Array(E),this.z=new Float64Array(E+1),this.v=new Uint16Array(E)}_createCanvas(y){const i=document.createElement("canvas");return i.width=i.height=y,i}draw(y){const{width:i,actualBoundingBoxAscent:c,actualBoundingBoxDescent:p,actualBoundingBoxLeft:m,actualBoundingBoxRight:v}=this.ctx.measureText(y),w=Math.ceil(c),E=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(v-m))),k=Math.min(this.size-this.buffer,w+Math.ceil(p)),z=E+2*this.buffer,B=k+2*this.buffer,O=Math.max(z*B,0),K=new Uint8ClampedArray(O),Q={data:K,width:z,height:B,glyphWidth:E,glyphHeight:k,glyphTop:w,glyphLeft:0,glyphAdvance:i};if(E===0||k===0)return Q;const{ctx:re,buffer:he,gridInner:le,gridOuter:de}=this;re.clearRect(he,he,E,k),re.fillText(y,he,he+w);const ye=re.getImageData(he,he,E,k);de.fill(Ie,0,O),le.fill(0,0,O);for(let ae=0;ae<k;ae++)for(let we=0;we<E;we++){const Me=ye.data[4*(ae*E+we)+3]/255;if(Me===0)continue;const Oe=(ae+he)*z+we+he;if(Me===1)de[Oe]=0,le[Oe]=Ie;else{const Ge=.5-Me;de[Oe]=Ge>0?Ge*Ge:0,le[Oe]=Ge<0?Ge*Ge:0}}Ke(de,0,0,z,B,z,this.f,this.v,this.z),Ke(le,he,he,E,k,z,this.f,this.v,this.z);for(let ae=0;ae<O;ae++){const we=Math.sqrt(de[ae])-Math.sqrt(le[ae]);K[ae]=Math.round(255-255*(we/this.radius+this.cutoff))}return Q}};class ge{constructor(){this.specification=u.v.light.position}possiblyEvaluate(i,c){return u.y(i.expression.evaluate(c))}interpolate(i,c,p){return{x:u.z.number(i.x,c.x,p),y:u.z.number(i.y,c.y,p),z:u.z.number(i.z,c.z,p)}}}let Fe;class Be extends u.E{constructor(i){super(),Fe=Fe||new u.q({anchor:new u.D(u.v.light.anchor),position:new ge,color:new u.D(u.v.light.color),intensity:new u.D(u.v.light.intensity)}),this._transitionable=new u.T(Fe),this.setLight(i),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(i,c={}){if(!this._validate(u.r,i,c))for(const p in i){const m=i[p];p.endsWith("-transition")?this._transitionable.setTransition(p.slice(0,-11),m):this._transitionable.setValue(p,m)}}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,c,p){return(!p||p.validate!==!1)&&u.t(this,i.call(u.x,{value:c,style:{glyphs:!0,sprite:!0},styleSpec:u.v}))}}const Ve=new u.q({"sky-color":new u.D(u.v.sky["sky-color"]),"horizon-color":new u.D(u.v.sky["horizon-color"]),"fog-color":new u.D(u.v.sky["fog-color"]),"fog-ground-blend":new u.D(u.v.sky["fog-ground-blend"]),"horizon-fog-blend":new u.D(u.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new u.D(u.v.sky["sky-horizon-blend"]),"atmosphere-blend":new u.D(u.v.sky["atmosphere-blend"])});class Ze extends u.E{constructor(i){super(),this._transitionable=new u.T(Ve),this.setSky(i),this._transitioning=this._transitionable.untransitioned()}setSky(i,c={}){if(!this._validate(u.B,i,c))for(const p in i){const m=i[p];p.endsWith("-transition")?this._transitionable.setTransition(p.slice(0,-11),m):this._transitionable.setValue(p,m)}}getSky(){return this._transitionable.serialize()}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,c,p={}){return(p==null?void 0:p.validate)!==!1&&u.t(this,i.call(u.x,u.e({value:c,style:{glyphs:!0,sprite:!0},styleSpec:u.v})))}calculateFogBlendOpacity(i){return i<60?0:i<70?(i-60)/10:1}}class gt{constructor(i,c){this.width=i,this.height=c,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(i,c){const p=i.join(",")+String(c);return this.dashEntry[p]||(this.dashEntry[p]=this.addDash(i,c)),this.dashEntry[p]}getDashRanges(i,c,p){const m=[];let v=i.length%2==1?-i[i.length-1]*p:0,w=i[0]*p,E=!0;m.push({left:v,right:w,isDash:E,zeroLength:i[0]===0});let k=i[0];for(let z=1;z<i.length;z++){E=!E;const B=i[z];v=k*p,k+=B,w=k*p,m.push({left:v,right:w,isDash:E,zeroLength:B===0})}return m}addRoundDash(i,c,p){const m=c/2;for(let v=-p;v<=p;v++){const w=this.width*(this.nextRow+p+v);let E=0,k=i[E];for(let z=0;z<this.width;z++){z/k.right>1&&(k=i[++E]);const B=Math.abs(z-k.left),O=Math.abs(z-k.right),K=Math.min(B,O);let Q;const re=v/p*(m+1);if(k.isDash){const he=m-Math.abs(re);Q=Math.sqrt(K*K+he*he)}else Q=m-Math.sqrt(K*K+re*re);this.data[w+z]=Math.max(0,Math.min(255,Q+128))}}}addRegularDash(i){for(let E=i.length-1;E>=0;--E){const k=i[E],z=i[E+1];k.zeroLength?i.splice(E,1):z&&z.isDash===k.isDash&&(z.left=k.left,i.splice(E,1))}const c=i[0],p=i[i.length-1];c.isDash===p.isDash&&(c.left=p.left-this.width,p.right=c.right+this.width);const m=this.width*this.nextRow;let v=0,w=i[v];for(let E=0;E<this.width;E++){E/w.right>1&&(w=i[++v]);const k=Math.abs(E-w.left),z=Math.abs(E-w.right),B=Math.min(k,z);this.data[m+E]=Math.max(0,Math.min(255,(w.isDash?B:-B)+128))}}addDash(i,c){const p=c?7:0,m=2*p+1;if(this.nextRow+m>this.height)return u.w("LineAtlas out of space"),null;let v=0;for(let E=0;E<i.length;E++)v+=i[E];if(v!==0){const E=this.width/v,k=this.getDashRanges(i,this.width,E);c?this.addRoundDash(k,E,p):this.addRegularDash(k)}const w={y:(this.nextRow+p+.5)/this.height,height:2*p/this.height,width:v};return this.nextRow+=m,this.dirty=!0,w}bind(i){const c=i.gl;this.texture?(c.bindTexture(c.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,c.texSubImage2D(c.TEXTURE_2D,0,0,0,this.width,this.height,c.ALPHA,c.UNSIGNED_BYTE,this.data))):(this.texture=c.createTexture(),c.bindTexture(c.TEXTURE_2D,this.texture),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texImage2D(c.TEXTURE_2D,0,c.ALPHA,this.width,this.height,0,c.ALPHA,c.UNSIGNED_BYTE,this.data))}}const st="maplibre_preloaded_worker_pool";class St{constructor(){this.active={}}acquire(i){if(!this.workers)for(this.workers=[];this.workers.length<St.workerCount;)this.workers.push(new Worker(u.a.WORKER_URL));return this.active[i]=!0,this.workers.slice()}release(i){delete this.active[i],this.numActive()===0&&(this.workers.forEach(c=>{c.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[st]}numActive(){return Object.keys(this.active).length}}const Et=Math.floor(A.hardwareConcurrency/2);let Lt,Vt;function or(){return Lt||(Lt=new St),Lt}St.workerCount=u.C(globalThis)?Math.max(Math.min(Et,3),1):1;class Jt{constructor(i,c){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=c;const p=this.workerPool.acquire(c);for(let m=0;m<p.length;m++){const v=new u.F(p[m],c);v.name=`Worker ${m}`,this.actors.push(v)}if(!this.actors.length)throw new Error("No actors found")}broadcast(i,c){const p=[];for(const m of this.actors)p.push(m.sendAsync({type:i,data:c}));return Promise.all(p)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(i=!0){this.actors.forEach(c=>{c.remove()}),this.actors=[],i&&this.workerPool.release(this.id)}registerMessageHandler(i,c){for(const p of this.actors)p.registerMessageHandler(i,c)}}function tr(){return Vt||(Vt=new Jt(or(),u.G),Vt.registerMessageHandler("GR",(y,i,c)=>u.m(i,c))),Vt}function rr(y,i){const c=u.H();return u.J(c,c,[1,1,0]),u.K(c,c,[.5*y.width,.5*y.height,1]),u.L(c,c,y.calculatePosMatrix(i.toUnwrapped()))}function Gr(y,i,c,p,m,v){const w=function(O,K,Q){if(O)for(const re of O){const he=K[re];if(he&&he.source===Q&&he.type==="fill-extrusion")return!0}else for(const re in K){const he=K[re];if(he.source===Q&&he.type==="fill-extrusion")return!0}return!1}(m&&m.layers,i,y.id),E=v.maxPitchScaleFactor(),k=y.tilesIn(p,E,w);k.sort(sr);const z=[];for(const O of k)z.push({wrappedTileID:O.tileID.wrapped().key,queryResults:O.tile.queryRenderedFeatures(i,c,y._state,O.queryGeometry,O.cameraQueryGeometry,O.scale,m,v,E,rr(y.transform,O.tileID))});const B=function(O){const K={},Q={};for(const re of O){const he=re.queryResults,le=re.wrappedTileID,de=Q[le]=Q[le]||{};for(const ye in he){const ae=he[ye],we=de[ye]=de[ye]||{},Me=K[ye]=K[ye]||[];for(const Oe of ae)we[Oe.featureIndex]||(we[Oe.featureIndex]=!0,Me.push(Oe))}}return K}(z);for(const O in B)B[O].forEach(K=>{const Q=K.feature,re=y.getFeatureState(Q.layer["source-layer"],Q.id);Q.source=Q.layer.source,Q.layer["source-layer"]&&(Q.sourceLayer=Q.layer["source-layer"]),Q.state=re});return B}function sr(y,i){const c=y.tileID,p=i.tileID;return c.overscaledZ-p.overscaledZ||c.canonical.y-p.canonical.y||c.wrap-p.wrap||c.canonical.x-p.canonical.x}function Br(y,i,c){return u._(this,void 0,void 0,function*(){let p=y;if(y.url?p=(yield u.h(i.transformRequest(y.url,"Source"),c)).data:yield A.frameAsync(c),!p)return null;const m=u.M(u.e(p,y),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in p&&p.vector_layers&&(m.vectorLayerIds=p.vector_layers.map(v=>v.id)),m})}class Te{constructor(i,c){i&&(c?this.setSouthWest(i).setNorthEast(c):Array.isArray(i)&&(i.length===4?this.setSouthWest([i[0],i[1]]).setNorthEast([i[2],i[3]]):this.setSouthWest(i[0]).setNorthEast(i[1])))}setNorthEast(i){return this._ne=i instanceof u.N?new u.N(i.lng,i.lat):u.N.convert(i),this}setSouthWest(i){return this._sw=i instanceof u.N?new u.N(i.lng,i.lat):u.N.convert(i),this}extend(i){const c=this._sw,p=this._ne;let m,v;if(i instanceof u.N)m=i,v=i;else{if(!(i instanceof Te))return Array.isArray(i)?i.length===4||i.every(Array.isArray)?this.extend(Te.convert(i)):this.extend(u.N.convert(i)):i&&("lng"in i||"lon"in i)&&"lat"in i?this.extend(u.N.convert(i)):this;if(m=i._sw,v=i._ne,!m||!v)return this}return c||p?(c.lng=Math.min(m.lng,c.lng),c.lat=Math.min(m.lat,c.lat),p.lng=Math.max(v.lng,p.lng),p.lat=Math.max(v.lat,p.lat)):(this._sw=new u.N(m.lng,m.lat),this._ne=new u.N(v.lng,v.lat)),this}getCenter(){return new u.N((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new u.N(this.getWest(),this.getNorth())}getSouthEast(){return new u.N(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(i){const{lng:c,lat:p}=u.N.convert(i);let m=this._sw.lng<=c&&c<=this._ne.lng;return this._sw.lng>this._ne.lng&&(m=this._sw.lng>=c&&c>=this._ne.lng),this._sw.lat<=p&&p<=this._ne.lat&&m}static convert(i){return i instanceof Te?i:i&&new Te(i)}static fromLngLat(i,c=0){const p=360*c/40075017,m=p/Math.cos(Math.PI/180*i.lat);return new Te(new u.N(i.lng-m,i.lat-p),new u.N(i.lng+m,i.lat+p))}}class Ar{constructor(i,c,p){this.bounds=Te.convert(this.validateBounds(i)),this.minzoom=c||0,this.maxzoom=p||24}validateBounds(i){return Array.isArray(i)&&i.length===4?[Math.max(-180,i[0]),Math.max(-90,i[1]),Math.min(180,i[2]),Math.min(90,i[3])]:[-180,-90,180,90]}contains(i){const c=Math.pow(2,i.z),p=Math.floor(u.O(this.bounds.getWest())*c),m=Math.floor(u.Q(this.bounds.getNorth())*c),v=Math.ceil(u.O(this.bounds.getEast())*c),w=Math.ceil(u.Q(this.bounds.getSouth())*c);return i.x>=p&&i.x<v&&i.y>=m&&i.y<w}}class yr extends u.E{constructor(i,c,p,m){if(super(),this.id=i,this.dispatcher=p,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,u.e(this,u.M(c,["url","scheme","tileSize","promoteId"])),this._options=u.e({type:"vector"},c),this._collectResourceTiming=c.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(m)}load(){return u._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new u.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const i=yield Br(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),i&&(u.e(this,i),i.bounds&&(this.tileBounds=new Ar(i.bounds,this.minzoom,this.maxzoom)),this.fire(new u.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new u.k("data",{dataType:"source",sourceDataType:"content"})))}catch(i){this._tileJSONRequest=null,this.fire(new u.j(i))}})}loaded(){return this._loaded}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}onAdd(i){this.map=i,this.load()}setSourceProperty(i){this._tileJSONRequest&&this._tileJSONRequest.abort(),i(),this.load()}setTiles(i){return this.setSourceProperty(()=>{this._options.tiles=i}),this}setUrl(i){return this.setSourceProperty(()=>{this.url=i,this._options.url=i}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return u.e({},this._options)}loadTile(i){return u._(this,void 0,void 0,function*(){const c=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),p={request:this.map._requestManager.transformRequest(c,"Tile"),uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,tileSize:this.tileSize*i.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};p.request.collectResourceTiming=this._collectResourceTiming;let m="RT";if(i.actor&&i.state!=="expired"){if(i.state==="loading")return new Promise((v,w)=>{i.reloadPromise={resolve:v,reject:w}})}else i.actor=this.dispatcher.getActor(),m="LT";i.abortController=new AbortController;try{const v=yield i.actor.sendAsync({type:m,data:p},i.abortController);if(delete i.abortController,i.aborted)return;this._afterTileLoadWorkerResponse(i,v)}catch(v){if(delete i.abortController,i.aborted)return;if(v&&v.status!==404)throw v;this._afterTileLoadWorkerResponse(i,null)}})}_afterTileLoadWorkerResponse(i,c){if(c&&c.resourceTiming&&(i.resourceTiming=c.resourceTiming),c&&this.map._refreshExpiredTiles&&i.setExpiryData(c),i.loadVectorData(c,this.map.painter),i.reloadPromise){const p=i.reloadPromise;i.reloadPromise=null,this.loadTile(i).then(p.resolve).catch(p.reject)}}abortTile(i){return u._(this,void 0,void 0,function*(){i.abortController&&(i.abortController.abort(),delete i.abortController),i.actor&&(yield i.actor.sendAsync({type:"AT",data:{uid:i.uid,type:this.type,source:this.id}}))})}unloadTile(i){return u._(this,void 0,void 0,function*(){i.unloadVectorData(),i.actor&&(yield i.actor.sendAsync({type:"RMT",data:{uid:i.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class mt extends u.E{constructor(i,c,p,m){super(),this.id=i,this.dispatcher=p,this.setEventedParent(m),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=u.e({type:"raster"},c),u.e(this,u.M(c,["url","scheme","tileSize"]))}load(){return u._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new u.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const i=yield Br(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,i&&(u.e(this,i),i.bounds&&(this.tileBounds=new Ar(i.bounds,this.minzoom,this.maxzoom)),this.fire(new u.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new u.k("data",{dataType:"source",sourceDataType:"content"})))}catch(i){this._tileJSONRequest=null,this.fire(new u.j(i))}})}loaded(){return this._loaded}onAdd(i){this.map=i,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(i){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),i(),this.load()}setTiles(i){return this.setSourceProperty(()=>{this._options.tiles=i}),this}setUrl(i){return this.setSourceProperty(()=>{this.url=i,this._options.url=i}),this}serialize(){return u.e({},this._options)}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}loadTile(i){return u._(this,void 0,void 0,function*(){const c=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);i.abortController=new AbortController;try{const p=yield H.getImage(this.map._requestManager.transformRequest(c,"Tile"),i.abortController,this.map._refreshExpiredTiles);if(delete i.abortController,i.aborted)return void(i.state="unloaded");if(p&&p.data){this.map._refreshExpiredTiles&&p.cacheControl&&p.expires&&i.setExpiryData({cacheControl:p.cacheControl,expires:p.expires});const m=this.map.painter.context,v=m.gl,w=p.data;i.texture=this.map.painter.getTileTexture(w.width),i.texture?i.texture.update(w,{useMipmap:!0}):(i.texture=new ze(m,w,v.RGBA,{useMipmap:!0}),i.texture.bind(v.LINEAR,v.CLAMP_TO_EDGE,v.LINEAR_MIPMAP_NEAREST),m.extTextureFilterAnisotropic&&v.texParameterf(v.TEXTURE_2D,m.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,m.extTextureFilterAnisotropicMax)),i.state="loaded"}}catch(p){if(delete i.abortController,i.aborted)i.state="unloaded";else if(p)throw i.state="errored",p}})}abortTile(i){return u._(this,void 0,void 0,function*(){i.abortController&&(i.abortController.abort(),delete i.abortController)})}unloadTile(i){return u._(this,void 0,void 0,function*(){i.texture&&this.map.painter.saveTileTexture(i.texture)})}hasTransition(){return!1}}class Ft extends mt{constructor(i,c,p,m){super(i,c,p,m),this.type="raster-dem",this.maxzoom=22,this._options=u.e({type:"raster-dem"},c),this.encoding=c.encoding||"mapbox",this.redFactor=c.redFactor,this.greenFactor=c.greenFactor,this.blueFactor=c.blueFactor,this.baseShift=c.baseShift}loadTile(i){return u._(this,void 0,void 0,function*(){const c=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),p=this.map._requestManager.transformRequest(c,"Tile");i.neighboringTiles=this._getNeighboringTiles(i.tileID),i.abortController=new AbortController;try{const m=yield H.getImage(p,i.abortController,this.map._refreshExpiredTiles);if(delete i.abortController,i.aborted)return void(i.state="unloaded");if(m&&m.data){const v=m.data;this.map._refreshExpiredTiles&&m.cacheControl&&m.expires&&i.setExpiryData({cacheControl:m.cacheControl,expires:m.expires});const w=u.b(v)&&u.U()?v:yield this.readImageNow(v),E={type:this.type,uid:i.uid,source:this.id,rawImageData:w,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!i.actor||i.state==="expired"){i.actor=this.dispatcher.getActor();const k=yield i.actor.sendAsync({type:"LDT",data:E});i.dem=k,i.needsHillshadePrepare=!0,i.needsTerrainPrepare=!0,i.state="loaded"}}}catch(m){if(delete i.abortController,i.aborted)i.state="unloaded";else if(m)throw i.state="errored",m}})}readImageNow(i){return u._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&u.V()){const c=i.width+2,p=i.height+2;try{return new u.R({width:c,height:p},yield u.W(i,-1,-1,c,p))}catch{}}return A.getImageData(i,1)})}_getNeighboringTiles(i){const c=i.canonical,p=Math.pow(2,c.z),m=(c.x-1+p)%p,v=c.x===0?i.wrap-1:i.wrap,w=(c.x+1+p)%p,E=c.x+1===p?i.wrap+1:i.wrap,k={};return k[new u.S(i.overscaledZ,v,c.z,m,c.y).key]={backfilled:!1},k[new u.S(i.overscaledZ,E,c.z,w,c.y).key]={backfilled:!1},c.y>0&&(k[new u.S(i.overscaledZ,v,c.z,m,c.y-1).key]={backfilled:!1},k[new u.S(i.overscaledZ,i.wrap,c.z,c.x,c.y-1).key]={backfilled:!1},k[new u.S(i.overscaledZ,E,c.z,w,c.y-1).key]={backfilled:!1}),c.y+1<p&&(k[new u.S(i.overscaledZ,v,c.z,m,c.y+1).key]={backfilled:!1},k[new u.S(i.overscaledZ,i.wrap,c.z,c.x,c.y+1).key]={backfilled:!1},k[new u.S(i.overscaledZ,E,c.z,w,c.y+1).key]={backfilled:!1}),k}unloadTile(i){return u._(this,void 0,void 0,function*(){i.demTexture&&this.map.painter.saveTileTexture(i.demTexture),i.fbo&&(i.fbo.destroy(),delete i.fbo),i.dem&&delete i.dem,delete i.neighboringTiles,i.state="unloaded",i.actor&&(yield i.actor.sendAsync({type:"RDT",data:{type:this.type,uid:i.uid,source:this.id}}))})}}class Xt extends u.E{constructor(i,c,p,m){super(),this.id=i,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=p.getActor(),this.setEventedParent(m),this._data=c.data,this._options=u.e({},c),this._collectResourceTiming=c.collectResourceTiming,c.maxzoom!==void 0&&(this.maxzoom=c.maxzoom),c.type&&(this.type=c.type),c.attribution&&(this.attribution=c.attribution),this.promoteId=c.promoteId;const v=u.X/this.tileSize;this.workerOptions=u.e({source:this.id,cluster:c.cluster||!1,geojsonVtOptions:{buffer:(c.buffer!==void 0?c.buffer:128)*v,tolerance:(c.tolerance!==void 0?c.tolerance:.375)*v,extent:u.X,maxZoom:this.maxzoom,lineMetrics:c.lineMetrics||!1,generateId:c.generateId||!1},superclusterOptions:{maxZoom:c.clusterMaxZoom!==void 0?c.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,c.clusterMinPoints||2),extent:u.X,radius:(c.clusterRadius||50)*v,log:!1,generateId:c.generateId||!1},clusterProperties:c.clusterProperties,filter:c.filter},c.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){return u._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(i){this.map=i,this.load()}setData(i){return this._data=i,this._updateWorkerData(),this}updateData(i){return this._updateWorkerData(i),this}getData(){return u._(this,void 0,void 0,function*(){const i=u.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:i})})}setClusterOptions(i){return this.workerOptions.cluster=i.cluster,i&&(i.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=i.clusterRadius),i.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=i.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(i){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:i,source:this.id}})}getClusterChildren(i){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:i,source:this.id}})}getClusterLeaves(i,c,p){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:i,limit:c,offset:p}})}_updateWorkerData(i){return u._(this,void 0,void 0,function*(){const c=u.e({type:this.type},this.workerOptions);i?c.dataDiff=i:typeof this._data=="string"?(c.request=this.map._requestManager.transformRequest(A.resolveURL(this._data),"Source"),c.request.collectResourceTiming=this._collectResourceTiming):c.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new u.k("dataloading",{dataType:"source"}));try{const p=yield this.actor.sendAsync({type:"LD",data:c});if(this._pendingLoads--,this._removed||p.abandoned)return void this.fire(new u.k("dataabort",{dataType:"source"}));let m=null;p.resourceTiming&&p.resourceTiming[this.id]&&(m=p.resourceTiming[this.id].slice(0));const v={dataType:"source"};this._collectResourceTiming&&m&&m.length>0&&u.e(v,{resourceTiming:m}),this.fire(new u.k("data",Object.assign(Object.assign({},v),{sourceDataType:"metadata"}))),this.fire(new u.k("data",Object.assign(Object.assign({},v),{sourceDataType:"content"})))}catch(p){if(this._pendingLoads--,this._removed)return void this.fire(new u.k("dataabort",{dataType:"source"}));this.fire(new u.j(p))}})}loaded(){return this._pendingLoads===0}loadTile(i){return u._(this,void 0,void 0,function*(){const c=i.actor?"RT":"LT";i.actor=this.actor;const p={type:this.type,uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};i.abortController=new AbortController;const m=yield this.actor.sendAsync({type:c,data:p},i.abortController);delete i.abortController,i.unloadVectorData(),i.aborted||i.loadVectorData(m,this.map.painter,c==="RT")})}abortTile(i){return u._(this,void 0,void 0,function*(){i.abortController&&(i.abortController.abort(),delete i.abortController),i.aborted=!0})}unloadTile(i){return u._(this,void 0,void 0,function*(){i.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:i.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return u.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var Sr=u.Y([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Zt extends u.E{constructor(i,c,p,m){super(),this.id=i,this.dispatcher=p,this.coordinates=c.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(m),this.options=c}load(i){return u._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new u.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const c=yield H.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,c&&c.data&&(this.image=c.data,i&&(this.coordinates=i),this._finishLoading())}catch(c){this._request=null,this._loaded=!0,this.fire(new u.j(c))}})}loaded(){return this._loaded}updateImage(i){return i.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=i.url,this.load(i.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new u.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(i){this.map=i,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(i){this.coordinates=i;const c=i.map(u.Z.fromLngLat);this.tileID=function(m){let v=1/0,w=1/0,E=-1/0,k=-1/0;for(const K of m)v=Math.min(v,K.x),w=Math.min(w,K.y),E=Math.max(E,K.x),k=Math.max(k,K.y);const z=Math.max(E-v,k-w),B=Math.max(0,Math.floor(-Math.log(z)/Math.LN2)),O=Math.pow(2,B);return new u.a1(B,Math.floor((v+E)/2*O),Math.floor((w+k)/2*O))}(c),this.minzoom=this.maxzoom=this.tileID.z;const p=c.map(m=>this.tileID.getTilePoint(m)._round());return this._boundsArray=new u.$,this._boundsArray.emplaceBack(p[0].x,p[0].y,0,0),this._boundsArray.emplaceBack(p[1].x,p[1].y,u.X,0),this._boundsArray.emplaceBack(p[3].x,p[3].y,0,u.X),this._boundsArray.emplaceBack(p[2].x,p[2].y,u.X,u.X),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new u.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const i=this.map.painter.context,c=i.gl;this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,Sr.members)),this.boundsSegments||(this.boundsSegments=u.a0.simpleSegment(0,0,4,2)),this.texture||(this.texture=new ze(i,this.image,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));let p=!1;for(const m in this.tiles){const v=this.tiles[m];v.state!=="loaded"&&(v.state="loaded",v.texture=this.texture,p=!0)}p&&this.fire(new u.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(i){return u._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(i.tileID.canonical)?(this.tiles[String(i.tileID.wrap)]=i,i.buckets={}):i.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class Qt extends Zt{constructor(i,c,p,m){super(i,c,p,m),this.roundZoom=!0,this.type="video",this.options=c}load(){return u._(this,void 0,void 0,function*(){this._loaded=!1;const i=this.options;this.urls=[];for(const c of i.urls)this.urls.push(this.map._requestManager.transformRequest(c,"Source").url);try{const c=yield u.a3(this.urls);if(this._loaded=!0,!c)return;this.video=c,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(c){this.fire(new u.j(c))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(i){if(this.video){const c=this.video.seekable;i<c.start(0)||i>c.end(0)?this.fire(new u.j(new u.a2(`sources.${this.id}`,null,`Playback for this video can be set only between the ${c.start(0)} and ${c.end(0)}-second mark.`))):this.video.currentTime=i}}getVideo(){return this.video}onAdd(i){this.map||(this.map=i,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const i=this.map.painter.context,c=i.gl;this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,Sr.members)),this.boundsSegments||(this.boundsSegments=u.a0.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),c.texSubImage2D(c.TEXTURE_2D,0,0,0,c.RGBA,c.UNSIGNED_BYTE,this.video)):(this.texture=new ze(i,this.video,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));let p=!1;for(const m in this.tiles){const v=this.tiles[m];v.state!=="loaded"&&(v.state="loaded",v.texture=this.texture,p=!0)}p&&this.fire(new u.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Cr extends Zt{constructor(i,c,p,m){super(i,c,p,m),c.coordinates?Array.isArray(c.coordinates)&&c.coordinates.length===4&&!c.coordinates.some(v=>!Array.isArray(v)||v.length!==2||v.some(w=>typeof w!="number"))||this.fire(new u.j(new u.a2(`sources.${i}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new u.j(new u.a2(`sources.${i}`,null,'missing required property "coordinates"'))),c.animate&&typeof c.animate!="boolean"&&this.fire(new u.j(new u.a2(`sources.${i}`,null,'optional "animate" property must be a boolean value'))),c.canvas?typeof c.canvas=="string"||c.canvas instanceof HTMLCanvasElement||this.fire(new u.j(new u.a2(`sources.${i}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new u.j(new u.a2(`sources.${i}`,null,'missing required property "canvas"'))),this.options=c,this.animate=c.animate===void 0||c.animate}load(){return u._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new u.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(i){this.map=i,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let i=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,i=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,i=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const c=this.map.painter.context,p=c.gl;this.boundsBuffer||(this.boundsBuffer=c.createVertexBuffer(this._boundsArray,Sr.members)),this.boundsSegments||(this.boundsSegments=u.a0.simpleSegment(0,0,4,2)),this.texture?(i||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new ze(c,this.canvas,p.RGBA,{premultiply:!0});let m=!1;for(const v in this.tiles){const w=this.tiles[v];w.state!=="loaded"&&(w.state="loaded",w.texture=this.texture,m=!0)}m&&this.fire(new u.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const i of[this.canvas.width,this.canvas.height])if(isNaN(i)||i<=0)return!0;return!1}}const vr={},Nn=y=>{switch(y){case"geojson":return Xt;case"image":return Zt;case"raster":return mt;case"raster-dem":return Ft;case"vector":return yr;case"video":return Qt;case"canvas":return Cr}return vr[y]},Xe="RTLPluginLoaded";class _r extends u.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=tr()}_syncState(i){return this.status=i,this.dispatcher.broadcast("SRPS",{pluginStatus:i,pluginURL:this.url}).catch(c=>{throw this.status="error",c})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(i){return u._(this,arguments,void 0,function*(c,p=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=A.resolveURL(c),!this.url)throw new Error(`requested url ${c} is invalid`);if(this.status==="unavailable"){if(!p)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return u._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new u.k(Xe))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let nr=null;function Nr(){return nr||(nr=new _r),nr}class Lr{constructor(i,c){this.timeAdded=0,this.fadeEndTime=0,this.tileID=i,this.uid=u.a4(),this.uses=0,this.tileSize=c,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(i){const c=i+this.timeAdded;c<this.fadeEndTime||(this.fadeEndTime=c)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(i){this.demTexture&&i.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(i,c,p){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",i){i.featureIndex&&(this.latestFeatureIndex=i.featureIndex,i.rawTileData?(this.latestRawTileData=i.rawTileData,this.latestFeatureIndex.rawTileData=i.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=i.collisionBoxArray,this.buckets=function(m,v){const w={};if(!v)return w;for(const E of m){const k=E.layerIds.map(z=>v.getLayer(z)).filter(Boolean);if(k.length!==0){E.layers=k,E.stateDependentLayerIds&&(E.stateDependentLayers=E.stateDependentLayerIds.map(z=>k.filter(B=>B.id===z)[0]));for(const z of k)w[z.id]=E}}return w}(i.buckets,c.style),this.hasSymbolBuckets=!1;for(const m in this.buckets){const v=this.buckets[m];if(v instanceof u.a6){if(this.hasSymbolBuckets=!0,!p)break;v.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const m in this.buckets){const v=this.buckets[m];if(v instanceof u.a6&&v.hasRTLText){this.hasRTLText=!0,Nr().lazyLoad();break}}this.queryPadding=0;for(const m in this.buckets){const v=this.buckets[m];this.queryPadding=Math.max(this.queryPadding,c.style.getLayer(m).queryRadius(v))}i.imageAtlas&&(this.imageAtlas=i.imageAtlas),i.glyphAtlasImage&&(this.glyphAtlasImage=i.glyphAtlasImage)}else this.collisionBoxArray=new u.a5}unloadVectorData(){for(const i in this.buckets)this.buckets[i].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(i){return this.buckets[i.id]}upload(i){for(const p in this.buckets){const m=this.buckets[p];m.uploadPending()&&m.upload(i)}const c=i.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new ze(i,this.imageAtlas.image,c.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new ze(i,this.glyphAtlasImage,c.ALPHA),this.glyphAtlasImage=null)}prepare(i){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(i,this.imageAtlasTexture)}queryRenderedFeatures(i,c,p,m,v,w,E,k,z,B){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:m,cameraQueryGeometry:v,scale:w,tileSize:this.tileSize,pixelPosMatrix:B,transform:k,params:E,queryPadding:this.queryPadding*z},i,c,p):{}}querySourceFeatures(i,c){const p=this.latestFeatureIndex;if(!p||!p.rawTileData)return;const m=p.loadVTLayers(),v=c&&c.sourceLayer?c.sourceLayer:"",w=m._geojsonTileLayer||m[v];if(!w)return;const E=u.a7(c&&c.filter),{z:k,x:z,y:B}=this.tileID.canonical,O={z:k,x:z,y:B};for(let K=0;K<w.length;K++){const Q=w.feature(K);if(E.needGeometry){const le=u.a8(Q,!0);if(!E.filter(new u.a9(this.tileID.overscaledZ),le,this.tileID.canonical))continue}else if(!E.filter(new u.a9(this.tileID.overscaledZ),Q))continue;const re=p.getId(Q,v),he=new u.aa(Q,k,z,B,re);he.tile=O,i.push(he)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(i){const c=this.expirationTime;if(i.cacheControl){const p=u.ab(i.cacheControl);p["max-age"]&&(this.expirationTime=Date.now()+1e3*p["max-age"])}else i.expires&&(this.expirationTime=new Date(i.expires).getTime());if(this.expirationTime){const p=Date.now();let m=!1;if(this.expirationTime>p)m=!1;else if(c)if(this.expirationTime<c)m=!0;else{const v=this.expirationTime-c;v?this.expirationTime=p+Math.max(v,3e4):m=!0}else m=!0;m?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(i,c){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(i).length===0)return;const p=this.latestFeatureIndex.loadVTLayers();for(const m in this.buckets){if(!c.style.hasLayer(m))continue;const v=this.buckets[m],w=v.layers[0].sourceLayer||"_geojsonTileLayer",E=p[w],k=i[w];if(!E||!k||Object.keys(k).length===0)continue;v.update(k,E,this.imageAtlas&&this.imageAtlas.patternPositions||{});const z=c&&c.style&&c.style.getLayer(m);z&&(this.queryPadding=Math.max(this.queryPadding,z.queryRadius(v)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<A.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(i){this.symbolFadeHoldUntil=A.now()+i}setDependencies(i,c){const p={};for(const m of c)p[m]=!0;this.dependencies[i]=p}hasDependency(i,c){for(const p of i){const m=this.dependencies[p];if(m){for(const v of c)if(m[v])return!0}}return!1}}class Ye{constructor(i,c){this.max=i,this.onRemove=c,this.reset()}reset(){for(const i in this.data)for(const c of this.data[i])c.timeout&&clearTimeout(c.timeout),this.onRemove(c.value);return this.data={},this.order=[],this}add(i,c,p){const m=i.wrapped().key;this.data[m]===void 0&&(this.data[m]=[]);const v={value:c,timeout:void 0};if(p!==void 0&&(v.timeout=setTimeout(()=>{this.remove(i,v)},p)),this.data[m].push(v),this.order.push(m),this.order.length>this.max){const w=this._getAndRemoveByKey(this.order[0]);w&&this.onRemove(w)}return this}has(i){return i.wrapped().key in this.data}getAndRemove(i){return this.has(i)?this._getAndRemoveByKey(i.wrapped().key):null}_getAndRemoveByKey(i){const c=this.data[i].shift();return c.timeout&&clearTimeout(c.timeout),this.data[i].length===0&&delete this.data[i],this.order.splice(this.order.indexOf(i),1),c.value}getByKey(i){const c=this.data[i];return c?c[0].value:null}get(i){return this.has(i)?this.data[i.wrapped().key][0].value:null}remove(i,c){if(!this.has(i))return this;const p=i.wrapped().key,m=c===void 0?0:this.data[p].indexOf(c),v=this.data[p][m];return this.data[p].splice(m,1),v.timeout&&clearTimeout(v.timeout),this.data[p].length===0&&delete this.data[p],this.onRemove(v.value),this.order.splice(this.order.indexOf(p),1),this}setMaxSize(i){for(this.max=i;this.order.length>this.max;){const c=this._getAndRemoveByKey(this.order[0]);c&&this.onRemove(c)}return this}filter(i){const c=[];for(const p in this.data)for(const m of this.data[p])i(m.value)||c.push(m);for(const p of c)this.remove(p.value.tileID,p)}}class Dt{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(i,c,p){const m=String(c);if(this.stateChanges[i]=this.stateChanges[i]||{},this.stateChanges[i][m]=this.stateChanges[i][m]||{},u.e(this.stateChanges[i][m],p),this.deletedStates[i]===null){this.deletedStates[i]={};for(const v in this.state[i])v!==m&&(this.deletedStates[i][v]=null)}else if(this.deletedStates[i]&&this.deletedStates[i][m]===null){this.deletedStates[i][m]={};for(const v in this.state[i][m])p[v]||(this.deletedStates[i][m][v]=null)}else for(const v in p)this.deletedStates[i]&&this.deletedStates[i][m]&&this.deletedStates[i][m][v]===null&&delete this.deletedStates[i][m][v]}removeFeatureState(i,c,p){if(this.deletedStates[i]===null)return;const m=String(c);if(this.deletedStates[i]=this.deletedStates[i]||{},p&&c!==void 0)this.deletedStates[i][m]!==null&&(this.deletedStates[i][m]=this.deletedStates[i][m]||{},this.deletedStates[i][m][p]=null);else if(c!==void 0)if(this.stateChanges[i]&&this.stateChanges[i][m])for(p in this.deletedStates[i][m]={},this.stateChanges[i][m])this.deletedStates[i][m][p]=null;else this.deletedStates[i][m]=null;else this.deletedStates[i]=null}getState(i,c){const p=String(c),m=u.e({},(this.state[i]||{})[p],(this.stateChanges[i]||{})[p]);if(this.deletedStates[i]===null)return{};if(this.deletedStates[i]){const v=this.deletedStates[i][c];if(v===null)return{};for(const w in v)delete m[w]}return m}initializeTileState(i,c){i.setFeatureState(this.state,c)}coalesceChanges(i,c){const p={};for(const m in this.stateChanges){this.state[m]=this.state[m]||{};const v={};for(const w in this.stateChanges[m])this.state[m][w]||(this.state[m][w]={}),u.e(this.state[m][w],this.stateChanges[m][w]),v[w]=this.state[m][w];p[m]=v}for(const m in this.deletedStates){this.state[m]=this.state[m]||{};const v={};if(this.deletedStates[m]===null)for(const w in this.state[m])v[w]={},this.state[m][w]={};else for(const w in this.deletedStates[m]){if(this.deletedStates[m][w]===null)this.state[m][w]={};else for(const E of Object.keys(this.deletedStates[m][w]))delete this.state[m][w][E];v[w]=this.state[m][w]}p[m]=p[m]||{},u.e(p[m],v)}if(this.stateChanges={},this.deletedStates={},Object.keys(p).length!==0)for(const m in i)i[m].setFeatureState(p,c)}}class ht extends u.E{constructor(i,c,p){super(),this.id=i,this.dispatcher=p,this.on("data",m=>this._dataHandler(m)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((m,v,w,E)=>{const k=new(Nn(v.type))(m,v,w,E);if(k.id!==m)throw new Error(`Expected Source id to be ${m} instead of ${k.id}`);return k})(i,c,p,this),this._tiles={},this._cache=new Ye(0,m=>this._unloadTile(m)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Dt,this._didEmitContent=!1,this._updated=!1}onAdd(i){this.map=i,this._maxTileCacheSize=i?i._maxTileCacheSize:null,this._maxTileCacheZoomLevels=i?i._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(i)}onRemove(i){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(i)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const i in this._tiles){const c=this._tiles[i];if(c.state!=="loaded"&&c.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const i=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,i&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(i,c,p){return u._(this,void 0,void 0,function*(){try{yield this._source.loadTile(i),this._tileLoaded(i,c,p)}catch(m){i.state="errored",m.status!==404?this._source.fire(new u.j(m,{tile:i})):this.update(this.transform,this.terrain)}})}_unloadTile(i){this._source.unloadTile&&this._source.unloadTile(i)}_abortTile(i){this._source.abortTile&&this._source.abortTile(i),this._source.fire(new u.k("dataabort",{tile:i,coord:i.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(i){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const c in this._tiles){const p=this._tiles[c];p.upload(i),p.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(i=>i.tileID).sort(lr).map(i=>i.key)}getRenderableIds(i){const c=[];for(const p in this._tiles)this._isIdRenderable(p,i)&&c.push(this._tiles[p]);return i?c.sort((p,m)=>{const v=p.tileID,w=m.tileID,E=new u.P(v.canonical.x,v.canonical.y)._rotate(this.transform.angle),k=new u.P(w.canonical.x,w.canonical.y)._rotate(this.transform.angle);return v.overscaledZ-w.overscaledZ||k.y-E.y||k.x-E.x}).map(p=>p.tileID.key):c.map(p=>p.tileID).sort(lr).map(p=>p.key)}hasRenderableParent(i){const c=this.findLoadedParent(i,0);return!!c&&this._isIdRenderable(c.tileID.key)}_isIdRenderable(i,c){return this._tiles[i]&&this._tiles[i].hasData()&&!this._coveredTiles[i]&&(c||!this._tiles[i].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const i in this._tiles)this._tiles[i].state!=="errored"&&this._reloadTile(i,"reloading")}}_reloadTile(i,c){return u._(this,void 0,void 0,function*(){const p=this._tiles[i];p&&(p.state!=="loading"&&(p.state=c),yield this._loadTile(p,i,c))})}_tileLoaded(i,c,p){i.timeAdded=A.now(),p==="expired"&&(i.refreshedUponExpiration=!0),this._setTileReloadTimer(c,i),this.getSource().type==="raster-dem"&&i.dem&&this._backfillDEM(i),this._state.initializeTileState(i,this.map?this.map.painter:null),i.aborted||this._source.fire(new u.k("data",{dataType:"source",tile:i,coord:i.tileID}))}_backfillDEM(i){const c=this.getRenderableIds();for(let m=0;m<c.length;m++){const v=c[m];if(i.neighboringTiles&&i.neighboringTiles[v]){const w=this.getTileByID(v);p(i,w),p(w,i)}}function p(m,v){m.needsHillshadePrepare=!0,m.needsTerrainPrepare=!0;let w=v.tileID.canonical.x-m.tileID.canonical.x;const E=v.tileID.canonical.y-m.tileID.canonical.y,k=Math.pow(2,m.tileID.canonical.z),z=v.tileID.key;w===0&&E===0||Math.abs(E)>1||(Math.abs(w)>1&&(Math.abs(w+k)===1?w+=k:Math.abs(w-k)===1&&(w-=k)),v.dem&&m.dem&&(m.dem.backfillBorder(v.dem,w,E),m.neighboringTiles&&m.neighboringTiles[z]&&(m.neighboringTiles[z].backfilled=!0)))}}getTile(i){return this.getTileByID(i.key)}getTileByID(i){return this._tiles[i]}_retainLoadedChildren(i,c,p,m){for(const v in this._tiles){let w=this._tiles[v];if(m[v]||!w.hasData()||w.tileID.overscaledZ<=c||w.tileID.overscaledZ>p)continue;let E=w.tileID;for(;w&&w.tileID.overscaledZ>c+1;){const z=w.tileID.scaledTo(w.tileID.overscaledZ-1);w=this._tiles[z.key],w&&w.hasData()&&(E=z)}let k=E;for(;k.overscaledZ>c;)if(k=k.scaledTo(k.overscaledZ-1),i[k.key]){m[E.key]=E;break}}}findLoadedParent(i,c){if(i.key in this._loadedParentTiles){const p=this._loadedParentTiles[i.key];return p&&p.tileID.overscaledZ>=c?p:null}for(let p=i.overscaledZ-1;p>=c;p--){const m=i.scaledTo(p),v=this._getLoadedTile(m);if(v)return v}}findLoadedSibling(i){return this._getLoadedTile(i)}_getLoadedTile(i){const c=this._tiles[i.key];return c&&c.hasData()?c:this._cache.getByKey(i.wrapped().key)}updateCacheSize(i){const c=Math.ceil(i.width/this._source.tileSize)+1,p=Math.ceil(i.height/this._source.tileSize)+1,m=Math.floor(c*p*(this._maxTileCacheZoomLevels===null?u.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),v=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,m):m;this._cache.setMaxSize(v)}handleWrapJump(i){const c=Math.round((i-(this._prevLng===void 0?i:this._prevLng))/360);if(this._prevLng=i,c){const p={};for(const m in this._tiles){const v=this._tiles[m];v.tileID=v.tileID.unwrapTo(v.tileID.wrap+c),p[v.tileID.key]=v}this._tiles=p;for(const m in this._timers)clearTimeout(this._timers[m]),delete this._timers[m];for(const m in this._tiles)this._setTileReloadTimer(m,this._tiles[m])}}_updateCoveredAndRetainedTiles(i,c,p,m,v,w){const E={},k={},z=Object.keys(i),B=A.now();for(const O of z){const K=i[O],Q=this._tiles[O];if(!Q||Q.fadeEndTime!==0&&Q.fadeEndTime<=B)continue;const re=this.findLoadedParent(K,c),he=this.findLoadedSibling(K),le=re||he||null;le&&(this._addTile(le.tileID),E[le.tileID.key]=le.tileID),k[O]=K}this._retainLoadedChildren(k,m,p,i);for(const O in E)i[O]||(this._coveredTiles[O]=!0,i[O]=E[O]);if(w){const O={},K={};for(const Q of v)this._tiles[Q.key].hasData()?O[Q.key]=Q:K[Q.key]=Q;for(const Q in K){const re=K[Q].children(this._source.maxzoom);this._tiles[re[0].key]&&this._tiles[re[1].key]&&this._tiles[re[2].key]&&this._tiles[re[3].key]&&(O[re[0].key]=i[re[0].key]=re[0],O[re[1].key]=i[re[1].key]=re[1],O[re[2].key]=i[re[2].key]=re[2],O[re[3].key]=i[re[3].key]=re[3],delete K[Q])}for(const Q in K){const re=K[Q],he=this.findLoadedParent(re,this._source.minzoom),le=this.findLoadedSibling(re),de=he||le||null;if(de){O[de.tileID.key]=i[de.tileID.key]=de.tileID;for(const ye in O)O[ye].isChildOf(de.tileID)&&delete O[ye]}}for(const Q in this._tiles)O[Q]||(this._coveredTiles[Q]=!0)}}update(i,c){if(!this._sourceLoaded||this._paused)return;let p;this.transform=i,this.terrain=c,this.updateCacheSize(i),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?p=i.getVisibleUnwrappedCoordinates(this._source.tileID).map(B=>new u.S(B.canonical.z,B.wrap,B.canonical.z,B.canonical.x,B.canonical.y)):(p=i.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:c}),this._source.hasTile&&(p=p.filter(B=>this._source.hasTile(B)))):p=[];const m=i.coveringZoomLevel(this._source),v=Math.max(m-ht.maxOverzooming,this._source.minzoom),w=Math.max(m+ht.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const B={};for(const O of p)if(O.canonical.z>this._source.minzoom){const K=O.scaledTo(O.canonical.z-1);B[K.key]=K;const Q=O.scaledTo(Math.max(this._source.minzoom,Math.min(O.canonical.z,5)));B[Q.key]=Q}p=p.concat(Object.values(B))}const E=p.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,E&&this.fire(new u.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const k=this._updateRetainedTiles(p,m);Dr(this._source.type)&&this._updateCoveredAndRetainedTiles(k,v,w,m,p,c);for(const B in k)this._tiles[B].clearFadeHold();const z=u.ac(this._tiles,k);for(const B of z){const O=this._tiles[B];O.hasSymbolBuckets&&!O.holdingForFade()?O.setHoldDuration(this.map._fadeDuration):O.hasSymbolBuckets&&!O.symbolFadeFinished()||this._removeTile(B)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const i in this._tiles)this._tiles[i].holdingForFade()&&this._removeTile(i)}_updateRetainedTiles(i,c){var p;const m={},v={},w=Math.max(c-ht.maxOverzooming,this._source.minzoom),E=Math.max(c+ht.maxUnderzooming,this._source.minzoom),k={};for(const z of i){const B=this._addTile(z);m[z.key]=z,B.hasData()||c<this._source.maxzoom&&(k[z.key]=z)}this._retainLoadedChildren(k,c,E,m);for(const z of i){let B=this._tiles[z.key];if(B.hasData())continue;if(c+1>this._source.maxzoom){const K=z.children(this._source.maxzoom)[0],Q=this.getTile(K);if(Q&&Q.hasData()){m[K.key]=K;continue}}else{const K=z.children(this._source.maxzoom);if(m[K[0].key]&&m[K[1].key]&&m[K[2].key]&&m[K[3].key])continue}let O=B.wasRequested();for(let K=z.overscaledZ-1;K>=w;--K){const Q=z.scaledTo(K);if(v[Q.key])break;if(v[Q.key]=!0,B=this.getTile(Q),!B&&O&&(B=this._addTile(Q)),B){const re=B.hasData();if((re||!(!((p=this.map)===null||p===void 0)&&p.cancelPendingTileRequestsWhileZooming)||O)&&(m[Q.key]=Q),O=B.wasRequested(),re)break}}}return m}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const i in this._tiles){const c=[];let p,m=this._tiles[i].tileID;for(;m.overscaledZ>0;){if(m.key in this._loadedParentTiles){p=this._loadedParentTiles[m.key];break}c.push(m.key);const v=m.scaledTo(m.overscaledZ-1);if(p=this._getLoadedTile(v),p)break;m=v}for(const v of c)this._loadedParentTiles[v]=p}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const i in this._tiles){const c=this._tiles[i].tileID,p=this._getLoadedTile(c);this._loadedSiblingTiles[c.key]=p}}_addTile(i){let c=this._tiles[i.key];if(c)return c;c=this._cache.getAndRemove(i),c&&(this._setTileReloadTimer(i.key,c),c.tileID=i,this._state.initializeTileState(c,this.map?this.map.painter:null),this._cacheTimers[i.key]&&(clearTimeout(this._cacheTimers[i.key]),delete this._cacheTimers[i.key],this._setTileReloadTimer(i.key,c)));const p=c;return c||(c=new Lr(i,this._source.tileSize*i.overscaleFactor()),this._loadTile(c,i.key,c.state)),c.uses++,this._tiles[i.key]=c,p||this._source.fire(new u.k("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),c}_setTileReloadTimer(i,c){i in this._timers&&(clearTimeout(this._timers[i]),delete this._timers[i]);const p=c.getExpiryTimeout();p&&(this._timers[i]=setTimeout(()=>{this._reloadTile(i,"expired"),delete this._timers[i]},p))}_removeTile(i){const c=this._tiles[i];c&&(c.uses--,delete this._tiles[i],this._timers[i]&&(clearTimeout(this._timers[i]),delete this._timers[i]),c.uses>0||(c.hasData()&&c.state!=="reloading"?this._cache.add(c.tileID,c,c.getExpiryTimeout()):(c.aborted=!0,this._abortTile(c),this._unloadTile(c))))}_dataHandler(i){const c=i.sourceDataType;i.dataType==="source"&&c==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&i.dataType==="source"&&c==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const i in this._tiles)this._removeTile(i);this._cache.reset()}tilesIn(i,c,p){const m=[],v=this.transform;if(!v)return m;const w=p?v.getCameraQueryGeometry(i):i,E=i.map(re=>v.pointCoordinate(re,this.terrain)),k=w.map(re=>v.pointCoordinate(re,this.terrain)),z=this.getIds();let B=1/0,O=1/0,K=-1/0,Q=-1/0;for(const re of k)B=Math.min(B,re.x),O=Math.min(O,re.y),K=Math.max(K,re.x),Q=Math.max(Q,re.y);for(let re=0;re<z.length;re++){const he=this._tiles[z[re]];if(he.holdingForFade())continue;const le=he.tileID,de=Math.pow(2,v.zoom-he.tileID.overscaledZ),ye=c*he.queryPadding*u.X/he.tileSize/de,ae=[le.getTilePoint(new u.Z(B,O)),le.getTilePoint(new u.Z(K,Q))];if(ae[0].x-ye<u.X&&ae[0].y-ye<u.X&&ae[1].x+ye>=0&&ae[1].y+ye>=0){const we=E.map(Oe=>le.getTilePoint(Oe)),Me=k.map(Oe=>le.getTilePoint(Oe));m.push({tile:he,tileID:le,queryGeometry:we,cameraQueryGeometry:Me,scale:de})}}return m}getVisibleCoordinates(i){const c=this.getRenderableIds(i).map(p=>this._tiles[p].tileID);for(const p of c)p.posMatrix=this.transform.calculatePosMatrix(p.toUnwrapped());return c}hasTransition(){if(this._source.hasTransition())return!0;if(Dr(this._source.type)){const i=A.now();for(const c in this._tiles)if(this._tiles[c].fadeEndTime>=i)return!0}return!1}setFeatureState(i,c,p){this._state.updateState(i=i||"_geojsonTileLayer",c,p)}removeFeatureState(i,c,p){this._state.removeFeatureState(i=i||"_geojsonTileLayer",c,p)}getFeatureState(i,c){return this._state.getState(i=i||"_geojsonTileLayer",c)}setDependencies(i,c,p){const m=this._tiles[i];m&&m.setDependencies(c,p)}reloadTilesForDependencies(i,c){for(const p in this._tiles)this._tiles[p].hasDependency(i,c)&&this._reloadTile(p,"reloading");this._cache.filter(p=>!p.hasDependency(i,c))}}function lr(y,i){const c=Math.abs(2*y.wrap)-+(y.wrap<0),p=Math.abs(2*i.wrap)-+(i.wrap<0);return y.overscaledZ-i.overscaledZ||p-c||i.canonical.y-y.canonical.y||i.canonical.x-y.canonical.x}function Dr(y){return y==="raster"||y==="image"||y==="video"}ht.maxOverzooming=10,ht.maxUnderzooming=3;class kt{constructor(i,c){this.reset(i,c)}reset(i,c){this.points=i||[],this._distances=[0];for(let p=1;p<this.points.length;p++)this._distances[p]=this._distances[p-1]+this.points[p].dist(this.points[p-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(c||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(i){if(this.points.length===1)return this.points[0];i=u.ad(i,0,1);let c=1,p=this._distances[c];const m=i*this.paddedLength+this.padding;for(;p<m&&c<this._distances.length;)p=this._distances[++c];const v=c-1,w=this._distances[v],E=p-w,k=E>0?(m-w)/E:0;return this.points[v].mult(1-k).add(this.points[c].mult(k))}}function Zr(y,i){let c=!0;return y==="always"||y!=="never"&&i!=="never"||(c=!1),c}class Fr{constructor(i,c,p){const m=this.boxCells=[],v=this.circleCells=[];this.xCellCount=Math.ceil(i/p),this.yCellCount=Math.ceil(c/p);for(let w=0;w<this.xCellCount*this.yCellCount;w++)m.push([]),v.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=i,this.height=c,this.xScale=this.xCellCount/i,this.yScale=this.yCellCount/c,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(i,c,p,m,v){this._forEachCell(c,p,m,v,this._insertBoxCell,this.boxUid++),this.boxKeys.push(i),this.bboxes.push(c),this.bboxes.push(p),this.bboxes.push(m),this.bboxes.push(v)}insertCircle(i,c,p,m){this._forEachCell(c-m,p-m,c+m,p+m,this._insertCircleCell,this.circleUid++),this.circleKeys.push(i),this.circles.push(c),this.circles.push(p),this.circles.push(m)}_insertBoxCell(i,c,p,m,v,w){this.boxCells[v].push(w)}_insertCircleCell(i,c,p,m,v,w){this.circleCells[v].push(w)}_query(i,c,p,m,v,w,E){if(p<0||i>this.width||m<0||c>this.height)return[];const k=[];if(i<=0&&c<=0&&this.width<=p&&this.height<=m){if(v)return[{key:null,x1:i,y1:c,x2:p,y2:m}];for(let z=0;z<this.boxKeys.length;z++)k.push({key:this.boxKeys[z],x1:this.bboxes[4*z],y1:this.bboxes[4*z+1],x2:this.bboxes[4*z+2],y2:this.bboxes[4*z+3]});for(let z=0;z<this.circleKeys.length;z++){const B=this.circles[3*z],O=this.circles[3*z+1],K=this.circles[3*z+2];k.push({key:this.circleKeys[z],x1:B-K,y1:O-K,x2:B+K,y2:O+K})}}else this._forEachCell(i,c,p,m,this._queryCell,k,{hitTest:v,overlapMode:w,seenUids:{box:{},circle:{}}},E);return k}query(i,c,p,m){return this._query(i,c,p,m,!1,null)}hitTest(i,c,p,m,v,w){return this._query(i,c,p,m,!0,v,w).length>0}hitTestCircle(i,c,p,m,v){const w=i-p,E=i+p,k=c-p,z=c+p;if(E<0||w>this.width||z<0||k>this.height)return!1;const B=[];return this._forEachCell(w,k,E,z,this._queryCellCircle,B,{hitTest:!0,overlapMode:m,circle:{x:i,y:c,radius:p},seenUids:{box:{},circle:{}}},v),B.length>0}_queryCell(i,c,p,m,v,w,E,k){const{seenUids:z,hitTest:B,overlapMode:O}=E,K=this.boxCells[v];if(K!==null){const re=this.bboxes;for(const he of K)if(!z.box[he]){z.box[he]=!0;const le=4*he,de=this.boxKeys[he];if(i<=re[le+2]&&c<=re[le+3]&&p>=re[le+0]&&m>=re[le+1]&&(!k||k(de))&&(!B||!Zr(O,de.overlapMode))&&(w.push({key:de,x1:re[le],y1:re[le+1],x2:re[le+2],y2:re[le+3]}),B))return!0}}const Q=this.circleCells[v];if(Q!==null){const re=this.circles;for(const he of Q)if(!z.circle[he]){z.circle[he]=!0;const le=3*he,de=this.circleKeys[he];if(this._circleAndRectCollide(re[le],re[le+1],re[le+2],i,c,p,m)&&(!k||k(de))&&(!B||!Zr(O,de.overlapMode))){const ye=re[le],ae=re[le+1],we=re[le+2];if(w.push({key:de,x1:ye-we,y1:ae-we,x2:ye+we,y2:ae+we}),B)return!0}}}return!1}_queryCellCircle(i,c,p,m,v,w,E,k){const{circle:z,seenUids:B,overlapMode:O}=E,K=this.boxCells[v];if(K!==null){const re=this.bboxes;for(const he of K)if(!B.box[he]){B.box[he]=!0;const le=4*he,de=this.boxKeys[he];if(this._circleAndRectCollide(z.x,z.y,z.radius,re[le+0],re[le+1],re[le+2],re[le+3])&&(!k||k(de))&&!Zr(O,de.overlapMode))return w.push(!0),!0}}const Q=this.circleCells[v];if(Q!==null){const re=this.circles;for(const he of Q)if(!B.circle[he]){B.circle[he]=!0;const le=3*he,de=this.circleKeys[he];if(this._circlesCollide(re[le],re[le+1],re[le+2],z.x,z.y,z.radius)&&(!k||k(de))&&!Zr(O,de.overlapMode))return w.push(!0),!0}}}_forEachCell(i,c,p,m,v,w,E,k){const z=this._convertToXCellCoord(i),B=this._convertToYCellCoord(c),O=this._convertToXCellCoord(p),K=this._convertToYCellCoord(m);for(let Q=z;Q<=O;Q++)for(let re=B;re<=K;re++)if(v.call(this,i,c,p,m,this.xCellCount*re+Q,w,E,k))return}_convertToXCellCoord(i){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(i*this.xScale)))}_convertToYCellCoord(i){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(i*this.yScale)))}_circlesCollide(i,c,p,m,v,w){const E=m-i,k=v-c,z=p+w;return z*z>E*E+k*k}_circleAndRectCollide(i,c,p,m,v,w,E){const k=(w-m)/2,z=Math.abs(i-(m+k));if(z>k+p)return!1;const B=(E-v)/2,O=Math.abs(c-(v+B));if(O>B+p)return!1;if(z<=k||O<=B)return!0;const K=z-k,Q=O-B;return K*K+Q*Q<=p*p}}function Xr(y,i,c,p,m){const v=u.H();return i?(u.K(v,v,[1/m,1/m,1]),c||u.ae(v,v,p.angle)):u.L(v,p.labelPlaneMatrix,y),v}function Jr(y,i,c,p,m){if(i){const v=u.af(y);return u.K(v,v,[m,m,1]),c||u.ae(v,v,-p.angle),v}return p.glCoordMatrix}function oe(y,i,c){let p;c?(p=[y.x,y.y,c(y.x,y.y),1],u.ag(p,p,i)):(p=[y.x,y.y,0,1],function(v,w,E){const k=w[0],z=w[1];v[0]=E[0]*k+E[4]*z+E[12],v[1]=E[1]*k+E[5]*z+E[13],v[3]=E[3]*k+E[7]*z+E[15]}(p,p,i));const m=p[3];return{point:new u.P(p[0]/m,p[1]/m),signedDistanceFromCamera:m,isOccluded:!1}}function U(y,i){return .5+y/i*.5}function $(y,i){return y.x>=-i[0]&&y.x<=i[0]&&y.y>=-i[1]&&y.y<=i[1]}function X(y,i,c,p,m,v,w,E,k,z,B,O,K,Q,re){const he=p?y.textSizeData:y.iconSizeData,le=u.ah(he,c.transform.zoom),de=[256/c.width*2+1,256/c.height*2+1],ye=p?y.text.dynamicLayoutVertexArray:y.icon.dynamicLayoutVertexArray;ye.clear();const ae=y.lineVertexArray,we=p?y.text.placedSymbolArray:y.icon.placedSymbolArray,Me=c.transform.width/c.transform.height;let Oe=!1;for(let Ge=0;Ge<we.length;Ge++){const et=we.get(Ge);if(et.hidden||et.writingMode===u.ai.vertical&&!Oe){wt(et.numGlyphs,ye);continue}Oe=!1;const dt=oe(new u.P(et.anchorX,et.anchorY),i,re);if(!$(dt.point,de)){wt(et.numGlyphs,ye);continue}const pt=U(c.transform.cameraToCenterDistance,dt.signedDistanceFromCamera),tt=u.aj(he,le,et),rt=w?tt/pt:tt*pt,bt={getElevation:re,labelPlaneMatrix:m,lineVertexArray:ae,pitchWithMap:w,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:z,tileAnchorPoint:new u.P(et.anchorX,et.anchorY),unwrappedTileID:B,width:O,height:K,translation:Q},Gt=me(bt,et,rt,!1,E,i,v,y.glyphOffsetArray,ye,Me,k);Oe=Gt.useVertical,(Gt.notEnoughRoom||Oe||Gt.needsFlipping&&me(bt,et,rt,!0,E,i,v,y.glyphOffsetArray,ye,Me,k).notEnoughRoom)&&wt(et.numGlyphs,ye)}p?y.text.dynamicLayoutVertexBuffer.updateData(ye):y.icon.dynamicLayoutVertexBuffer.updateData(ye)}function te(y,i,c,p,m,v,w,E){const k=v.glyphStartIndex+v.numGlyphs,z=v.lineStartIndex,B=v.lineStartIndex+v.lineLength,O=i.getoffsetX(v.glyphStartIndex),K=i.getoffsetX(k-1),Q=Qe(y*O,c,p,m,v.segment,z,B,E,w);if(!Q)return null;const re=Qe(y*K,c,p,m,v.segment,z,B,E,w);return re?E.projectionCache.anyProjectionOccluded?null:{first:Q,last:re}:null}function se(y,i,c,p){return y===u.ai.horizontal&&Math.abs(c.y-i.y)>Math.abs(c.x-i.x)*p?{useVertical:!0}:(y===u.ai.vertical?i.y<c.y:i.x>c.x)?{needsFlipping:!0}:null}function me(y,i,c,p,m,v,w,E,k,z,B){const O=c/24,K=i.lineOffsetX*O,Q=i.lineOffsetY*O;let re;if(i.numGlyphs>1){const he=i.glyphStartIndex+i.numGlyphs,le=i.lineStartIndex,de=i.lineStartIndex+i.lineLength,ye=te(O,E,K,Q,p,i,B,y);if(!ye)return{notEnoughRoom:!0};const ae=oe(ye.first.point,w,y.getElevation).point,we=oe(ye.last.point,w,y.getElevation).point;if(m&&!p){const Me=se(i.writingMode,ae,we,z);if(Me)return Me}re=[ye.first];for(let Me=i.glyphStartIndex+1;Me<he-1;Me++)re.push(Qe(O*E.getoffsetX(Me),K,Q,p,i.segment,le,de,y,B));re.push(ye.last)}else{if(m&&!p){const le=oe(y.tileAnchorPoint,v,y.getElevation).point,de=i.lineStartIndex+i.segment+1,ye=new u.P(y.lineVertexArray.getx(de),y.lineVertexArray.gety(de)),ae=oe(ye,v,y.getElevation),we=ae.signedDistanceFromCamera>0?ae.point:function(Oe,Ge,et,dt,pt,tt){return xe(Oe,Ge,et,1,pt,tt)}(y.tileAnchorPoint,ye,le,0,v,y),Me=se(i.writingMode,le,we,z);if(Me)return Me}const he=Qe(O*E.getoffsetX(i.glyphStartIndex),K,Q,p,i.segment,i.lineStartIndex,i.lineStartIndex+i.lineLength,y,B);if(!he||y.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};re=[he]}for(const he of re)u.ak(k,he.point,he.angle);return{}}function xe(y,i,c,p,m,v){const w=y.add(y.sub(i)._unit()),E=m!==void 0?oe(w,m,v.getElevation).point:Re(w.x,w.y,v).point,k=c.sub(E);return c.add(k._mult(p/k.mag()))}function ue(y,i,c){const p=i.projectionCache;if(p.projections[y])return p.projections[y];const m=new u.P(i.lineVertexArray.getx(y),i.lineVertexArray.gety(y)),v=Re(m.x,m.y,i);if(v.signedDistanceFromCamera>0)return p.projections[y]=v.point,p.anyProjectionOccluded=p.anyProjectionOccluded||v.isOccluded,v.point;const w=y-c.direction;return function(E,k,z,B,O){return xe(E,k,z,B,void 0,O)}(c.distanceFromAnchor===0?i.tileAnchorPoint:new u.P(i.lineVertexArray.getx(w),i.lineVertexArray.gety(w)),m,c.previousVertex,c.absOffsetX-c.distanceFromAnchor+1,i)}function Re(y,i,c){const p=y+c.translation[0],m=i+c.translation[1];let v;return!c.pitchWithMap&&c.projection.useSpecialProjectionForSymbols?(v=c.projection.projectTileCoordinates(p,m,c.unwrappedTileID,c.getElevation),v.point.x=(.5*v.point.x+.5)*c.width,v.point.y=(.5*-v.point.y+.5)*c.height):(v=oe(new u.P(p,m),c.labelPlaneMatrix,c.getElevation),v.isOccluded=!1),v}function je(y,i,c){return y._unit()._perp()._mult(i*c)}function Le(y,i,c,p,m,v,w,E,k){if(E.projectionCache.offsets[y])return E.projectionCache.offsets[y];const z=c.add(i);if(y+k.direction<p||y+k.direction>=m)return E.projectionCache.offsets[y]=z,z;const B=ue(y+k.direction,E,k),O=je(B.sub(c),w,k.direction),K=c.add(O),Q=B.add(O);return E.projectionCache.offsets[y]=u.al(v,z,K,Q)||z,E.projectionCache.offsets[y]}function Qe(y,i,c,p,m,v,w,E,k){const z=p?y-i:y+i;let B=z>0?1:-1,O=0;p&&(B*=-1,O=Math.PI),B<0&&(O+=Math.PI);let K,Q=B>0?v+m:v+m+1;E.projectionCache.cachedAnchorPoint?K=E.projectionCache.cachedAnchorPoint:(K=Re(E.tileAnchorPoint.x,E.tileAnchorPoint.y,E).point,E.projectionCache.cachedAnchorPoint=K);let re,he,le=K,de=K,ye=0,ae=0;const we=Math.abs(z),Me=[];let Oe;for(;ye+ae<=we;){if(Q+=B,Q<v||Q>=w)return null;ye+=ae,de=le,he=re;const dt={absOffsetX:we,direction:B,distanceFromAnchor:ye,previousVertex:de};if(le=ue(Q,E,dt),c===0)Me.push(de),Oe=le.sub(de);else{let pt;const tt=le.sub(de);pt=tt.mag()===0?je(ue(Q+B,E,dt).sub(le),c,B):je(tt,c,B),he||(he=de.add(pt)),re=Le(Q,pt,le,v,w,he,c,E,dt),Me.push(he),Oe=re.sub(he)}ae=Oe.mag()}const Ge=Oe._mult((we-ye)/ae)._add(he||de),et=O+Math.atan2(le.y-de.y,le.x-de.x);return Me.push(Ge),{point:Ge,angle:k?et:0,path:Me}}const vt=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function wt(y,i){for(let c=0;c<y;c++){const p=i.length;i.resize(p+4),i.float32.set(vt,3*p)}}const At=100;class Kt{constructor(i,c,p=new Fr(i.width+200,i.height+200,25),m=new Fr(i.width+200,i.height+200,25)){this.transform=i,this.mapProjection=c,this.grid=p,this.ignoredGrid=m,this.pitchFactor=Math.cos(i._pitch)*i.cameraToCenterDistance,this.screenRightBoundary=i.width+At,this.screenBottomBoundary=i.height+At,this.gridRightBoundary=i.width+200,this.gridBottomBoundary=i.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(i,c,p,m,v,w,E,k,z,B,O){const K=i.anchorPointX+k[0],Q=i.anchorPointY+k[1],re=this.projectAndGetPerspectiveRatio(m,K,Q,v,B),he=this._projectCollisionBox(i,p,m,v,w,E,k,re,B,O),[le,de,ye,ae]=he.box;return this.mapProjection.useSpecialProjectionForSymbols&&(w?he.allPointsOccluded:this.mapProjection.isOccluded(K,Q,v))||re.perspectiveRatio<this.perspectiveRatioCutoff||!this.isInsideGrid(le,de,ye,ae)||c!=="always"&&this.grid.hitTest(le,de,ye,ae,c,z)?{box:[le,de,ye,ae],placeable:!1,offscreen:!1}:{box:[le,de,ye,ae],placeable:!0,offscreen:this.isOffscreen(le,de,ye,ae)}}placeCollisionCircles(i,c,p,m,v,w,E,k,z,B,O,K,Q,re,he,le){const de=[],ye=new u.P(c.anchorX,c.anchorY),ae=this.getPerspectiveRatio(w,ye.x,ye.y,E,le),we=(O?v/ae:v*ae)/u.aq,Me={getElevation:le,labelPlaneMatrix:k,lineVertexArray:p,pitchWithMap:O,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:this.mapProjection,tileAnchorPoint:ye,unwrappedTileID:E,width:this.transform.width,height:this.transform.height,translation:he},Oe=te(we,m,c.lineOffsetX*we,c.lineOffsetY*we,!1,c,!1,Me);let Ge=!1,et=!1,dt=!0;if(Oe){const pt=.5*Q*ae+re,tt=new u.P(-100,-100),rt=new u.P(this.screenRightBoundary,this.screenBottomBoundary),bt=new kt,Gt=Oe.first,ot=Oe.last;let lt=[];for(let er=Gt.path.length-1;er>=1;er--)lt.push(Gt.path[er]);for(let er=1;er<ot.path.length;er++)lt.push(ot.path[er]);const jt=2.5*pt;if(z){const er=this.projectPathToScreenSpace(lt,Me,z);lt=er.some(dr=>dr.signedDistanceFromCamera<=0)?[]:er.map(dr=>dr.point)}let cn=[];if(lt.length>0){const er=lt[0].clone(),dr=lt[0].clone();for(let un=1;un<lt.length;un++)er.x=Math.min(er.x,lt[un].x),er.y=Math.min(er.y,lt[un].y),dr.x=Math.max(dr.x,lt[un].x),dr.y=Math.max(dr.y,lt[un].y);cn=er.x>=tt.x&&dr.x<=rt.x&&er.y>=tt.y&&dr.y<=rt.y?[lt]:dr.x<tt.x||er.x>rt.x||dr.y<tt.y||er.y>rt.y?[]:u.am([lt],tt.x,tt.y,rt.x,rt.y)}for(const er of cn){bt.reset(er,.25*pt);let dr=0;dr=bt.length<=.5*pt?1:Math.ceil(bt.paddedLength/jt)+1;for(let un=0;un<dr;un++){const ai=un/Math.max(dr-1,1),To=bt.lerp(ai),hn=To.x+At,Ri=To.y+At;de.push(hn,Ri,pt,0);const _i=hn-pt,si=Ri-pt,li=hn+pt,Po=Ri+pt;if(dt=dt&&this.isOffscreen(_i,si,li,Po),et=et||this.isInsideGrid(_i,si,li,Po),i!=="always"&&this.grid.hitTestCircle(hn,Ri,pt,i,K)&&(Ge=!0,!B))return{circles:[],offscreen:!1,collisionDetected:Ge}}}}return{circles:!B&&Ge||!et||ae<this.perspectiveRatioCutoff?[]:de,offscreen:dt,collisionDetected:Ge}}projectPathToScreenSpace(i,c,p){return i.map(m=>oe(m,p,c.getElevation))}queryRenderedSymbols(i){if(i.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const c=[];let p=1/0,m=1/0,v=-1/0,w=-1/0;for(const B of i){const O=new u.P(B.x+At,B.y+At);p=Math.min(p,O.x),m=Math.min(m,O.y),v=Math.max(v,O.x),w=Math.max(w,O.y),c.push(O)}const E=this.grid.query(p,m,v,w).concat(this.ignoredGrid.query(p,m,v,w)),k={},z={};for(const B of E){const O=B.key;if(k[O.bucketInstanceId]===void 0&&(k[O.bucketInstanceId]={}),k[O.bucketInstanceId][O.featureIndex])continue;const K=[new u.P(B.x1,B.y1),new u.P(B.x2,B.y1),new u.P(B.x2,B.y2),new u.P(B.x1,B.y2)];u.an(c,K)&&(k[O.bucketInstanceId][O.featureIndex]=!0,z[O.bucketInstanceId]===void 0&&(z[O.bucketInstanceId]=[]),z[O.bucketInstanceId].push(O.featureIndex))}return z}insertCollisionBox(i,c,p,m,v,w){(p?this.ignoredGrid:this.grid).insert({bucketInstanceId:m,featureIndex:v,collisionGroupID:w,overlapMode:c},i[0],i[1],i[2],i[3])}insertCollisionCircles(i,c,p,m,v,w){const E=p?this.ignoredGrid:this.grid,k={bucketInstanceId:m,featureIndex:v,collisionGroupID:w,overlapMode:c};for(let z=0;z<i.length;z+=4)E.insertCircle(k,i[z],i[z+1],i[z+2])}projectAndGetPerspectiveRatio(i,c,p,m,v){const w=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(c,p,m,v):oe(new u.P(c,p),i,v);return{point:new u.P((w.point.x+1)/2*this.transform.width+At,(1-w.point.y)/2*this.transform.height+At),perspectiveRatio:.5+this.transform.cameraToCenterDistance/w.signedDistanceFromCamera*.5,isOccluded:w.isOccluded,signedDistanceFromCamera:w.signedDistanceFromCamera}}getPerspectiveRatio(i,c,p,m,v){const w=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(c,p,m,v):oe(new u.P(c,p),i,v);return .5+this.transform.cameraToCenterDistance/w.signedDistanceFromCamera*.5}isOffscreen(i,c,p,m){return p<At||i>=this.screenRightBoundary||m<At||c>this.screenBottomBoundary}isInsideGrid(i,c,p,m){return p>=0&&i<this.gridRightBoundary&&m>=0&&c<this.gridBottomBoundary}getViewportMatrix(){const i=u.ao([]);return u.J(i,i,[-100,-100,0]),i}_projectCollisionBox(i,c,p,m,v,w,E,k,z,B){const O=c*k.perspectiveRatio;let K=new u.P(1,0),Q=new u.P(0,1);const re=new u.P(i.anchorPointX+E[0],i.anchorPointY+E[1]);if(w&&!v){const pt=this.projectAndGetPerspectiveRatio(p,re.x+1,re.y,m,z).point.sub(k.point).unit(),tt=Math.atan(pt.y/pt.x)+(pt.x<0?Math.PI:0),rt=Math.sin(tt),bt=Math.cos(tt);K=new u.P(bt,rt),Q=new u.P(-rt,bt)}else if(!w&&v){const pt=-this.transform.angle,tt=Math.sin(pt),rt=Math.cos(pt);K=new u.P(rt,tt),Q=new u.P(-tt,rt)}let he=k.point,le=O;if(v){he=re;const pt=this.transform.zoom-Math.floor(this.transform.zoom);le=Math.pow(2,-pt),le*=this.mapProjection.getPitchedTextCorrection(this.transform,re,m),B||(le*=u.ad(.5+k.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))}B&&(he=he.add(K.mult(B.x*le)).add(Q.mult(B.y*le)));const de=i.x1*le,ye=i.x2*le,ae=(de+ye)/2,we=i.y1*le,Me=i.y2*le,Oe=(we+Me)/2,Ge=[{offsetX:de,offsetY:we},{offsetX:ae,offsetY:we},{offsetX:ye,offsetY:we},{offsetX:ye,offsetY:Oe},{offsetX:ye,offsetY:Me},{offsetX:ae,offsetY:Me},{offsetX:de,offsetY:Me},{offsetX:de,offsetY:Oe}];let et=[];for(const{offsetX:pt,offsetY:tt}of Ge)et.push(new u.P(he.x+K.x*pt+Q.x*tt,he.y+K.y*pt+Q.y*tt));let dt=!1;if(v){const pt=et.map(tt=>this.projectAndGetPerspectiveRatio(p,tt.x,tt.y,m,z));dt=pt.some(tt=>!tt.isOccluded),et=pt.map(tt=>tt.point)}else dt=!0;return{box:u.ap(et),allPointsOccluded:!dt}}}function zt(y,i,c){return i*(u.X/(y.tileSize*Math.pow(2,c-y.tileID.overscaledZ)))}class Yt{constructor(i,c,p,m){this.opacity=i?Math.max(0,Math.min(1,i.opacity+(i.placed?c:-c))):m&&p?1:0,this.placed=p}isHidden(){return this.opacity===0&&!this.placed}}class zr{constructor(i,c,p,m,v){this.text=new Yt(i?i.text:null,c,p,v),this.icon=new Yt(i?i.icon:null,c,m,v)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class cr{constructor(i,c,p){this.text=i,this.icon=c,this.skipFade=p}}class Ut{constructor(){this.invProjMatrix=u.H(),this.viewportMatrix=u.H(),this.circles=[]}}class fr{constructor(i,c,p,m,v){this.bucketInstanceId=i,this.featureIndex=c,this.sourceLayerIndex=p,this.bucketIndex=m,this.tileID=v}}class Er{constructor(i){this.crossSourceCollisions=i,this.maxGroupID=0,this.collisionGroups={}}get(i){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[i]){const c=++this.maxGroupID;this.collisionGroups[i]={ID:c,predicate:p=>p.collisionGroupID===c}}return this.collisionGroups[i]}}function $r(y,i,c,p,m){const{horizontalAlign:v,verticalAlign:w}=u.av(y);return new u.P(-(v-.5)*i+p[0]*m,-(w-.5)*c+p[1]*m)}class Rr{constructor(i,c,p,m,v,w){this.transform=i.clone(),this.terrain=p,this.collisionIndex=new Kt(this.transform,c),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=m,this.retainedQueryData={},this.collisionGroups=new Er(v),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=w,w&&(w.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(i){const c=this.terrain;return c?(p,m)=>c.getElevation(i,p,m):null}getBucketParts(i,c,p,m){const v=p.getBucket(c),w=p.latestFeatureIndex;if(!v||!w||c.id!==v.layerIds[0])return;const E=p.collisionBoxArray,k=v.layers[0].layout,z=v.layers[0].paint,B=Math.pow(2,this.transform.zoom-p.tileID.overscaledZ),O=p.tileSize/u.X,K=p.tileID.toUnwrapped(),Q=this.transform.calculatePosMatrix(K),re=k.get("text-pitch-alignment")==="map",he=k.get("text-rotation-alignment")==="map",le=zt(p,1,this.transform.zoom),de=this.collisionIndex.mapProjection.translatePosition(this.transform,p,z.get("text-translate"),z.get("text-translate-anchor")),ye=this.collisionIndex.mapProjection.translatePosition(this.transform,p,z.get("icon-translate"),z.get("icon-translate-anchor")),ae=Xr(Q,re,he,this.transform,le);let we=null;if(re){const Oe=Jr(Q,re,he,this.transform,le);we=u.L([],this.transform.labelPlaneMatrix,Oe)}this.retainedQueryData[v.bucketInstanceId]=new fr(v.bucketInstanceId,w,v.sourceLayerIndex,v.index,p.tileID);const Me={bucket:v,layout:k,translationText:de,translationIcon:ye,posMatrix:Q,unwrappedTileID:K,textLabelPlaneMatrix:ae,labelToScreenMatrix:we,scale:B,textPixelRatio:O,holdingForFade:p.holdingForFade(),collisionBoxArray:E,partiallyEvaluatedTextSize:u.ah(v.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(v.sourceID)};if(m)for(const Oe of v.sortKeyRanges){const{sortKey:Ge,symbolInstanceStart:et,symbolInstanceEnd:dt}=Oe;i.push({sortKey:Ge,symbolInstanceStart:et,symbolInstanceEnd:dt,parameters:Me})}else i.push({symbolInstanceStart:0,symbolInstanceEnd:v.symbolInstances.length,parameters:Me})}attemptAnchorPlacement(i,c,p,m,v,w,E,k,z,B,O,K,Q,re,he,le,de,ye,ae){const we=u.ar[i.textAnchor],Me=[i.textOffset0,i.textOffset1],Oe=$r(we,p,m,Me,v),Ge=this.collisionIndex.placeCollisionBox(c,K,k,z,B,E,w,le,O.predicate,ae,Oe);if((!ye||this.collisionIndex.placeCollisionBox(ye,K,k,z,B,E,w,de,O.predicate,ae,Oe).placeable)&&Ge.placeable){let et;if(this.prevPlacement&&this.prevPlacement.variableOffsets[Q.crossTileID]&&this.prevPlacement.placements[Q.crossTileID]&&this.prevPlacement.placements[Q.crossTileID].text&&(et=this.prevPlacement.variableOffsets[Q.crossTileID].anchor),Q.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[Q.crossTileID]={textOffset:Me,width:p,height:m,anchor:we,textBoxScale:v,prevAnchor:et},this.markUsedJustification(re,we,Q,he),re.allowVerticalPlacement&&(this.markUsedOrientation(re,he,Q),this.placedOrientations[Q.crossTileID]=he),{shift:Oe,placedGlyphBoxes:Ge}}}placeLayerBucketPart(i,c,p){const{bucket:m,layout:v,translationText:w,translationIcon:E,posMatrix:k,unwrappedTileID:z,textLabelPlaneMatrix:B,labelToScreenMatrix:O,textPixelRatio:K,holdingForFade:Q,collisionBoxArray:re,partiallyEvaluatedTextSize:he,collisionGroup:le}=i.parameters,de=v.get("text-optional"),ye=v.get("icon-optional"),ae=u.as(v,"text-overlap","text-allow-overlap"),we=ae==="always",Me=u.as(v,"icon-overlap","icon-allow-overlap"),Oe=Me==="always",Ge=v.get("text-rotation-alignment")==="map",et=v.get("text-pitch-alignment")==="map",dt=v.get("icon-text-fit")!=="none",pt=v.get("symbol-z-order")==="viewport-y",tt=we&&(Oe||!m.hasIconData()||ye),rt=Oe&&(we||!m.hasTextData()||de);!m.collisionArrays&&re&&m.deserializeCollisionBoxes(re);const bt=this._getTerrainElevationFunc(this.retainedQueryData[m.bucketInstanceId].tileID),Gt=(ot,lt,jt)=>{var cn,er;if(c[ot.crossTileID])return;if(Q)return void(this.placements[ot.crossTileID]=new cr(!1,!1,!1));let dr=!1,un=!1,ai=!0,To=null,hn={box:null,placeable:!1,offscreen:null},Ri={box:null,placeable:!1,offscreen:null},_i=null,si=null,li=null,Po=0,os=0,Gc=0;lt.textFeatureIndex?Po=lt.textFeatureIndex:ot.useRuntimeCollisionCircles&&(Po=ot.featureIndex),lt.verticalTextFeatureIndex&&(os=lt.verticalTextFeatureIndex);const Vs=lt.textBox;if(Vs){const ti=ci=>{let ui=u.ai.horizontal;if(m.allowVerticalPlacement&&!ci&&this.prevPlacement){const Gn=this.prevPlacement.placedOrientations[ot.crossTileID];Gn&&(this.placedOrientations[ot.crossTileID]=Gn,ui=Gn,this.markUsedOrientation(m,ui,ot))}return ui},Io=(ci,ui)=>{if(m.allowVerticalPlacement&&ot.numVerticalGlyphVertices>0&&lt.verticalTextBox){for(const Gn of m.writingModes)if(Gn===u.ai.vertical?(hn=ui(),Ri=hn):hn=ci(),hn&&hn.placeable)break}else hn=ci()},Ba=ot.textAnchorOffsetStartIndex,Us=ot.textAnchorOffsetEndIndex;if(Us===Ba){const ci=(ui,Gn)=>{const yn=this.collisionIndex.placeCollisionBox(ui,ae,K,k,z,et,Ge,w,le.predicate,bt);return yn&&yn.placeable&&(this.markUsedOrientation(m,Gn,ot),this.placedOrientations[ot.crossTileID]=Gn),yn};Io(()=>ci(Vs,u.ai.horizontal),()=>{const ui=lt.verticalTextBox;return m.allowVerticalPlacement&&ot.numVerticalGlyphVertices>0&&ui?ci(ui,u.ai.vertical):{box:null,offscreen:null}}),ti(hn&&hn.placeable)}else{let ci=u.ar[(er=(cn=this.prevPlacement)===null||cn===void 0?void 0:cn.variableOffsets[ot.crossTileID])===null||er===void 0?void 0:er.anchor];const ui=(yn,Hs,Qh)=>{const Vn=yn.x2-yn.x1,Cp=yn.y2-yn.y1,Kc=ot.textBoxScale,Xc=dt&&Me==="never"?Hs:null;let Na=null,Ep=ae==="never"?1:2,ed="never";ci&&Ep++;for(let td=0;td<Ep;td++){for(let rd=Ba;rd<Us;rd++){const Jc=m.textAnchorOffsets.get(rd);if(ci&&Jc.textAnchor!==ci)continue;const qs=this.attemptAnchorPlacement(Jc,yn,Vn,Cp,Kc,Ge,et,K,k,z,le,ed,ot,m,Qh,w,E,Xc,bt);if(qs&&(Na=qs.placedGlyphBoxes,Na&&Na.placeable))return dr=!0,To=qs.shift,Na}ci?ci=null:ed=ae}return p&&!Na&&(Na={box:this.collisionIndex.placeCollisionBox(Vs,"always",K,k,z,et,Ge,w,le.predicate,bt,new u.P(0,0)).box,offscreen:!1,placeable:!1}),Na};Io(()=>ui(Vs,lt.iconBox,u.ai.horizontal),()=>{const yn=lt.verticalTextBox;return m.allowVerticalPlacement&&(!hn||!hn.placeable)&&ot.numVerticalGlyphVertices>0&&yn?ui(yn,lt.verticalIconBox,u.ai.vertical):{box:null,occluded:!0,offscreen:null}}),hn&&(dr=hn.placeable,ai=hn.offscreen);const Gn=ti(hn&&hn.placeable);if(!dr&&this.prevPlacement){const yn=this.prevPlacement.variableOffsets[ot.crossTileID];yn&&(this.variableOffsets[ot.crossTileID]=yn,this.markUsedJustification(m,yn.anchor,ot,Gn))}}}if(_i=hn,dr=_i&&_i.placeable,ai=_i&&_i.offscreen,ot.useRuntimeCollisionCircles){const ti=m.text.placedSymbolArray.get(ot.centerJustifiedTextSymbolIndex),Io=u.aj(m.textSizeData,he,ti),Ba=v.get("text-padding");si=this.collisionIndex.placeCollisionCircles(ae,ti,m.lineVertexArray,m.glyphOffsetArray,Io,k,z,B,O,p,et,le.predicate,ot.collisionCircleDiameter,Ba,w,bt),si.circles.length&&si.collisionDetected&&!p&&u.w("Collisions detected, but collision boxes are not shown"),dr=we||si.circles.length>0&&!si.collisionDetected,ai=ai&&si.offscreen}if(lt.iconFeatureIndex&&(Gc=lt.iconFeatureIndex),lt.iconBox){const ti=Io=>this.collisionIndex.placeCollisionBox(Io,Me,K,k,z,et,Ge,E,le.predicate,bt,dt&&To?To:void 0);Ri&&Ri.placeable&&lt.verticalIconBox?(li=ti(lt.verticalIconBox),un=li.placeable):(li=ti(lt.iconBox),un=li.placeable),ai=ai&&li.offscreen}const as=de||ot.numHorizontalGlyphVertices===0&&ot.numVerticalGlyphVertices===0,Zc=ye||ot.numIconVertices===0;as||Zc?Zc?as||(un=un&&dr):dr=un&&dr:un=dr=un&&dr;const Yh=un&&li.placeable;if(dr&&_i.placeable&&this.collisionIndex.insertCollisionBox(_i.box,ae,v.get("text-ignore-placement"),m.bucketInstanceId,Ri&&Ri.placeable&&os?os:Po,le.ID),Yh&&this.collisionIndex.insertCollisionBox(li.box,Me,v.get("icon-ignore-placement"),m.bucketInstanceId,Gc,le.ID),si&&dr&&this.collisionIndex.insertCollisionCircles(si.circles,ae,v.get("text-ignore-placement"),m.bucketInstanceId,Po,le.ID),p&&this.storeCollisionData(m.bucketInstanceId,jt,lt,_i,li,si),ot.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(m.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[ot.crossTileID]=new cr(dr||tt,un||rt,ai||m.justReloaded),c[ot.crossTileID]=!0};if(pt){if(i.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const ot=m.getSortedSymbolIndexes(this.transform.angle);for(let lt=ot.length-1;lt>=0;--lt){const jt=ot[lt];Gt(m.symbolInstances.get(jt),m.collisionArrays[jt],jt)}}else for(let ot=i.symbolInstanceStart;ot<i.symbolInstanceEnd;ot++)Gt(m.symbolInstances.get(ot),m.collisionArrays[ot],ot);if(p&&m.bucketInstanceId in this.collisionCircleArrays){const ot=this.collisionCircleArrays[m.bucketInstanceId];u.at(ot.invProjMatrix,k),ot.viewportMatrix=this.collisionIndex.getViewportMatrix()}m.justReloaded=!1}storeCollisionData(i,c,p,m,v,w){if(p.textBox||p.iconBox){let E,k;this.collisionBoxArrays.has(i)?E=this.collisionBoxArrays.get(i):(E=new Map,this.collisionBoxArrays.set(i,E)),E.has(c)?k=E.get(c):(k={text:null,icon:null},E.set(c,k)),p.textBox&&(k.text=m.box),p.iconBox&&(k.icon=v.box)}if(w){let E=this.collisionCircleArrays[i];E===void 0&&(E=this.collisionCircleArrays[i]=new Ut);for(let k=0;k<w.circles.length;k+=4)E.circles.push(w.circles[k+0]),E.circles.push(w.circles[k+1]),E.circles.push(w.circles[k+2]),E.circles.push(w.collisionDetected?1:0)}}markUsedJustification(i,c,p,m){let v;v=m===u.ai.vertical?p.verticalPlacedTextSymbolIndex:{left:p.leftJustifiedTextSymbolIndex,center:p.centerJustifiedTextSymbolIndex,right:p.rightJustifiedTextSymbolIndex}[u.au(c)];const w=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex,p.verticalPlacedTextSymbolIndex];for(const E of w)E>=0&&(i.text.placedSymbolArray.get(E).crossTileID=v>=0&&E!==v?0:p.crossTileID)}markUsedOrientation(i,c,p){const m=c===u.ai.horizontal||c===u.ai.horizontalOnly?c:0,v=c===u.ai.vertical?c:0,w=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex];for(const E of w)i.text.placedSymbolArray.get(E).placedOrientation=m;p.verticalPlacedTextSymbolIndex&&(i.text.placedSymbolArray.get(p.verticalPlacedTextSymbolIndex).placedOrientation=v)}commit(i){this.commitTime=i,this.zoomAtLastRecencyCheck=this.transform.zoom;const c=this.prevPlacement;let p=!1;this.prevZoomAdjustment=c?c.zoomAdjustment(this.transform.zoom):0;const m=c?c.symbolFadeChange(i):1,v=c?c.opacities:{},w=c?c.variableOffsets:{},E=c?c.placedOrientations:{};for(const k in this.placements){const z=this.placements[k],B=v[k];B?(this.opacities[k]=new zr(B,m,z.text,z.icon),p=p||z.text!==B.text.placed||z.icon!==B.icon.placed):(this.opacities[k]=new zr(null,m,z.text,z.icon,z.skipFade),p=p||z.text||z.icon)}for(const k in v){const z=v[k];if(!this.opacities[k]){const B=new zr(z,m,!1,!1);B.isHidden()||(this.opacities[k]=B,p=p||z.text.placed||z.icon.placed)}}for(const k in w)this.variableOffsets[k]||!this.opacities[k]||this.opacities[k].isHidden()||(this.variableOffsets[k]=w[k]);for(const k in E)this.placedOrientations[k]||!this.opacities[k]||this.opacities[k].isHidden()||(this.placedOrientations[k]=E[k]);if(c&&c.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");p?this.lastPlacementChangeTime=i:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=c?c.lastPlacementChangeTime:i)}updateLayerOpacities(i,c){const p={};for(const m of c){const v=m.getBucket(i);v&&m.latestFeatureIndex&&i.id===v.layerIds[0]&&this.updateBucketOpacities(v,m.tileID,p,m.collisionBoxArray)}}updateBucketOpacities(i,c,p,m){i.hasTextData()&&(i.text.opacityVertexArray.clear(),i.text.hasVisibleVertices=!1),i.hasIconData()&&(i.icon.opacityVertexArray.clear(),i.icon.hasVisibleVertices=!1),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexArray.clear(),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexArray.clear();const v=i.layers[0],w=v.layout,E=new zr(null,0,!1,!1,!0),k=w.get("text-allow-overlap"),z=w.get("icon-allow-overlap"),B=v._unevaluatedLayout.hasValue("text-variable-anchor")||v._unevaluatedLayout.hasValue("text-variable-anchor-offset"),O=w.get("text-rotation-alignment")==="map",K=w.get("text-pitch-alignment")==="map",Q=w.get("icon-text-fit")!=="none",re=new zr(null,0,k&&(z||!i.hasIconData()||w.get("icon-optional")),z&&(k||!i.hasTextData()||w.get("text-optional")),!0);!i.collisionArrays&&m&&(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData())&&i.deserializeCollisionBoxes(m);const he=(de,ye,ae)=>{for(let we=0;we<ye/4;we++)de.opacityVertexArray.emplaceBack(ae);de.hasVisibleVertices=de.hasVisibleVertices||ae!==jr},le=this.collisionBoxArrays.get(i.bucketInstanceId);for(let de=0;de<i.symbolInstances.length;de++){const ye=i.symbolInstances.get(de),{numHorizontalGlyphVertices:ae,numVerticalGlyphVertices:we,crossTileID:Me}=ye;let Oe=this.opacities[Me];p[Me]?Oe=E:Oe||(Oe=re,this.opacities[Me]=Oe),p[Me]=!0;const Ge=ye.numIconVertices>0,et=this.placedOrientations[ye.crossTileID],dt=et===u.ai.vertical,pt=et===u.ai.horizontal||et===u.ai.horizontalOnly;if(ae>0||we>0){const rt=$n(Oe.text);he(i.text,ae,dt?jr:rt),he(i.text,we,pt?jr:rt);const bt=Oe.text.isHidden();[ye.rightJustifiedTextSymbolIndex,ye.centerJustifiedTextSymbolIndex,ye.leftJustifiedTextSymbolIndex].forEach(lt=>{lt>=0&&(i.text.placedSymbolArray.get(lt).hidden=bt||dt?1:0)}),ye.verticalPlacedTextSymbolIndex>=0&&(i.text.placedSymbolArray.get(ye.verticalPlacedTextSymbolIndex).hidden=bt||pt?1:0);const Gt=this.variableOffsets[ye.crossTileID];Gt&&this.markUsedJustification(i,Gt.anchor,ye,et);const ot=this.placedOrientations[ye.crossTileID];ot&&(this.markUsedJustification(i,"left",ye,ot),this.markUsedOrientation(i,ot,ye))}if(Ge){const rt=$n(Oe.icon),bt=!(Q&&ye.verticalPlacedIconSymbolIndex&&dt);ye.placedIconSymbolIndex>=0&&(he(i.icon,ye.numIconVertices,bt?rt:jr),i.icon.placedSymbolArray.get(ye.placedIconSymbolIndex).hidden=Oe.icon.isHidden()),ye.verticalPlacedIconSymbolIndex>=0&&(he(i.icon,ye.numVerticalIconVertices,bt?jr:rt),i.icon.placedSymbolArray.get(ye.verticalPlacedIconSymbolIndex).hidden=Oe.icon.isHidden())}const tt=le&&le.has(de)?le.get(de):{text:null,icon:null};if(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData()){const rt=i.collisionArrays[de];if(rt){let bt=new u.P(0,0);if(rt.textBox||rt.verticalTextBox){let Gt=!0;if(B){const ot=this.variableOffsets[Me];ot?(bt=$r(ot.anchor,ot.width,ot.height,ot.textOffset,ot.textBoxScale),O&&bt._rotate(K?this.transform.angle:-this.transform.angle)):Gt=!1}if(rt.textBox||rt.verticalTextBox){let ot;rt.textBox&&(ot=dt),rt.verticalTextBox&&(ot=pt),En(i.textCollisionBox.collisionVertexArray,Oe.text.placed,!Gt||ot,tt.text,bt.x,bt.y)}}if(rt.iconBox||rt.verticalIconBox){const Gt=!!(!pt&&rt.verticalIconBox);let ot;rt.iconBox&&(ot=Gt),rt.verticalIconBox&&(ot=!Gt),En(i.iconCollisionBox.collisionVertexArray,Oe.icon.placed,ot,tt.icon,Q?bt.x:0,Q?bt.y:0)}}}}if(i.sortFeatures(this.transform.angle),this.retainedQueryData[i.bucketInstanceId]&&(this.retainedQueryData[i.bucketInstanceId].featureSortOrder=i.featureSortOrder),i.hasTextData()&&i.text.opacityVertexBuffer&&i.text.opacityVertexBuffer.updateData(i.text.opacityVertexArray),i.hasIconData()&&i.icon.opacityVertexBuffer&&i.icon.opacityVertexBuffer.updateData(i.icon.opacityVertexArray),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexBuffer&&i.iconCollisionBox.collisionVertexBuffer.updateData(i.iconCollisionBox.collisionVertexArray),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexBuffer&&i.textCollisionBox.collisionVertexBuffer.updateData(i.textCollisionBox.collisionVertexArray),i.text.opacityVertexArray.length!==i.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${i.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${i.text.layoutVertexArray.length}) / 4`);if(i.icon.opacityVertexArray.length!==i.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${i.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${i.icon.layoutVertexArray.length}) / 4`);if(i.bucketInstanceId in this.collisionCircleArrays){const de=this.collisionCircleArrays[i.bucketInstanceId];i.placementInvProjMatrix=de.invProjMatrix,i.placementViewportMatrix=de.viewportMatrix,i.collisionCircleArray=de.circles,delete this.collisionCircleArrays[i.bucketInstanceId]}}symbolFadeChange(i){return this.fadeDuration===0?1:(i-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(i){return Math.max(0,(this.transform.zoom-i)/1.5)}hasTransitions(i){return this.stale||i-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(i,c){const p=this.zoomAtLastRecencyCheck===c?1-this.zoomAdjustment(c):1;return this.zoomAtLastRecencyCheck=c,this.commitTime+this.fadeDuration*p>i}setStale(){this.stale=!0}}function En(y,i,c,p,m,v){p&&p.length!==0||(p=[0,0,0,0]);const w=p[0]-At,E=p[1]-At,k=p[2]-At,z=p[3]-At;y.emplaceBack(i?1:0,c?1:0,m||0,v||0,w,E),y.emplaceBack(i?1:0,c?1:0,m||0,v||0,k,E),y.emplaceBack(i?1:0,c?1:0,m||0,v||0,k,z),y.emplaceBack(i?1:0,c?1:0,m||0,v||0,w,z)}const oo=Math.pow(2,25),pr=Math.pow(2,24),Ii=Math.pow(2,17),ki=Math.pow(2,16),An=Math.pow(2,9),bn=Math.pow(2,8),Ra=Math.pow(2,1);function $n(y){if(y.opacity===0&&!y.placed)return 0;if(y.opacity===1&&y.placed)return 4294967295;const i=y.placed?1:0,c=Math.floor(127*y.opacity);return c*oo+i*pr+c*Ii+i*ki+c*An+i*bn+c*Ra+i}const jr=0;function jn(){return{isOccluded:(y,i,c)=>!1,getPitchedTextCorrection:(y,i,c)=>1,get useSpecialProjectionForSymbols(){return!1},projectTileCoordinates(y,i,c,p){throw new Error("Not implemented.")},translatePosition:(y,i,c,p)=>function(m,v,w,E,k=!1){if(!w[0]&&!w[1])return[0,0];const z=k?E==="map"?m.angle:0:E==="viewport"?-m.angle:0;if(z){const B=Math.sin(z),O=Math.cos(z);w=[w[0]*O-w[1]*B,w[0]*B+w[1]*O]}return[k?w[0]:zt(v,w[0],m.zoom),k?w[1]:zt(v,w[1],m.zoom)]}(y,i,c,p),getCircleRadiusCorrection:y=>1}}class qi{constructor(i){this._sortAcrossTiles=i.layout.get("symbol-z-order")!=="viewport-y"&&!i.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(i,c,p,m,v){const w=this._bucketParts;for(;this._currentTileIndex<i.length;)if(c.getBucketParts(w,m,i[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,v())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,w.sort((E,k)=>E.sortKey-k.sortKey));this._currentPartIndex<w.length;)if(c.placeLayerBucketPart(w[this._currentPartIndex],this._seenCrossTileIDs,p),this._currentPartIndex++,v())return!0;return!1}}class Yr{constructor(i,c,p,m,v,w,E,k){this.placement=new Rr(i,jn(),c,w,E,k),this._currentPlacementIndex=p.length-1,this._forceFullPlacement=m,this._showCollisionBoxes=v,this._done=!1}isDone(){return this._done}continuePlacement(i,c,p){const m=A.now(),v=()=>!this._forceFullPlacement&&A.now()-m>2;for(;this._currentPlacementIndex>=0;){const w=c[i[this._currentPlacementIndex]],E=this.placement.collisionIndex.transform.zoom;if(w.type==="symbol"&&(!w.minzoom||w.minzoom<=E)&&(!w.maxzoom||w.maxzoom>E)){if(this._inProgressLayer||(this._inProgressLayer=new qi(w)),this._inProgressLayer.continuePlacement(p[w.source],this.placement,this._showCollisionBoxes,w,v))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(i){return this.placement.commit(i),this.placement}}const Fn=512/u.X/2;class Wn{constructor(i,c,p){this.tileID=i,this.bucketInstanceId=p,this._symbolsByKey={};const m=new Map;for(let v=0;v<c.length;v++){const w=c.get(v),E=w.key,k=m.get(E);k?k.push(w):m.set(E,[w])}for(const[v,w]of m){const E={positions:w.map(k=>({x:Math.floor(k.anchorX*Fn),y:Math.floor(k.anchorY*Fn)})),crossTileIDs:w.map(k=>k.crossTileID)};if(E.positions.length>128){const k=new u.aw(E.positions.length,16,Uint16Array);for(const{x:z,y:B}of E.positions)k.add(z,B);k.finish(),delete E.positions,E.index=k}this._symbolsByKey[v]=E}}getScaledCoordinates(i,c){const{x:p,y:m,z:v}=this.tileID.canonical,{x:w,y:E,z:k}=c.canonical,z=Fn/Math.pow(2,k-v),B=(E*u.X+i.anchorY)*z,O=m*u.X*Fn;return{x:Math.floor((w*u.X+i.anchorX)*z-p*u.X*Fn),y:Math.floor(B-O)}}findMatches(i,c,p){const m=this.tileID.canonical.z<c.canonical.z?1:Math.pow(2,this.tileID.canonical.z-c.canonical.z);for(let v=0;v<i.length;v++){const w=i.get(v);if(w.crossTileID)continue;const E=this._symbolsByKey[w.key];if(!E)continue;const k=this.getScaledCoordinates(w,c);if(E.index){const z=E.index.range(k.x-m,k.y-m,k.x+m,k.y+m).sort();for(const B of z){const O=E.crossTileIDs[B];if(!p[O]){p[O]=!0,w.crossTileID=O;break}}}else if(E.positions)for(let z=0;z<E.positions.length;z++){const B=E.positions[z],O=E.crossTileIDs[z];if(Math.abs(B.x-k.x)<=m&&Math.abs(B.y-k.y)<=m&&!p[O]){p[O]=!0,w.crossTileID=O;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:i})=>i)}}class Hr{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Wi{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(i){const c=Math.round((i-this.lng)/360);if(c!==0)for(const p in this.indexes){const m=this.indexes[p],v={};for(const w in m){const E=m[w];E.tileID=E.tileID.unwrapTo(E.tileID.wrap+c),v[E.tileID.key]=E}this.indexes[p]=v}this.lng=i}addBucket(i,c,p){if(this.indexes[i.overscaledZ]&&this.indexes[i.overscaledZ][i.key]){if(this.indexes[i.overscaledZ][i.key].bucketInstanceId===c.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(i.overscaledZ,this.indexes[i.overscaledZ][i.key])}for(let v=0;v<c.symbolInstances.length;v++)c.symbolInstances.get(v).crossTileID=0;this.usedCrossTileIDs[i.overscaledZ]||(this.usedCrossTileIDs[i.overscaledZ]={});const m=this.usedCrossTileIDs[i.overscaledZ];for(const v in this.indexes){const w=this.indexes[v];if(Number(v)>i.overscaledZ)for(const E in w){const k=w[E];k.tileID.isChildOf(i)&&k.findMatches(c.symbolInstances,i,m)}else{const E=w[i.scaledTo(Number(v)).key];E&&E.findMatches(c.symbolInstances,i,m)}}for(let v=0;v<c.symbolInstances.length;v++){const w=c.symbolInstances.get(v);w.crossTileID||(w.crossTileID=p.generate(),m[w.crossTileID]=!0)}return this.indexes[i.overscaledZ]===void 0&&(this.indexes[i.overscaledZ]={}),this.indexes[i.overscaledZ][i.key]=new Wn(i,c.symbolInstances,c.bucketInstanceId),!0}removeBucketCrossTileIDs(i,c){for(const p of c.getCrossTileIDsLists())for(const m of p)delete this.usedCrossTileIDs[i][m]}removeStaleBuckets(i){let c=!1;for(const p in this.indexes){const m=this.indexes[p];for(const v in m)i[m[v].bucketInstanceId]||(this.removeBucketCrossTileIDs(p,m[v]),delete m[v],c=!0)}return c}}class mn{constructor(){this.layerIndexes={},this.crossTileIDs=new Hr,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(i,c,p){let m=this.layerIndexes[i.id];m===void 0&&(m=this.layerIndexes[i.id]=new Wi);let v=!1;const w={};m.handleWrapJump(p);for(const E of c){const k=E.getBucket(i);k&&i.id===k.layerIds[0]&&(k.bucketInstanceId||(k.bucketInstanceId=++this.maxBucketInstanceId),m.addBucket(E.tileID,k,this.crossTileIDs)&&(v=!0),w[k.bucketInstanceId]=!0)}return m.removeStaleBuckets(w)&&(v=!0),v}pruneUnusedLayers(i){const c={};i.forEach(p=>{c[p]=!0});for(const p in this.layerIndexes)c[p]||delete this.layerIndexes[p]}}const bo=(y,i)=>u.t(y,i&&i.filter(c=>c.identifier!=="source.canvas")),Mi=u.ax();class Vr extends u.E{constructor(i,c={}){super(),this._rtlPluginLoaded=()=>{for(const p in this.sourceCaches){const m=this.sourceCaches[p].getSource().type;m!=="vector"&&m!=="geojson"||this.sourceCaches[p].reload()}},this.map=i,this.dispatcher=new Jt(or(),i._getMapId()),this.dispatcher.registerMessageHandler("GG",(p,m)=>this.getGlyphs(p,m)),this.dispatcher.registerMessageHandler("GI",(p,m)=>this.getImages(p,m)),this.imageManager=new Ce,this.imageManager.setEventedParent(this),this.glyphManager=new Se(i._requestManager,c.localIdeographFontFamily),this.lineAtlas=new gt(256,512),this.crossTileSymbolIndex=new mn,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new u.ay,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",u.az()),Nr().on(Xe,this._rtlPluginLoaded),this.on("data",p=>{if(p.dataType!=="source"||p.sourceDataType!=="metadata")return;const m=this.sourceCaches[p.sourceId];if(!m)return;const v=m.getSource();if(v&&v.vectorLayerIds)for(const w in this._layers){const E=this._layers[w];E.source===v.id&&this._validateLayer(E)}})}loadURL(i,c={},p){this.fire(new u.k("dataloading",{dataType:"style"})),c.validate=typeof c.validate!="boolean"||c.validate;const m=this.map._requestManager.transformRequest(i,"Style");this._loadStyleRequest=new AbortController;const v=this._loadStyleRequest;u.h(m,this._loadStyleRequest).then(w=>{this._loadStyleRequest=null,this._load(w.data,c,p)}).catch(w=>{this._loadStyleRequest=null,w&&!v.signal.aborted&&this.fire(new u.j(w))})}loadJSON(i,c={},p){this.fire(new u.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,A.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,c.validate=c.validate!==!1,this._load(i,c,p)}).catch(()=>{})}loadEmpty(){this.fire(new u.k("dataloading",{dataType:"style"})),this._load(Mi,{validate:!1})}_load(i,c,p){var m;const v=c.transformStyle?c.transformStyle(p,i):i;if(!c.validate||!bo(this,u.x(v))){this._loaded=!0,this.stylesheet=v;for(const w in v.sources)this.addSource(w,v.sources[w],{validate:!1});v.sprite?this._loadSprite(v.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(v.glyphs),this._createLayers(),this.light=new Be(this.stylesheet.light),this.sky=new Ze(this.stylesheet.sky),this.map.setTerrain((m=this.stylesheet.terrain)!==null&&m!==void 0?m:null),this.fire(new u.k("data",{dataType:"style"})),this.fire(new u.k("style.load"))}}_createLayers(){const i=u.aA(this.stylesheet.layers);this.dispatcher.broadcast("SL",i),this._order=i.map(c=>c.id),this._layers={},this._serializedLayers=null;for(const c of i){const p=u.aB(c);p.setEventedParent(this,{layer:{id:c.id}}),this._layers[c.id]=p}}_loadSprite(i,c=!1,p=void 0){let m;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(v,w,E,k){return u._(this,void 0,void 0,function*(){const z=be(v),B=E>1?"@2x":"",O={},K={};for(const{id:Q,url:re}of z){const he=w.transformRequest(Pe(re,B,".json"),"SpriteJSON");O[Q]=u.h(he,k);const le=w.transformRequest(Pe(re,B,".png"),"SpriteImage");K[Q]=H.getImage(le,k)}return yield Promise.all([...Object.values(O),...Object.values(K)]),function(Q,re){return u._(this,void 0,void 0,function*(){const he={};for(const le in Q){he[le]={};const de=A.getImageCanvasContext((yield re[le]).data),ye=(yield Q[le]).data;for(const ae in ye){const{width:we,height:Me,x:Oe,y:Ge,sdf:et,pixelRatio:dt,stretchX:pt,stretchY:tt,content:rt,textFitWidth:bt,textFitHeight:Gt}=ye[ae];he[le][ae]={data:null,pixelRatio:dt,sdf:et,stretchX:pt,stretchY:tt,content:rt,textFitWidth:bt,textFitHeight:Gt,spriteData:{width:we,height:Me,x:Oe,y:Ge,context:de}}}}return he})}(O,K)})}(i,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(v=>{if(this._spriteRequest=null,v)for(const w in v){this._spritesImagesIds[w]=[];const E=this._spritesImagesIds[w]?this._spritesImagesIds[w].filter(k=>!(k in v)):[];for(const k of E)this.imageManager.removeImage(k),this._changedImages[k]=!0;for(const k in v[w]){const z=w==="default"?k:`${w}:${k}`;this._spritesImagesIds[w].push(z),z in this.imageManager.images?this.imageManager.updateImage(z,v[w][k],!1):this.imageManager.addImage(z,v[w][k]),c&&(this._changedImages[z]=!0)}}}).catch(v=>{this._spriteRequest=null,m=v,this.fire(new u.j(m))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),c&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.k("data",{dataType:"style"})),p&&p(m)})}_unloadSprite(){for(const i of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(i),this._changedImages[i]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.k("data",{dataType:"style"}))}_validateLayer(i){const c=this.sourceCaches[i.source];if(!c)return;const p=i.sourceLayer;if(!p)return;const m=c.getSource();(m.type==="geojson"||m.vectorLayerIds&&m.vectorLayerIds.indexOf(p)===-1)&&this.fire(new u.j(new Error(`Source layer "${p}" does not exist on source "${m.id}" as specified by style layer "${i.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const i in this.sourceCaches)if(!this.sourceCaches[i].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(i){const c=this._serializedAllLayers();if(!i||i.length===0)return Object.values(c);const p=[];for(const m of i)c[m]&&p.push(c[m]);return p}_serializedAllLayers(){let i=this._serializedLayers;if(i)return i;i=this._serializedLayers={};const c=Object.keys(this._layers);for(const p of c){const m=this._layers[p];m.type!=="custom"&&(i[p]=m.serialize())}return i}hasTransitions(){if(this.light&&this.light.hasTransition()||this.sky&&this.sky.hasTransition())return!0;for(const i in this.sourceCaches)if(this.sourceCaches[i].hasTransition())return!0;for(const i in this._layers)if(this._layers[i].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(i){if(!this._loaded)return;const c=this._changed;if(c){const m=Object.keys(this._updatedLayers),v=Object.keys(this._removedLayers);(m.length||v.length)&&this._updateWorkerLayers(m,v);for(const w in this._updatedSources){const E=this._updatedSources[w];if(E==="reload")this._reloadSource(w);else{if(E!=="clear")throw new Error(`Invalid action ${E}`);this._clearSource(w)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const w in this._updatedPaintProps)this._layers[w].updateTransitions(i);this.light.updateTransitions(i),this.sky.updateTransitions(i),this._resetUpdates()}const p={};for(const m in this.sourceCaches){const v=this.sourceCaches[m];p[m]=v.used,v.used=!1}for(const m of this._order){const v=this._layers[m];v.recalculate(i,this._availableImages),!v.isHidden(i.zoom)&&v.source&&(this.sourceCaches[v.source].used=!0)}for(const m in p){const v=this.sourceCaches[m];!!p[m]!=!!v.used&&v.fire(new u.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:m}))}this.light.recalculate(i),this.sky.recalculate(i),this.z=i.zoom,c&&this.fire(new u.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const i=Object.keys(this._changedImages);if(i.length){for(const c in this.sourceCaches)this.sourceCaches[c].reloadTilesForDependencies(["icons","patterns"],i);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const i in this.sourceCaches)this.sourceCaches[i].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(i,c){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(i),removedIds:c})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(i,c={}){var p;this._checkLoaded();const m=this.serialize();if(i=c.transformStyle?c.transformStyle(m,i):i,((p=c.validate)===null||p===void 0||p)&&bo(this,u.x(i)))return!1;(i=u.aC(i)).layers=u.aA(i.layers);const v=u.aD(m,i),w=this._getOperationsToPerform(v);if(w.unimplemented.length>0)throw new Error(`Unimplemented: ${w.unimplemented.join(", ")}.`);if(w.operations.length===0)return!1;for(const E of w.operations)E();return this.stylesheet=i,this._serializedLayers=null,!0}_getOperationsToPerform(i){const c=[],p=[];for(const m of i)switch(m.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":c.push(()=>this.addLayer.apply(this,m.args));break;case"removeLayer":c.push(()=>this.removeLayer.apply(this,m.args));break;case"setPaintProperty":c.push(()=>this.setPaintProperty.apply(this,m.args));break;case"setLayoutProperty":c.push(()=>this.setLayoutProperty.apply(this,m.args));break;case"setFilter":c.push(()=>this.setFilter.apply(this,m.args));break;case"addSource":c.push(()=>this.addSource.apply(this,m.args));break;case"removeSource":c.push(()=>this.removeSource.apply(this,m.args));break;case"setLayerZoomRange":c.push(()=>this.setLayerZoomRange.apply(this,m.args));break;case"setLight":c.push(()=>this.setLight.apply(this,m.args));break;case"setGeoJSONSourceData":c.push(()=>this.setGeoJSONSourceData.apply(this,m.args));break;case"setGlyphs":c.push(()=>this.setGlyphs.apply(this,m.args));break;case"setSprite":c.push(()=>this.setSprite.apply(this,m.args));break;case"setSky":c.push(()=>this.setSky.apply(this,m.args));break;case"setTerrain":c.push(()=>this.map.setTerrain.apply(this,m.args));break;case"setTransition":c.push(()=>{});break;default:p.push(m.command)}return{operations:c,unimplemented:p}}addImage(i,c){if(this.getImage(i))return this.fire(new u.j(new Error(`An image named "${i}" already exists.`)));this.imageManager.addImage(i,c),this._afterImageUpdated(i)}updateImage(i,c){this.imageManager.updateImage(i,c)}getImage(i){return this.imageManager.getImage(i)}removeImage(i){if(!this.getImage(i))return this.fire(new u.j(new Error(`An image named "${i}" does not exist.`)));this.imageManager.removeImage(i),this._afterImageUpdated(i)}_afterImageUpdated(i){this._availableImages=this.imageManager.listImages(),this._changedImages[i]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(i,c,p={}){if(this._checkLoaded(),this.sourceCaches[i]!==void 0)throw new Error(`Source "${i}" already exists.`);if(!c.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(c).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(u.x.source,`sources.${i}`,c,null,p))return;this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);const m=this.sourceCaches[i]=new ht(i,c,this.dispatcher);m.style=this,m.setEventedParent(this,()=>({isSourceLoaded:m.loaded(),source:m.serialize(),sourceId:i})),m.onAdd(this.map),this._changed=!0}removeSource(i){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error("There is no source with this ID");for(const p in this._layers)if(this._layers[p].source===i)return this.fire(new u.j(new Error(`Source "${i}" cannot be removed while layer "${p}" is using it.`)));const c=this.sourceCaches[i];delete this.sourceCaches[i],delete this._updatedSources[i],c.fire(new u.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:i})),c.setEventedParent(null),c.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(i,c){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error(`There is no source with this ID=${i}`);const p=this.sourceCaches[i].getSource();if(p.type!=="geojson")throw new Error(`geojsonSource.type is ${p.type}, which is !== 'geojson`);p.setData(c),this._changed=!0}getSource(i){return this.sourceCaches[i]&&this.sourceCaches[i].getSource()}addLayer(i,c,p={}){this._checkLoaded();const m=i.id;if(this.getLayer(m))return void this.fire(new u.j(new Error(`Layer "${m}" already exists on this map.`)));let v;if(i.type==="custom"){if(bo(this,u.aE(i)))return;v=u.aB(i)}else{if("source"in i&&typeof i.source=="object"&&(this.addSource(m,i.source),i=u.aC(i),i=u.e(i,{source:m})),this._validate(u.x.layer,`layers.${m}`,i,{arrayIndex:-1},p))return;v=u.aB(i),this._validateLayer(v),v.setEventedParent(this,{layer:{id:m}})}const w=c?this._order.indexOf(c):this._order.length;if(c&&w===-1)this.fire(new u.j(new Error(`Cannot add layer "${m}" before non-existing layer "${c}".`)));else{if(this._order.splice(w,0,m),this._layerOrderChanged=!0,this._layers[m]=v,this._removedLayers[m]&&v.source&&v.type!=="custom"){const E=this._removedLayers[m];delete this._removedLayers[m],E.type!==v.type?this._updatedSources[v.source]="clear":(this._updatedSources[v.source]="reload",this.sourceCaches[v.source].pause())}this._updateLayer(v),v.onAdd&&v.onAdd(this.map)}}moveLayer(i,c){if(this._checkLoaded(),this._changed=!0,!this._layers[i])return void this.fire(new u.j(new Error(`The layer '${i}' does not exist in the map's style and cannot be moved.`)));if(i===c)return;const p=this._order.indexOf(i);this._order.splice(p,1);const m=c?this._order.indexOf(c):this._order.length;c&&m===-1?this.fire(new u.j(new Error(`Cannot move layer "${i}" before non-existing layer "${c}".`))):(this._order.splice(m,0,i),this._layerOrderChanged=!0)}removeLayer(i){this._checkLoaded();const c=this._layers[i];if(!c)return void this.fire(new u.j(new Error(`Cannot remove non-existing layer "${i}".`)));c.setEventedParent(null);const p=this._order.indexOf(i);this._order.splice(p,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[i]=c,delete this._layers[i],this._serializedLayers&&delete this._serializedLayers[i],delete this._updatedLayers[i],delete this._updatedPaintProps[i],c.onRemove&&c.onRemove(this.map)}getLayer(i){return this._layers[i]}getLayersOrder(){return[...this._order]}hasLayer(i){return i in this._layers}setLayerZoomRange(i,c,p){this._checkLoaded();const m=this.getLayer(i);m?m.minzoom===c&&m.maxzoom===p||(c!=null&&(m.minzoom=c),p!=null&&(m.maxzoom=p),this._updateLayer(m)):this.fire(new u.j(new Error(`Cannot set the zoom range of non-existing layer "${i}".`)))}setFilter(i,c,p={}){this._checkLoaded();const m=this.getLayer(i);if(m){if(!u.aF(m.filter,c))return c==null?(m.filter=void 0,void this._updateLayer(m)):void(this._validate(u.x.filter,`layers.${m.id}.filter`,c,null,p)||(m.filter=u.aC(c),this._updateLayer(m)))}else this.fire(new u.j(new Error(`Cannot filter non-existing layer "${i}".`)))}getFilter(i){return u.aC(this.getLayer(i).filter)}setLayoutProperty(i,c,p,m={}){this._checkLoaded();const v=this.getLayer(i);v?u.aF(v.getLayoutProperty(c),p)||(v.setLayoutProperty(c,p,m),this._updateLayer(v)):this.fire(new u.j(new Error(`Cannot style non-existing layer "${i}".`)))}getLayoutProperty(i,c){const p=this.getLayer(i);if(p)return p.getLayoutProperty(c);this.fire(new u.j(new Error(`Cannot get style of non-existing layer "${i}".`)))}setPaintProperty(i,c,p,m={}){this._checkLoaded();const v=this.getLayer(i);v?u.aF(v.getPaintProperty(c),p)||(v.setPaintProperty(c,p,m)&&this._updateLayer(v),this._changed=!0,this._updatedPaintProps[i]=!0,this._serializedLayers=null):this.fire(new u.j(new Error(`Cannot style non-existing layer "${i}".`)))}getPaintProperty(i,c){return this.getLayer(i).getPaintProperty(c)}setFeatureState(i,c){this._checkLoaded();const p=i.source,m=i.sourceLayer,v=this.sourceCaches[p];if(v===void 0)return void this.fire(new u.j(new Error(`The source '${p}' does not exist in the map's style.`)));const w=v.getSource().type;w==="geojson"&&m?this.fire(new u.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):w!=="vector"||m?(i.id===void 0&&this.fire(new u.j(new Error("The feature id parameter must be provided."))),v.setFeatureState(m,i.id,c)):this.fire(new u.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(i,c){this._checkLoaded();const p=i.source,m=this.sourceCaches[p];if(m===void 0)return void this.fire(new u.j(new Error(`The source '${p}' does not exist in the map's style.`)));const v=m.getSource().type,w=v==="vector"?i.sourceLayer:void 0;v!=="vector"||w?c&&typeof i.id!="string"&&typeof i.id!="number"?this.fire(new u.j(new Error("A feature id is required to remove its specific state property."))):m.removeFeatureState(w,i.id,c):this.fire(new u.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(i){this._checkLoaded();const c=i.source,p=i.sourceLayer,m=this.sourceCaches[c];if(m!==void 0)return m.getSource().type!=="vector"||p?(i.id===void 0&&this.fire(new u.j(new Error("The feature id parameter must be provided."))),m.getFeatureState(p,i.id)):void this.fire(new u.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new u.j(new Error(`The source '${c}' does not exist in the map's style.`)))}getTransition(){return u.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const i=u.aG(this.sourceCaches,v=>v.serialize()),c=this._serializeByIds(this._order),p=this.map.getTerrain()||void 0,m=this.stylesheet;return u.aH({version:m.version,name:m.name,metadata:m.metadata,light:m.light,sky:m.sky,center:m.center,zoom:m.zoom,bearing:m.bearing,pitch:m.pitch,sprite:m.sprite,glyphs:m.glyphs,transition:m.transition,sources:i,layers:c,terrain:p},v=>v!==void 0)}_updateLayer(i){this._updatedLayers[i.id]=!0,i.source&&!this._updatedSources[i.source]&&this.sourceCaches[i.source].getSource().type!=="raster"&&(this._updatedSources[i.source]="reload",this.sourceCaches[i.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(i){const c=w=>this._layers[w].type==="fill-extrusion",p={},m=[];for(let w=this._order.length-1;w>=0;w--){const E=this._order[w];if(c(E)){p[E]=w;for(const k of i){const z=k[E];if(z)for(const B of z)m.push(B)}}}m.sort((w,E)=>E.intersectionZ-w.intersectionZ);const v=[];for(let w=this._order.length-1;w>=0;w--){const E=this._order[w];if(c(E))for(let k=m.length-1;k>=0;k--){const z=m[k].feature;if(p[z.layer.id]<w)break;v.push(z),m.pop()}else for(const k of i){const z=k[E];if(z)for(const B of z)v.push(B.feature)}}return v}queryRenderedFeatures(i,c,p){c&&c.filter&&this._validate(u.x.filter,"queryRenderedFeatures.filter",c.filter,null,c);const m={};if(c&&c.layers){if(!Array.isArray(c.layers))return this.fire(new u.j(new Error("parameters.layers must be an Array."))),[];for(const E of c.layers){const k=this._layers[E];if(!k)return this.fire(new u.j(new Error(`The layer '${E}' does not exist in the map's style and cannot be queried for features.`))),[];m[k.source]=!0}}const v=[];c.availableImages=this._availableImages;const w=this._serializedAllLayers();for(const E in this.sourceCaches)c.layers&&!m[E]||v.push(Gr(this.sourceCaches[E],this._layers,w,i,c,p));return this.placement&&v.push(function(E,k,z,B,O,K,Q){const re={},he=K.queryRenderedSymbols(B),le=[];for(const de of Object.keys(he).map(Number))le.push(Q[de]);le.sort(sr);for(const de of le){const ye=de.featureIndex.lookupSymbolFeatures(he[de.bucketInstanceId],k,de.bucketIndex,de.sourceLayerIndex,O.filter,O.layers,O.availableImages,E);for(const ae in ye){const we=re[ae]=re[ae]||[],Me=ye[ae];Me.sort((Oe,Ge)=>{const et=de.featureSortOrder;if(et){const dt=et.indexOf(Oe.featureIndex);return et.indexOf(Ge.featureIndex)-dt}return Ge.featureIndex-Oe.featureIndex});for(const Oe of Me)we.push(Oe)}}for(const de in re)re[de].forEach(ye=>{const ae=ye.feature,we=z[E[de].source].getFeatureState(ae.layer["source-layer"],ae.id);ae.source=ae.layer.source,ae.layer["source-layer"]&&(ae.sourceLayer=ae.layer["source-layer"]),ae.state=we});return re}(this._layers,w,this.sourceCaches,i,c,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(v)}querySourceFeatures(i,c){c&&c.filter&&this._validate(u.x.filter,"querySourceFeatures.filter",c.filter,null,c);const p=this.sourceCaches[i];return p?function(m,v){const w=m.getRenderableIds().map(z=>m.getTileByID(z)),E=[],k={};for(let z=0;z<w.length;z++){const B=w[z],O=B.tileID.canonical.key;k[O]||(k[O]=!0,B.querySourceFeatures(E,v))}return E}(p,c):[]}getLight(){return this.light.getLight()}setLight(i,c={}){this._checkLoaded();const p=this.light.getLight();let m=!1;for(const w in i)if(!u.aF(i[w],p[w])){m=!0;break}if(!m)return;const v={now:A.now(),transition:u.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(i,c),this.light.updateTransitions(v)}getSky(){var i;return(i=this.stylesheet)===null||i===void 0?void 0:i.sky}setSky(i,c={}){const p=this.sky.getSky();let m=!1;i||p&&(m=!0);for(const w in i)if(!u.aF(i[w],p[w])){m=!0;break}if(!m)return;const v={now:A.now(),transition:u.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=i,this.sky.setSky(i,c),this.sky.updateTransitions(v)}_validate(i,c,p,m,v={}){return(!v||v.validate!==!1)&&bo(this,i.call(u.x,u.e({key:c,style:this.serialize(),value:p,styleSpec:u.v},m)))}_remove(i=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Nr().off(Xe,this._rtlPluginLoaded);for(const c in this._layers)this._layers[c].setEventedParent(null);for(const c in this.sourceCaches){const p=this.sourceCaches[c];p.setEventedParent(null),p.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),i&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(i)}_clearSource(i){this.sourceCaches[i].clearTiles()}_reloadSource(i){this.sourceCaches[i].resume(),this.sourceCaches[i].reload()}_updateSources(i){for(const c in this.sourceCaches)this.sourceCaches[c].update(i,this.map.terrain)}_generateCollisionBoxes(){for(const i in this.sourceCaches)this._reloadSource(i)}_updatePlacement(i,c,p,m,v=!1){let w=!1,E=!1;const k={};for(const z of this._order){const B=this._layers[z];if(B.type!=="symbol")continue;if(!k[B.source]){const K=this.sourceCaches[B.source];k[B.source]=K.getRenderableIds(!0).map(Q=>K.getTileByID(Q)).sort((Q,re)=>re.tileID.overscaledZ-Q.tileID.overscaledZ||(Q.tileID.isLessThan(re.tileID)?-1:1))}const O=this.crossTileSymbolIndex.addLayer(B,k[B.source],i.center.lng);w=w||O}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((v=v||this._layerOrderChanged||p===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(A.now(),i.zoom))&&(this.pauseablePlacement=new Yr(i,this.map.terrain,this._order,v,c,p,m,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,k),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(A.now()),E=!0),w&&this.pauseablePlacement.placement.setStale()),E||w)for(const z of this._order){const B=this._layers[z];B.type==="symbol"&&this.placement.updateLayerOpacities(B,k[B.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(A.now())}_releaseSymbolFadeTiles(){for(const i in this.sourceCaches)this.sourceCaches[i].releaseSymbolFadeTiles()}getImages(i,c){return u._(this,void 0,void 0,function*(){const p=yield this.imageManager.getImages(c.icons);this._updateTilesForChangedImages();const m=this.sourceCaches[c.source];return m&&m.setDependencies(c.tileID.key,c.type,c.icons),p})}getGlyphs(i,c){return u._(this,void 0,void 0,function*(){const p=yield this.glyphManager.getGlyphs(c.stacks),m=this.sourceCaches[c.source];return m&&m.setDependencies(c.tileID.key,c.type,[""]),p})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(i,c={}){this._checkLoaded(),i&&this._validate(u.x.glyphs,"glyphs",i,null,c)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=i,this.glyphManager.entries={},this.glyphManager.setURL(i))}addSprite(i,c,p={},m){this._checkLoaded();const v=[{id:i,url:c}],w=[...be(this.stylesheet.sprite),...v];this._validate(u.x.sprite,"sprite",w,null,p)||(this.stylesheet.sprite=w,this._loadSprite(v,!0,m))}removeSprite(i){this._checkLoaded();const c=be(this.stylesheet.sprite);if(c.find(p=>p.id===i)){if(this._spritesImagesIds[i])for(const p of this._spritesImagesIds[i])this.imageManager.removeImage(p),this._changedImages[p]=!0;c.splice(c.findIndex(p=>p.id===i),1),this.stylesheet.sprite=c.length>0?c:void 0,delete this._spritesImagesIds[i],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.k("data",{dataType:"style"}))}else this.fire(new u.j(new Error(`Sprite "${i}" doesn't exists on this map.`)))}getSprite(){return be(this.stylesheet.sprite)}setSprite(i,c={},p){this._checkLoaded(),i&&this._validate(u.x.sprite,"sprite",i,null,c)||(this.stylesheet.sprite=i,i?this._loadSprite(i,!0,p):(this._unloadSprite(),p&&p(null)))}}var ur=u.Y([{name:"a_pos",type:"Int16",components:2}]);const mr={prelude:qt(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:qt(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:qt(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:qt(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:qt("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:qt(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:qt(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:qt("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_anchor_pos;attribute vec2 a_placed;attribute vec2 a_box_real;uniform mat4 u_matrix;uniform vec2 u_pixel_extrude_scale;varying float v_placed;varying float v_notUsed;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:qt("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:qt("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:qt(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:qt(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:qt(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:qt(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:qt(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:qt(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:qt(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:qt(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:qt(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:qt(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:qt(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:qt(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:qt(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:qt(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_tex;varying float v_fade_opacity;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:qt(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_data0;varying vec3 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:qt(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec4 v_data0;varying vec4 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:qt("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;varying vec2 v_texture_pos;varying float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture2D(u_texture,v_texture_pos);if (v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);gl_FragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {gl_FragColor=surface_color;}}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform mat4 u_fog_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:qt("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:qt("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);}"),sky:qt("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform float u_horizon;uniform float u_sky_horizon_blend;void main() {float y=gl_FragCoord.y;if (y > u_horizon) {float blend=y-u_horizon;if (blend < u_sky_horizon_blend) {gl_FragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {gl_FragColor=u_sky_color;}}}","attribute vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function qt(y,i){const c=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,p=i.match(/attribute ([\w]+) ([\w]+)/g),m=y.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),v=i.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),w=v?v.concat(m):m,E={};return{fragmentSource:y=y.replace(c,(k,z,B,O,K)=>(E[K]=!0,z==="define"?`
#ifndef HAS_UNIFORM_u_${K}
varying ${B} ${O} ${K};
#else
uniform ${B} ${O} u_${K};
#endif
`:`
#ifdef HAS_UNIFORM_u_${K}
    ${B} ${O} ${K} = u_${K};
#endif
`)),vertexSource:i=i.replace(c,(k,z,B,O,K)=>{const Q=O==="float"?"vec2":"vec4",re=K.match(/color/)?"color":Q;return E[K]?z==="define"?`
#ifndef HAS_UNIFORM_u_${K}
uniform lowp float u_${K}_t;
attribute ${B} ${Q} a_${K};
varying ${B} ${O} ${K};
#else
uniform ${B} ${O} u_${K};
#endif
`:re==="vec4"?`
#ifndef HAS_UNIFORM_u_${K}
    ${K} = a_${K};
#else
    ${B} ${O} ${K} = u_${K};
#endif
`:`
#ifndef HAS_UNIFORM_u_${K}
    ${K} = unpack_mix_${re}(a_${K}, u_${K}_t);
#else
    ${B} ${O} ${K} = u_${K};
#endif
`:z==="define"?`
#ifndef HAS_UNIFORM_u_${K}
uniform lowp float u_${K}_t;
attribute ${B} ${Q} a_${K};
#else
uniform ${B} ${O} u_${K};
#endif
`:re==="vec4"?`
#ifndef HAS_UNIFORM_u_${K}
    ${B} ${O} ${K} = a_${K};
#else
    ${B} ${O} ${K} = u_${K};
#endif
`:`
#ifndef HAS_UNIFORM_u_${K}
    ${B} ${O} ${K} = unpack_mix_${re}(a_${K}, u_${K}_t);
#else
    ${B} ${O} ${K} = u_${K};
#endif
`}),staticAttributes:p,staticUniforms:w}}class Tn{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(i,c,p,m,v,w,E,k,z){this.context=i;let B=this.boundPaintVertexBuffers.length!==m.length;for(let O=0;!B&&O<m.length;O++)this.boundPaintVertexBuffers[O]!==m[O]&&(B=!0);!this.vao||this.boundProgram!==c||this.boundLayoutVertexBuffer!==p||B||this.boundIndexBuffer!==v||this.boundVertexOffset!==w||this.boundDynamicVertexBuffer!==E||this.boundDynamicVertexBuffer2!==k||this.boundDynamicVertexBuffer3!==z?this.freshBind(c,p,m,v,w,E,k,z):(i.bindVertexArray.set(this.vao),E&&E.bind(),v&&v.dynamicDraw&&v.bind(),k&&k.bind(),z&&z.bind())}freshBind(i,c,p,m,v,w,E,k){const z=i.numAttributes,B=this.context,O=B.gl;this.vao&&this.destroy(),this.vao=B.createVertexArray(),B.bindVertexArray.set(this.vao),this.boundProgram=i,this.boundLayoutVertexBuffer=c,this.boundPaintVertexBuffers=p,this.boundIndexBuffer=m,this.boundVertexOffset=v,this.boundDynamicVertexBuffer=w,this.boundDynamicVertexBuffer2=E,this.boundDynamicVertexBuffer3=k,c.enableAttributes(O,i);for(const K of p)K.enableAttributes(O,i);w&&w.enableAttributes(O,i),E&&E.enableAttributes(O,i),k&&k.enableAttributes(O,i),c.bind(),c.setVertexAttribPointers(O,i,v);for(const K of p)K.bind(),K.setVertexAttribPointers(O,i,v);w&&(w.bind(),w.setVertexAttribPointers(O,i,v)),m&&m.bind(),E&&(E.bind(),E.setVertexAttribPointers(O,i,v)),k&&(k.bind(),k.setVertexAttribPointers(O,i,v)),B.currentNumAttributes=z}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const Gi=(y,i,c,p,m)=>({u_matrix:y,u_texture:0,u_ele_delta:i,u_fog_matrix:c,u_fog_color:p?p.properties.get("fog-color"):u.aN.white,u_fog_ground_blend:p?p.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:p?p.calculateFogBlendOpacity(m):0,u_horizon_color:p?p.properties.get("horizon-color"):u.aN.white,u_horizon_fog_blend:p?p.properties.get("horizon-fog-blend"):1});function Zi(y){const i=[];for(let c=0;c<y.length;c++){if(y[c]===null)continue;const p=y[c].split(" ");i.push(p.pop())}return i}class ao{constructor(i,c,p,m,v,w){const E=i.gl;this.program=E.createProgram();const k=Zi(c.staticAttributes),z=p?p.getBinderAttributes():[],B=k.concat(z),O=mr.prelude.staticUniforms?Zi(mr.prelude.staticUniforms):[],K=c.staticUniforms?Zi(c.staticUniforms):[],Q=p?p.getBinderUniforms():[],re=O.concat(K).concat(Q),he=[];for(const Oe of re)he.indexOf(Oe)<0&&he.push(Oe);const le=p?p.defines():[];v&&le.push("#define OVERDRAW_INSPECTOR;"),w&&le.push("#define TERRAIN3D;");const de=le.concat(mr.prelude.fragmentSource,c.fragmentSource).join(`
`),ye=le.concat(mr.prelude.vertexSource,c.vertexSource).join(`
`),ae=E.createShader(E.FRAGMENT_SHADER);if(E.isContextLost())return void(this.failedToCreate=!0);if(E.shaderSource(ae,de),E.compileShader(ae),!E.getShaderParameter(ae,E.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${E.getShaderInfoLog(ae)}`);E.attachShader(this.program,ae);const we=E.createShader(E.VERTEX_SHADER);if(E.isContextLost())return void(this.failedToCreate=!0);if(E.shaderSource(we,ye),E.compileShader(we),!E.getShaderParameter(we,E.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${E.getShaderInfoLog(we)}`);E.attachShader(this.program,we),this.attributes={};const Me={};this.numAttributes=B.length;for(let Oe=0;Oe<this.numAttributes;Oe++)B[Oe]&&(E.bindAttribLocation(this.program,Oe,B[Oe]),this.attributes[B[Oe]]=Oe);if(E.linkProgram(this.program),!E.getProgramParameter(this.program,E.LINK_STATUS))throw new Error(`Program failed to link: ${E.getProgramInfoLog(this.program)}`);E.deleteShader(we),E.deleteShader(ae);for(let Oe=0;Oe<he.length;Oe++){const Ge=he[Oe];if(Ge&&!Me[Ge]){const et=E.getUniformLocation(this.program,Ge);et&&(Me[Ge]=et)}}this.fixedUniforms=m(i,Me),this.terrainUniforms=((Oe,Ge)=>({u_depth:new u.aI(Oe,Ge.u_depth),u_terrain:new u.aI(Oe,Ge.u_terrain),u_terrain_dim:new u.aJ(Oe,Ge.u_terrain_dim),u_terrain_matrix:new u.aK(Oe,Ge.u_terrain_matrix),u_terrain_unpack:new u.aL(Oe,Ge.u_terrain_unpack),u_terrain_exaggeration:new u.aJ(Oe,Ge.u_terrain_exaggeration)}))(i,Me),this.binderUniforms=p?p.getUniforms(i,Me):[]}draw(i,c,p,m,v,w,E,k,z,B,O,K,Q,re,he,le,de,ye){const ae=i.gl;if(this.failedToCreate)return;if(i.program.set(this.program),i.setDepthMode(p),i.setStencilMode(m),i.setColorMode(v),i.setCullFace(w),k){i.activeTexture.set(ae.TEXTURE2),ae.bindTexture(ae.TEXTURE_2D,k.depthTexture),i.activeTexture.set(ae.TEXTURE3),ae.bindTexture(ae.TEXTURE_2D,k.texture);for(const Me in this.terrainUniforms)this.terrainUniforms[Me].set(k[Me])}for(const Me in this.fixedUniforms)this.fixedUniforms[Me].set(E[Me]);he&&he.setUniforms(i,this.binderUniforms,Q,{zoom:re});let we=0;switch(c){case ae.LINES:we=2;break;case ae.TRIANGLES:we=3;break;case ae.LINE_STRIP:we=1}for(const Me of K.get()){const Oe=Me.vaos||(Me.vaos={});(Oe[z]||(Oe[z]=new Tn)).bind(i,this,B,he?he.getPaintVertexBuffers():[],O,Me.vertexOffset,le,de,ye),ae.drawElements(c,Me.primitiveLength*we,ae.UNSIGNED_SHORT,Me.primitiveOffset*we*2)}}}function Ai(y,i,c){const p=1/zt(c,1,i.transform.tileZoom),m=Math.pow(2,c.tileID.overscaledZ),v=c.tileSize*Math.pow(2,i.transform.tileZoom)/m,w=v*(c.tileID.canonical.x+c.tileID.wrap*m),E=v*c.tileID.canonical.y;return{u_image:0,u_texsize:c.imageAtlasTexture.size,u_scale:[p,y.fromScale,y.toScale],u_fade:y.t,u_pixel_coord_upper:[w>>16,E>>16],u_pixel_coord_lower:[65535&w,65535&E]}}const wo=(y,i,c,p)=>{const m=i.style.light,v=m.properties.get("position"),w=[v.x,v.y,v.z],E=function(){var z=new u.A(9);return u.A!=Float32Array&&(z[1]=0,z[2]=0,z[3]=0,z[5]=0,z[6]=0,z[7]=0),z[0]=1,z[4]=1,z[8]=1,z}();m.properties.get("anchor")==="viewport"&&function(z,B){var O=Math.sin(B),K=Math.cos(B);z[0]=K,z[1]=O,z[2]=0,z[3]=-O,z[4]=K,z[5]=0,z[6]=0,z[7]=0,z[8]=1}(E,-i.transform.angle),function(z,B,O){var K=B[0],Q=B[1],re=B[2];z[0]=K*O[0]+Q*O[3]+re*O[6],z[1]=K*O[1]+Q*O[4]+re*O[7],z[2]=K*O[2]+Q*O[5]+re*O[8]}(w,w,E);const k=m.properties.get("color");return{u_matrix:y,u_lightpos:w,u_lightintensity:m.properties.get("intensity"),u_lightcolor:[k.r,k.g,k.b],u_vertical_gradient:+c,u_opacity:p}},Ki=(y,i,c,p,m,v,w)=>u.e(wo(y,i,c,p),Ai(v,i,w),{u_height_factor:-Math.pow(2,m.overscaledZ)/w.tileSize/8}),so=y=>({u_matrix:y}),Qr=(y,i,c,p)=>u.e(so(y),Ai(c,i,p)),Xa=(y,i)=>({u_matrix:y,u_world:i}),Is=(y,i,c,p,m)=>u.e(Qr(y,i,c,p),{u_world:m}),lo=(y,i,c,p)=>{const m=y.transform;let v,w;if(p.paint.get("circle-pitch-alignment")==="map"){const E=zt(c,1,m.zoom);v=!0,w=[E,E]}else v=!1,w=m.pixelsToGLUnits;return{u_camera_to_center_distance:m.cameraToCenterDistance,u_scale_with_map:+(p.paint.get("circle-pitch-scale")==="map"),u_matrix:y.translatePosMatrix(i.posMatrix,c,p.paint.get("circle-translate"),p.paint.get("circle-translate-anchor")),u_pitch_with_map:+v,u_device_pixel_ratio:y.pixelRatio,u_extrude_scale:w}},ca=(y,i,c)=>({u_matrix:y,u_inv_matrix:i,u_camera_to_center_distance:c.cameraToCenterDistance,u_viewport_size:[c.width,c.height]}),yi=(y,i,c=1)=>({u_matrix:y,u_color:i,u_overlay:0,u_overlay_scale:c}),So=y=>({u_matrix:y}),Qn=(y,i,c,p)=>({u_matrix:y,u_extrude_scale:zt(i,1,c),u_intensity:p});function ei(y,i){const c=Math.pow(2,i.canonical.z),p=i.canonical.y;return[new u.Z(0,p/c).toLngLat().lat,new u.Z(0,(p+1)/c).toLngLat().lat]}const ua=(y,i,c,p)=>{const m=y.transform;return{u_matrix:Pn(y,i,c,p),u_ratio:1/zt(i,1,m.zoom),u_device_pixel_ratio:y.pixelRatio,u_units_to_pixels:[1/m.pixelsToGLUnits[0],1/m.pixelsToGLUnits[1]]}},La=(y,i,c,p,m)=>u.e(ua(y,i,c,m),{u_image:0,u_image_height:p}),Tt=(y,i,c,p,m)=>{const v=y.transform,w=Ur(i,v);return{u_matrix:Pn(y,i,c,m),u_texsize:i.imageAtlasTexture.size,u_ratio:1/zt(i,1,v.zoom),u_device_pixel_ratio:y.pixelRatio,u_image:0,u_scale:[w,p.fromScale,p.toScale],u_fade:p.t,u_units_to_pixels:[1/v.pixelsToGLUnits[0],1/v.pixelsToGLUnits[1]]}},Wt=(y,i,c,p,m,v)=>{const w=y.lineAtlas,E=Ur(i,y.transform),k=c.layout.get("line-cap")==="round",z=w.getDash(p.from,k),B=w.getDash(p.to,k),O=z.width*m.fromScale,K=B.width*m.toScale;return u.e(ua(y,i,c,v),{u_patternscale_a:[E/O,-z.height/2],u_patternscale_b:[E/K,-B.height/2],u_sdfgamma:w.width/(256*Math.min(O,K)*y.pixelRatio)/2,u_image:0,u_tex_y_a:z.y,u_tex_y_b:B.y,u_mix:m.t})};function Ur(y,i){return 1/zt(y,1,i.tileZoom)}function Pn(y,i,c,p){return y.translatePosMatrix(p?p.posMatrix:i.tileID.posMatrix,i,c.paint.get("line-translate"),c.paint.get("line-translate-anchor"))}const gn=(y,i,c,p,m)=>{return{u_matrix:y,u_tl_parent:i,u_scale_parent:c,u_buffer_scale:1,u_fade_t:p.mix,u_opacity:p.opacity*m.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:m.paint.get("raster-brightness-min"),u_brightness_high:m.paint.get("raster-brightness-max"),u_saturation_factor:(w=m.paint.get("raster-saturation"),w>0?1-1/(1.001-w):-w),u_contrast_factor:(v=m.paint.get("raster-contrast"),v>0?1/(1-v):1+v),u_spin_weights:ks(m.paint.get("raster-hue-rotate"))};var v,w};function ks(y){y*=Math.PI/180;const i=Math.sin(y),c=Math.cos(y);return[(2*c+1)/3,(-Math.sqrt(3)*i-c+1)/3,(Math.sqrt(3)*i-c+1)/3]}const Ms=(y,i,c,p,m,v,w,E,k,z,B,O,K,Q)=>{const re=w.transform;return{u_is_size_zoom_constant:+(y==="constant"||y==="source"),u_is_size_feature_constant:+(y==="constant"||y==="camera"),u_size_t:i?i.uSizeT:0,u_size:i?i.uSize:0,u_camera_to_center_distance:re.cameraToCenterDistance,u_pitch:re.pitch/360*2*Math.PI,u_rotate_symbol:+c,u_aspect_ratio:re.width/re.height,u_fade_change:w.options.fadeDuration?w.symbolFadeChange:1,u_matrix:E,u_label_plane_matrix:k,u_coord_matrix:z,u_is_text:+O,u_pitch_with_map:+p,u_is_along_line:m,u_is_variable_anchor:v,u_texsize:K,u_texture:0,u_translation:B,u_pitched_scale:Q}},Il=(y,i,c,p,m,v,w,E,k,z,B,O,K,Q,re)=>{const he=w.transform;return u.e(Ms(y,i,c,p,m,v,w,E,k,z,B,O,K,re),{u_gamma_scale:p?Math.cos(he._pitch)*he.cameraToCenterDistance:1,u_device_pixel_ratio:w.pixelRatio,u_is_halo:+Q})},As=(y,i,c,p,m,v,w,E,k,z,B,O,K,Q)=>u.e(Il(y,i,c,p,m,v,w,E,k,z,B,!0,O,!0,Q),{u_texsize_icon:K,u_texture_icon:1}),Ec=(y,i,c)=>({u_matrix:y,u_opacity:i,u_color:c}),ch=(y,i,c,p,m,v)=>u.e(function(w,E,k,z){const B=k.imageManager.getPattern(w.from.toString()),O=k.imageManager.getPattern(w.to.toString()),{width:K,height:Q}=k.imageManager.getPixelSize(),re=Math.pow(2,z.tileID.overscaledZ),he=z.tileSize*Math.pow(2,k.transform.tileZoom)/re,le=he*(z.tileID.canonical.x+z.tileID.wrap*re),de=he*z.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:B.tl,u_pattern_br_a:B.br,u_pattern_tl_b:O.tl,u_pattern_br_b:O.br,u_texsize:[K,Q],u_mix:E.t,u_pattern_size_a:B.displaySize,u_pattern_size_b:O.displaySize,u_scale_a:E.fromScale,u_scale_b:E.toScale,u_tile_units_to_pixels:1/zt(z,1,k.transform.tileZoom),u_pixel_coord_upper:[le>>16,de>>16],u_pixel_coord_lower:[65535&le,65535&de]}}(p,v,c,m),{u_matrix:y,u_opacity:i}),Tc={fillExtrusion:(y,i)=>({u_matrix:new u.aK(y,i.u_matrix),u_lightpos:new u.aO(y,i.u_lightpos),u_lightintensity:new u.aJ(y,i.u_lightintensity),u_lightcolor:new u.aO(y,i.u_lightcolor),u_vertical_gradient:new u.aJ(y,i.u_vertical_gradient),u_opacity:new u.aJ(y,i.u_opacity)}),fillExtrusionPattern:(y,i)=>({u_matrix:new u.aK(y,i.u_matrix),u_lightpos:new u.aO(y,i.u_lightpos),u_lightintensity:new u.aJ(y,i.u_lightintensity),u_lightcolor:new u.aO(y,i.u_lightcolor),u_vertical_gradient:new u.aJ(y,i.u_vertical_gradient),u_height_factor:new u.aJ(y,i.u_height_factor),u_image:new u.aI(y,i.u_image),u_texsize:new u.aP(y,i.u_texsize),u_pixel_coord_upper:new u.aP(y,i.u_pixel_coord_upper),u_pixel_coord_lower:new u.aP(y,i.u_pixel_coord_lower),u_scale:new u.aO(y,i.u_scale),u_fade:new u.aJ(y,i.u_fade),u_opacity:new u.aJ(y,i.u_opacity)}),fill:(y,i)=>({u_matrix:new u.aK(y,i.u_matrix)}),fillPattern:(y,i)=>({u_matrix:new u.aK(y,i.u_matrix),u_image:new u.aI(y,i.u_image),u_texsize:new u.aP(y,i.u_texsize),u_pixel_coord_upper:new u.aP(y,i.u_pixel_coord_upper),u_pixel_coord_lower:new u.aP(y,i.u_pixel_coord_lower),u_scale:new u.aO(y,i.u_scale),u_fade:new u.aJ(y,i.u_fade)}),fillOutline:(y,i)=>({u_matrix:new u.aK(y,i.u_matrix),u_world:new u.aP(y,i.u_world)}),fillOutlinePattern:(y,i)=>({u_matrix:new u.aK(y,i.u_matrix),u_world:new u.aP(y,i.u_world),u_image:new u.aI(y,i.u_image),u_texsize:new u.aP(y,i.u_texsize),u_pixel_coord_upper:new u.aP(y,i.u_pixel_coord_upper),u_pixel_coord_lower:new u.aP(y,i.u_pixel_coord_lower),u_scale:new u.aO(y,i.u_scale),u_fade:new u.aJ(y,i.u_fade)}),circle:(y,i)=>({u_camera_to_center_distance:new u.aJ(y,i.u_camera_to_center_distance),u_scale_with_map:new u.aI(y,i.u_scale_with_map),u_pitch_with_map:new u.aI(y,i.u_pitch_with_map),u_extrude_scale:new u.aP(y,i.u_extrude_scale),u_device_pixel_ratio:new u.aJ(y,i.u_device_pixel_ratio),u_matrix:new u.aK(y,i.u_matrix)}),collisionBox:(y,i)=>({u_matrix:new u.aK(y,i.u_matrix),u_pixel_extrude_scale:new u.aP(y,i.u_pixel_extrude_scale)}),collisionCircle:(y,i)=>({u_matrix:new u.aK(y,i.u_matrix),u_inv_matrix:new u.aK(y,i.u_inv_matrix),u_camera_to_center_distance:new u.aJ(y,i.u_camera_to_center_distance),u_viewport_size:new u.aP(y,i.u_viewport_size)}),debug:(y,i)=>({u_color:new u.aM(y,i.u_color),u_matrix:new u.aK(y,i.u_matrix),u_overlay:new u.aI(y,i.u_overlay),u_overlay_scale:new u.aJ(y,i.u_overlay_scale)}),clippingMask:(y,i)=>({u_matrix:new u.aK(y,i.u_matrix)}),heatmap:(y,i)=>({u_extrude_scale:new u.aJ(y,i.u_extrude_scale),u_intensity:new u.aJ(y,i.u_intensity),u_matrix:new u.aK(y,i.u_matrix)}),heatmapTexture:(y,i)=>({u_matrix:new u.aK(y,i.u_matrix),u_world:new u.aP(y,i.u_world),u_image:new u.aI(y,i.u_image),u_color_ramp:new u.aI(y,i.u_color_ramp),u_opacity:new u.aJ(y,i.u_opacity)}),hillshade:(y,i)=>({u_matrix:new u.aK(y,i.u_matrix),u_image:new u.aI(y,i.u_image),u_latrange:new u.aP(y,i.u_latrange),u_light:new u.aP(y,i.u_light),u_shadow:new u.aM(y,i.u_shadow),u_highlight:new u.aM(y,i.u_highlight),u_accent:new u.aM(y,i.u_accent)}),hillshadePrepare:(y,i)=>({u_matrix:new u.aK(y,i.u_matrix),u_image:new u.aI(y,i.u_image),u_dimension:new u.aP(y,i.u_dimension),u_zoom:new u.aJ(y,i.u_zoom),u_unpack:new u.aL(y,i.u_unpack)}),line:(y,i)=>({u_matrix:new u.aK(y,i.u_matrix),u_ratio:new u.aJ(y,i.u_ratio),u_device_pixel_ratio:new u.aJ(y,i.u_device_pixel_ratio),u_units_to_pixels:new u.aP(y,i.u_units_to_pixels)}),lineGradient:(y,i)=>({u_matrix:new u.aK(y,i.u_matrix),u_ratio:new u.aJ(y,i.u_ratio),u_device_pixel_ratio:new u.aJ(y,i.u_device_pixel_ratio),u_units_to_pixels:new u.aP(y,i.u_units_to_pixels),u_image:new u.aI(y,i.u_image),u_image_height:new u.aJ(y,i.u_image_height)}),linePattern:(y,i)=>({u_matrix:new u.aK(y,i.u_matrix),u_texsize:new u.aP(y,i.u_texsize),u_ratio:new u.aJ(y,i.u_ratio),u_device_pixel_ratio:new u.aJ(y,i.u_device_pixel_ratio),u_image:new u.aI(y,i.u_image),u_units_to_pixels:new u.aP(y,i.u_units_to_pixels),u_scale:new u.aO(y,i.u_scale),u_fade:new u.aJ(y,i.u_fade)}),lineSDF:(y,i)=>({u_matrix:new u.aK(y,i.u_matrix),u_ratio:new u.aJ(y,i.u_ratio),u_device_pixel_ratio:new u.aJ(y,i.u_device_pixel_ratio),u_units_to_pixels:new u.aP(y,i.u_units_to_pixels),u_patternscale_a:new u.aP(y,i.u_patternscale_a),u_patternscale_b:new u.aP(y,i.u_patternscale_b),u_sdfgamma:new u.aJ(y,i.u_sdfgamma),u_image:new u.aI(y,i.u_image),u_tex_y_a:new u.aJ(y,i.u_tex_y_a),u_tex_y_b:new u.aJ(y,i.u_tex_y_b),u_mix:new u.aJ(y,i.u_mix)}),raster:(y,i)=>({u_matrix:new u.aK(y,i.u_matrix),u_tl_parent:new u.aP(y,i.u_tl_parent),u_scale_parent:new u.aJ(y,i.u_scale_parent),u_buffer_scale:new u.aJ(y,i.u_buffer_scale),u_fade_t:new u.aJ(y,i.u_fade_t),u_opacity:new u.aJ(y,i.u_opacity),u_image0:new u.aI(y,i.u_image0),u_image1:new u.aI(y,i.u_image1),u_brightness_low:new u.aJ(y,i.u_brightness_low),u_brightness_high:new u.aJ(y,i.u_brightness_high),u_saturation_factor:new u.aJ(y,i.u_saturation_factor),u_contrast_factor:new u.aJ(y,i.u_contrast_factor),u_spin_weights:new u.aO(y,i.u_spin_weights)}),symbolIcon:(y,i)=>({u_is_size_zoom_constant:new u.aI(y,i.u_is_size_zoom_constant),u_is_size_feature_constant:new u.aI(y,i.u_is_size_feature_constant),u_size_t:new u.aJ(y,i.u_size_t),u_size:new u.aJ(y,i.u_size),u_camera_to_center_distance:new u.aJ(y,i.u_camera_to_center_distance),u_pitch:new u.aJ(y,i.u_pitch),u_rotate_symbol:new u.aI(y,i.u_rotate_symbol),u_aspect_ratio:new u.aJ(y,i.u_aspect_ratio),u_fade_change:new u.aJ(y,i.u_fade_change),u_matrix:new u.aK(y,i.u_matrix),u_label_plane_matrix:new u.aK(y,i.u_label_plane_matrix),u_coord_matrix:new u.aK(y,i.u_coord_matrix),u_is_text:new u.aI(y,i.u_is_text),u_pitch_with_map:new u.aI(y,i.u_pitch_with_map),u_is_along_line:new u.aI(y,i.u_is_along_line),u_is_variable_anchor:new u.aI(y,i.u_is_variable_anchor),u_texsize:new u.aP(y,i.u_texsize),u_texture:new u.aI(y,i.u_texture),u_translation:new u.aP(y,i.u_translation),u_pitched_scale:new u.aJ(y,i.u_pitched_scale)}),symbolSDF:(y,i)=>({u_is_size_zoom_constant:new u.aI(y,i.u_is_size_zoom_constant),u_is_size_feature_constant:new u.aI(y,i.u_is_size_feature_constant),u_size_t:new u.aJ(y,i.u_size_t),u_size:new u.aJ(y,i.u_size),u_camera_to_center_distance:new u.aJ(y,i.u_camera_to_center_distance),u_pitch:new u.aJ(y,i.u_pitch),u_rotate_symbol:new u.aI(y,i.u_rotate_symbol),u_aspect_ratio:new u.aJ(y,i.u_aspect_ratio),u_fade_change:new u.aJ(y,i.u_fade_change),u_matrix:new u.aK(y,i.u_matrix),u_label_plane_matrix:new u.aK(y,i.u_label_plane_matrix),u_coord_matrix:new u.aK(y,i.u_coord_matrix),u_is_text:new u.aI(y,i.u_is_text),u_pitch_with_map:new u.aI(y,i.u_pitch_with_map),u_is_along_line:new u.aI(y,i.u_is_along_line),u_is_variable_anchor:new u.aI(y,i.u_is_variable_anchor),u_texsize:new u.aP(y,i.u_texsize),u_texture:new u.aI(y,i.u_texture),u_gamma_scale:new u.aJ(y,i.u_gamma_scale),u_device_pixel_ratio:new u.aJ(y,i.u_device_pixel_ratio),u_is_halo:new u.aI(y,i.u_is_halo),u_translation:new u.aP(y,i.u_translation),u_pitched_scale:new u.aJ(y,i.u_pitched_scale)}),symbolTextAndIcon:(y,i)=>({u_is_size_zoom_constant:new u.aI(y,i.u_is_size_zoom_constant),u_is_size_feature_constant:new u.aI(y,i.u_is_size_feature_constant),u_size_t:new u.aJ(y,i.u_size_t),u_size:new u.aJ(y,i.u_size),u_camera_to_center_distance:new u.aJ(y,i.u_camera_to_center_distance),u_pitch:new u.aJ(y,i.u_pitch),u_rotate_symbol:new u.aI(y,i.u_rotate_symbol),u_aspect_ratio:new u.aJ(y,i.u_aspect_ratio),u_fade_change:new u.aJ(y,i.u_fade_change),u_matrix:new u.aK(y,i.u_matrix),u_label_plane_matrix:new u.aK(y,i.u_label_plane_matrix),u_coord_matrix:new u.aK(y,i.u_coord_matrix),u_is_text:new u.aI(y,i.u_is_text),u_pitch_with_map:new u.aI(y,i.u_pitch_with_map),u_is_along_line:new u.aI(y,i.u_is_along_line),u_is_variable_anchor:new u.aI(y,i.u_is_variable_anchor),u_texsize:new u.aP(y,i.u_texsize),u_texsize_icon:new u.aP(y,i.u_texsize_icon),u_texture:new u.aI(y,i.u_texture),u_texture_icon:new u.aI(y,i.u_texture_icon),u_gamma_scale:new u.aJ(y,i.u_gamma_scale),u_device_pixel_ratio:new u.aJ(y,i.u_device_pixel_ratio),u_is_halo:new u.aI(y,i.u_is_halo),u_translation:new u.aP(y,i.u_translation),u_pitched_scale:new u.aJ(y,i.u_pitched_scale)}),background:(y,i)=>({u_matrix:new u.aK(y,i.u_matrix),u_opacity:new u.aJ(y,i.u_opacity),u_color:new u.aM(y,i.u_color)}),backgroundPattern:(y,i)=>({u_matrix:new u.aK(y,i.u_matrix),u_opacity:new u.aJ(y,i.u_opacity),u_image:new u.aI(y,i.u_image),u_pattern_tl_a:new u.aP(y,i.u_pattern_tl_a),u_pattern_br_a:new u.aP(y,i.u_pattern_br_a),u_pattern_tl_b:new u.aP(y,i.u_pattern_tl_b),u_pattern_br_b:new u.aP(y,i.u_pattern_br_b),u_texsize:new u.aP(y,i.u_texsize),u_mix:new u.aJ(y,i.u_mix),u_pattern_size_a:new u.aP(y,i.u_pattern_size_a),u_pattern_size_b:new u.aP(y,i.u_pattern_size_b),u_scale_a:new u.aJ(y,i.u_scale_a),u_scale_b:new u.aJ(y,i.u_scale_b),u_pixel_coord_upper:new u.aP(y,i.u_pixel_coord_upper),u_pixel_coord_lower:new u.aP(y,i.u_pixel_coord_lower),u_tile_units_to_pixels:new u.aJ(y,i.u_tile_units_to_pixels)}),terrain:(y,i)=>({u_matrix:new u.aK(y,i.u_matrix),u_texture:new u.aI(y,i.u_texture),u_ele_delta:new u.aJ(y,i.u_ele_delta),u_fog_matrix:new u.aK(y,i.u_fog_matrix),u_fog_color:new u.aM(y,i.u_fog_color),u_fog_ground_blend:new u.aJ(y,i.u_fog_ground_blend),u_fog_ground_blend_opacity:new u.aJ(y,i.u_fog_ground_blend_opacity),u_horizon_color:new u.aM(y,i.u_horizon_color),u_horizon_fog_blend:new u.aJ(y,i.u_horizon_fog_blend)}),terrainDepth:(y,i)=>({u_matrix:new u.aK(y,i.u_matrix),u_ele_delta:new u.aJ(y,i.u_ele_delta)}),terrainCoords:(y,i)=>({u_matrix:new u.aK(y,i.u_matrix),u_texture:new u.aI(y,i.u_texture),u_terrain_coords_id:new u.aJ(y,i.u_terrain_coords_id),u_ele_delta:new u.aJ(y,i.u_ele_delta)}),sky:(y,i)=>({u_sky_color:new u.aM(y,i.u_sky_color),u_horizon_color:new u.aM(y,i.u_horizon_color),u_horizon:new u.aJ(y,i.u_horizon),u_sky_horizon_blend:new u.aJ(y,i.u_sky_horizon_blend)})};class uh{constructor(i,c,p){this.context=i;const m=i.gl;this.buffer=m.createBuffer(),this.dynamicDraw=!!p,this.context.unbindVAO(),i.bindElementBuffer.set(this.buffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?m.DYNAMIC_DRAW:m.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(i){const c=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),c.bufferSubData(c.ELEMENT_ARRAY_BUFFER,0,i.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const hh={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Go{constructor(i,c,p,m){this.length=c.length,this.attributes=p,this.itemSize=c.bytesPerElement,this.dynamicDraw=m,this.context=i;const v=i.gl;this.buffer=v.createBuffer(),i.bindVertexBuffer.set(this.buffer),v.bufferData(v.ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?v.DYNAMIC_DRAW:v.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(i){if(i.length!==this.length)throw new Error(`Length of new data is ${i.length}, which doesn't match current length of ${this.length}`);const c=this.context.gl;this.bind(),c.bufferSubData(c.ARRAY_BUFFER,0,i.arrayBuffer)}enableAttributes(i,c){for(let p=0;p<this.attributes.length;p++){const m=c.attributes[this.attributes[p].name];m!==void 0&&i.enableVertexAttribArray(m)}}setVertexAttribPointers(i,c,p){for(let m=0;m<this.attributes.length;m++){const v=this.attributes[m],w=c.attributes[v.name];w!==void 0&&i.vertexAttribPointer(w,v.components,i[hh[v.type]],!1,this.itemSize,v.offset+this.itemSize*(p||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const dh=new WeakMap;function zs(y){var i;if(dh.has(y))return dh.get(y);{const c=(i=y.getParameter(y.VERSION))===null||i===void 0?void 0:i.startsWith("WebGL 2.0");return dh.set(y,c),c}}class xr{constructor(i){this.gl=i.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(i){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class kl extends xr{getDefault(){return u.aN.transparent}set(i){const c=this.current;(i.r!==c.r||i.g!==c.g||i.b!==c.b||i.a!==c.a||this.dirty)&&(this.gl.clearColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class Py extends xr{getDefault(){return 1}set(i){(i!==this.current||this.dirty)&&(this.gl.clearDepth(i),this.current=i,this.dirty=!1)}}class Pc extends xr{getDefault(){return 0}set(i){(i!==this.current||this.dirty)&&(this.gl.clearStencil(i),this.current=i,this.dirty=!1)}}class Iy extends xr{getDefault(){return[!0,!0,!0,!0]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||i[2]!==c[2]||i[3]!==c[3]||this.dirty)&&(this.gl.colorMask(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class Rs extends xr{getDefault(){return!0}set(i){(i!==this.current||this.dirty)&&(this.gl.depthMask(i),this.current=i,this.dirty=!1)}}class ky extends xr{getDefault(){return 255}set(i){(i!==this.current||this.dirty)&&(this.gl.stencilMask(i),this.current=i,this.dirty=!1)}}class Kf extends xr{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(i){const c=this.current;(i.func!==c.func||i.ref!==c.ref||i.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(i.func,i.ref,i.mask),this.current=i,this.dirty=!1)}}class My extends xr{getDefault(){const i=this.gl;return[i.KEEP,i.KEEP,i.KEEP]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||i[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(i[0],i[1],i[2]),this.current=i,this.dirty=!1)}}class Xf extends xr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=i,this.dirty=!1}}class fh extends xr{getDefault(){return[0,1]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||this.dirty)&&(this.gl.depthRange(i[0],i[1]),this.current=i,this.dirty=!1)}}class Jf extends xr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=i,this.dirty=!1}}class Yf extends xr{getDefault(){return this.gl.LESS}set(i){(i!==this.current||this.dirty)&&(this.gl.depthFunc(i),this.current=i,this.dirty=!1)}}class Qf extends xr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.BLEND):c.disable(c.BLEND),this.current=i,this.dirty=!1}}class ep extends xr{getDefault(){const i=this.gl;return[i.ONE,i.ZERO]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||this.dirty)&&(this.gl.blendFunc(i[0],i[1]),this.current=i,this.dirty=!1)}}class Ja extends xr{getDefault(){return u.aN.transparent}set(i){const c=this.current;(i.r!==c.r||i.g!==c.g||i.b!==c.b||i.a!==c.a||this.dirty)&&(this.gl.blendColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class tp extends xr{getDefault(){return this.gl.FUNC_ADD}set(i){(i!==this.current||this.dirty)&&(this.gl.blendEquation(i),this.current=i,this.dirty=!1)}}class Ay extends xr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=i,this.dirty=!1}}class zy extends xr{getDefault(){return this.gl.BACK}set(i){(i!==this.current||this.dirty)&&(this.gl.cullFace(i),this.current=i,this.dirty=!1)}}class rp extends xr{getDefault(){return this.gl.CCW}set(i){(i!==this.current||this.dirty)&&(this.gl.frontFace(i),this.current=i,this.dirty=!1)}}class Ml extends xr{getDefault(){return null}set(i){(i!==this.current||this.dirty)&&(this.gl.useProgram(i),this.current=i,this.dirty=!1)}}class Ry extends xr{getDefault(){return this.gl.TEXTURE0}set(i){(i!==this.current||this.dirty)&&(this.gl.activeTexture(i),this.current=i,this.dirty=!1)}}class Ic extends xr{getDefault(){const i=this.gl;return[0,0,i.drawingBufferWidth,i.drawingBufferHeight]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||i[2]!==c[2]||i[3]!==c[3]||this.dirty)&&(this.gl.viewport(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class Ly extends xr{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,i),this.current=i,this.dirty=!1}}class Dy extends xr{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class np extends xr{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindTexture(c.TEXTURE_2D,i),this.current=i,this.dirty=!1}}class ip extends xr{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class op extends xr{getDefault(){return null}set(i){const c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class ph extends xr{getDefault(){return null}set(i){var c;if(i===this.current&&!this.dirty)return;const p=this.gl;zs(p)?p.bindVertexArray(i):(c=p.getExtension("OES_vertex_array_object"))===null||c===void 0||c.bindVertexArrayOES(i),this.current=i,this.dirty=!1}}class ap extends xr{getDefault(){return 4}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,i),this.current=i,this.dirty=!1}}class kc extends xr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i),this.current=i,this.dirty=!1}}class ha extends xr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,i),this.current=i,this.dirty=!1}}class Al extends xr{constructor(i,c){super(i),this.context=i,this.parent=c}getDefault(){return null}}class mh extends Al{setDirty(){this.dirty=!0}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,i,0),this.current=i,this.dirty=!1}}class gh extends Al{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class sp extends Al{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_STENCIL_ATTACHMENT,c.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class yh{constructor(i,c,p,m,v){this.context=i,this.width=c,this.height=p;const w=i.gl,E=this.framebuffer=w.createFramebuffer();if(this.colorAttachment=new mh(i,E),m)this.depthAttachment=v?new sp(i,E):new gh(i,E);else if(v)throw new Error("Stencil cannot be set without depth");if(w.checkFramebufferStatus(w.FRAMEBUFFER)!==w.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const i=this.context.gl,c=this.colorAttachment.get();if(c&&i.deleteTexture(c),this.depthAttachment){const p=this.depthAttachment.get();p&&i.deleteRenderbuffer(p)}i.deleteFramebuffer(this.framebuffer)}}class en{constructor(i,c,p){this.blendFunction=i,this.blendColor=c,this.mask=p}}en.Replace=[1,0],en.disabled=new en(en.Replace,u.aN.transparent,[!1,!1,!1,!1]),en.unblended=new en(en.Replace,u.aN.transparent,[!0,!0,!0,!0]),en.alphaBlended=new en([1,771],u.aN.transparent,[!0,!0,!0,!0]);class vh{constructor(i){var c,p;if(this.gl=i,this.clearColor=new kl(this),this.clearDepth=new Py(this),this.clearStencil=new Pc(this),this.colorMask=new Iy(this),this.depthMask=new Rs(this),this.stencilMask=new ky(this),this.stencilFunc=new Kf(this),this.stencilOp=new My(this),this.stencilTest=new Xf(this),this.depthRange=new fh(this),this.depthTest=new Jf(this),this.depthFunc=new Yf(this),this.blend=new Qf(this),this.blendFunc=new ep(this),this.blendColor=new Ja(this),this.blendEquation=new tp(this),this.cullFace=new Ay(this),this.cullFaceSide=new zy(this),this.frontFace=new rp(this),this.program=new Ml(this),this.activeTexture=new Ry(this),this.viewport=new Ic(this),this.bindFramebuffer=new Ly(this),this.bindRenderbuffer=new Dy(this),this.bindTexture=new np(this),this.bindVertexBuffer=new ip(this),this.bindElementBuffer=new op(this),this.bindVertexArray=new ph(this),this.pixelStoreUnpack=new ap(this),this.pixelStoreUnpackPremultiplyAlpha=new kc(this),this.pixelStoreUnpackFlipY=new ha(this),this.extTextureFilterAnisotropic=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=i.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),zs(i)){this.HALF_FLOAT=i.HALF_FLOAT;const m=i.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(c=i.RGBA16F)!==null&&c!==void 0?c:m==null?void 0:m.RGBA16F_EXT,this.RGB16F=(p=i.RGB16F)!==null&&p!==void 0?p:m==null?void 0:m.RGB16F_EXT,i.getExtension("EXT_color_buffer_float")}else{i.getExtension("EXT_color_buffer_half_float"),i.getExtension("OES_texture_half_float_linear");const m=i.getExtension("OES_texture_half_float");this.HALF_FLOAT=m==null?void 0:m.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(i,c){return new uh(this,i,c)}createVertexBuffer(i,c,p){return new Go(this,i,c,p)}createRenderbuffer(i,c,p){const m=this.gl,v=m.createRenderbuffer();return this.bindRenderbuffer.set(v),m.renderbufferStorage(m.RENDERBUFFER,i,c,p),this.bindRenderbuffer.set(null),v}createFramebuffer(i,c,p,m){return new yh(this,i,c,p,m)}clear({color:i,depth:c,stencil:p}){const m=this.gl;let v=0;i&&(v|=m.COLOR_BUFFER_BIT,this.clearColor.set(i),this.colorMask.set([!0,!0,!0,!0])),c!==void 0&&(v|=m.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(c),this.depthMask.set(!0)),p!==void 0&&(v|=m.STENCIL_BUFFER_BIT,this.clearStencil.set(p),this.stencilMask.set(255)),m.clear(v)}setCullFace(i){i.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(i.mode),this.frontFace.set(i.frontFace))}setDepthMode(i){i.func!==this.gl.ALWAYS||i.mask?(this.depthTest.set(!0),this.depthFunc.set(i.func),this.depthMask.set(i.mask),this.depthRange.set(i.range)):this.depthTest.set(!1)}setStencilMode(i){i.test.func!==this.gl.ALWAYS||i.mask?(this.stencilTest.set(!0),this.stencilMask.set(i.mask),this.stencilOp.set([i.fail,i.depthFail,i.pass]),this.stencilFunc.set({func:i.test.func,ref:i.ref,mask:i.test.mask})):this.stencilTest.set(!1)}setColorMode(i){u.aF(i.blendFunction,en.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(i.blendFunction),this.blendColor.set(i.blendColor)),this.colorMask.set(i.mask)}createVertexArray(){var i;return zs(this.gl)?this.gl.createVertexArray():(i=this.gl.getExtension("OES_vertex_array_object"))===null||i===void 0?void 0:i.createVertexArrayOES()}deleteVertexArray(i){var c;return zs(this.gl)?this.gl.deleteVertexArray(i):(c=this.gl.getExtension("OES_vertex_array_object"))===null||c===void 0?void 0:c.deleteVertexArrayOES(i)}unbindVAO(){this.bindVertexArray.set(null)}}class hr{constructor(i,c,p){this.func=i,this.mask=c,this.range=p}}hr.ReadOnly=!1,hr.ReadWrite=!0,hr.disabled=new hr(519,hr.ReadOnly,[0,1]);const _h=7680;class pn{constructor(i,c,p,m,v,w){this.test=i,this.ref=c,this.mask=p,this.fail=m,this.depthFail=v,this.pass=w}}pn.disabled=new pn({func:519,mask:0},0,0,_h,_h,_h);class sn{constructor(i,c,p){this.enable=i,this.mode=c,this.frontFace=p}}let zl;function lp(y,i,c,p,m){const v=y.context,w=v.gl,E=y.useProgram("collisionBox"),k=[];let z=0,B=0;for(let de=0;de<p.length;de++){const ye=p[de],ae=i.getTile(ye).getBucket(c);if(!ae)continue;const we=m?ae.textCollisionBox:ae.iconCollisionBox,Me=ae.collisionCircleArray;if(Me.length>0){const Oe=u.H();u.aR(Oe,ae.placementInvProjMatrix,y.transform.glCoordMatrix),u.aR(Oe,Oe,ae.placementViewportMatrix),k.push({circleArray:Me,circleOffset:B,transform:ye.posMatrix,invTransform:Oe,coord:ye}),z+=Me.length/4,B=z}we&&E.draw(v,w.LINES,hr.disabled,pn.disabled,y.colorModeForRenderPass(),sn.disabled,{u_matrix:ye.posMatrix,u_pixel_extrude_scale:[1/(O=y.transform).width,1/O.height]},y.style.map.terrain&&y.style.map.terrain.getTerrainData(ye),c.id,we.layoutVertexBuffer,we.indexBuffer,we.segments,null,y.transform.zoom,null,null,we.collisionVertexBuffer)}var O;if(!m||!k.length)return;const K=y.useProgram("collisionCircle"),Q=new u.aS;Q.resize(4*z),Q._trim();let re=0;for(const de of k)for(let ye=0;ye<de.circleArray.length/4;ye++){const ae=4*ye,we=de.circleArray[ae+0],Me=de.circleArray[ae+1],Oe=de.circleArray[ae+2],Ge=de.circleArray[ae+3];Q.emplace(re++,we,Me,Oe,Ge,0),Q.emplace(re++,we,Me,Oe,Ge,1),Q.emplace(re++,we,Me,Oe,Ge,2),Q.emplace(re++,we,Me,Oe,Ge,3)}(!zl||zl.length<2*z)&&(zl=function(de){const ye=2*de,ae=new u.aU;ae.resize(ye),ae._trim();for(let we=0;we<ye;we++){const Me=6*we;ae.uint16[Me+0]=4*we+0,ae.uint16[Me+1]=4*we+1,ae.uint16[Me+2]=4*we+2,ae.uint16[Me+3]=4*we+2,ae.uint16[Me+4]=4*we+3,ae.uint16[Me+5]=4*we+0}return ae}(z));const he=v.createIndexBuffer(zl,!0),le=v.createVertexBuffer(Q,u.aT.members,!0);for(const de of k){const ye=ca(de.transform,de.invTransform,y.transform);K.draw(v,w.TRIANGLES,hr.disabled,pn.disabled,y.colorModeForRenderPass(),sn.disabled,ye,y.style.map.terrain&&y.style.map.terrain.getTerrainData(de.coord),c.id,le,he,u.a0.simpleSegment(0,2*de.circleOffset,de.circleArray.length,de.circleArray.length/2),null,y.transform.zoom,null,null,null)}le.destroy(),he.destroy()}sn.disabled=new sn(!1,1029,2305),sn.backCCW=new sn(!0,1029,2305);const xh=u.ao(new Float32Array(16));function Mc(y,i,c,p,m,v){const{horizontalAlign:w,verticalAlign:E}=u.av(y);return new u.P((-(w-.5)*i/m+p[0])*v,(-(E-.5)*c/m+p[1])*v)}function Ac(y,i,c,p,m,v){const w=i.tileAnchorPoint.add(new u.P(i.translation[0],i.translation[1]));if(i.pitchWithMap){let E=p.mult(v);return c||(E=E.rotate(-m)),oe(w.add(E),i.labelPlaneMatrix,i.getElevation).point}if(c){const E=Re(i.tileAnchorPoint.x+1,i.tileAnchorPoint.y,i).point.sub(y),k=Math.atan(E.y/E.x)+(E.x<0?Math.PI:0);return y.add(p.rotate(k))}return y.add(p)}function zc(y,i,c,p,m,v,w,E,k,z,B,O,K,Q){const re=y.text.placedSymbolArray,he=y.text.dynamicLayoutVertexArray,le=y.icon.dynamicLayoutVertexArray,de={};he.clear();for(let ye=0;ye<re.length;ye++){const ae=re.get(ye),we=ae.hidden||!ae.crossTileID||y.allowVerticalPlacement&&!ae.placedOrientation?null:p[ae.crossTileID];if(we){const Me=new u.P(ae.anchorX,ae.anchorY),Oe={getElevation:Q,width:m.width,height:m.height,labelPlaneMatrix:v,lineVertexArray:null,pitchWithMap:c,projection:B,projectionCache:null,tileAnchorPoint:Me,translation:O,unwrappedTileID:K},Ge=c?oe(Me,w,Q):Re(Me.x,Me.y,Oe),et=U(m.cameraToCenterDistance,Ge.signedDistanceFromCamera);let dt=u.aj(y.textSizeData,k,ae)*et/u.aq;c&&(dt*=y.tilePixelRatio/E);const{width:pt,height:tt,anchor:rt,textOffset:bt,textBoxScale:Gt}=we,ot=Mc(rt,pt,tt,bt,Gt,dt),lt=B.getPitchedTextCorrection(m,Me.add(new u.P(O[0],O[1])),K),jt=Ac(Ge.point,Oe,i,ot,m.angle,lt),cn=y.allowVerticalPlacement&&ae.placedOrientation===u.ai.vertical?Math.PI/2:0;for(let er=0;er<ae.numGlyphs;er++)u.ak(he,jt,cn);z&&ae.associatedIconIndex>=0&&(de[ae.associatedIconIndex]={shiftedAnchor:jt,angle:cn})}else wt(ae.numGlyphs,he)}if(z){le.clear();const ye=y.icon.placedSymbolArray;for(let ae=0;ae<ye.length;ae++){const we=ye.get(ae);if(we.hidden)wt(we.numGlyphs,le);else{const Me=de[ae];if(Me)for(let Oe=0;Oe<we.numGlyphs;Oe++)u.ak(le,Me.shiftedAnchor,Me.angle);else wt(we.numGlyphs,le)}}y.icon.dynamicLayoutVertexBuffer.updateData(le)}y.text.dynamicLayoutVertexBuffer.updateData(he)}function bh(y,i,c){return c.iconsInText&&i?"symbolTextAndIcon":y?"symbolSDF":"symbolIcon"}function Da(y,i,c,p,m,v,w,E,k,z,B,O){const K=y.context,Q=K.gl,re=y.transform,he=jn(),le=E==="map",de=k==="map",ye=E!=="viewport"&&c.layout.get("symbol-placement")!=="point",ae=le&&!de&&!ye,we=!de&&ye,Me=!c.layout.get("symbol-sort-key").isConstant();let Oe=!1;const Ge=y.depthModeForSublayer(0,hr.ReadOnly),et=c._unevaluatedLayout.hasValue("text-variable-anchor")||c._unevaluatedLayout.hasValue("text-variable-anchor-offset"),dt=[],pt=he.getCircleRadiusCorrection(re);for(const tt of p){const rt=i.getTile(tt),bt=rt.getBucket(c);if(!bt)continue;const Gt=m?bt.text:bt.icon;if(!Gt||!Gt.segments.get().length||!Gt.hasVisibleVertices)continue;const ot=Gt.programConfigurations.get(c.id),lt=m||bt.sdfIcons,jt=m?bt.textSizeData:bt.iconSizeData,cn=de||re.pitch!==0,er=y.useProgram(bh(lt,m,bt),ot),dr=u.ah(jt,re.zoom),un=y.style.map.terrain&&y.style.map.terrain.getTerrainData(tt);let ai,To,hn,Ri,_i=[0,0],si=null;if(m)To=rt.glyphAtlasTexture,hn=Q.LINEAR,ai=rt.glyphAtlasTexture.size,bt.iconsInText&&(_i=rt.imageAtlasTexture.size,si=rt.imageAtlasTexture,Ri=cn||y.options.rotating||y.options.zooming||jt.kind==="composite"||jt.kind==="camera"?Q.LINEAR:Q.NEAREST);else{const yn=c.layout.get("icon-size").constantOr(0)!==1||bt.iconsNeedLinear;To=rt.imageAtlasTexture,hn=lt||y.options.rotating||y.options.zooming||yn||cn?Q.LINEAR:Q.NEAREST,ai=rt.imageAtlasTexture.size}const li=zt(rt,1,y.transform.zoom),Po=we?tt.posMatrix:xh,os=Xr(Po,de,le,y.transform,li),Gc=Jr(Po,de,le,y.transform,li),Vs=Jr(tt.posMatrix,de,le,y.transform,li),as=he.translatePosition(y.transform,rt,v,w),Zc=et&&bt.hasTextData(),Yh=c.layout.get("icon-text-fit")!=="none"&&Zc&&bt.hasIconData();if(ye){const yn=y.style.map.terrain?(Qh,Vn)=>y.style.map.terrain.getElevation(tt,Qh,Vn):null,Hs=c.layout.get("text-rotation-alignment")==="map";X(bt,tt.posMatrix,y,m,os,Vs,de,z,Hs,he,tt.toUnwrapped(),re.width,re.height,as,yn)}const ti=tt.posMatrix,Io=m&&et||Yh,Ba=ye||Io?xh:os,Us=Gc,ci=lt&&c.paint.get(m?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let ui;ui=lt?bt.iconsInText?As(jt.kind,dr,ae,de,ye,Io,y,ti,Ba,Us,as,ai,_i,pt):Il(jt.kind,dr,ae,de,ye,Io,y,ti,Ba,Us,as,m,ai,!0,pt):Ms(jt.kind,dr,ae,de,ye,Io,y,ti,Ba,Us,as,m,ai,pt);const Gn={program:er,buffers:Gt,uniformValues:ui,atlasTexture:To,atlasTextureIcon:si,atlasInterpolation:hn,atlasInterpolationIcon:Ri,isSDF:lt,hasHalo:ci};if(Me&&bt.canOverlap){Oe=!0;const yn=Gt.segments.get();for(const Hs of yn)dt.push({segments:new u.a0([Hs]),sortKey:Hs.sortKey,state:Gn,terrainData:un})}else dt.push({segments:Gt.segments,sortKey:0,state:Gn,terrainData:un})}Oe&&dt.sort((tt,rt)=>tt.sortKey-rt.sortKey);for(const tt of dt){const rt=tt.state;if(K.activeTexture.set(Q.TEXTURE0),rt.atlasTexture.bind(rt.atlasInterpolation,Q.CLAMP_TO_EDGE),rt.atlasTextureIcon&&(K.activeTexture.set(Q.TEXTURE1),rt.atlasTextureIcon&&rt.atlasTextureIcon.bind(rt.atlasInterpolationIcon,Q.CLAMP_TO_EDGE)),rt.isSDF){const bt=rt.uniformValues;rt.hasHalo&&(bt.u_is_halo=1,Ya(rt.buffers,tt.segments,c,y,rt.program,Ge,B,O,bt,tt.terrainData)),bt.u_is_halo=0}Ya(rt.buffers,tt.segments,c,y,rt.program,Ge,B,O,rt.uniformValues,tt.terrainData)}}function Ya(y,i,c,p,m,v,w,E,k,z){const B=p.context;m.draw(B,B.gl.TRIANGLES,v,w,E,sn.disabled,k,z,c.id,y.layoutVertexBuffer,y.indexBuffer,i,c.paint,p.transform.zoom,y.programConfigurations.get(c.id),y.dynamicLayoutVertexBuffer,y.opacityVertexBuffer)}function Xi(y,i,c,p,m){if(!c||!p||!p.imageAtlas)return;const v=p.imageAtlas.patternPositions;let w=v[c.to.toString()],E=v[c.from.toString()];if(!w&&E&&(w=E),!E&&w&&(E=w),!w||!E){const k=m.getPaintProperty(i);w=v[k],E=v[k]}w&&E&&y.setConstantPatternPositions(w,E)}function wh(y,i,c,p,m,v,w){const E=y.context.gl,k="fill-pattern",z=c.paint.get(k),B=z&&z.constantOr(1),O=c.getCrossfadeParameters();let K,Q,re,he,le;w?(Q=B&&!c.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",K=E.LINES):(Q=B?"fillPattern":"fill",K=E.TRIANGLES);const de=z.constantOr(null);for(const ye of p){const ae=i.getTile(ye);if(B&&!ae.patternsLoaded())continue;const we=ae.getBucket(c);if(!we)continue;const Me=we.programConfigurations.get(c.id),Oe=y.useProgram(Q,Me),Ge=y.style.map.terrain&&y.style.map.terrain.getTerrainData(ye);B&&(y.context.activeTexture.set(E.TEXTURE0),ae.imageAtlasTexture.bind(E.LINEAR,E.CLAMP_TO_EDGE),Me.updatePaintBuffers(O)),Xi(Me,k,de,ae,c);const et=Ge?ye:null,dt=y.translatePosMatrix(et?et.posMatrix:ye.posMatrix,ae,c.paint.get("fill-translate"),c.paint.get("fill-translate-anchor"));if(w){he=we.indexBuffer2,le=we.segments2;const pt=[E.drawingBufferWidth,E.drawingBufferHeight];re=Q==="fillOutlinePattern"&&B?Is(dt,y,O,ae,pt):Xa(dt,pt)}else he=we.indexBuffer,le=we.segments,re=B?Qr(dt,y,O,ae):so(dt);Oe.draw(y.context,K,m,y.stencilModeForClipping(ye),v,sn.disabled,re,Ge,c.id,we.layoutVertexBuffer,he,le,c.paint,y.transform.zoom,Me)}}function Rc(y,i,c,p,m,v,w){const E=y.context,k=E.gl,z="fill-extrusion-pattern",B=c.paint.get(z),O=B.constantOr(1),K=c.getCrossfadeParameters(),Q=c.paint.get("fill-extrusion-opacity"),re=B.constantOr(null);for(const he of p){const le=i.getTile(he),de=le.getBucket(c);if(!de)continue;const ye=y.style.map.terrain&&y.style.map.terrain.getTerrainData(he),ae=de.programConfigurations.get(c.id),we=y.useProgram(O?"fillExtrusionPattern":"fillExtrusion",ae);O&&(y.context.activeTexture.set(k.TEXTURE0),le.imageAtlasTexture.bind(k.LINEAR,k.CLAMP_TO_EDGE),ae.updatePaintBuffers(K)),Xi(ae,z,re,le,c);const Me=y.translatePosMatrix(he.posMatrix,le,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),Oe=c.paint.get("fill-extrusion-vertical-gradient"),Ge=O?Ki(Me,y,Oe,Q,he,K,le):wo(Me,y,Oe,Q);we.draw(E,E.gl.TRIANGLES,m,v,w,sn.backCCW,Ge,ye,c.id,de.layoutVertexBuffer,de.indexBuffer,de.segments,c.paint,y.transform.zoom,ae,y.style.map.terrain&&de.centroidVertexBuffer)}}function Sh(y,i,c,p,m,v,w){const E=y.context,k=E.gl,z=c.fbo;if(!z)return;const B=y.useProgram("hillshade"),O=y.style.map.terrain&&y.style.map.terrain.getTerrainData(i);E.activeTexture.set(k.TEXTURE0),k.bindTexture(k.TEXTURE_2D,z.colorAttachment.get()),B.draw(E,k.TRIANGLES,m,v,w,sn.disabled,((K,Q,re,he)=>{const le=re.paint.get("hillshade-shadow-color"),de=re.paint.get("hillshade-highlight-color"),ye=re.paint.get("hillshade-accent-color");let ae=re.paint.get("hillshade-illumination-direction")*(Math.PI/180);re.paint.get("hillshade-illumination-anchor")==="viewport"&&(ae-=K.transform.angle);const we=!K.options.moving;return{u_matrix:he?he.posMatrix:K.transform.calculatePosMatrix(Q.tileID.toUnwrapped(),we),u_image:0,u_latrange:ei(0,Q.tileID),u_light:[re.paint.get("hillshade-exaggeration"),ae],u_shadow:le,u_highlight:de,u_accent:ye}})(y,c,p,O?i:null),O,p.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments)}function Qa(y,i,c,p,m,v){const w=y.context,E=w.gl,k=i.dem;if(k&&k.data){const z=k.dim,B=k.stride,O=k.getPixels();if(w.activeTexture.set(E.TEXTURE1),w.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||y.getTileTexture(B),i.demTexture){const Q=i.demTexture;Q.update(O,{premultiply:!1}),Q.bind(E.NEAREST,E.CLAMP_TO_EDGE)}else i.demTexture=new ze(w,O,E.RGBA,{premultiply:!1}),i.demTexture.bind(E.NEAREST,E.CLAMP_TO_EDGE);w.activeTexture.set(E.TEXTURE0);let K=i.fbo;if(!K){const Q=new ze(w,{width:z,height:z,data:null},E.RGBA);Q.bind(E.LINEAR,E.CLAMP_TO_EDGE),K=i.fbo=w.createFramebuffer(z,z,!0,!1),K.colorAttachment.set(Q.texture)}w.bindFramebuffer.set(K.framebuffer),w.viewport.set([0,0,z,z]),y.useProgram("hillshadePrepare").draw(w,E.TRIANGLES,p,m,v,sn.disabled,((Q,re)=>{const he=re.stride,le=u.H();return u.aQ(le,0,u.X,-u.X,0,0,1),u.J(le,le,[0,-u.X,0]),{u_matrix:le,u_image:1,u_dimension:[he,he],u_zoom:Q.overscaledZ,u_unpack:re.getUnpackVector()}})(i.tileID,k),null,c.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments),i.needsHillshadePrepare=!1}}function Lc(y,i,c,p,m,v){const w=p.paint.get("raster-fade-duration");if(!v&&w>0){const E=A.now(),k=(E-y.timeAdded)/w,z=i?(E-i.timeAdded)/w:-1,B=c.getSource(),O=m.coveringZoomLevel({tileSize:B.tileSize,roundZoom:B.roundZoom}),K=!i||Math.abs(i.tileID.overscaledZ-O)>Math.abs(y.tileID.overscaledZ-O),Q=K&&y.refreshedUponExpiration?1:u.ad(K?k:1-z,0,1);return y.refreshedUponExpiration&&k>=1&&(y.refreshedUponExpiration=!1),i?{opacity:1,mix:1-Q}:{opacity:Q,mix:0}}return{opacity:1,mix:0}}const Dc=new u.aN(1,0,0,1),Rl=new u.aN(0,1,0,1),Fc=new u.aN(0,0,1,1),cp=new u.aN(1,0,1,1),Ls=new u.aN(0,1,1,1);function es(y,i,c,p){Ds(y,0,i+c/2,y.transform.width,c,p)}function Ch(y,i,c,p){Ds(y,i-c/2,0,c,y.transform.height,p)}function Ds(y,i,c,p,m,v){const w=y.context,E=w.gl;E.enable(E.SCISSOR_TEST),E.scissor(i*y.pixelRatio,c*y.pixelRatio,p*y.pixelRatio,m*y.pixelRatio),w.clear({color:v}),E.disable(E.SCISSOR_TEST)}function Tr(y,i,c){const p=y.context,m=p.gl,v=c.posMatrix,w=y.useProgram("debug"),E=hr.disabled,k=pn.disabled,z=y.colorModeForRenderPass(),B="$debug",O=y.style.map.terrain&&y.style.map.terrain.getTerrainData(c);p.activeTexture.set(m.TEXTURE0);const K=i.getTileByID(c.key).latestRawTileData,Q=Math.floor((K&&K.byteLength||0)/1024),re=i.getTile(c).tileSize,he=512/Math.min(re,512)*(c.overscaledZ/y.transform.zoom)*.5;let le=c.canonical.toString();c.overscaledZ!==c.canonical.z&&(le+=` => ${c.overscaledZ}`),function(de,ye){de.initDebugOverlayCanvas();const ae=de.debugOverlayCanvas,we=de.context.gl,Me=de.debugOverlayCanvas.getContext("2d");Me.clearRect(0,0,ae.width,ae.height),Me.shadowColor="white",Me.shadowBlur=2,Me.lineWidth=1.5,Me.strokeStyle="white",Me.textBaseline="top",Me.font="bold 36px Open Sans, sans-serif",Me.fillText(ye,5,5),Me.strokeText(ye,5,5),de.debugOverlayTexture.update(ae),de.debugOverlayTexture.bind(we.LINEAR,we.CLAMP_TO_EDGE)}(y,`${le} ${Q}kB`),w.draw(p,m.TRIANGLES,E,k,en.alphaBlended,sn.disabled,yi(v,u.aN.transparent,he),null,B,y.debugBuffer,y.quadTriangleIndexBuffer,y.debugSegments),w.draw(p,m.LINE_STRIP,E,k,z,sn.disabled,yi(v,u.aN.red),O,B,y.debugBuffer,y.tileBorderIndexBuffer,y.debugSegments)}function Ll(y,i,c){const p=y.context,m=p.gl,v=y.colorModeForRenderPass(),w=new hr(m.LEQUAL,hr.ReadWrite,y.depthRangeFor3D),E=y.useProgram("terrain"),k=i.getTerrainMesh();p.bindFramebuffer.set(null),p.viewport.set([0,0,y.width,y.height]);for(const z of c){const B=y.renderToTexture.getTexture(z),O=i.getTerrainData(z.tileID);p.activeTexture.set(m.TEXTURE0),m.bindTexture(m.TEXTURE_2D,B.texture);const K=y.transform.calculatePosMatrix(z.tileID.toUnwrapped()),Q=i.getMeshFrameDelta(y.transform.zoom),re=y.transform.calculateFogMatrix(z.tileID.toUnwrapped()),he=Gi(K,Q,re,y.style.sky,y.transform.pitch);E.draw(p,m.TRIANGLES,w,pn.disabled,v,sn.backCCW,he,O,"terrain",k.vertexBuffer,k.indexBuffer,k.segments)}}class up{constructor(i,c,p){this.vertexBuffer=i,this.indexBuffer=c,this.segments=p}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}class hp{constructor(i,c){this.context=new vh(i),this.transform=c,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:u.ao(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=ht.maxUnderzooming+ht.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new mn}resize(i,c,p){if(this.width=Math.floor(i*p),this.height=Math.floor(c*p),this.pixelRatio=p,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const m of this.style._order)this.style._layers[m].resize()}setup(){const i=this.context,c=new u.aX;c.emplaceBack(0,0),c.emplaceBack(u.X,0),c.emplaceBack(0,u.X),c.emplaceBack(u.X,u.X),this.tileExtentBuffer=i.createVertexBuffer(c,ur.members),this.tileExtentSegments=u.a0.simpleSegment(0,0,4,2);const p=new u.aX;p.emplaceBack(0,0),p.emplaceBack(u.X,0),p.emplaceBack(0,u.X),p.emplaceBack(u.X,u.X),this.debugBuffer=i.createVertexBuffer(p,ur.members),this.debugSegments=u.a0.simpleSegment(0,0,4,5);const m=new u.$;m.emplaceBack(0,0,0,0),m.emplaceBack(u.X,0,u.X,0),m.emplaceBack(0,u.X,0,u.X),m.emplaceBack(u.X,u.X,u.X,u.X),this.rasterBoundsBuffer=i.createVertexBuffer(m,Sr.members),this.rasterBoundsSegments=u.a0.simpleSegment(0,0,4,2);const v=new u.aX;v.emplaceBack(0,0),v.emplaceBack(1,0),v.emplaceBack(0,1),v.emplaceBack(1,1),this.viewportBuffer=i.createVertexBuffer(v,ur.members),this.viewportSegments=u.a0.simpleSegment(0,0,4,2);const w=new u.aZ;w.emplaceBack(0),w.emplaceBack(1),w.emplaceBack(3),w.emplaceBack(2),w.emplaceBack(0),this.tileBorderIndexBuffer=i.createIndexBuffer(w);const E=new u.aY;E.emplaceBack(0,1,2),E.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=i.createIndexBuffer(E);const k=this.context.gl;this.stencilClearMode=new pn({func:k.ALWAYS,mask:0},0,255,k.ZERO,k.ZERO,k.ZERO)}clearStencil(){const i=this.context,c=i.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const p=u.H();u.aQ(p,0,this.width,this.height,0,0,1),u.K(p,p,[c.drawingBufferWidth,c.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(i,c.TRIANGLES,hr.disabled,this.stencilClearMode,en.disabled,sn.disabled,So(p),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(i,c){if(this.currentStencilSource===i.source||!i.isTileClipped()||!c||!c.length)return;this.currentStencilSource=i.source;const p=this.context,m=p.gl;this.nextStencilID+c.length>256&&this.clearStencil(),p.setColorMode(en.disabled),p.setDepthMode(hr.disabled);const v=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const w of c){const E=this._tileClippingMaskIDs[w.key]=this.nextStencilID++,k=this.style.map.terrain&&this.style.map.terrain.getTerrainData(w);v.draw(p,m.TRIANGLES,hr.disabled,new pn({func:m.ALWAYS,mask:0},E,255,m.KEEP,m.KEEP,m.REPLACE),en.disabled,sn.disabled,So(w.posMatrix),k,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const i=this.nextStencilID++,c=this.context.gl;return new pn({func:c.NOTEQUAL,mask:255},i,255,c.KEEP,c.KEEP,c.REPLACE)}stencilModeForClipping(i){const c=this.context.gl;return new pn({func:c.EQUAL,mask:255},this._tileClippingMaskIDs[i.key],0,c.KEEP,c.KEEP,c.REPLACE)}stencilConfigForOverlap(i){const c=this.context.gl,p=i.sort((w,E)=>E.overscaledZ-w.overscaledZ),m=p[p.length-1].overscaledZ,v=p[0].overscaledZ-m+1;if(v>1){this.currentStencilSource=void 0,this.nextStencilID+v>256&&this.clearStencil();const w={};for(let E=0;E<v;E++)w[E+m]=new pn({func:c.GEQUAL,mask:255},E+this.nextStencilID,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID+=v,[w,p]}return[{[m]:pn.disabled},p]}colorModeForRenderPass(){const i=this.context.gl;return this._showOverdrawInspector?new en([i.CONSTANT_COLOR,i.ONE],new u.aN(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?en.unblended:en.alphaBlended}depthModeForSublayer(i,c,p){if(!this.opaquePassEnabledForLayer())return hr.disabled;const m=1-((1+this.currentLayer)*this.numSublayers+i)*this.depthEpsilon;return new hr(p||this.context.gl.LEQUAL,c,[m,m])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(i,c){var p;this.style=i,this.options=c,this.lineAtlas=i.lineAtlas,this.imageManager=i.imageManager,this.glyphManager=i.glyphManager,this.symbolFadeChange=i.placement.symbolFadeChange(A.now()),this.imageManager.beginFrame();const m=this.style._order,v=this.style.sourceCaches,w={},E={},k={};for(const z in v){const B=v[z];B.used&&B.prepare(this.context),w[z]=B.getVisibleCoordinates(),E[z]=w[z].slice().reverse(),k[z]=B.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let z=0;z<m.length;z++)if(this.style._layers[m[z]].is3D()){this.opaquePassCutoff=z;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const z of m){const B=this.style._layers[z];if(!B.hasOffscreenPass()||B.isHidden(this.transform.zoom))continue;const O=E[B.source];(B.type==="custom"||O.length)&&this.renderLayer(this,v[B.source],B,O)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:c.showOverdrawInspector?u.aN.black:u.aN.transparent,depth:1}),this.clearStencil(),!((p=this.style.stylesheet)===null||p===void 0)&&p.sky&&function(z,B){const O=z.context,K=O.gl,Q=((ye,ae,we)=>({u_sky_color:ye.properties.get("sky-color"),u_horizon_color:ye.properties.get("horizon-color"),u_horizon:(ae.height/2+ae.getHorizon())*we,u_sky_horizon_blend:ye.properties.get("sky-horizon-blend")*ae.height/2*we}))(B,z.style.map.transform,z.pixelRatio),re=new hr(K.LEQUAL,hr.ReadWrite,[0,1]),he=pn.disabled,le=z.colorModeForRenderPass(),de=z.useProgram("sky");if(!B.mesh){const ye=new u.aX;ye.emplaceBack(-1,-1),ye.emplaceBack(1,-1),ye.emplaceBack(1,1),ye.emplaceBack(-1,1);const ae=new u.aY;ae.emplaceBack(0,1,2),ae.emplaceBack(0,2,3),B.mesh=new up(O.createVertexBuffer(ye,ur.members),O.createIndexBuffer(ae),u.a0.simpleSegment(0,0,ye.length,ae.length))}de.draw(O,K.TRIANGLES,re,he,le,sn.disabled,Q,void 0,"sky",B.mesh.vertexBuffer,B.mesh.indexBuffer,B.mesh.segments)}(this,this.style.sky),this._showOverdrawInspector=c.showOverdrawInspector,this.depthRangeFor3D=[0,1-(i._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=m.length-1;this.currentLayer>=0;this.currentLayer--){const z=this.style._layers[m[this.currentLayer]],B=v[z.source],O=w[z.source];this._renderTileClippingMasks(z,O),this.renderLayer(this,B,z,O)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<m.length;this.currentLayer++){const z=this.style._layers[m[this.currentLayer]],B=v[z.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(z))continue;const O=(z.type==="symbol"?k:E)[z.source];this._renderTileClippingMasks(z,w[z.source]),this.renderLayer(this,B,z,O)}if(this.options.showTileBoundaries){const z=function(B,O){let K=null;const Q=Object.values(B._layers).flatMap(de=>de.source&&!de.isHidden(O)?[B.sourceCaches[de.source]]:[]),re=Q.filter(de=>de.getSource().type==="vector"),he=Q.filter(de=>de.getSource().type!=="vector"),le=de=>{(!K||K.getSource().maxzoom<de.getSource().maxzoom)&&(K=de)};return re.forEach(de=>le(de)),K||he.forEach(de=>le(de)),K}(this.style,this.transform.zoom);z&&function(B,O,K){for(let Q=0;Q<K.length;Q++)Tr(B,O,K[Q])}(this,z,z.getVisibleCoordinates())}this.options.showPadding&&function(z){const B=z.transform.padding;es(z,z.transform.height-(B.top||0),3,Dc),es(z,B.bottom||0,3,Rl),Ch(z,B.left||0,3,Fc),Ch(z,z.transform.width-(B.right||0),3,cp);const O=z.transform.centerPoint;(function(K,Q,re,he){Ds(K,Q-1,re-10,2,20,he),Ds(K,Q-10,re-1,20,2,he)})(z,O.x,z.transform.height-O.y,Ls)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(i){if(!this.style||!this.style.map||!this.style.map.terrain)return;const c=this.terrainFacilitator.matrix,p=this.transform.modelViewProjectionMatrix;let m=this.terrainFacilitator.dirty;m||(m=i?!u.a_(c,p):!u.a$(c,p)),m||(m=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),m&&(u.b0(c,p),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(v,w){const E=v.context,k=E.gl,z=en.unblended,B=new hr(k.LEQUAL,hr.ReadWrite,[0,1]),O=w.getTerrainMesh(),K=w.sourceCache.getRenderableTiles(),Q=v.useProgram("terrainDepth");E.bindFramebuffer.set(w.getFramebuffer("depth").framebuffer),E.viewport.set([0,0,v.width/devicePixelRatio,v.height/devicePixelRatio]),E.clear({color:u.aN.transparent,depth:1});for(const re of K){const he=w.getTerrainData(re.tileID),le={u_matrix:v.transform.calculatePosMatrix(re.tileID.toUnwrapped()),u_ele_delta:w.getMeshFrameDelta(v.transform.zoom)};Q.draw(E,k.TRIANGLES,B,pn.disabled,z,sn.backCCW,le,he,"terrain",O.vertexBuffer,O.indexBuffer,O.segments)}E.bindFramebuffer.set(null),E.viewport.set([0,0,v.width,v.height])}(this,this.style.map.terrain),function(v,w){const E=v.context,k=E.gl,z=en.unblended,B=new hr(k.LEQUAL,hr.ReadWrite,[0,1]),O=w.getTerrainMesh(),K=w.getCoordsTexture(),Q=w.sourceCache.getRenderableTiles(),re=v.useProgram("terrainCoords");E.bindFramebuffer.set(w.getFramebuffer("coords").framebuffer),E.viewport.set([0,0,v.width/devicePixelRatio,v.height/devicePixelRatio]),E.clear({color:u.aN.transparent,depth:1}),w.coordsIndex=[];for(const he of Q){const le=w.getTerrainData(he.tileID);E.activeTexture.set(k.TEXTURE0),k.bindTexture(k.TEXTURE_2D,K.texture);const de={u_matrix:v.transform.calculatePosMatrix(he.tileID.toUnwrapped()),u_terrain_coords_id:(255-w.coordsIndex.length)/255,u_texture:0,u_ele_delta:w.getMeshFrameDelta(v.transform.zoom)};re.draw(E,k.TRIANGLES,B,pn.disabled,z,sn.backCCW,de,le,"terrain",O.vertexBuffer,O.indexBuffer,O.segments),w.coordsIndex.push(he.tileID.key)}E.bindFramebuffer.set(null),E.viewport.set([0,0,v.width,v.height])}(this,this.style.map.terrain))}renderLayer(i,c,p,m){if(!p.isHidden(this.transform.zoom)&&(p.type==="background"||p.type==="custom"||(m||[]).length))switch(this.id=p.id,p.type){case"symbol":(function(v,w,E,k,z){if(v.renderPass!=="translucent")return;const B=pn.disabled,O=v.colorModeForRenderPass();(E._unevaluatedLayout.hasValue("text-variable-anchor")||E._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(K,Q,re,he,le,de,ye,ae,we){const Me=Q.transform,Oe=jn(),Ge=le==="map",et=de==="map";for(const dt of K){const pt=he.getTile(dt),tt=pt.getBucket(re);if(!tt||!tt.text||!tt.text.segments.get().length)continue;const rt=u.ah(tt.textSizeData,Me.zoom),bt=zt(pt,1,Q.transform.zoom),Gt=Xr(dt.posMatrix,et,Ge,Q.transform,bt),ot=re.layout.get("icon-text-fit")!=="none"&&tt.hasIconData();if(rt){const lt=Math.pow(2,Me.zoom-pt.tileID.overscaledZ),jt=Q.style.map.terrain?(er,dr)=>Q.style.map.terrain.getElevation(dt,er,dr):null,cn=Oe.translatePosition(Me,pt,ye,ae);zc(tt,Ge,et,we,Me,Gt,dt.posMatrix,lt,rt,ot,Oe,cn,dt.toUnwrapped(),jt)}}}(k,v,E,w,E.layout.get("text-rotation-alignment"),E.layout.get("text-pitch-alignment"),E.paint.get("text-translate"),E.paint.get("text-translate-anchor"),z),E.paint.get("icon-opacity").constantOr(1)!==0&&Da(v,w,E,k,!1,E.paint.get("icon-translate"),E.paint.get("icon-translate-anchor"),E.layout.get("icon-rotation-alignment"),E.layout.get("icon-pitch-alignment"),E.layout.get("icon-keep-upright"),B,O),E.paint.get("text-opacity").constantOr(1)!==0&&Da(v,w,E,k,!0,E.paint.get("text-translate"),E.paint.get("text-translate-anchor"),E.layout.get("text-rotation-alignment"),E.layout.get("text-pitch-alignment"),E.layout.get("text-keep-upright"),B,O),w.map.showCollisionBoxes&&(lp(v,w,E,k,!0),lp(v,w,E,k,!1))})(i,c,p,m,this.style.placement.variableOffsets);break;case"circle":(function(v,w,E,k){if(v.renderPass!=="translucent")return;const z=E.paint.get("circle-opacity"),B=E.paint.get("circle-stroke-width"),O=E.paint.get("circle-stroke-opacity"),K=!E.layout.get("circle-sort-key").isConstant();if(z.constantOr(1)===0&&(B.constantOr(1)===0||O.constantOr(1)===0))return;const Q=v.context,re=Q.gl,he=v.depthModeForSublayer(0,hr.ReadOnly),le=pn.disabled,de=v.colorModeForRenderPass(),ye=[];for(let ae=0;ae<k.length;ae++){const we=k[ae],Me=w.getTile(we),Oe=Me.getBucket(E);if(!Oe)continue;const Ge=Oe.programConfigurations.get(E.id),et=v.useProgram("circle",Ge),dt=Oe.layoutVertexBuffer,pt=Oe.indexBuffer,tt=v.style.map.terrain&&v.style.map.terrain.getTerrainData(we),rt={programConfiguration:Ge,program:et,layoutVertexBuffer:dt,indexBuffer:pt,uniformValues:lo(v,we,Me,E),terrainData:tt};if(K){const bt=Oe.segments.get();for(const Gt of bt)ye.push({segments:new u.a0([Gt]),sortKey:Gt.sortKey,state:rt})}else ye.push({segments:Oe.segments,sortKey:0,state:rt})}K&&ye.sort((ae,we)=>ae.sortKey-we.sortKey);for(const ae of ye){const{programConfiguration:we,program:Me,layoutVertexBuffer:Oe,indexBuffer:Ge,uniformValues:et,terrainData:dt}=ae.state;Me.draw(Q,re.TRIANGLES,he,le,de,sn.disabled,et,dt,E.id,Oe,Ge,ae.segments,E.paint,v.transform.zoom,we)}})(i,c,p,m);break;case"heatmap":(function(v,w,E,k){if(E.paint.get("heatmap-opacity")!==0)if(v.renderPass==="offscreen"){const z=v.context,B=z.gl,O=pn.disabled,K=new en([B.ONE,B.ONE],u.aN.transparent,[!0,!0,!0,!0]);(function(Q,re,he){const le=Q.gl;Q.activeTexture.set(le.TEXTURE1),Q.viewport.set([0,0,re.width/4,re.height/4]);let de=he.heatmapFbo;if(de)le.bindTexture(le.TEXTURE_2D,de.colorAttachment.get()),Q.bindFramebuffer.set(de.framebuffer);else{const ye=le.createTexture();le.bindTexture(le.TEXTURE_2D,ye),le.texParameteri(le.TEXTURE_2D,le.TEXTURE_WRAP_S,le.CLAMP_TO_EDGE),le.texParameteri(le.TEXTURE_2D,le.TEXTURE_WRAP_T,le.CLAMP_TO_EDGE),le.texParameteri(le.TEXTURE_2D,le.TEXTURE_MIN_FILTER,le.LINEAR),le.texParameteri(le.TEXTURE_2D,le.TEXTURE_MAG_FILTER,le.LINEAR),de=he.heatmapFbo=Q.createFramebuffer(re.width/4,re.height/4,!1,!1),function(ae,we,Me,Oe){var Ge,et;const dt=ae.gl,pt=(Ge=ae.HALF_FLOAT)!==null&&Ge!==void 0?Ge:dt.UNSIGNED_BYTE,tt=(et=ae.RGBA16F)!==null&&et!==void 0?et:dt.RGBA;dt.texImage2D(dt.TEXTURE_2D,0,tt,we.width/4,we.height/4,0,dt.RGBA,pt,null),Oe.colorAttachment.set(Me)}(Q,re,ye,de)}})(z,v,E),z.clear({color:u.aN.transparent});for(let Q=0;Q<k.length;Q++){const re=k[Q];if(w.hasRenderableParent(re))continue;const he=w.getTile(re),le=he.getBucket(E);if(!le)continue;const de=le.programConfigurations.get(E.id),ye=v.useProgram("heatmap",de),{zoom:ae}=v.transform;ye.draw(z,B.TRIANGLES,hr.disabled,O,K,sn.disabled,Qn(re.posMatrix,he,ae,E.paint.get("heatmap-intensity")),null,E.id,le.layoutVertexBuffer,le.indexBuffer,le.segments,E.paint,v.transform.zoom,de)}z.viewport.set([0,0,v.width,v.height])}else v.renderPass==="translucent"&&(v.context.setColorMode(v.colorModeForRenderPass()),function(z,B){const O=z.context,K=O.gl,Q=B.heatmapFbo;if(!Q)return;O.activeTexture.set(K.TEXTURE0),K.bindTexture(K.TEXTURE_2D,Q.colorAttachment.get()),O.activeTexture.set(K.TEXTURE1);let re=B.colorRampTexture;re||(re=B.colorRampTexture=new ze(O,B.colorRamp,K.RGBA)),re.bind(K.LINEAR,K.CLAMP_TO_EDGE),z.useProgram("heatmapTexture").draw(O,K.TRIANGLES,hr.disabled,pn.disabled,z.colorModeForRenderPass(),sn.disabled,((he,le,de,ye)=>{const ae=u.H();u.aQ(ae,0,he.width,he.height,0,0,1);const we=he.context.gl;return{u_matrix:ae,u_world:[we.drawingBufferWidth,we.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:le.paint.get("heatmap-opacity")}})(z,B),null,B.id,z.viewportBuffer,z.quadTriangleIndexBuffer,z.viewportSegments,B.paint,z.transform.zoom)}(v,E))})(i,c,p,m);break;case"line":(function(v,w,E,k){if(v.renderPass!=="translucent")return;const z=E.paint.get("line-opacity"),B=E.paint.get("line-width");if(z.constantOr(1)===0||B.constantOr(1)===0)return;const O=v.depthModeForSublayer(0,hr.ReadOnly),K=v.colorModeForRenderPass(),Q=E.paint.get("line-dasharray"),re=E.paint.get("line-pattern"),he=re.constantOr(1),le=E.paint.get("line-gradient"),de=E.getCrossfadeParameters(),ye=he?"linePattern":Q?"lineSDF":le?"lineGradient":"line",ae=v.context,we=ae.gl;let Me=!0;for(const Oe of k){const Ge=w.getTile(Oe);if(he&&!Ge.patternsLoaded())continue;const et=Ge.getBucket(E);if(!et)continue;const dt=et.programConfigurations.get(E.id),pt=v.context.program.get(),tt=v.useProgram(ye,dt),rt=Me||tt.program!==pt,bt=v.style.map.terrain&&v.style.map.terrain.getTerrainData(Oe),Gt=re.constantOr(null);if(Gt&&Ge.imageAtlas){const jt=Ge.imageAtlas,cn=jt.patternPositions[Gt.to.toString()],er=jt.patternPositions[Gt.from.toString()];cn&&er&&dt.setConstantPatternPositions(cn,er)}const ot=bt?Oe:null,lt=he?Tt(v,Ge,E,de,ot):Q?Wt(v,Ge,E,Q,de,ot):le?La(v,Ge,E,et.lineClipsArray.length,ot):ua(v,Ge,E,ot);if(he)ae.activeTexture.set(we.TEXTURE0),Ge.imageAtlasTexture.bind(we.LINEAR,we.CLAMP_TO_EDGE),dt.updatePaintBuffers(de);else if(Q&&(rt||v.lineAtlas.dirty))ae.activeTexture.set(we.TEXTURE0),v.lineAtlas.bind(ae);else if(le){const jt=et.gradients[E.id];let cn=jt.texture;if(E.gradientVersion!==jt.version){let er=256;if(E.stepInterpolant){const dr=w.getSource().maxzoom,un=Oe.canonical.z===dr?Math.ceil(1<<v.transform.maxZoom-Oe.canonical.z):1;er=u.ad(u.aV(et.maxLineLength/u.X*1024*un),256,ae.maxTextureSize)}jt.gradient=u.aW({expression:E.gradientExpression(),evaluationKey:"lineProgress",resolution:er,image:jt.gradient||void 0,clips:et.lineClipsArray}),jt.texture?jt.texture.update(jt.gradient):jt.texture=new ze(ae,jt.gradient,we.RGBA),jt.version=E.gradientVersion,cn=jt.texture}ae.activeTexture.set(we.TEXTURE0),cn.bind(E.stepInterpolant?we.NEAREST:we.LINEAR,we.CLAMP_TO_EDGE)}tt.draw(ae,we.TRIANGLES,O,v.stencilModeForClipping(Oe),K,sn.disabled,lt,bt,E.id,et.layoutVertexBuffer,et.indexBuffer,et.segments,E.paint,v.transform.zoom,dt,et.layoutVertexBuffer2),Me=!1}})(i,c,p,m);break;case"fill":(function(v,w,E,k){const z=E.paint.get("fill-color"),B=E.paint.get("fill-opacity");if(B.constantOr(1)===0)return;const O=v.colorModeForRenderPass(),K=E.paint.get("fill-pattern"),Q=v.opaquePassEnabledForLayer()&&!K.constantOr(1)&&z.constantOr(u.aN.transparent).a===1&&B.constantOr(0)===1?"opaque":"translucent";if(v.renderPass===Q){const re=v.depthModeForSublayer(1,v.renderPass==="opaque"?hr.ReadWrite:hr.ReadOnly);wh(v,w,E,k,re,O,!1)}if(v.renderPass==="translucent"&&E.paint.get("fill-antialias")){const re=v.depthModeForSublayer(E.getPaintProperty("fill-outline-color")?2:0,hr.ReadOnly);wh(v,w,E,k,re,O,!0)}})(i,c,p,m);break;case"fill-extrusion":(function(v,w,E,k){const z=E.paint.get("fill-extrusion-opacity");if(z!==0&&v.renderPass==="translucent"){const B=new hr(v.context.gl.LEQUAL,hr.ReadWrite,v.depthRangeFor3D);if(z!==1||E.paint.get("fill-extrusion-pattern").constantOr(1))Rc(v,w,E,k,B,pn.disabled,en.disabled),Rc(v,w,E,k,B,v.stencilModeFor3D(),v.colorModeForRenderPass());else{const O=v.colorModeForRenderPass();Rc(v,w,E,k,B,pn.disabled,O)}}})(i,c,p,m);break;case"hillshade":(function(v,w,E,k){if(v.renderPass!=="offscreen"&&v.renderPass!=="translucent")return;const z=v.context,B=v.depthModeForSublayer(0,hr.ReadOnly),O=v.colorModeForRenderPass(),[K,Q]=v.renderPass==="translucent"?v.stencilConfigForOverlap(k):[{},k];for(const re of Q){const he=w.getTile(re);he.needsHillshadePrepare!==void 0&&he.needsHillshadePrepare&&v.renderPass==="offscreen"?Qa(v,he,E,B,pn.disabled,O):v.renderPass==="translucent"&&Sh(v,re,he,E,B,K[re.overscaledZ],O)}z.viewport.set([0,0,v.width,v.height])})(i,c,p,m);break;case"raster":(function(v,w,E,k){if(v.renderPass!=="translucent"||E.paint.get("raster-opacity")===0||!k.length)return;const z=v.context,B=z.gl,O=w.getSource(),K=v.useProgram("raster"),Q=v.colorModeForRenderPass(),[re,he]=O instanceof Zt?[{},k]:v.stencilConfigForOverlap(k),le=he[he.length-1].overscaledZ,de=!v.options.moving;for(const ye of he){const ae=v.depthModeForSublayer(ye.overscaledZ-le,E.paint.get("raster-opacity")===1?hr.ReadWrite:hr.ReadOnly,B.LESS),we=w.getTile(ye);we.registerFadeDuration(E.paint.get("raster-fade-duration"));const Me=w.findLoadedParent(ye,0),Oe=w.findLoadedSibling(ye),Ge=Lc(we,Me||Oe||null,w,E,v.transform,v.style.map.terrain);let et,dt;const pt=E.paint.get("raster-resampling")==="nearest"?B.NEAREST:B.LINEAR;z.activeTexture.set(B.TEXTURE0),we.texture.bind(pt,B.CLAMP_TO_EDGE,B.LINEAR_MIPMAP_NEAREST),z.activeTexture.set(B.TEXTURE1),Me?(Me.texture.bind(pt,B.CLAMP_TO_EDGE,B.LINEAR_MIPMAP_NEAREST),et=Math.pow(2,Me.tileID.overscaledZ-we.tileID.overscaledZ),dt=[we.tileID.canonical.x*et%1,we.tileID.canonical.y*et%1]):we.texture.bind(pt,B.CLAMP_TO_EDGE,B.LINEAR_MIPMAP_NEAREST);const tt=v.style.map.terrain&&v.style.map.terrain.getTerrainData(ye),rt=tt?ye:null,bt=rt?rt.posMatrix:v.transform.calculatePosMatrix(ye.toUnwrapped(),de),Gt=gn(bt,dt||[0,0],et||1,Ge,E);O instanceof Zt?K.draw(z,B.TRIANGLES,ae,pn.disabled,Q,sn.disabled,Gt,tt,E.id,O.boundsBuffer,v.quadTriangleIndexBuffer,O.boundsSegments):K.draw(z,B.TRIANGLES,ae,re[ye.overscaledZ],Q,sn.disabled,Gt,tt,E.id,v.rasterBoundsBuffer,v.quadTriangleIndexBuffer,v.rasterBoundsSegments)}})(i,c,p,m);break;case"background":(function(v,w,E,k){const z=E.paint.get("background-color"),B=E.paint.get("background-opacity");if(B===0)return;const O=v.context,K=O.gl,Q=v.transform,re=Q.tileSize,he=E.paint.get("background-pattern");if(v.isPatternMissing(he))return;const le=!he&&z.a===1&&B===1&&v.opaquePassEnabledForLayer()?"opaque":"translucent";if(v.renderPass!==le)return;const de=pn.disabled,ye=v.depthModeForSublayer(0,le==="opaque"?hr.ReadWrite:hr.ReadOnly),ae=v.colorModeForRenderPass(),we=v.useProgram(he?"backgroundPattern":"background"),Me=k||Q.coveringTiles({tileSize:re,terrain:v.style.map.terrain});he&&(O.activeTexture.set(K.TEXTURE0),v.imageManager.bind(v.context));const Oe=E.getCrossfadeParameters();for(const Ge of Me){const et=k?Ge.posMatrix:v.transform.calculatePosMatrix(Ge.toUnwrapped()),dt=he?ch(et,B,v,he,{tileID:Ge,tileSize:re},Oe):Ec(et,B,z),pt=v.style.map.terrain&&v.style.map.terrain.getTerrainData(Ge);we.draw(O,K.TRIANGLES,ye,de,ae,sn.disabled,dt,pt,E.id,v.tileExtentBuffer,v.quadTriangleIndexBuffer,v.tileExtentSegments)}})(i,0,p,m);break;case"custom":(function(v,w,E){const k=v.context,z=E.implementation;if(v.renderPass==="offscreen"){const B=z.prerender;B&&(v.setCustomLayerDefaults(),k.setColorMode(v.colorModeForRenderPass()),B.call(z,k.gl,v.transform.customLayerMatrix()),k.setDirty(),v.setBaseState())}else if(v.renderPass==="translucent"){v.setCustomLayerDefaults(),k.setColorMode(v.colorModeForRenderPass()),k.setStencilMode(pn.disabled);const B=z.renderingMode==="3d"?new hr(v.context.gl.LEQUAL,hr.ReadWrite,v.depthRangeFor3D):v.depthModeForSublayer(0,hr.ReadOnly);k.setDepthMode(B),z.render(k.gl,v.transform.customLayerMatrix(),{farZ:v.transform.farZ,nearZ:v.transform.nearZ,fov:v.transform._fov,modelViewProjectionMatrix:v.transform.modelViewProjectionMatrix,projectionMatrix:v.transform.projectionMatrix}),k.setDirty(),v.setBaseState(),k.bindFramebuffer.set(null)}})(i,0,p)}}translatePosMatrix(i,c,p,m,v){if(!p[0]&&!p[1])return i;const w=v?m==="map"?this.transform.angle:0:m==="viewport"?-this.transform.angle:0;if(w){const z=Math.sin(w),B=Math.cos(w);p=[p[0]*B-p[1]*z,p[0]*z+p[1]*B]}const E=[v?p[0]:zt(c,p[0],this.transform.zoom),v?p[1]:zt(c,p[1],this.transform.zoom),0],k=new Float32Array(16);return u.J(k,i,E),k}saveTileTexture(i){const c=this._tileTextures[i.size[0]];c?c.push(i):this._tileTextures[i.size[0]]=[i]}getTileTexture(i){const c=this._tileTextures[i];return c&&c.length>0?c.pop():null}isPatternMissing(i){if(!i)return!1;if(!i.from||!i.to)return!0;const c=this.imageManager.getPattern(i.from.toString()),p=this.imageManager.getPattern(i.to.toString());return!c||!p}useProgram(i,c){this.cache=this.cache||{};const p=i+(c?c.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[p]||(this.cache[p]=new ao(this.context,mr[i],c,Tc[i],this._showOverdrawInspector,this.style.map.terrain)),this.cache[p]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const i=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(i.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new ze(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:i,drawingBufferHeight:c}=this.context.gl;return this.width!==i||this.height!==c}}class ts{constructor(i,c){this.points=i,this.planes=c}static fromInvProjectionMatrix(i,c,p){const m=Math.pow(2,p),v=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(E=>{const k=1/(E=u.ag([],E,i))[3]/c*m;return u.b1(E,E,[k,k,1/E[3],k])}),w=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(E=>{const k=function(K,Q){var re=Q[0],he=Q[1],le=Q[2],de=re*re+he*he+le*le;return de>0&&(de=1/Math.sqrt(de)),K[0]=Q[0]*de,K[1]=Q[1]*de,K[2]=Q[2]*de,K}([],function(K,Q,re){var he=Q[0],le=Q[1],de=Q[2],ye=re[0],ae=re[1],we=re[2];return K[0]=le*we-de*ae,K[1]=de*ye-he*we,K[2]=he*ae-le*ye,K}([],ie([],v[E[0]],v[E[1]]),ie([],v[E[2]],v[E[1]]))),z=-((B=k)[0]*(O=v[E[1]])[0]+B[1]*O[1]+B[2]*O[2]);var B,O;return k.concat(z)});return new ts(v,w)}}class Oc{constructor(i,c){this.min=i,this.max=c,this.center=function(p,m,v){return p[0]=.5*m[0],p[1]=.5*m[1],p[2]=.5*m[2],p}([],function(p,m,v){return p[0]=m[0]+v[0],p[1]=m[1]+v[1],p[2]=m[2]+v[2],p}([],this.min,this.max))}quadrant(i){const c=[i%2==0,i<2],p=ne(this.min),m=ne(this.max);for(let v=0;v<c.length;v++)p[v]=c[v]?this.min[v]:this.center[v],m[v]=c[v]?this.center[v]:this.max[v];return m[2]=this.max[2],new Oc(p,m)}distanceX(i){return Math.max(Math.min(this.max[0],i[0]),this.min[0])-i[0]}distanceY(i){return Math.max(Math.min(this.max[1],i[1]),this.min[1])-i[1]}intersects(i){const c=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let p=!0;for(let m=0;m<i.planes.length;m++){const v=i.planes[m];let w=0;for(let E=0;E<c.length;E++)u.b2(v,c[E])>=0&&w++;if(w===0)return 0;w!==c.length&&(p=!1)}if(p)return 2;for(let m=0;m<3;m++){let v=Number.MAX_VALUE,w=-Number.MAX_VALUE;for(let E=0;E<i.points.length;E++){const k=i.points[E][m]-this.min[m];v=Math.min(v,k),w=Math.max(w,k)}if(w<0||v>this.max[m]-this.min[m])return 0}return 1}}class Bc{constructor(i=0,c=0,p=0,m=0){if(isNaN(i)||i<0||isNaN(c)||c<0||isNaN(p)||p<0||isNaN(m)||m<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=i,this.bottom=c,this.left=p,this.right=m}interpolate(i,c,p){return c.top!=null&&i.top!=null&&(this.top=u.z.number(i.top,c.top,p)),c.bottom!=null&&i.bottom!=null&&(this.bottom=u.z.number(i.bottom,c.bottom,p)),c.left!=null&&i.left!=null&&(this.left=u.z.number(i.left,c.left,p)),c.right!=null&&i.right!=null&&(this.right=u.z.number(i.right,c.right,p)),this}getCenter(i,c){const p=u.ad((this.left+i-this.right)/2,0,i),m=u.ad((this.top+c-this.bottom)/2,0,c);return new u.P(p,m)}equals(i){return this.top===i.top&&this.bottom===i.bottom&&this.left===i.left&&this.right===i.right}clone(){return new Bc(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const Eh=85.051129;class Th{constructor(i,c,p,m,v){this.tileSize=512,this._renderWorldCopies=v===void 0||!!v,this._minZoom=i||0,this._maxZoom=c||22,this._minPitch=p??0,this._maxPitch=m??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new u.N(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Bc,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={},this.minElevationForCurrentTile=0}clone(){const i=new Th(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return i.apply(this),i}apply(i){this.tileSize=i.tileSize,this.latRange=i.latRange,this.width=i.width,this.height=i.height,this._center=i._center,this._elevation=i._elevation,this.minElevationForCurrentTile=i.minElevationForCurrentTile,this.zoom=i.zoom,this.angle=i.angle,this._fov=i._fov,this._pitch=i._pitch,this._unmodified=i._unmodified,this._edgeInsets=i._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(i){this._minZoom!==i&&(this._minZoom=i,this.zoom=Math.max(this.zoom,i))}get maxZoom(){return this._maxZoom}set maxZoom(i){this._maxZoom!==i&&(this._maxZoom=i,this.zoom=Math.min(this.zoom,i))}get minPitch(){return this._minPitch}set minPitch(i){this._minPitch!==i&&(this._minPitch=i,this.pitch=Math.max(this.pitch,i))}get maxPitch(){return this._maxPitch}set maxPitch(i){this._maxPitch!==i&&(this._maxPitch=i,this.pitch=Math.min(this.pitch,i))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(i){i===void 0?i=!0:i===null&&(i=!1),this._renderWorldCopies=i}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new u.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(i){const c=-u.b3(i,-180,180)*Math.PI/180;this.angle!==c&&(this._unmodified=!1,this.angle=c,this._calcMatrices(),this.rotationMatrix=function(){var p=new u.A(4);return u.A!=Float32Array&&(p[1]=0,p[2]=0),p[0]=1,p[3]=1,p}(),function(p,m,v){var w=m[0],E=m[1],k=m[2],z=m[3],B=Math.sin(v),O=Math.cos(v);p[0]=w*O+k*B,p[1]=E*O+z*B,p[2]=w*-B+k*O,p[3]=E*-B+z*O}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(i){const c=u.ad(i,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==c&&(this._unmodified=!1,this._pitch=c,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(i){i=Math.max(.01,Math.min(60,i)),this._fov!==i&&(this._unmodified=!1,this._fov=i/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(i){const c=Math.min(Math.max(i,this.minZoom),this.maxZoom);this._zoom!==c&&(this._unmodified=!1,this._zoom=c,this.tileZoom=Math.max(0,Math.floor(c)),this.scale=this.zoomScale(c),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(i){i.lat===this._center.lat&&i.lng===this._center.lng||(this._unmodified=!1,this._center=i,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(i){i!==this._elevation&&(this._elevation=i,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(i){this._edgeInsets.equals(i)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,i,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(i){return this._edgeInsets.equals(i)}interpolatePadding(i,c,p){this._unmodified=!1,this._edgeInsets.interpolate(i,c,p),this._constrain(),this._calcMatrices()}coveringZoomLevel(i){const c=(i.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/i.tileSize));return Math.max(0,c)}getVisibleUnwrappedCoordinates(i){const c=[new u.b4(0,i)];if(this._renderWorldCopies){const p=this.pointCoordinate(new u.P(0,0)),m=this.pointCoordinate(new u.P(this.width,0)),v=this.pointCoordinate(new u.P(this.width,this.height)),w=this.pointCoordinate(new u.P(0,this.height)),E=Math.floor(Math.min(p.x,m.x,v.x,w.x)),k=Math.floor(Math.max(p.x,m.x,v.x,w.x)),z=1;for(let B=E-z;B<=k+z;B++)B!==0&&c.push(new u.b4(B,i))}return c}coveringTiles(i){var c,p;let m=this.coveringZoomLevel(i);const v=m;if(i.minzoom!==void 0&&m<i.minzoom)return[];i.maxzoom!==void 0&&m>i.maxzoom&&(m=i.maxzoom);const w=this.pointCoordinate(this.getCameraPoint()),E=u.Z.fromLngLat(this.center),k=Math.pow(2,m),z=[k*w.x,k*w.y,0],B=[k*E.x,k*E.y,0],O=ts.fromInvProjectionMatrix(this.invModelViewProjectionMatrix,this.worldSize,m);let K=i.minzoom||0;!i.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(K=m);const Q=i.terrain?2/Math.min(this.tileSize,i.tileSize)*this.tileSize:3,re=ae=>({aabb:new Oc([ae*k,0,0],[(ae+1)*k,k,0]),zoom:0,x:0,y:0,wrap:ae,fullyVisible:!1}),he=[],le=[],de=m,ye=i.reparseOverscaled?v:m;if(this._renderWorldCopies)for(let ae=1;ae<=3;ae++)he.push(re(-ae)),he.push(re(ae));for(he.push(re(0));he.length>0;){const ae=he.pop(),we=ae.x,Me=ae.y;let Oe=ae.fullyVisible;if(!Oe){const tt=ae.aabb.intersects(O);if(tt===0)continue;Oe=tt===2}const Ge=i.terrain?z:B,et=ae.aabb.distanceX(Ge),dt=ae.aabb.distanceY(Ge),pt=Math.max(Math.abs(et),Math.abs(dt));if(ae.zoom===de||pt>Q+(1<<de-ae.zoom)-2&&ae.zoom>=K){const tt=de-ae.zoom,rt=z[0]-.5-(we<<tt),bt=z[1]-.5-(Me<<tt);le.push({tileID:new u.S(ae.zoom===de?ye:ae.zoom,ae.wrap,ae.zoom,we,Me),distanceSq:_e([B[0]-.5-we,B[1]-.5-Me]),tileDistanceToCamera:Math.sqrt(rt*rt+bt*bt)})}else for(let tt=0;tt<4;tt++){const rt=(we<<1)+tt%2,bt=(Me<<1)+(tt>>1),Gt=ae.zoom+1;let ot=ae.aabb.quadrant(tt);if(i.terrain){const lt=new u.S(Gt,ae.wrap,Gt,rt,bt),jt=i.terrain.getMinMaxElevation(lt),cn=(c=jt.minElevation)!==null&&c!==void 0?c:this.elevation,er=(p=jt.maxElevation)!==null&&p!==void 0?p:this.elevation;ot=new Oc([ot.min[0],ot.min[1],cn],[ot.max[0],ot.max[1],er])}he.push({aabb:ot,zoom:Gt,x:rt,y:bt,wrap:ae.wrap,fullyVisible:Oe})}}return le.sort((ae,we)=>ae.distanceSq-we.distanceSq).map(ae=>ae.tileID)}resize(i,c){this.width=i,this.height=c,this.pixelsToGLUnits=[2/i,-2/c],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(i){return Math.pow(2,i)}scaleZoom(i){return Math.log(i)/Math.LN2}project(i){const c=u.ad(i.lat,-85.051129,Eh);return new u.P(u.O(i.lng)*this.worldSize,u.Q(c)*this.worldSize)}unproject(i){return new u.Z(i.x/this.worldSize,i.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(i){const c=this.elevation,p=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,m=this.pointLocation(this.centerPoint,i),v=i.getElevationForLngLatZoom(m,this.tileZoom);if(!(this.elevation-v))return;const w=p+c-v,E=Math.cos(this._pitch)*this.cameraToCenterDistance/w/u.b5(1,m.lat),k=this.scaleZoom(E/this.tileSize);this._elevation=v,this._center=m,this.zoom=k}setLocationAtPoint(i,c){const p=this.pointCoordinate(c),m=this.pointCoordinate(this.centerPoint),v=this.locationCoordinate(i),w=new u.Z(v.x-(p.x-m.x),v.y-(p.y-m.y));this.center=this.coordinateLocation(w),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(i,c){return c?this.coordinatePoint(this.locationCoordinate(i),c.getElevationForLngLatZoom(i,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(i))}pointLocation(i,c){return this.coordinateLocation(this.pointCoordinate(i,c))}locationCoordinate(i){return u.Z.fromLngLat(i)}coordinateLocation(i){return i&&i.toLngLat()}pointCoordinate(i,c){if(c){const K=c.pointCoordinate(i);if(K!=null)return K}const p=[i.x,i.y,0,1],m=[i.x,i.y,1,1];u.ag(p,p,this.pixelMatrixInverse),u.ag(m,m,this.pixelMatrixInverse);const v=p[3],w=m[3],E=p[1]/v,k=m[1]/w,z=p[2]/v,B=m[2]/w,O=z===B?0:(0-z)/(B-z);return new u.Z(u.z.number(p[0]/v,m[0]/w,O)/this.worldSize,u.z.number(E,k,O)/this.worldSize)}coordinatePoint(i,c=0,p=this.pixelMatrix){const m=[i.x*this.worldSize,i.y*this.worldSize,c,1];return u.ag(m,m,p),new u.P(m[0]/m[3],m[1]/m[3])}getBounds(){const i=Math.max(0,this.height/2-this.getHorizon());return new Te().extend(this.pointLocation(new u.P(0,i))).extend(this.pointLocation(new u.P(this.width,i))).extend(this.pointLocation(new u.P(this.width,this.height))).extend(this.pointLocation(new u.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new Te([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(i){i?(this.lngRange=[i.getWest(),i.getEast()],this.latRange=[i.getSouth(),i.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,Eh])}calculateTileMatrix(i){const c=i.canonical,p=this.worldSize/this.zoomScale(c.z),m=c.x+Math.pow(2,c.z)*i.wrap,v=u.ao(new Float64Array(16));return u.J(v,v,[m*p,c.y*p,0]),u.K(v,v,[p/u.X,p/u.X,1]),v}calculatePosMatrix(i,c=!1){const p=i.key,m=c?this._alignedPosMatrixCache:this._posMatrixCache;if(m[p])return m[p];const v=this.calculateTileMatrix(i);return u.L(v,c?this.alignedModelViewProjectionMatrix:this.modelViewProjectionMatrix,v),m[p]=new Float32Array(v),m[p]}calculateFogMatrix(i){const c=i.key,p=this._fogMatrixCache;if(p[c])return p[c];const m=this.calculateTileMatrix(i);return u.L(m,this.fogMatrix,m),p[c]=new Float32Array(m),p[c]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(i,c){c=u.ad(+c,this.minZoom,this.maxZoom);const p={center:new u.N(i.lng,i.lat),zoom:c};let m=this.lngRange;if(!this._renderWorldCopies&&m===null){const ae=179.9999999999;m=[-ae,ae]}const v=this.tileSize*this.zoomScale(p.zoom);let w=0,E=v,k=0,z=v,B=0,O=0;const{x:K,y:Q}=this.size;if(this.latRange){const ae=this.latRange;w=u.Q(ae[1])*v,E=u.Q(ae[0])*v,E-w<Q&&(B=Q/(E-w))}m&&(k=u.b3(u.O(m[0])*v,0,v),z=u.b3(u.O(m[1])*v,0,v),z<k&&(z+=v),z-k<K&&(O=K/(z-k)));const{x:re,y:he}=this.project.call({worldSize:v},i);let le,de;const ye=Math.max(O||0,B||0);if(ye){const ae=new u.P(O?(z+k)/2:re,B?(E+w)/2:he);return p.center=this.unproject.call({worldSize:v},ae).wrap(),p.zoom+=this.scaleZoom(ye),p}if(this.latRange){const ae=Q/2;he-ae<w&&(de=w+ae),he+ae>E&&(de=E-ae)}if(m){const ae=(k+z)/2;let we=re;this._renderWorldCopies&&(we=u.b3(re,ae-v/2,ae+v/2));const Me=K/2;we-Me<k&&(le=k+Me),we+Me>z&&(le=z-Me)}if(le!==void 0||de!==void 0){const ae=new u.P(le??re,de??he);p.center=this.unproject.call({worldSize:v},ae).wrap()}return p}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const i=this._unmodified,{center:c,zoom:p}=this.getConstrained(this.center,this.zoom);this.center=c,this.zoom=p,this._unmodified=i,this._constraining=!1}_calcMatrices(){if(!this.height)return;const i=this.centerOffset,c=this.point.x,p=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=u.b5(1,this.center.lat)*this.worldSize;let m=u.ao(new Float64Array(16));u.K(m,m,[this.width/2,-this.height/2,1]),u.J(m,m,[1,-1,0]),this.labelPlaneMatrix=m,m=u.ao(new Float64Array(16)),u.K(m,m,[1,-1,1]),u.J(m,m,[-1,-1,0]),u.K(m,m,[2/this.width,2/this.height,1]),this.glCoordMatrix=m;const v=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),w=Math.min(this.elevation,this.minElevationForCurrentTile),E=v-w*this._pixelPerMeter/Math.cos(this._pitch),k=w<0?E:v,z=Math.PI/2+this._pitch,B=this._fov*(.5+i.y/this.height),O=Math.sin(B)*k/Math.sin(u.ad(Math.PI-z-B,.01,Math.PI-.01)),K=this.getHorizon(),Q=2*Math.atan(K/this.cameraToCenterDistance)*(.5+i.y/(2*K)),re=Math.sin(Q)*k/Math.sin(u.ad(Math.PI-z-Q,.01,Math.PI-.01)),he=Math.min(O,re);this.farZ=1.01*(Math.cos(Math.PI/2-this._pitch)*he+k),this.nearZ=this.height/50,m=new Float64Array(16),u.b6(m,this._fov,this.width/this.height,this.nearZ,this.farZ),m[8]=2*-i.x/this.width,m[9]=2*i.y/this.height,this.projectionMatrix=u.af(m),u.K(m,m,[1,-1,1]),u.J(m,m,[0,0,-this.cameraToCenterDistance]),u.b7(m,m,this._pitch),u.ae(m,m,this.angle),u.J(m,m,[-c,-p,0]),this.mercatorMatrix=u.K([],m,[this.worldSize,this.worldSize,this.worldSize]),u.K(m,m,[1,1,this._pixelPerMeter]),this.pixelMatrix=u.L(new Float64Array(16),this.labelPlaneMatrix,m),u.J(m,m,[0,0,-this.elevation]),this.modelViewProjectionMatrix=m,this.invModelViewProjectionMatrix=u.at([],m),this.fogMatrix=new Float64Array(16),u.b6(this.fogMatrix,this._fov,this.width/this.height,v,this.farZ),this.fogMatrix[8]=2*-i.x/this.width,this.fogMatrix[9]=2*i.y/this.height,u.K(this.fogMatrix,this.fogMatrix,[1,-1,1]),u.J(this.fogMatrix,this.fogMatrix,[0,0,-this.cameraToCenterDistance]),u.b7(this.fogMatrix,this.fogMatrix,this._pitch),u.ae(this.fogMatrix,this.fogMatrix,this.angle),u.J(this.fogMatrix,this.fogMatrix,[-c,-p,0]),u.K(this.fogMatrix,this.fogMatrix,[1,1,this._pixelPerMeter]),u.J(this.fogMatrix,this.fogMatrix,[0,0,-this.elevation]),this.pixelMatrix3D=u.L(new Float64Array(16),this.labelPlaneMatrix,m);const le=this.width%2/2,de=this.height%2/2,ye=Math.cos(this.angle),ae=Math.sin(this.angle),we=c-Math.round(c)+ye*le+ae*de,Me=p-Math.round(p)+ye*de+ae*le,Oe=new Float64Array(m);if(u.J(Oe,Oe,[we>.5?we-1:we,Me>.5?Me-1:Me,0]),this.alignedModelViewProjectionMatrix=Oe,m=u.at(new Float64Array(16),this.pixelMatrix),!m)throw new Error("failed to invert matrix");this.pixelMatrixInverse=m,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const i=this.pointCoordinate(new u.P(0,0)),c=[i.x*this.worldSize,i.y*this.worldSize,0,1];return u.ag(c,c,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const i=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new u.P(0,i))}getCameraQueryGeometry(i){const c=this.getCameraPoint();if(i.length===1)return[i[0],c];{let p=c.x,m=c.y,v=c.x,w=c.y;for(const E of i)p=Math.min(p,E.x),m=Math.min(m,E.y),v=Math.max(v,E.x),w=Math.max(w,E.y);return[new u.P(p,m),new u.P(v,m),new u.P(v,w),new u.P(p,w),new u.P(p,m)]}}lngLatToCameraDepth(i,c){const p=this.locationCoordinate(i),m=[p.x*this.worldSize,p.y*this.worldSize,c,1];return u.ag(m,m,this.modelViewProjectionMatrix),m[2]/m[3]}}function Nc(y,i){let c,p=!1,m=null,v=null;const w=()=>{m=null,p&&(y.apply(v,c),m=setTimeout(w,i),p=!1)};return(...E)=>(p=!0,v=this,c=E,m||w(),m)}class Dl{constructor(i){this._getCurrentHash=()=>{const c=window.location.hash.replace("#","");if(this._hashName){let p;return c.split("&").map(m=>m.split("=")).forEach(m=>{m[0]===this._hashName&&(p=m)}),(p&&p[1]||"").split("/")}return c.split("/")},this._onHashChange=()=>{const c=this._getCurrentHash();if(c.length>=3&&!c.some(p=>isNaN(p))){const p=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(c[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+c[2],+c[1]],zoom:+c[0],bearing:p,pitch:+(c[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const c=window.location.href.replace(/(#.+)?$/,this.getHashString());window.history.replaceState(window.history.state,null,c)},this._removeHash=()=>{const c=this._getCurrentHash();if(c.length===0)return;const p=c.join("/");let m=p;m.split("&").length>0&&(m=m.split("&")[0]),this._hashName&&(m=`${this._hashName}=${p}`);let v=window.location.hash.replace(m,"");v.startsWith("#&")?v=v.slice(0,1)+v.slice(2):v==="#"&&(v="");let w=window.location.href.replace(/(#.+)?$/,v);w=w.replace("&&","&"),window.history.replaceState(window.history.state,null,w)},this._updateHash=Nc(this._updateHashUnthrottled,300),this._hashName=i&&encodeURIComponent(i)}addTo(i){return this._map=i,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(i){const c=this._map.getCenter(),p=Math.round(100*this._map.getZoom())/100,m=Math.ceil((p*Math.LN2+Math.log(512/360/.5))/Math.LN10),v=Math.pow(10,m),w=Math.round(c.lng*v)/v,E=Math.round(c.lat*v)/v,k=this._map.getBearing(),z=this._map.getPitch();let B="";if(B+=i?`/${w}/${E}/${p}`:`${p}/${E}/${w}`,(k||z)&&(B+="/"+Math.round(10*k)/10),z&&(B+=`/${Math.round(z)}`),this._hashName){const O=this._hashName;let K=!1;const Q=window.location.hash.slice(1).split("&").map(re=>{const he=re.split("=")[0];return he===O?(K=!0,`${he}=${B}`):re}).filter(re=>re);return K||Q.push(`${O}=${B}`),`#${Q.join("&")}`}return`#${B}`}}const rs={linearity:.3,easing:u.b8(0,0,.3,1)},Ph=u.e({deceleration:2500,maxSpeed:1400},rs),Ih=u.e({deceleration:20,maxSpeed:1400},rs),dp=u.e({deceleration:1e3,maxSpeed:360},rs),$c=u.e({deceleration:1e3,maxSpeed:90},rs);class jc{constructor(i){this._map=i,this.clear()}clear(){this._inertiaBuffer=[]}record(i){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:A.now(),settings:i})}_drainInertiaBuffer(){const i=this._inertiaBuffer,c=A.now();for(;i.length>0&&c-i[0].time>160;)i.shift()}_onMoveEnd(i){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const c={zoom:0,bearing:0,pitch:0,pan:new u.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:v}of this._inertiaBuffer)c.zoom+=v.zoomDelta||0,c.bearing+=v.bearingDelta||0,c.pitch+=v.pitchDelta||0,v.panDelta&&c.pan._add(v.panDelta),v.around&&(c.around=v.around),v.pinchAround&&(c.pinchAround=v.pinchAround);const p=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,m={};if(c.pan.mag()){const v=Vc(c.pan.mag(),p,u.e({},Ph,i||{}));m.offset=c.pan.mult(v.amount/c.pan.mag()),m.center=this._map.transform.center,Fs(m,v)}if(c.zoom){const v=Vc(c.zoom,p,Ih);m.zoom=this._map.transform.zoom+v.amount,Fs(m,v)}if(c.bearing){const v=Vc(c.bearing,p,dp);m.bearing=this._map.transform.bearing+u.ad(v.amount,-179,179),Fs(m,v)}if(c.pitch){const v=Vc(c.pitch,p,$c);m.pitch=this._map.transform.pitch+v.amount,Fs(m,v)}if(m.zoom||m.bearing){const v=c.pinchAround===void 0?c.around:c.pinchAround;m.around=v?this._map.unproject(v):this._map.getCenter()}return this.clear(),u.e(m,{noMoveStart:!0})}}function Fs(y,i){(!y.duration||y.duration<i.duration)&&(y.duration=i.duration,y.easing=i.easing)}function Vc(y,i,c){const{maxSpeed:p,linearity:m,deceleration:v}=c,w=u.ad(y*m/(i/1e3),-p,p),E=Math.abs(w)/(v*m);return{easing:c.easing,duration:1e3*E,amount:w*(E/2)}}class vi extends u.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,c,p,m={}){const v=I.mousePos(c.getCanvas(),p),w=c.unproject(v);super(i,u.e({point:v,lngLat:w,originalEvent:p},m)),this._defaultPrevented=!1,this.target=c}}class Fl extends u.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,c,p){const m=i==="touchend"?p.changedTouches:p.touches,v=I.touchPos(c.getCanvasContainer(),m),w=v.map(k=>c.unproject(k)),E=v.reduce((k,z,B,O)=>k.add(z.div(O.length)),new u.P(0,0));super(i,{points:v,point:E,lngLats:w,lngLat:c.unproject(E),originalEvent:p}),this._defaultPrevented=!1}}class kh extends u.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,c,p){super(i,{originalEvent:p}),this._defaultPrevented=!1}}class Uc{constructor(i,c){this._map=i,this._clickTolerance=c.clickTolerance}reset(){delete this._mousedownPos}wheel(i){return this._firePreventable(new kh(i.type,this._map,i))}mousedown(i,c){return this._mousedownPos=c,this._firePreventable(new vi(i.type,this._map,i))}mouseup(i){this._map.fire(new vi(i.type,this._map,i))}click(i,c){this._mousedownPos&&this._mousedownPos.dist(c)>=this._clickTolerance||this._map.fire(new vi(i.type,this._map,i))}dblclick(i){return this._firePreventable(new vi(i.type,this._map,i))}mouseover(i){this._map.fire(new vi(i.type,this._map,i))}mouseout(i){this._map.fire(new vi(i.type,this._map,i))}touchstart(i){return this._firePreventable(new Fl(i.type,this._map,i))}touchmove(i){this._map.fire(new Fl(i.type,this._map,i))}touchend(i){this._map.fire(new Fl(i.type,this._map,i))}touchcancel(i){this._map.fire(new Fl(i.type,this._map,i))}_firePreventable(i){if(this._map.fire(i),i.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Mh{constructor(i){this._map=i}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(i){this._map.fire(new vi(i.type,this._map,i))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new vi("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(i){this._delayContextMenu?this._contextMenuEvent=i:this._ignoreContextMenu||this._map.fire(new vi(i.type,this._map,i)),this._map.listens("contextmenu")&&i.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Os{constructor(i){this._map=i}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(i){return this.transform.pointLocation(u.P.convert(i),this._map.terrain)}}class Ah{constructor(i,c){this._map=i,this._tr=new Os(i),this._el=i.getCanvasContainer(),this._container=i.getContainer(),this._clickTolerance=c.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(i,c){this.isEnabled()&&i.shiftKey&&i.button===0&&(I.disableDrag(),this._startPos=this._lastPos=c,this._active=!0)}mousemoveWindow(i,c){if(!this._active)return;const p=c;if(this._lastPos.equals(p)||!this._box&&p.dist(this._startPos)<this._clickTolerance)return;const m=this._startPos;this._lastPos=p,this._box||(this._box=I.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",i));const v=Math.min(m.x,p.x),w=Math.max(m.x,p.x),E=Math.min(m.y,p.y),k=Math.max(m.y,p.y);I.setTransform(this._box,`translate(${v}px,${E}px)`),this._box.style.width=w-v+"px",this._box.style.height=k-E+"px"}mouseupWindow(i,c){if(!this._active||i.button!==0)return;const p=this._startPos,m=c;if(this.reset(),I.suppressClick(),p.x!==m.x||p.y!==m.y)return this._map.fire(new u.k("boxzoomend",{originalEvent:i})),{cameraAnimation:v=>v.fitScreenCoordinates(p,m,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",i)}keydown(i){this._active&&i.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",i))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(I.remove(this._box),this._box=null),I.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(i,c){return this._map.fire(new u.k(i,{originalEvent:c}))}}function Bs(y,i){if(y.length!==i.length)throw new Error(`The number of touches and points are not equal - touches ${y.length}, points ${i.length}`);const c={};for(let p=0;p<y.length;p++)c[y[p].identifier]=i[p];return c}class zh{constructor(i){this.reset(),this.numTouches=i.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(i,c,p){(this.centroid||p.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=i.timeStamp),p.length===this.numTouches&&(this.centroid=function(m){const v=new u.P(0,0);for(const w of m)v._add(w);return v.div(m.length)}(c),this.touches=Bs(p,c)))}touchmove(i,c,p){if(this.aborted||!this.centroid)return;const m=Bs(p,c);for(const v in this.touches){const w=m[v];(!w||w.dist(this.touches[v])>30)&&(this.aborted=!0)}}touchend(i,c,p){if((!this.centroid||i.timeStamp-this.startTime>500)&&(this.aborted=!0),p.length===0){const m=!this.aborted&&this.centroid;if(this.reset(),m)return m}}}class Rh{constructor(i){this.singleTap=new zh(i),this.numTaps=i.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(i,c,p){this.singleTap.touchstart(i,c,p)}touchmove(i,c,p){this.singleTap.touchmove(i,c,p)}touchend(i,c,p){const m=this.singleTap.touchend(i,c,p);if(m){const v=i.timeStamp-this.lastTime<500,w=!this.lastTap||this.lastTap.dist(m)<30;if(v&&w||this.reset(),this.count++,this.lastTime=i.timeStamp,this.lastTap=m,this.count===this.numTaps)return this.reset(),m}}}class fp{constructor(i){this._tr=new Os(i),this._zoomIn=new Rh({numTouches:1,numTaps:2}),this._zoomOut=new Rh({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(i,c,p){this._zoomIn.touchstart(i,c,p),this._zoomOut.touchstart(i,c,p)}touchmove(i,c,p){this._zoomIn.touchmove(i,c,p),this._zoomOut.touchmove(i,c,p)}touchend(i,c,p){const m=this._zoomIn.touchend(i,c,p),v=this._zoomOut.touchend(i,c,p),w=this._tr;return m?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:E=>E.easeTo({duration:300,zoom:w.zoom+1,around:w.unproject(m)},{originalEvent:i})}):v?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:E=>E.easeTo({duration:300,zoom:w.zoom-1,around:w.unproject(v)},{originalEvent:i})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ln{constructor(i){this._enabled=!!i.enable,this._moveStateManager=i.moveStateManager,this._clickTolerance=i.clickTolerance||1,this._moveFunction=i.move,this._activateOnStart=!!i.activateOnStart,i.assignEvents(this),this.reset()}reset(i){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(i)}_move(...i){const c=this._moveFunction(...i);if(c.bearingDelta||c.pitchDelta||c.around||c.panDelta)return this._active=!0,c}dragStart(i,c){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(i)&&(this._moveStateManager.startMove(i),this._lastPoint=c.length?c[0]:c,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(i,c){if(!this.isEnabled())return;const p=this._lastPoint;if(!p)return;if(i.preventDefault(),!this._moveStateManager.isValidMoveEvent(i))return void this.reset(i);const m=c.length?c[0]:c;return!this._moved&&m.dist(p)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=m,this._move(p,m))}dragEnd(i){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(i)&&(this._moved&&I.suppressClick(),this.reset(i))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const ns={0:1,2:2};class zi{constructor(i){this._correctEvent=i.checkCorrectEvent}startMove(i){const c=I.mouseButton(i);this._eventButton=c}endMove(i){delete this._eventButton}isValidStartEvent(i){return this._correctEvent(i)}isValidMoveEvent(i){return!function(c,p){const m=ns[p];return c.buttons===void 0||(c.buttons&m)!==m}(i,this._eventButton)}isValidEndEvent(i){return I.mouseButton(i)===this._eventButton}}class Hc{constructor(){this._firstTouch=void 0}_isOneFingerTouch(i){return i.targetTouches.length===1}_isSameTouchEvent(i){return i.targetTouches[0].identifier===this._firstTouch}startMove(i){this._firstTouch=i.targetTouches[0].identifier}endMove(i){delete this._firstTouch}isValidStartEvent(i){return this._isOneFingerTouch(i)}isValidMoveEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}isValidEndEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}}const Ol=y=>{y.mousedown=y.dragStart,y.mousemoveWindow=y.dragMove,y.mouseup=y.dragEnd,y.contextmenu=i=>{i.preventDefault()}},Lh=({enable:y,clickTolerance:i,bearingDegreesPerPixelMoved:c=.8})=>{const p=new zi({checkCorrectEvent:m=>I.mouseButton(m)===0&&m.ctrlKey||I.mouseButton(m)===2});return new ln({clickTolerance:i,move:(m,v)=>({bearingDelta:(v.x-m.x)*c}),moveStateManager:p,enable:y,assignEvents:Ol})},is=({enable:y,clickTolerance:i,pitchDegreesPerPixelMoved:c=-.5})=>{const p=new zi({checkCorrectEvent:m=>I.mouseButton(m)===0&&m.ctrlKey||I.mouseButton(m)===2});return new ln({clickTolerance:i,move:(m,v)=>({pitchDelta:(v.y-m.y)*c}),moveStateManager:p,enable:y,assignEvents:Ol})};class Bl{constructor(i,c){this._clickTolerance=i.clickTolerance||1,this._map=c,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new u.P(0,0)}minTouchs(){return this._map.cooperativeGestures.isEnabled()?2:1}touchstart(i,c,p){return this._calculateTransform(i,c,p)}touchmove(i,c,p){if(this._active&&!(p.length<this.minTouchs()))return i.preventDefault(),this._calculateTransform(i,c,p)}touchend(i,c,p){this._calculateTransform(i,c,p),this._active&&p.length<this.minTouchs()&&this.reset()}touchcancel(){this.reset()}_calculateTransform(i,c,p){p.length>0&&(this._active=!0);const m=Bs(p,c),v=new u.P(0,0),w=new u.P(0,0);let E=0;for(const z in m){const B=m[z],O=this._touches[z];O&&(v._add(B),w._add(B.sub(O)),E++,m[z]=B)}if(this._touches=m,E<this.minTouchs()||!w.mag())return;const k=w.div(E);return this._sum._add(k),this._sum.mag()<this._clickTolerance?void 0:{around:v.div(E),panDelta:k}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Nl{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(i,c,p){this._firstTwoTouches||p.length<2||(this._firstTwoTouches=[p[0].identifier,p[1].identifier],this._start([c[0],c[1]]))}touchmove(i,c,p){if(!this._firstTwoTouches)return;i.preventDefault();const[m,v]=this._firstTwoTouches,w=$l(p,c,m),E=$l(p,c,v);if(!w||!E)return;const k=this._aroundCenter?null:w.add(E).div(2);return this._move([w,E],k,i)}touchend(i,c,p){if(!this._firstTwoTouches)return;const[m,v]=this._firstTwoTouches,w=$l(p,c,m),E=$l(p,c,v);w&&E||(this._active&&I.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(i){this._enabled=!0,this._aroundCenter=!!i&&i.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function $l(y,i,c){for(let p=0;p<y.length;p++)if(y[p].identifier===c)return i[p]}function Dh(y,i){return Math.log(y/i)/Math.LN2}class Fh extends Nl{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(i){this._startDistance=this._distance=i[0].dist(i[1])}_move(i,c){const p=this._distance;if(this._distance=i[0].dist(i[1]),this._active||!(Math.abs(Dh(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Dh(this._distance,p),pinchAround:c}}}function Oh(y,i){return 180*y.angleWith(i)/Math.PI}class Bh extends Nl{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(i){this._startVector=this._vector=i[0].sub(i[1]),this._minDiameter=i[0].dist(i[1])}_move(i,c,p){const m=this._vector;if(this._vector=i[0].sub(i[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Oh(this._vector,m),pinchAround:c}}_isBelowThreshold(i){this._minDiameter=Math.min(this._minDiameter,i.mag());const c=25/(Math.PI*this._minDiameter)*360,p=Oh(i,this._startVector);return Math.abs(p)<c}}function da(y){return Math.abs(y.y)>Math.abs(y.x)}class Nh extends Nl{constructor(i){super(),this._currentTouchCount=0,this._map=i}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(i,c,p){super.touchstart(i,c,p),this._currentTouchCount=p.length}_start(i){this._lastPoints=i,da(i[0].sub(i[1]))&&(this._valid=!1)}_move(i,c,p){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const m=i[0].sub(this._lastPoints[0]),v=i[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(m,v,p.timeStamp),this._valid?(this._lastPoints=i,this._active=!0,{pitchDelta:(m.y+v.y)/2*-.5}):void 0}gestureBeginsVertically(i,c,p){if(this._valid!==void 0)return this._valid;const m=i.mag()>=2,v=c.mag()>=2;if(!m&&!v)return;if(!m||!v)return this._firstMove===void 0&&(this._firstMove=p),p-this._firstMove<100&&void 0;const w=i.y>0==c.y>0;return da(i)&&da(c)&&w}}const pp={panStep:100,bearingStep:15,pitchStep:10};class $h{constructor(i){this._tr=new Os(i);const c=pp;this._panStep=c.panStep,this._bearingStep=c.bearingStep,this._pitchStep=c.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(i){if(i.altKey||i.ctrlKey||i.metaKey)return;let c=0,p=0,m=0,v=0,w=0;switch(i.keyCode){case 61:case 107:case 171:case 187:c=1;break;case 189:case 109:case 173:c=-1;break;case 37:i.shiftKey?p=-1:(i.preventDefault(),v=-1);break;case 39:i.shiftKey?p=1:(i.preventDefault(),v=1);break;case 38:i.shiftKey?m=1:(i.preventDefault(),w=-1);break;case 40:i.shiftKey?m=-1:(i.preventDefault(),w=1);break;default:return}return this._rotationDisabled&&(p=0,m=0),{cameraAnimation:E=>{const k=this._tr;E.easeTo({duration:300,easeId:"keyboardHandler",easing:mp,zoom:c?Math.round(k.zoom)+c*(i.shiftKey?2:1):k.zoom,bearing:k.bearing+p*this._bearingStep,pitch:k.pitch+m*this._pitchStep,offset:[-v*this._panStep,-w*this._panStep],center:k.center},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function mp(y){return y*(2-y)}const jh=4.000244140625;class Vh{constructor(i,c){this._onTimeout=p=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(p)},this._map=i,this._tr=new Os(i),this._triggerRenderFrame=c,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(i){this._defaultZoomRate=i}setWheelZoomRate(i){this._wheelZoomRate=i}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(i){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!i&&i.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(i){if(!this.isEnabled()||this._map.cooperativeGestures.shouldPreventWheelEvent(i))return;let c=i.deltaMode===WheelEvent.DOM_DELTA_LINE?40*i.deltaY:i.deltaY;const p=A.now(),m=p-(this._lastWheelEventTime||0);this._lastWheelEventTime=p,c!==0&&c%jh==0?this._type="wheel":c!==0&&Math.abs(c)<4?this._type="trackpad":m>400?(this._type=null,this._lastValue=c,this._timeout=setTimeout(this._onTimeout,40,i)):this._type||(this._type=Math.abs(m*c)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,c+=this._lastValue)),i.shiftKey&&c&&(c/=4),this._type&&(this._lastWheelEvent=i,this._delta-=c,this._active||this._start(i)),i.preventDefault()}_start(i){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const c=I.mousePos(this._map.getCanvas(),i),p=this._tr;this._around=c.y>p.transform.height/2-p.transform.getHorizon()?u.N.convert(this._aroundCenter?p.center:p.unproject(c)):u.N.convert(p.center),this._aroundPoint=p.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const i=this._tr.transform;if(this._delta!==0){const k=this._type==="wheel"&&Math.abs(this._delta)>jh?this._wheelZoomRate:this._defaultZoomRate;let z=2/(1+Math.exp(-Math.abs(this._delta*k)));this._delta<0&&z!==0&&(z=1/z);const B=typeof this._targetZoom=="number"?i.zoomScale(this._targetZoom):i.scale;this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,i.scaleZoom(B*z))),this._type==="wheel"&&(this._startZoom=i.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const c=typeof this._targetZoom=="number"?this._targetZoom:i.zoom,p=this._startZoom,m=this._easing;let v,w=!1;const E=A.now()-this._lastWheelEventTime;if(this._type==="wheel"&&p&&m&&E){const k=Math.min(E/200,1),z=m(k);v=u.z.number(p,c,z),k<1?this._frameId||(this._frameId=!0):w=!0}else v=c,w=!0;return this._active=!0,w&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!w,zoomDelta:v-i.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(i){let c=u.b9;if(this._prevEase){const p=this._prevEase,m=(A.now()-p.start)/p.duration,v=p.easing(m+.01)-p.easing(m),w=.27/Math.sqrt(v*v+1e-4)*.01,E=Math.sqrt(.0729-w*w);c=u.b8(w,E,.25,1)}return this._prevEase={start:A.now(),duration:i,easing:c},c}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Uh{constructor(i,c){this._clickZoom=i,this._tapZoom=c}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class jl{constructor(i){this._tr=new Os(i),this.reset()}reset(){this._active=!1}dblclick(i,c){return i.preventDefault(),{cameraAnimation:p=>{p.easeTo({duration:300,zoom:this._tr.zoom+(i.shiftKey?-1:1),around:this._tr.unproject(c)},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class gp{constructor(){this._tap=new Rh({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(i,c,p){if(!this._swipePoint)if(this._tapTime){const m=c[0],v=i.timeStamp-this._tapTime<500,w=this._tapPoint.dist(m)<30;v&&w?p.length>0&&(this._swipePoint=m,this._swipeTouch=p[0].identifier):this.reset()}else this._tap.touchstart(i,c,p)}touchmove(i,c,p){if(this._tapTime){if(this._swipePoint){if(p[0].identifier!==this._swipeTouch)return;const m=c[0],v=m.y-this._swipePoint.y;return this._swipePoint=m,i.preventDefault(),this._active=!0,{zoomDelta:v/128}}}else this._tap.touchmove(i,c,p)}touchend(i,c,p){if(this._tapTime)this._swipePoint&&p.length===0&&this.reset();else{const m=this._tap.touchend(i,c,p);m&&(this._tapTime=i.timeStamp,this._tapPoint=m)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class co{constructor(i,c,p){this._el=i,this._mousePan=c,this._touchPan=p}enable(i){this._inertiaOptions=i||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Co{constructor(i,c,p){this._pitchWithRotate=i.pitchWithRotate,this._mouseRotate=c,this._mousePitch=p}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Hh{constructor(i,c,p,m){this._el=i,this._touchZoom=c,this._touchRotate=p,this._tapDragZoom=m,this._rotationDisabled=!1,this._enabled=!0}enable(i){this._touchZoom.enable(i),this._rotationDisabled||this._touchRotate.enable(i),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class Eo{constructor(i,c){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=i,this._options=c,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const i=this._map.getCanvasContainer();i.classList.add("maplibregl-cooperative-gestures"),this._container=I.create("div","maplibregl-cooperative-gesture-screen",i);let c=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(c=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const p=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),m=document.createElement("div");m.className="maplibregl-desktop-message",m.textContent=c,this._container.appendChild(m);const v=document.createElement("div");v.className="maplibregl-mobile-message",v.textContent=p,this._container.appendChild(v),this._container.setAttribute("aria-hidden","true")}_destoryUI(){this._container&&(I.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destoryUI()}isEnabled(){return this._enabled}touchmove(i){this._onCooperativeGesture(i.touches.length===1)}wheel(i){if(!this._map.scrollZoom.isEnabled())return;const c=this.shouldPreventWheelEvent(i);this._onCooperativeGesture(c)}shouldPreventWheelEvent(i){return!!this.isEnabled()&&!(i[this._bypassKey]||i.ctrlKey)}_onCooperativeGesture(i){this._enabled&&i&&(this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const fa=y=>y.zoom||y.drag||y.pitch||y.rotate;class Fy extends u.k{}function qh(y){return y.panDelta&&y.panDelta.mag()||y.zoomDelta||y.bearingDelta||y.pitchDelta}class Oy{constructor(i,c){this.handleWindowEvent=m=>{this.handleEvent(m,`${m.type}Window`)},this.handleEvent=(m,v)=>{if(m.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const w=m.type==="renderFrame"?void 0:m,E={needsRenderFrame:!1},k={},z={},B=m.touches,O=B?this._getMapTouches(B):void 0,K=O?I.touchPos(this._map.getCanvas(),O):I.mousePos(this._map.getCanvas(),m);for(const{handlerName:he,handler:le,allowed:de}of this._handlers){if(!le.isEnabled())continue;let ye;this._blockedByActive(z,de,he)?le.reset():le[v||m.type]&&(ye=le[v||m.type](m,K,O),this.mergeHandlerResult(E,k,ye,he,w),ye&&ye.needsRenderFrame&&this._triggerRenderFrame()),(ye||le.isActive())&&(z[he]=le)}const Q={};for(const he in this._previousActiveHandlers)z[he]||(Q[he]=w);this._previousActiveHandlers=z,(Object.keys(Q).length||qh(E))&&(this._changes.push([E,k,Q]),this._triggerRenderFrame()),(Object.keys(z).length||qh(E))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:re}=E;re&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],re(this._map))},this._map=i,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new jc(i),this._bearingSnap=c.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(c);const p=this._el;this._listeners=[[p,"touchstart",{passive:!0}],[p,"touchmove",{passive:!1}],[p,"touchend",void 0],[p,"touchcancel",void 0],[p,"mousedown",void 0],[p,"mousemove",void 0],[p,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[p,"mouseover",void 0],[p,"mouseout",void 0],[p,"dblclick",void 0],[p,"click",void 0],[p,"keydown",{capture:!1}],[p,"keyup",void 0],[p,"wheel",{passive:!1}],[p,"contextmenu",void 0],[window,"blur",void 0]];for(const[m,v,w]of this._listeners)I.addEventListener(m,v,m===document?this.handleWindowEvent:this.handleEvent,w)}destroy(){for(const[i,c,p]of this._listeners)I.removeEventListener(i,c,i===document?this.handleWindowEvent:this.handleEvent,p)}_addDefaultHandlers(i){const c=this._map,p=c.getCanvasContainer();this._add("mapEvent",new Uc(c,i));const m=c.boxZoom=new Ah(c,i);this._add("boxZoom",m),i.interactive&&i.boxZoom&&m.enable();const v=c.cooperativeGestures=new Eo(c,i.cooperativeGestures);this._add("cooperativeGestures",v),i.cooperativeGestures&&v.enable();const w=new fp(c),E=new jl(c);c.doubleClickZoom=new Uh(E,w),this._add("tapZoom",w),this._add("clickZoom",E),i.interactive&&i.doubleClickZoom&&c.doubleClickZoom.enable();const k=new gp;this._add("tapDragZoom",k);const z=c.touchPitch=new Nh(c);this._add("touchPitch",z),i.interactive&&i.touchPitch&&c.touchPitch.enable(i.touchPitch);const B=Lh(i),O=is(i);c.dragRotate=new Co(i,B,O),this._add("mouseRotate",B,["mousePitch"]),this._add("mousePitch",O,["mouseRotate"]),i.interactive&&i.dragRotate&&c.dragRotate.enable();const K=(({enable:ye,clickTolerance:ae})=>{const we=new zi({checkCorrectEvent:Me=>I.mouseButton(Me)===0&&!Me.ctrlKey});return new ln({clickTolerance:ae,move:(Me,Oe)=>({around:Oe,panDelta:Oe.sub(Me)}),activateOnStart:!0,moveStateManager:we,enable:ye,assignEvents:Ol})})(i),Q=new Bl(i,c);c.dragPan=new co(p,K,Q),this._add("mousePan",K),this._add("touchPan",Q,["touchZoom","touchRotate"]),i.interactive&&i.dragPan&&c.dragPan.enable(i.dragPan);const re=new Bh,he=new Fh;c.touchZoomRotate=new Hh(p,he,re,k),this._add("touchRotate",re,["touchPan","touchZoom"]),this._add("touchZoom",he,["touchPan","touchRotate"]),i.interactive&&i.touchZoomRotate&&c.touchZoomRotate.enable(i.touchZoomRotate);const le=c.scrollZoom=new Vh(c,()=>this._triggerRenderFrame());this._add("scrollZoom",le,["mousePan"]),i.interactive&&i.scrollZoom&&c.scrollZoom.enable(i.scrollZoom);const de=c.keyboard=new $h(c);this._add("keyboard",de),i.interactive&&i.keyboard&&c.keyboard.enable(),this._add("blockableMapEvent",new Mh(c))}_add(i,c,p){this._handlers.push({handlerName:i,handler:c,allowed:p}),this._handlersById[i]=c}stop(i){if(!this._updatingCamera){for(const{handler:c}of this._handlers)c.reset();this._inertia.clear(),this._fireEvents({},{},i),this._changes=[]}}isActive(){for(const{handler:i}of this._handlers)if(i.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!fa(this._eventsInProgress)||this.isZooming()}_blockedByActive(i,c,p){for(const m in i)if(m!==p&&(!c||c.indexOf(m)<0))return!0;return!1}_getMapTouches(i){const c=[];for(const p of i)this._el.contains(p.target)&&c.push(p);return c}mergeHandlerResult(i,c,p,m,v){if(!p)return;u.e(i,p);const w={handlerName:m,originalEvent:p.originalEvent||v};p.zoomDelta!==void 0&&(c.zoom=w),p.panDelta!==void 0&&(c.drag=w),p.pitchDelta!==void 0&&(c.pitch=w),p.bearingDelta!==void 0&&(c.rotate=w)}_applyChanges(){const i={},c={},p={};for(const[m,v,w]of this._changes)m.panDelta&&(i.panDelta=(i.panDelta||new u.P(0,0))._add(m.panDelta)),m.zoomDelta&&(i.zoomDelta=(i.zoomDelta||0)+m.zoomDelta),m.bearingDelta&&(i.bearingDelta=(i.bearingDelta||0)+m.bearingDelta),m.pitchDelta&&(i.pitchDelta=(i.pitchDelta||0)+m.pitchDelta),m.around!==void 0&&(i.around=m.around),m.pinchAround!==void 0&&(i.pinchAround=m.pinchAround),m.noInertia&&(i.noInertia=m.noInertia),u.e(c,v),u.e(p,w);this._updateMapTransform(i,c,p),this._changes=[]}_updateMapTransform(i,c,p){const m=this._map,v=m._getTransformForUpdate(),w=m.terrain;if(!(qh(i)||w&&this._terrainMovement))return this._fireEvents(c,p,!0);let{panDelta:E,zoomDelta:k,bearingDelta:z,pitchDelta:B,around:O,pinchAround:K}=i;K!==void 0&&(O=K),m._stop(!0),O=O||m.transform.centerPoint;const Q=v.pointLocation(E?O.sub(E):O);z&&(v.bearing+=z),B&&(v.pitch+=B),k&&(v.zoom+=k),w?this._terrainMovement||!c.drag&&!c.zoom?c.drag&&this._terrainMovement?v.center=v.pointLocation(v.centerPoint.sub(E)):v.setLocationAtPoint(Q,O):(this._terrainMovement=!0,this._map._elevationFreeze=!0,v.setLocationAtPoint(Q,O)):v.setLocationAtPoint(Q,O),m._applyUpdatedTransform(v),this._map._update(),i.noInertia||this._inertia.record(i),this._fireEvents(c,p,!0)}_fireEvents(i,c,p){const m=fa(this._eventsInProgress),v=fa(i),w={};for(const O in i){const{originalEvent:K}=i[O];this._eventsInProgress[O]||(w[`${O}start`]=K),this._eventsInProgress[O]=i[O]}!m&&v&&this._fireEvent("movestart",v.originalEvent);for(const O in w)this._fireEvent(O,w[O]);v&&this._fireEvent("move",v.originalEvent);for(const O in i){const{originalEvent:K}=i[O];this._fireEvent(O,K)}const E={};let k;for(const O in this._eventsInProgress){const{handlerName:K,originalEvent:Q}=this._eventsInProgress[O];this._handlersById[K].isActive()||(delete this._eventsInProgress[O],k=c[K]||Q,E[`${O}end`]=k)}for(const O in E)this._fireEvent(O,E[O]);const z=fa(this._eventsInProgress),B=(m||v)&&!z;if(B&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const O=this._map._getTransformForUpdate();O.recalculateZoom(this._map.terrain),this._map._applyUpdatedTransform(O)}if(p&&B){this._updatingCamera=!0;const O=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),K=Q=>Q!==0&&-this._bearingSnap<Q&&Q<this._bearingSnap;!O||!O.essential&&A.prefersReducedMotion?(this._map.fire(new u.k("moveend",{originalEvent:k})),K(this._map.getBearing())&&this._map.resetNorth()):(K(O.bearing||this._map.getBearing())&&(O.bearing=0),O.freezeElevation=!0,this._map.easeTo(O,{originalEvent:k})),this._updatingCamera=!1}}_fireEvent(i,c){this._map.fire(new u.k(i,c?{originalEvent:c}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(i=>{delete this._frameId,this.handleEvent(new Fy("renderFrame",{timeStamp:i})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class By extends u.E{constructor(i,c){super(),this._renderFrameCallback=()=>{const p=Math.min((A.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(p)),p<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=c.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new u.N(this.transform.center.lng,this.transform.center.lat)}setCenter(i,c){return this.jumpTo({center:i},c)}panBy(i,c,p){return i=u.P.convert(i).mult(-1),this.panTo(this.transform.center,u.e({offset:i},c),p)}panTo(i,c,p){return this.easeTo(u.e({center:i},c),p)}getZoom(){return this.transform.zoom}setZoom(i,c){return this.jumpTo({zoom:i},c),this}zoomTo(i,c,p){return this.easeTo(u.e({zoom:i},c),p)}zoomIn(i,c){return this.zoomTo(this.getZoom()+1,i,c),this}zoomOut(i,c){return this.zoomTo(this.getZoom()-1,i,c),this}getBearing(){return this.transform.bearing}setBearing(i,c){return this.jumpTo({bearing:i},c),this}getPadding(){return this.transform.padding}setPadding(i,c){return this.jumpTo({padding:i},c),this}rotateTo(i,c,p){return this.easeTo(u.e({bearing:i},c),p)}resetNorth(i,c){return this.rotateTo(0,u.e({duration:1e3},i),c),this}resetNorthPitch(i,c){return this.easeTo(u.e({bearing:0,pitch:0,duration:1e3},i),c),this}snapToNorth(i,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(i,c):this}getPitch(){return this.transform.pitch}setPitch(i,c){return this.jumpTo({pitch:i},c),this}cameraForBounds(i,c){i=Te.convert(i);const p=c&&c.bearing||0;return this._cameraForBoxAndBearing(i.getNorthWest(),i.getSouthEast(),p,c)}_cameraForBoxAndBearing(i,c,p,m){const v={top:0,bottom:0,right:0,left:0};if(typeof(m=u.e({padding:v,offset:[0,0],maxZoom:this.transform.maxZoom},m)).padding=="number"){const tt=m.padding;m.padding={top:tt,bottom:tt,right:tt,left:tt}}m.padding=u.e(v,m.padding);const w=this.transform,E=w.padding,k=new Te(i,c),z=w.project(k.getNorthWest()),B=w.project(k.getNorthEast()),O=w.project(k.getSouthEast()),K=w.project(k.getSouthWest()),Q=u.ba(-p),re=z.rotate(Q),he=B.rotate(Q),le=O.rotate(Q),de=K.rotate(Q),ye=new u.P(Math.max(re.x,he.x,de.x,le.x),Math.max(re.y,he.y,de.y,le.y)),ae=new u.P(Math.min(re.x,he.x,de.x,le.x),Math.min(re.y,he.y,de.y,le.y)),we=ye.sub(ae),Me=(w.width-(E.left+E.right+m.padding.left+m.padding.right))/we.x,Oe=(w.height-(E.top+E.bottom+m.padding.top+m.padding.bottom))/we.y;if(Oe<0||Me<0)return void u.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const Ge=Math.min(w.scaleZoom(w.scale*Math.min(Me,Oe)),m.maxZoom),et=u.P.convert(m.offset),dt=new u.P((m.padding.left-m.padding.right)/2,(m.padding.top-m.padding.bottom)/2).rotate(u.ba(p)),pt=et.add(dt).mult(w.scale/w.zoomScale(Ge));return{center:w.unproject(z.add(O).div(2).sub(pt)),zoom:Ge,bearing:p}}fitBounds(i,c,p){return this._fitInternal(this.cameraForBounds(i,c),c,p)}fitScreenCoordinates(i,c,p,m,v){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(u.P.convert(i)),this.transform.pointLocation(u.P.convert(c)),p,m),m,v)}_fitInternal(i,c,p){return i?(delete(c=u.e(i,c)).padding,c.linear?this.easeTo(c,p):this.flyTo(c,p)):this}jumpTo(i,c){this.stop();const p=this._getTransformForUpdate();let m=!1,v=!1,w=!1;return"zoom"in i&&p.zoom!==+i.zoom&&(m=!0,p.zoom=+i.zoom),i.center!==void 0&&(p.center=u.N.convert(i.center)),"bearing"in i&&p.bearing!==+i.bearing&&(v=!0,p.bearing=+i.bearing),"pitch"in i&&p.pitch!==+i.pitch&&(w=!0,p.pitch=+i.pitch),i.padding==null||p.isPaddingEqual(i.padding)||(p.padding=i.padding),this._applyUpdatedTransform(p),this.fire(new u.k("movestart",c)).fire(new u.k("move",c)),m&&this.fire(new u.k("zoomstart",c)).fire(new u.k("zoom",c)).fire(new u.k("zoomend",c)),v&&this.fire(new u.k("rotatestart",c)).fire(new u.k("rotate",c)).fire(new u.k("rotateend",c)),w&&this.fire(new u.k("pitchstart",c)).fire(new u.k("pitch",c)).fire(new u.k("pitchend",c)),this.fire(new u.k("moveend",c))}calculateCameraOptionsFromTo(i,c,p,m=0){const v=u.Z.fromLngLat(i,c),w=u.Z.fromLngLat(p,m),E=w.x-v.x,k=w.y-v.y,z=w.z-v.z,B=Math.hypot(E,k,z);if(B===0)throw new Error("Can't calculate camera options with same From and To");const O=Math.hypot(E,k),K=this.transform.scaleZoom(this.transform.cameraToCenterDistance/B/this.transform.tileSize),Q=180*Math.atan2(E,-k)/Math.PI;let re=180*Math.acos(O/B)/Math.PI;return re=z<0?90-re:90+re,{center:w.toLngLat(),zoom:K,pitch:re,bearing:Q}}easeTo(i,c){var p;this._stop(!1,i.easeId),((i=u.e({offset:[0,0],duration:500,easing:u.b9},i)).animate===!1||!i.essential&&A.prefersReducedMotion)&&(i.duration=0);const m=this._getTransformForUpdate(),v=this.getZoom(),w=this.getBearing(),E=this.getPitch(),k=this.getPadding(),z="bearing"in i?this._normalizeBearing(i.bearing,w):w,B="pitch"in i?+i.pitch:E,O="padding"in i?i.padding:m.padding,K=u.P.convert(i.offset);let Q=m.centerPoint.add(K);const re=m.pointLocation(Q),{center:he,zoom:le}=m.getConstrained(u.N.convert(i.center||re),(p=i.zoom)!==null&&p!==void 0?p:v);this._normalizeCenter(he);const de=m.project(re),ye=m.project(he).sub(de),ae=m.zoomScale(le-v);let we,Me;i.around&&(we=u.N.convert(i.around),Me=m.locationPoint(we));const Oe={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||le!==v,this._rotating=this._rotating||w!==z,this._pitching=this._pitching||B!==E,this._padding=!m.isPaddingEqual(O),this._easeId=i.easeId,this._prepareEase(c,i.noMoveStart,Oe),this.terrain&&this._prepareElevation(he),this._ease(Ge=>{if(this._zooming&&(m.zoom=u.z.number(v,le,Ge)),this._rotating&&(m.bearing=u.z.number(w,z,Ge)),this._pitching&&(m.pitch=u.z.number(E,B,Ge)),this._padding&&(m.interpolatePadding(k,O,Ge),Q=m.centerPoint.add(K)),this.terrain&&!i.freezeElevation&&this._updateElevation(Ge),we)m.setLocationAtPoint(we,Me);else{const et=m.zoomScale(m.zoom-v),dt=le>v?Math.min(2,ae):Math.max(.5,ae),pt=Math.pow(dt,1-Ge),tt=m.unproject(de.add(ye.mult(Ge*pt)).mult(et));m.setLocationAtPoint(m.renderWorldCopies?tt.wrap():tt,Q)}this._applyUpdatedTransform(m),this._fireMoveEvents(c)},Ge=>{this.terrain&&i.freezeElevation&&this._finalizeElevation(),this._afterEase(c,Ge)},i),this}_prepareEase(i,c,p={}){this._moving=!0,c||p.moving||this.fire(new u.k("movestart",i)),this._zooming&&!p.zooming&&this.fire(new u.k("zoomstart",i)),this._rotating&&!p.rotating&&this.fire(new u.k("rotatestart",i)),this._pitching&&!p.pitching&&this.fire(new u.k("pitchstart",i))}_prepareElevation(i){this._elevationCenter=i,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(i,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(i){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const c=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(i<1&&c!==this._elevationTarget){const p=this._elevationTarget-this._elevationStart;this._elevationStart+=i*(p-(c-(p*i+this._elevationStart))/(1-i)),this._elevationTarget=c}this.transform.elevation=u.z.number(this._elevationStart,this._elevationTarget,i)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(i){if(!this.transformCameraUpdate)return;const c=i.clone(),{center:p,zoom:m,pitch:v,bearing:w,elevation:E}=this.transformCameraUpdate(c);p&&(c.center=p),m!==void 0&&(c.zoom=m),v!==void 0&&(c.pitch=v),w!==void 0&&(c.bearing=w),E!==void 0&&(c.elevation=E),this.transform.apply(c)}_fireMoveEvents(i){this.fire(new u.k("move",i)),this._zooming&&this.fire(new u.k("zoom",i)),this._rotating&&this.fire(new u.k("rotate",i)),this._pitching&&this.fire(new u.k("pitch",i))}_afterEase(i,c){if(this._easeId&&c&&this._easeId===c)return;delete this._easeId;const p=this._zooming,m=this._rotating,v=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,p&&this.fire(new u.k("zoomend",i)),m&&this.fire(new u.k("rotateend",i)),v&&this.fire(new u.k("pitchend",i)),this.fire(new u.k("moveend",i))}flyTo(i,c){var p;if(!i.essential&&A.prefersReducedMotion){const lt=u.M(i,["center","zoom","bearing","pitch","around"]);return this.jumpTo(lt,c)}this.stop(),i=u.e({offset:[0,0],speed:1.2,curve:1.42,easing:u.b9},i);const m=this._getTransformForUpdate(),v=this.getZoom(),w=this.getBearing(),E=this.getPitch(),k=this.getPadding(),z="bearing"in i?this._normalizeBearing(i.bearing,w):w,B="pitch"in i?+i.pitch:E,O="padding"in i?i.padding:m.padding,K=u.P.convert(i.offset);let Q=m.centerPoint.add(K);const re=m.pointLocation(Q),{center:he,zoom:le}=m.getConstrained(u.N.convert(i.center||re),(p=i.zoom)!==null&&p!==void 0?p:v);this._normalizeCenter(he);const de=m.zoomScale(le-v),ye=m.project(re),ae=m.project(he).sub(ye);let we=i.curve;const Me=Math.max(m.width,m.height),Oe=Me/de,Ge=ae.mag();if("minZoom"in i){const lt=u.ad(Math.min(i.minZoom,v,le),m.minZoom,m.maxZoom),jt=Me/m.zoomScale(lt-v);we=Math.sqrt(jt/Ge*2)}const et=we*we;function dt(lt){const jt=(Oe*Oe-Me*Me+(lt?-1:1)*et*et*Ge*Ge)/(2*(lt?Oe:Me)*et*Ge);return Math.log(Math.sqrt(jt*jt+1)-jt)}function pt(lt){return(Math.exp(lt)-Math.exp(-lt))/2}function tt(lt){return(Math.exp(lt)+Math.exp(-lt))/2}const rt=dt(!1);let bt=function(lt){return tt(rt)/tt(rt+we*lt)},Gt=function(lt){return Me*((tt(rt)*(pt(jt=rt+we*lt)/tt(jt))-pt(rt))/et)/Ge;var jt},ot=(dt(!0)-rt)/we;if(Math.abs(Ge)<1e-6||!isFinite(ot)){if(Math.abs(Me-Oe)<1e-6)return this.easeTo(i,c);const lt=Oe<Me?-1:1;ot=Math.abs(Math.log(Oe/Me))/we,Gt=()=>0,bt=jt=>Math.exp(lt*we*jt)}return i.duration="duration"in i?+i.duration:1e3*ot/("screenSpeed"in i?+i.screenSpeed/we:+i.speed),i.maxDuration&&i.duration>i.maxDuration&&(i.duration=0),this._zooming=!0,this._rotating=w!==z,this._pitching=B!==E,this._padding=!m.isPaddingEqual(O),this._prepareEase(c,!1),this.terrain&&this._prepareElevation(he),this._ease(lt=>{const jt=lt*ot,cn=1/bt(jt);m.zoom=lt===1?le:v+m.scaleZoom(cn),this._rotating&&(m.bearing=u.z.number(w,z,lt)),this._pitching&&(m.pitch=u.z.number(E,B,lt)),this._padding&&(m.interpolatePadding(k,O,lt),Q=m.centerPoint.add(K)),this.terrain&&!i.freezeElevation&&this._updateElevation(lt);const er=lt===1?he:m.unproject(ye.add(ae.mult(Gt(jt))).mult(cn));m.setLocationAtPoint(m.renderWorldCopies?er.wrap():er,Q),this._applyUpdatedTransform(m),this._fireMoveEvents(c)},()=>{this.terrain&&i.freezeElevation&&this._finalizeElevation(),this._afterEase(c)},i),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(i,c){var p;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const m=this._onEaseEnd;delete this._onEaseEnd,m.call(this,c)}return i||(p=this.handlers)===null||p===void 0||p.stop(!1),this}_ease(i,c,p){p.animate===!1||p.duration===0?(i(1),c()):(this._easeStart=A.now(),this._easeOptions=p,this._onEaseFrame=i,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(i,c){i=u.b3(i,-180,180);const p=Math.abs(i-c);return Math.abs(i-360-c)<p&&(i-=360),Math.abs(i+360-c)<p&&(i+=360),i}_normalizeCenter(i){const c=this.transform;if(!c.renderWorldCopies||c.lngRange)return;const p=i.lng-c.center.lng;i.lng+=p>180?-360:p<-180?360:0}queryTerrainElevation(i){return this.terrain?this.terrain.getElevationForLngLatZoom(u.N.convert(i),this.transform.tileZoom)-this.transform.elevation:null}}const Wh={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Ns{constructor(i=Wh){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=c=>{!c||c.sourceDataType!=="metadata"&&c.sourceDataType!=="visibility"&&c.dataType!=="style"&&c.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=i}getDefaultPosition(){return"bottom-right"}onAdd(i){return this._map=i,this._compact=this.options.compact,this._container=I.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=I.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=I.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){I.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(i,c){const p=this._map._getUIString(`AttributionControl.${c}`);i.title=p,i.setAttribute("aria-label",p)}_updateAttributions(){if(!this._map.style)return;let i=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?i=i.concat(this.options.customAttribution.map(m=>typeof m!="string"?"":m)):typeof this.options.customAttribution=="string"&&i.push(this.options.customAttribution)),this._map.style.stylesheet){const m=this._map.style.stylesheet;this.styleOwner=m.owner,this.styleId=m.id}const c=this._map.style.sourceCaches;for(const m in c){const v=c[m];if(v.used||v.usedForTerrain){const w=v.getSource();w.attribution&&i.indexOf(w.attribution)<0&&i.push(w.attribution)}}i=i.filter(m=>String(m).trim()),i.sort((m,v)=>m.length-v.length),i=i.filter((m,v)=>{for(let w=v+1;w<i.length;w++)if(i[w].indexOf(m)>=0)return!1;return!0});const p=i.join(" | ");p!==this._attribHTML&&(this._attribHTML=p,i.length?(this._innerContainer.innerHTML=p,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Zo{constructor(i={}){this._updateCompact=()=>{const c=this._container.children;if(c.length){const p=c[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&p.classList.add("maplibregl-compact"):p.classList.remove("maplibregl-compact")}},this.options=i}getDefaultPosition(){return"bottom-left"}onAdd(i){this._map=i,this._compact=this.options&&this.options.compact,this._container=I.create("div","maplibregl-ctrl");const c=I.create("a","maplibregl-ctrl-logo");return c.target="_blank",c.rel="noopener nofollow",c.href="https://maplibre.org/",c.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),c.setAttribute("rel","noopener nofollow"),this._container.appendChild(c),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){I.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class _t{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(i){const c=++this._id;return this._queue.push({callback:i,id:c,cancelled:!1}),c}remove(i){const c=this._currentlyRunning,p=c?this._queue.concat(c):this._queue;for(const m of p)if(m.id===i)return void(m.cancelled=!0)}run(i=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const c=this._currentlyRunning=this._queue;this._queue=[];for(const p of c)if(!p.cancelled&&(p.callback(i),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var yp=u.Y([{name:"a_pos3d",type:"Int16",components:3}]);class Gh extends u.E{constructor(i){super(),this.sourceCache=i,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,i.usedForTerrain=!0,i.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(i,c){this.sourceCache.update(i,c),this._renderableTilesKeys=[];const p={};for(const m of i.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:c}))p[m.key]=!0,this._renderableTilesKeys.push(m.key),this._tiles[m.key]||(m.posMatrix=new Float64Array(16),u.aQ(m.posMatrix,0,u.X,0,u.X,0,1),this._tiles[m.key]=new Lr(m,this.tileSize));for(const m in this._tiles)p[m]||delete this._tiles[m]}freeRtt(i){for(const c in this._tiles){const p=this._tiles[c];(!i||p.tileID.equals(i)||p.tileID.isChildOf(i)||i.isChildOf(p.tileID))&&(p.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(i=>this.getTileByID(i))}getTileByID(i){return this._tiles[i]}getTerrainCoords(i){const c={};for(const p of this._renderableTilesKeys){const m=this._tiles[p].tileID;if(m.canonical.equals(i.canonical)){const v=i.clone();v.posMatrix=new Float64Array(16),u.aQ(v.posMatrix,0,u.X,0,u.X,0,1),c[p]=v}else if(m.canonical.isChildOf(i.canonical)){const v=i.clone();v.posMatrix=new Float64Array(16);const w=m.canonical.z-i.canonical.z,E=m.canonical.x-(m.canonical.x>>w<<w),k=m.canonical.y-(m.canonical.y>>w<<w),z=u.X>>w;u.aQ(v.posMatrix,0,z,0,z,0,1),u.J(v.posMatrix,v.posMatrix,[-E*z,-k*z,0]),c[p]=v}else if(i.canonical.isChildOf(m.canonical)){const v=i.clone();v.posMatrix=new Float64Array(16);const w=i.canonical.z-m.canonical.z,E=i.canonical.x-(i.canonical.x>>w<<w),k=i.canonical.y-(i.canonical.y>>w<<w),z=u.X>>w;u.aQ(v.posMatrix,0,u.X,0,u.X,0,1),u.J(v.posMatrix,v.posMatrix,[E*z,k*z,0]),u.K(v.posMatrix,v.posMatrix,[1/2**w,1/2**w,0]),c[p]=v}}return c}getSourceTile(i,c){const p=this.sourceCache._source;let m=i.overscaledZ-this.deltaZoom;if(m>p.maxzoom&&(m=p.maxzoom),m<p.minzoom)return null;this._sourceTileCache[i.key]||(this._sourceTileCache[i.key]=i.scaledTo(m).key);let v=this.sourceCache.getTileByID(this._sourceTileCache[i.key]);if((!v||!v.dem)&&c)for(;m>=p.minzoom&&(!v||!v.dem);)v=this.sourceCache.getTileByID(i.scaledTo(m--).key);return v}tilesAfterTime(i=Date.now()){return Object.values(this._tiles).filter(c=>c.timeAdded>=i)}}class vp{constructor(i,c,p){this.painter=i,this.sourceCache=new Gh(c),this.options=p,this.exaggeration=typeof p.exaggeration=="number"?p.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(i,c,p,m=u.X){var v;if(!(c>=0&&c<m&&p>=0&&p<m))return 0;const w=this.getTerrainData(i),E=(v=w.tile)===null||v===void 0?void 0:v.dem;if(!E)return 0;const k=function(re,he,le){var de=he[0],ye=he[1];return re[0]=le[0]*de+le[4]*ye+le[12],re[1]=le[1]*de+le[5]*ye+le[13],re}([],[c/m*u.X,p/m*u.X],w.u_terrain_matrix),z=[k[0]*E.dim,k[1]*E.dim],B=Math.floor(z[0]),O=Math.floor(z[1]),K=z[0]-B,Q=z[1]-O;return E.get(B,O)*(1-K)*(1-Q)+E.get(B+1,O)*K*(1-Q)+E.get(B,O+1)*(1-K)*Q+E.get(B+1,O+1)*K*Q}getElevationForLngLatZoom(i,c){const{tileID:p,mercatorX:m,mercatorY:v}=this._getOverscaledTileIDFromLngLatZoom(i,c);return this.getElevation(p,m%u.X,v%u.X,u.X)}getElevation(i,c,p,m=u.X){return this.getDEMElevation(i,c,p,m)*this.exaggeration}getTerrainData(i){if(!this._emptyDemTexture){const m=this.painter.context,v=new u.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new ze(m,v,m.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new ze(m,new u.R({width:1,height:1}),m.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(m.gl.NEAREST,m.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=u.ao([])}const c=this.sourceCache.getSourceTile(i,!0);if(c&&c.dem&&(!c.demTexture||c.needsTerrainPrepare)){const m=this.painter.context;c.demTexture=this.painter.getTileTexture(c.dem.stride),c.demTexture?c.demTexture.update(c.dem.getPixels(),{premultiply:!1}):c.demTexture=new ze(m,c.dem.getPixels(),m.gl.RGBA,{premultiply:!1}),c.demTexture.bind(m.gl.NEAREST,m.gl.CLAMP_TO_EDGE),c.needsTerrainPrepare=!1}const p=c&&c+c.tileID.key+i.key;if(p&&!this._demMatrixCache[p]){const m=this.sourceCache.sourceCache._source.maxzoom;let v=i.canonical.z-c.tileID.canonical.z;i.overscaledZ>i.canonical.z&&(i.canonical.z>=m?v=i.canonical.z-m:u.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const w=i.canonical.x-(i.canonical.x>>v<<v),E=i.canonical.y-(i.canonical.y>>v<<v),k=u.bb(new Float64Array(16),[1/(u.X<<v),1/(u.X<<v),0]);u.J(k,k,[w*u.X,E*u.X,0]),this._demMatrixCache[i.key]={matrix:k,coord:i}}return{u_depth:2,u_terrain:3,u_terrain_dim:c&&c.dem&&c.dem.dim||1,u_terrain_matrix:p?this._demMatrixCache[i.key].matrix:this._emptyDemMatrix,u_terrain_unpack:c&&c.dem&&c.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(c&&c.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:c}}getFramebuffer(i){const c=this.painter,p=c.width/devicePixelRatio,m=c.height/devicePixelRatio;return!this._fbo||this._fbo.width===p&&this._fbo.height===m||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new ze(c.context,{width:p,height:m,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new ze(c.context,{width:p,height:m,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=c.context.createFramebuffer(p,m,!0,!1),this._fbo.depthAttachment.set(c.context.createRenderbuffer(c.context.gl.DEPTH_COMPONENT16,p,m))),this._fbo.colorAttachment.set(i==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const i=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const c=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let v=0,w=0;v<this._coordsTextureSize;v++)for(let E=0;E<this._coordsTextureSize;E++,w+=4)c[w+0]=255&E,c[w+1]=255&v,c[w+2]=E>>8<<4|v>>8,c[w+3]=0;const p=new u.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(c.buffer)),m=new ze(i,p,i.gl.RGBA,{premultiply:!1});return m.bind(i.gl.NEAREST,i.gl.CLAMP_TO_EDGE),this._coordsTexture=m,m}pointCoordinate(i){this.painter.maybeDrawDepthAndCoords(!0);const c=new Uint8Array(4),p=this.painter.context,m=p.gl,v=Math.round(i.x*this.painter.pixelRatio/devicePixelRatio),w=Math.round(i.y*this.painter.pixelRatio/devicePixelRatio),E=Math.round(this.painter.height/devicePixelRatio);p.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),m.readPixels(v,E-w-1,1,1,m.RGBA,m.UNSIGNED_BYTE,c),p.bindFramebuffer.set(null);const k=c[0]+(c[2]>>4<<8),z=c[1]+((15&c[2])<<8),B=this.coordsIndex[255-c[3]],O=B&&this.sourceCache.getTileByID(B);if(!O)return null;const K=this._coordsTextureSize,Q=(1<<O.tileID.canonical.z)*K;return new u.Z((O.tileID.canonical.x*K+k)/Q+O.tileID.wrap,(O.tileID.canonical.y*K+z)/Q,this.getElevation(O.tileID,k,z,K))}depthAtPoint(i){const c=new Uint8Array(4),p=this.painter.context,m=p.gl;return p.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),m.readPixels(i.x,this.painter.height/devicePixelRatio-i.y-1,1,1,m.RGBA,m.UNSIGNED_BYTE,c),p.bindFramebuffer.set(null),(c[0]/16777216+c[1]/65536+c[2]/256+c[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;const i=this.painter.context,c=new u.bc,p=new u.aY,m=this.meshSize,v=u.X/m,w=m*m;for(let O=0;O<=m;O++)for(let K=0;K<=m;K++)c.emplaceBack(K*v,O*v,0);for(let O=0;O<w;O+=m+1)for(let K=0;K<m;K++)p.emplaceBack(K+O,m+K+O+1,m+K+O+2),p.emplaceBack(K+O,m+K+O+2,K+O+1);const E=c.length,k=E+2*(m+1);for(const O of[0,1])for(let K=0;K<=m;K++)for(const Q of[0,1])c.emplaceBack(K*v,O*u.X,Q);for(let O=0;O<2*m;O+=2)p.emplaceBack(k+O,k+O+1,k+O+3),p.emplaceBack(k+O,k+O+3,k+O+2),p.emplaceBack(E+O,E+O+3,E+O+1),p.emplaceBack(E+O,E+O+2,E+O+3);const z=c.length,B=z+2*(m+1);for(const O of[0,1])for(let K=0;K<=m;K++)for(const Q of[0,1])c.emplaceBack(O*u.X,K*v,Q);for(let O=0;O<2*m;O+=2)p.emplaceBack(z+O,z+O+1,z+O+3),p.emplaceBack(z+O,z+O+3,z+O+2),p.emplaceBack(B+O,B+O+3,B+O+1),p.emplaceBack(B+O,B+O+2,B+O+3);return this._mesh=new up(i.createVertexBuffer(c,yp.members),i.createIndexBuffer(p),u.a0.simpleSegment(0,0,c.length,p.length)),this._mesh}getMeshFrameDelta(i){return 2*Math.PI*u.bd/Math.pow(2,i)/5}getMinTileElevationForLngLatZoom(i,c){var p;const{tileID:m}=this._getOverscaledTileIDFromLngLatZoom(i,c);return(p=this.getMinMaxElevation(m).minElevation)!==null&&p!==void 0?p:0}getMinMaxElevation(i){const c=this.getTerrainData(i).tile,p={minElevation:null,maxElevation:null};return c&&c.dem&&(p.minElevation=c.dem.min*this.exaggeration,p.maxElevation=c.dem.max*this.exaggeration),p}_getOverscaledTileIDFromLngLatZoom(i,c){const p=u.Z.fromLngLat(i.wrap()),m=(1<<c)*u.X,v=p.x*m,w=p.y*m,E=Math.floor(v/u.X),k=Math.floor(w/u.X);return{tileID:new u.S(c,0,c,E,k),mercatorX:v,mercatorY:w}}}class Vl{constructor(i,c,p){this._context=i,this._size=c,this._tileSize=p,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const i of this._objects)i.texture.destroy(),i.fbo.destroy()}_createObject(i){const c=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),p=new ze(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return p.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),c.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),c.colorAttachment.set(p.texture),{id:i,fbo:c,texture:p,stamp:-1,inUse:!1}}getObjectForId(i){return this._objects[i]}useObject(i){i.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(c=>i.id!==c),this._recentlyUsed.push(i.id)}stampObject(i){i.stamp=++this._stamp}getOrCreateFreeObject(){for(const c of this._recentlyUsed)if(!this._objects[c].inUse)return this._objects[c];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const i=this._createObject(this._objects.length);return this._objects.push(i),i}freeObject(i){i.inUse=!1}freeAllObjects(){for(const i of this._objects)this.freeObject(i)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(i=>!i.inUse)===!1}}const Ko={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class _p{constructor(i,c){this.painter=i,this.terrain=c,this.pool=new Vl(i.context,30,c.sourceCache.tileSize*c.qualityFactor)}destruct(){this.pool.destruct()}getTexture(i){return this.pool.getObjectForId(i.rtt[this._stacks.length-1].id).texture}prepareForRender(i,c){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=i._order.filter(p=>!i._layers[p].isHidden(c)),this._coordsDescendingInv={};for(const p in i.sourceCaches){this._coordsDescendingInv[p]={};const m=i.sourceCaches[p].getVisibleCoordinates();for(const v of m){const w=this.terrain.sourceCache.getTerrainCoords(v);for(const E in w)this._coordsDescendingInv[p][E]||(this._coordsDescendingInv[p][E]=[]),this._coordsDescendingInv[p][E].push(w[E])}}this._coordsDescendingInvStr={};for(const p of i._order){const m=i._layers[p],v=m.source;if(Ko[m.type]&&!this._coordsDescendingInvStr[v]){this._coordsDescendingInvStr[v]={};for(const w in this._coordsDescendingInv[v])this._coordsDescendingInvStr[v][w]=this._coordsDescendingInv[v][w].map(E=>E.key).sort().join()}}for(const p of this._renderableTiles)for(const m in this._coordsDescendingInvStr){const v=this._coordsDescendingInvStr[m][p.tileID.key];v&&v!==p.rttCoords[m]&&(p.rtt=[])}}renderLayer(i){if(i.isHidden(this.painter.transform.zoom))return!1;const c=i.type,p=this.painter,m=this._renderableLayerIds[this._renderableLayerIds.length-1]===i.id;if(Ko[c]&&(this._prevType&&Ko[this._prevType]||this._stacks.push([]),this._prevType=c,this._stacks[this._stacks.length-1].push(i.id),!m))return!0;if(Ko[this._prevType]||Ko[c]&&m){this._prevType=c;const v=this._stacks.length-1,w=this._stacks[v]||[];for(const E of this._renderableTiles){if(this.pool.isFull()&&(Ll(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(E),E.rtt[v]){const z=this.pool.getObjectForId(E.rtt[v].id);if(z.stamp===E.rtt[v].stamp){this.pool.useObject(z);continue}}const k=this.pool.getOrCreateFreeObject();this.pool.useObject(k),this.pool.stampObject(k),E.rtt[v]={id:k.id,stamp:k.stamp},p.context.bindFramebuffer.set(k.fbo.framebuffer),p.context.clear({color:u.aN.transparent,stencil:0}),p.currentStencilSource=void 0;for(let z=0;z<w.length;z++){const B=p.style._layers[w[z]],O=B.source?this._coordsDescendingInv[B.source][E.tileID.key]:[E.tileID];p.context.viewport.set([0,0,k.fbo.width,k.fbo.height]),p._renderTileClippingMasks(B,O),p.renderLayer(p,p.style.sourceCaches[B.source],B,O),B.source&&(E.rttCoords[B.source]=this._coordsDescendingInvStr[B.source][E.tileID.key])}}return Ll(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),Ko[c]}return!1}}const ut={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use ⌘ + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Zh=S,Ny={hash:!1,interactive:!0,bearingSnap:7,attributionControl:Wh,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,refreshExpiredTiles:!0,scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],zoom:0,bearing:0,pitch:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:u.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0},xp=y=>{y.touchstart=y.dragStart,y.touchmoveWindow=y.dragMove,y.touchend=y.dragEnd},Kh={showCompass:!0,showZoom:!0,visualizePitch:!1};class bp{constructor(i,c,p=!1){this.mousedown=w=>{this.startMouse(u.e({},w,{ctrlKey:!0,preventDefault:()=>w.preventDefault()}),I.mousePos(this.element,w)),I.addEventListener(window,"mousemove",this.mousemove),I.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=w=>{this.moveMouse(w,I.mousePos(this.element,w))},this.mouseup=w=>{this.mouseRotate.dragEnd(w),this.mousePitch&&this.mousePitch.dragEnd(w),this.offTemp()},this.touchstart=w=>{w.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=I.touchPos(this.element,w.targetTouches)[0],this.startTouch(w,this._startPos),I.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),I.addEventListener(window,"touchend",this.touchend))},this.touchmove=w=>{w.targetTouches.length!==1?this.reset():(this._lastPos=I.touchPos(this.element,w.targetTouches)[0],this.moveTouch(w,this._lastPos))},this.touchend=w=>{w.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const m=i.dragRotate._mouseRotate.getClickTolerance(),v=i.dragRotate._mousePitch.getClickTolerance();this.element=c,this.mouseRotate=Lh({clickTolerance:m,enable:!0}),this.touchRotate=(({enable:w,clickTolerance:E,bearingDegreesPerPixelMoved:k=.8})=>{const z=new Hc;return new ln({clickTolerance:E,move:(B,O)=>({bearingDelta:(O.x-B.x)*k}),moveStateManager:z,enable:w,assignEvents:xp})})({clickTolerance:m,enable:!0}),this.map=i,p&&(this.mousePitch=is({clickTolerance:v,enable:!0}),this.touchPitch=(({enable:w,clickTolerance:E,pitchDegreesPerPixelMoved:k=-.5})=>{const z=new Hc;return new ln({clickTolerance:E,move:(B,O)=>({pitchDelta:(O.y-B.y)*k}),moveStateManager:z,enable:w,assignEvents:xp})})({clickTolerance:v,enable:!0})),I.addEventListener(c,"mousedown",this.mousedown),I.addEventListener(c,"touchstart",this.touchstart,{passive:!1}),I.addEventListener(c,"touchcancel",this.reset)}startMouse(i,c){this.mouseRotate.dragStart(i,c),this.mousePitch&&this.mousePitch.dragStart(i,c),I.disableDrag()}startTouch(i,c){this.touchRotate.dragStart(i,c),this.touchPitch&&this.touchPitch.dragStart(i,c),I.disableDrag()}moveMouse(i,c){const p=this.map,{bearingDelta:m}=this.mouseRotate.dragMove(i,c)||{};if(m&&p.setBearing(p.getBearing()+m),this.mousePitch){const{pitchDelta:v}=this.mousePitch.dragMove(i,c)||{};v&&p.setPitch(p.getPitch()+v)}}moveTouch(i,c){const p=this.map,{bearingDelta:m}=this.touchRotate.dragMove(i,c)||{};if(m&&p.setBearing(p.getBearing()+m),this.touchPitch){const{pitchDelta:v}=this.touchPitch.dragMove(i,c)||{};v&&p.setPitch(p.getPitch()+v)}}off(){const i=this.element;I.removeEventListener(i,"mousedown",this.mousedown),I.removeEventListener(i,"touchstart",this.touchstart,{passive:!1}),I.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),I.removeEventListener(window,"touchend",this.touchend),I.removeEventListener(i,"touchcancel",this.reset),this.offTemp()}offTemp(){I.enableDrag(),I.removeEventListener(window,"mousemove",this.mousemove),I.removeEventListener(window,"mouseup",this.mouseup),I.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),I.removeEventListener(window,"touchend",this.touchend)}}let Fa;function wp(y,i,c){const p=new u.N(y.lng,y.lat);if(y=new u.N(y.lng,y.lat),i){const m=new u.N(y.lng-360,y.lat),v=new u.N(y.lng+360,y.lat),w=c.locationPoint(y).distSqr(i);c.locationPoint(m).distSqr(i)<w?y=m:c.locationPoint(v).distSqr(i)<w&&(y=v)}for(;Math.abs(y.lng-c.center.lng)>180;){const m=c.locationPoint(y);if(m.x>=0&&m.y>=0&&m.x<=c.width&&m.y<=c.height)break;y.lng>c.center.lng?y.lng-=360:y.lng+=360}return y.lng!==p.lng&&c.locationPoint(y).y>c.height/2-c.getHorizon()?y:p}const Xh={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Oa(y,i,c){const p=y.classList;for(const m in Xh)p.remove(`maplibregl-${c}-anchor-${m}`);p.add(`maplibregl-${c}-anchor-${i}`)}class tn extends u.E{constructor(i){if(super(),this._onKeyPress=c=>{const p=c.code,m=c.charCode||c.keyCode;p!=="Space"&&p!=="Enter"&&m!==32&&m!==13||this.togglePopup()},this._onMapClick=c=>{const p=c.originalEvent.target,m=this._element;this._popup&&(p===m||m.contains(p))&&this.togglePopup()},this._update=c=>{var p;if(!this._map)return;const m=this._map.loaded()&&!this._map.isMoving();((c==null?void 0:c.type)==="terrain"||(c==null?void 0:c.type)==="render"&&!m)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?wp(this._lngLat,this._flatPos,this._map.transform):(p=this._lngLat)===null||p===void 0?void 0:p.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let v="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?v=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(v=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let w="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?w="rotateX(0deg)":this._pitchAlignment==="map"&&(w=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||c&&c.type!=="moveend"||(this._pos=this._pos.round()),I.setTransform(this._element,`${Xh[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${w} ${v}`),A.frameAsync(new AbortController).then(()=>{this._updateOpacity(c&&c.type==="moveend")}).catch(()=>{})},this._onMove=c=>{if(!this._isDragging){const p=this._clickTolerance||this._map._clickTolerance;this._isDragging=c.point.dist(this._pointerdownPos)>=p}this._isDragging&&(this._pos=c.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new u.k("dragstart"))),this.fire(new u.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new u.k("dragend")),this._state="inactive"},this._addDragHandler=c=>{this._element.contains(c.originalEvent.target)&&(c.preventDefault(),this._positionDelta=c.point.sub(this._pos).add(this._offset),this._pointerdownPos=c.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=i&&i.anchor||"center",this._color=i&&i.color||"#3FB1CE",this._scale=i&&i.scale||1,this._draggable=i&&i.draggable||!1,this._clickTolerance=i&&i.clickTolerance||0,this._subpixelPositioning=i&&i.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=i&&i.rotation||0,this._rotationAlignment=i&&i.rotationAlignment||"auto",this._pitchAlignment=i&&i.pitchAlignment&&i.pitchAlignment!=="auto"?i.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(i==null?void 0:i.opacity,i==null?void 0:i.opacityWhenCovered),i&&i.element)this._element=i.element,this._offset=u.P.convert(i&&i.offset||[0,0]);else{this._defaultMarker=!0,this._element=I.create("div");const c=I.createNS("http://www.w3.org/2000/svg","svg"),p=41,m=27;c.setAttributeNS(null,"display","block"),c.setAttributeNS(null,"height",`${p}px`),c.setAttributeNS(null,"width",`${m}px`),c.setAttributeNS(null,"viewBox",`0 0 ${m} ${p}`);const v=I.createNS("http://www.w3.org/2000/svg","g");v.setAttributeNS(null,"stroke","none"),v.setAttributeNS(null,"stroke-width","1"),v.setAttributeNS(null,"fill","none"),v.setAttributeNS(null,"fill-rule","evenodd");const w=I.createNS("http://www.w3.org/2000/svg","g");w.setAttributeNS(null,"fill-rule","nonzero");const E=I.createNS("http://www.w3.org/2000/svg","g");E.setAttributeNS(null,"transform","translate(3.0, 29.0)"),E.setAttributeNS(null,"fill","#000000");const k=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const de of k){const ye=I.createNS("http://www.w3.org/2000/svg","ellipse");ye.setAttributeNS(null,"opacity","0.04"),ye.setAttributeNS(null,"cx","10.5"),ye.setAttributeNS(null,"cy","5.80029008"),ye.setAttributeNS(null,"rx",de.rx),ye.setAttributeNS(null,"ry",de.ry),E.appendChild(ye)}const z=I.createNS("http://www.w3.org/2000/svg","g");z.setAttributeNS(null,"fill",this._color);const B=I.createNS("http://www.w3.org/2000/svg","path");B.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),z.appendChild(B);const O=I.createNS("http://www.w3.org/2000/svg","g");O.setAttributeNS(null,"opacity","0.25"),O.setAttributeNS(null,"fill","#000000");const K=I.createNS("http://www.w3.org/2000/svg","path");K.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),O.appendChild(K);const Q=I.createNS("http://www.w3.org/2000/svg","g");Q.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Q.setAttributeNS(null,"fill","#FFFFFF");const re=I.createNS("http://www.w3.org/2000/svg","g");re.setAttributeNS(null,"transform","translate(8.0, 8.0)");const he=I.createNS("http://www.w3.org/2000/svg","circle");he.setAttributeNS(null,"fill","#000000"),he.setAttributeNS(null,"opacity","0.25"),he.setAttributeNS(null,"cx","5.5"),he.setAttributeNS(null,"cy","5.5"),he.setAttributeNS(null,"r","5.4999962");const le=I.createNS("http://www.w3.org/2000/svg","circle");le.setAttributeNS(null,"fill","#FFFFFF"),le.setAttributeNS(null,"cx","5.5"),le.setAttributeNS(null,"cy","5.5"),le.setAttributeNS(null,"r","5.4999962"),re.appendChild(he),re.appendChild(le),w.appendChild(E),w.appendChild(z),w.appendChild(O),w.appendChild(Q),w.appendChild(re),c.appendChild(w),c.setAttributeNS(null,"height",p*this._scale+"px"),c.setAttributeNS(null,"width",m*this._scale+"px"),this._element.appendChild(c),this._offset=u.P.convert(i&&i.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",c=>{c.preventDefault()}),this._element.addEventListener("mousedown",c=>{c.preventDefault()}),Oa(this._element,this._anchor,"marker"),i&&i.className)for(const c of i.className.split(" "))this._element.classList.add(c);this._popup=null}addTo(i){return this.remove(),this._map=i,this._element.setAttribute("aria-label",i._getUIString("Marker.Title")),i.getCanvasContainer().appendChild(this._element),i.on("move",this._update),i.on("moveend",this._update),i.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),I.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(i){return this._lngLat=u.N.convert(i),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(i){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),i){if(!("offset"in i.options)){const m=Math.abs(13.5)/Math.SQRT2;i.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[m,-1*(38.1-13.5+m)],"bottom-right":[-m,-1*(38.1-13.5+m)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=i,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(i){return this._subpixelPositioning=i,this}getPopup(){return this._popup}togglePopup(){const i=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:i?(i.isOpen()?i.remove():(i.setLngLat(this._lngLat),i.addTo(this._map)),this):this}_updateOpacity(i=!1){var c,p;if(!(!((c=this._map)===null||c===void 0)&&c.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(i)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const m=this._map,v=m.terrain.depthAtPoint(this._pos),w=m.terrain.getElevationForLngLatZoom(this._lngLat,m.transform.tileZoom);if(m.transform.lngLatToCameraDepth(this._lngLat,w)-v<.006)return void(this._element.style.opacity=this._opacity);const E=-this._offset.y/m.transform._pixelPerMeter,k=Math.sin(m.getPitch()*Math.PI/180)*E,z=m.terrain.depthAtPoint(new u.P(this._pos.x,this._pos.y-this._offset.y)),B=m.transform.lngLatToCameraDepth(this._lngLat,w+k)-z>.006;!((p=this._popup)===null||p===void 0)&&p.isOpen()&&B&&this._popup.remove(),this._element.style.opacity=B?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(i){return this._offset=u.P.convert(i),this._update(),this}addClassName(i){this._element.classList.add(i)}removeClassName(i){this._element.classList.remove(i)}toggleClassName(i){return this._element.classList.toggle(i)}setDraggable(i){return this._draggable=!!i,this._map&&(i?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(i){return this._rotation=i||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(i){return this._rotationAlignment=i||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(i){return this._pitchAlignment=i&&i!=="auto"?i:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(i,c){return i===void 0&&c===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),i!==void 0&&(this._opacity=i),c!==void 0&&(this._opacityWhenCovered=c),this._map&&this._updateOpacity(!0),this}}const qc={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let $s=0,js=!1;const Sp={maxWidth:100,unit:"metric"};function Jh(y,i,c){const p=c&&c.maxWidth||100,m=y._container.clientHeight/2,v=y.unproject([0,m]),w=y.unproject([p,m]),E=v.distanceTo(w);if(c&&c.unit==="imperial"){const k=3.2808*E;k>5280?Ul(i,p,k/5280,y._getUIString("ScaleControl.Miles")):Ul(i,p,k,y._getUIString("ScaleControl.Feet"))}else c&&c.unit==="nautical"?Ul(i,p,E/1852,y._getUIString("ScaleControl.NauticalMiles")):E>=1e3?Ul(i,p,E/1e3,y._getUIString("ScaleControl.Kilometers")):Ul(i,p,E,y._getUIString("ScaleControl.Meters"))}function Ul(y,i,c,p){const m=function(v){const w=Math.pow(10,`${Math.floor(v)}`.length-1);let E=v/w;return E=E>=10?10:E>=5?5:E>=3?3:E>=2?2:E>=1?1:function(k){const z=Math.pow(10,Math.ceil(-Math.log(k)/Math.LN10));return Math.round(k*z)/z}(E),w*E}(c);y.style.width=i*(m/c)+"px",y.innerHTML=`${m}&nbsp;${p}`}const Xo={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},Wc=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function It(y){if(y){if(typeof y=="number"){const i=Math.round(Math.abs(y)/Math.SQRT2);return{center:new u.P(0,0),top:new u.P(0,y),"top-left":new u.P(i,i),"top-right":new u.P(-i,i),bottom:new u.P(0,-y),"bottom-left":new u.P(i,-i),"bottom-right":new u.P(-i,-i),left:new u.P(y,0),right:new u.P(-y,0)}}if(y instanceof u.P||Array.isArray(y)){const i=u.P.convert(y);return{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{center:u.P.convert(y.center||[0,0]),top:u.P.convert(y.top||[0,0]),"top-left":u.P.convert(y["top-left"]||[0,0]),"top-right":u.P.convert(y["top-right"]||[0,0]),bottom:u.P.convert(y.bottom||[0,0]),"bottom-left":u.P.convert(y["bottom-left"]||[0,0]),"bottom-right":u.P.convert(y["bottom-right"]||[0,0]),left:u.P.convert(y.left||[0,0]),right:u.P.convert(y.right||[0,0])}}return It(new u.P(0,0))}const Bt=S;f.AJAXError=u.bg,f.Evented=u.E,f.LngLat=u.N,f.MercatorCoordinate=u.Z,f.Point=u.P,f.addProtocol=u.bh,f.config=u.a,f.removeProtocol=u.bi,f.AttributionControl=Ns,f.BoxZoomHandler=Ah,f.CanvasSource=Cr,f.CooperativeGesturesHandler=Eo,f.DoubleClickZoomHandler=Uh,f.DragPanHandler=co,f.DragRotateHandler=Co,f.EdgeInsets=Bc,f.FullscreenControl=class extends u.E{constructor(y={}){super(),this._onFullscreenChange=()=>{var i;let c=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((i=c==null?void 0:c.shadowRoot)===null||i===void 0)&&i.fullscreenElement;)c=c.shadowRoot.fullscreenElement;c===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,y&&y.container&&(y.container instanceof HTMLElement?this._container=y.container:u.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(y){return this._map=y,this._container||(this._container=this._map.getContainer()),this._controlContainer=I.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){I.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const y=this._fullscreenButton=I.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);I.create("span","maplibregl-ctrl-icon",y).setAttribute("aria-hidden","true"),y.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const y=this._getTitle();this._fullscreenButton.setAttribute("aria-label",y),this._fullscreenButton.title=y}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new u.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new u.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},f.GeoJSONSource=Xt,f.GeolocateControl=class extends u.E{constructor(y){super(),this._onSuccess=i=>{if(this._map){if(this._isOutOfMapMaxBounds(i))return this._setErrorState(),this.fire(new u.k("outofmaxbounds",i)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=i,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(i),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(i),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new u.k("geolocate",i)),this._finish()}},this._updateCamera=i=>{const c=new u.N(i.coords.longitude,i.coords.latitude),p=i.coords.accuracy,m=this._map.getBearing(),v=u.e({bearing:m},this.options.fitBoundsOptions),w=Te.fromLngLat(c,p);this._map.fitBounds(w,v,{geolocateSource:!0})},this._updateMarker=i=>{if(i){const c=new u.N(i.coords.longitude,i.coords.latitude);this._accuracyCircleMarker.setLngLat(c).addTo(this._map),this._userLocationDotMarker.setLngLat(c).addTo(this._map),this._accuracy=i.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=i=>{if(this._map){if(this.options.trackUserLocation)if(i.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(i.code===3&&js)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new u.k("error",i)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",i=>i.preventDefault()),this._geolocateButton=I.create("button","maplibregl-ctrl-geolocate",this._container),I.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=i=>{if(this._map){if(i===!1){u.w("Geolocation support is not available so the GeolocateControl will be disabled.");const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}else{const c=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=I.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new tn({element:this._dotElement}),this._circleElement=I.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new tn({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",c=>{c.geolocateSource||this._watchState!=="ACTIVE_LOCK"||c.originalEvent&&c.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new u.k("trackuserlocationend")),this.fire(new u.k("userlocationlostfocus")))})}},this.options=u.e({},qc,y)}onAdd(y){return this._map=y,this._container=I.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return u._(this,arguments,void 0,function*(i=!1){if(Fa!==void 0&&!i)return Fa;if(window.navigator.permissions===void 0)return Fa=!!window.navigator.geolocation,Fa;try{Fa=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Fa=!!window.navigator.geolocation}return Fa})}().then(i=>this._finishSetupUI(i)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),I.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,$s=0,js=!1}_isOutOfMapMaxBounds(y){const i=this._map.getMaxBounds(),c=y.coords;return i&&(c.longitude<i.getWest()||c.longitude>i.getEast()||c.latitude<i.getSouth()||c.latitude>i.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const y=this._map.getBounds(),i=y.getSouthEast(),c=y.getNorthEast(),p=i.distanceTo(c),m=Math.ceil(this._accuracy/(p/this._map._container.clientHeight)*2);this._circleElement.style.width=`${m}px`,this._circleElement.style.height=`${m}px`}trigger(){if(!this._setup)return u.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new u.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":$s--,js=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new u.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new u.k("trackuserlocationstart")),this.fire(new u.k("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let y;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),$s++,$s>1?(y={maximumAge:6e5,timeout:0},js=!0):(y=this.options.positionOptions,js=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,y)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},f.Hash=Dl,f.ImageSource=Zt,f.KeyboardHandler=$h,f.LngLatBounds=Te,f.LogoControl=Zo,f.Map=class extends By{constructor(y){u.be.mark(u.bf.create);const i=Object.assign(Object.assign({},Ny),y);if(i.minZoom!=null&&i.maxZoom!=null&&i.minZoom>i.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(i.minPitch!=null&&i.maxPitch!=null&&i.minPitch>i.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(i.minPitch!=null&&i.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(i.maxPitch!=null&&i.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Th(i.minZoom,i.maxZoom,i.minPitch,i.maxPitch,i.renderWorldCopies),{bearingSnap:i.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new _t,this._controls=[],this._mapId=u.a4(),this._contextLost=c=>{c.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new u.k("webglcontextlost",{originalEvent:c}))},this._contextRestored=c=>{this._setupPainter(),this.resize(),this._update(),this.fire(new u.k("webglcontextrestored",{originalEvent:c}))},this._onMapScroll=c=>{if(c.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=i.interactive,this._maxTileCacheSize=i.maxTileCacheSize,this._maxTileCacheZoomLevels=i.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=i.failIfMajorPerformanceCaveat===!0,this._preserveDrawingBuffer=i.preserveDrawingBuffer===!0,this._antialias=i.antialias===!0,this._trackResize=i.trackResize===!0,this._bearingSnap=i.bearingSnap,this._refreshExpiredTiles=i.refreshExpiredTiles===!0,this._fadeDuration=i.fadeDuration,this._crossSourceCollisions=i.crossSourceCollisions===!0,this._collectResourceTiming=i.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},ut),i.locale),this._clickTolerance=i.clickTolerance,this._overridePixelRatio=i.pixelRatio,this._maxCanvasSize=i.maxCanvasSize,this.transformCameraUpdate=i.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=i.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=H.addThrottleControl(()=>this.isMoving()),this._requestManager=new Y(i.transformRequest),typeof i.container=="string"){if(this._container=document.getElementById(i.container),!this._container)throw new Error(`Container '${i.container}' not found.`)}else{if(!(i.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=i.container}if(i.maxBounds&&this.setMaxBounds(i.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)).on("moveend",()=>this._update(!1)).on("zoom",()=>this._update(!0)).on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}).once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let c=!1;const p=Nc(m=>{this._trackResize&&!this._removed&&this.resize(m)._update()},50);this._resizeObserver=new ResizeObserver(m=>{c?p(m):c=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Oy(this,i),this._hash=i.hash&&new Dl(typeof i.hash=="string"&&i.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:i.center,zoom:i.zoom,bearing:i.bearing,pitch:i.pitch}),i.bounds&&(this.resize(),this.fitBounds(i.bounds,u.e({},i.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=i.localIdeographFontFamily,this._validateStyle=i.validateStyle,i.style&&this.setStyle(i.style,{localIdeographFontFamily:i.localIdeographFontFamily}),i.attributionControl&&this.addControl(new Ns(typeof i.attributionControl=="boolean"?void 0:i.attributionControl)),i.maplibreLogo&&this.addControl(new Zo,i.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",c=>{this._update(c.dataType==="style"),this.fire(new u.k(`${c.dataType}data`,c))}),this.on("dataloading",c=>{this.fire(new u.k(`${c.dataType}dataloading`,c))}),this.on("dataabort",c=>{this.fire(new u.k("sourcedataabort",c))})}_getMapId(){return this._mapId}addControl(y,i){if(i===void 0&&(i=y.getDefaultPosition?y.getDefaultPosition():"top-right"),!y||!y.onAdd)return this.fire(new u.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const c=y.onAdd(this);this._controls.push(y);const p=this._controlPositions[i];return i.indexOf("bottom")!==-1?p.insertBefore(c,p.firstChild):p.appendChild(c),this}removeControl(y){if(!y||!y.onRemove)return this.fire(new u.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const i=this._controls.indexOf(y);return i>-1&&this._controls.splice(i,1),y.onRemove(this),this}hasControl(y){return this._controls.indexOf(y)>-1}calculateCameraOptionsFromTo(y,i,c,p){return p==null&&this.terrain&&(p=this.terrain.getElevationForLngLatZoom(c,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(y,i,c,p)}resize(y){var i;const c=this._containerDimensions(),p=c[0],m=c[1],v=this._getClampedPixelRatio(p,m);if(this._resizeCanvas(p,m,v),this.painter.resize(p,m,v),this.painter.overLimit()){const E=this.painter.context.gl;this._maxCanvasSize=[E.drawingBufferWidth,E.drawingBufferHeight];const k=this._getClampedPixelRatio(p,m);this._resizeCanvas(p,m,k),this.painter.resize(p,m,k)}this.transform.resize(p,m),(i=this._requestedCameraState)===null||i===void 0||i.resize(p,m);const w=!this._moving;return w&&(this.stop(),this.fire(new u.k("movestart",y)).fire(new u.k("move",y))),this.fire(new u.k("resize",y)),w&&this.fire(new u.k("moveend",y)),this}_getClampedPixelRatio(y,i){const{0:c,1:p}=this._maxCanvasSize,m=this.getPixelRatio(),v=y*m,w=i*m;return Math.min(v>c?c/v:1,w>p?p/w:1)*m}getPixelRatio(){var y;return(y=this._overridePixelRatio)!==null&&y!==void 0?y:devicePixelRatio}setPixelRatio(y){this._overridePixelRatio=y,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(y){return this.transform.setMaxBounds(Te.convert(y)),this._update()}setMinZoom(y){if((y=y??-2)>=-2&&y<=this.transform.maxZoom)return this.transform.minZoom=y,this._update(),this.getZoom()<y&&this.setZoom(y),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(y){if((y=y??22)>=this.transform.minZoom)return this.transform.maxZoom=y,this._update(),this.getZoom()>y&&this.setZoom(y),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(y){if((y=y??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(y>=0&&y<=this.transform.maxPitch)return this.transform.minPitch=y,this._update(),this.getPitch()<y&&this.setPitch(y),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(y){if((y=y??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(y>=this.transform.minPitch)return this.transform.maxPitch=y,this._update(),this.getPitch()>y&&this.setPitch(y),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(y){return this.transform.renderWorldCopies=y,this._update()}project(y){return this.transform.locationPoint(u.N.convert(y),this.style&&this.terrain)}unproject(y){return this.transform.pointLocation(u.P.convert(y),this.terrain)}isMoving(){var y;return this._moving||((y=this.handlers)===null||y===void 0?void 0:y.isMoving())}isZooming(){var y;return this._zooming||((y=this.handlers)===null||y===void 0?void 0:y.isZooming())}isRotating(){var y;return this._rotating||((y=this.handlers)===null||y===void 0?void 0:y.isRotating())}_createDelegatedListener(y,i,c){if(y==="mouseenter"||y==="mouseover"){let p=!1;return{layer:i,listener:c,delegates:{mousemove:v=>{const w=this.getLayer(i)?this.queryRenderedFeatures(v.point,{layers:[i]}):[];w.length?p||(p=!0,c.call(this,new vi(y,this,v.originalEvent,{features:w}))):p=!1},mouseout:()=>{p=!1}}}}if(y==="mouseleave"||y==="mouseout"){let p=!1;return{layer:i,listener:c,delegates:{mousemove:w=>{(this.getLayer(i)?this.queryRenderedFeatures(w.point,{layers:[i]}):[]).length?p=!0:p&&(p=!1,c.call(this,new vi(y,this,w.originalEvent)))},mouseout:w=>{p&&(p=!1,c.call(this,new vi(y,this,w.originalEvent)))}}}}{const p=m=>{const v=this.getLayer(i)?this.queryRenderedFeatures(m.point,{layers:[i]}):[];v.length&&(m.features=v,c.call(this,m),delete m.features)};return{layer:i,listener:c,delegates:{[y]:p}}}}on(y,i,c){if(c===void 0)return super.on(y,i);const p=this._createDelegatedListener(y,i,c);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[y]=this._delegatedListeners[y]||[],this._delegatedListeners[y].push(p);for(const m in p.delegates)this.on(m,p.delegates[m]);return this}once(y,i,c){if(c===void 0)return super.once(y,i);const p=this._createDelegatedListener(y,i,c);for(const m in p.delegates)this.once(m,p.delegates[m]);return this}off(y,i,c){return c===void 0?super.off(y,i):(this._delegatedListeners&&this._delegatedListeners[y]&&(p=>{const m=this._delegatedListeners[y];for(let v=0;v<m.length;v++){const w=m[v];if(w.layer===i&&w.listener===c){for(const E in w.delegates)this.off(E,w.delegates[E]);return m.splice(v,1),this}}})(),this)}queryRenderedFeatures(y,i){if(!this.style)return[];let c;const p=y instanceof u.P||Array.isArray(y),m=p?y:[[0,0],[this.transform.width,this.transform.height]];if(i=i||(p?{}:y)||{},m instanceof u.P||typeof m[0]=="number")c=[u.P.convert(m)];else{const v=u.P.convert(m[0]),w=u.P.convert(m[1]);c=[v,new u.P(w.x,v.y),w,new u.P(v.x,w.y),v]}return this.style.queryRenderedFeatures(c,i,this.transform)}querySourceFeatures(y,i){return this.style.querySourceFeatures(y,i)}setStyle(y,i){return(i=u.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},i)).diff!==!1&&i.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&y?(this._diffStyle(y,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._updateStyle(y,i))}setTransformRequest(y){return this._requestManager.setTransformRequest(y),this}_getUIString(y){const i=this._locale[y];if(i==null)throw new Error(`Missing UI string '${y}'`);return i}_updateStyle(y,i){if(i.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(y,i));const c=this.style&&i.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!y)),y?(this.style=new Vr(this,i||{}),this.style.setEventedParent(this,{style:this.style}),typeof y=="string"?this.style.loadURL(y,i,c):this.style.loadJSON(y,i,c),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Vr(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(y,i){if(typeof y=="string"){const c=this._requestManager.transformRequest(y,"Style");u.h(c,new AbortController).then(p=>{this._updateDiff(p.data,i)}).catch(p=>{p&&this.fire(new u.j(p))})}else typeof y=="object"&&this._updateDiff(y,i)}_updateDiff(y,i){try{this.style.setState(y,i)&&this._update(!0)}catch(c){u.w(`Unable to perform style diff: ${c.message||c.error||c}.  Rebuilding the style from scratch.`),this._updateStyle(y,i)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():u.w("There is no style added to the map.")}addSource(y,i){return this._lazyInitEmptyStyle(),this.style.addSource(y,i),this._update(!0)}isSourceLoaded(y){const i=this.style&&this.style.sourceCaches[y];if(i!==void 0)return i.loaded();this.fire(new u.j(new Error(`There is no source with ID '${y}'`)))}setTerrain(y){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),y){const i=this.style.sourceCaches[y.source];if(!i)throw new Error(`cannot load terrain, because there exists no source with ID: ${y.source}`);this.terrain===null&&i.reload();for(const c in this.style._layers){const p=this.style._layers[c];p.type==="hillshade"&&p.source===y.source&&u.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new vp(this.painter,i,y),this.painter.renderToTexture=new _p(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=c=>{c.dataType==="style"?this.terrain.sourceCache.freeRtt():c.dataType==="source"&&c.tile&&(c.sourceId!==y.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(c.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new u.k("terrain",{terrain:y})),this}getTerrain(){var y,i;return(i=(y=this.terrain)===null||y===void 0?void 0:y.options)!==null&&i!==void 0?i:null}areTilesLoaded(){const y=this.style&&this.style.sourceCaches;for(const i in y){const c=y[i]._tiles;for(const p in c){const m=c[p];if(m.state!=="loaded"&&m.state!=="errored")return!1}}return!0}removeSource(y){return this.style.removeSource(y),this._update(!0)}getSource(y){return this.style.getSource(y)}addImage(y,i,c={}){const{pixelRatio:p=1,sdf:m=!1,stretchX:v,stretchY:w,content:E,textFitWidth:k,textFitHeight:z}=c;if(this._lazyInitEmptyStyle(),!(i instanceof HTMLImageElement||u.b(i))){if(i.width===void 0||i.height===void 0)return this.fire(new u.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:B,height:O,data:K}=i,Q=i;return this.style.addImage(y,{data:new u.R({width:B,height:O},new Uint8Array(K)),pixelRatio:p,stretchX:v,stretchY:w,content:E,textFitWidth:k,textFitHeight:z,sdf:m,version:0,userImage:Q}),Q.onAdd&&Q.onAdd(this,y),this}}{const{width:B,height:O,data:K}=A.getImageData(i);this.style.addImage(y,{data:new u.R({width:B,height:O},K),pixelRatio:p,stretchX:v,stretchY:w,content:E,textFitWidth:k,textFitHeight:z,sdf:m,version:0})}}updateImage(y,i){const c=this.style.getImage(y);if(!c)return this.fire(new u.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const p=i instanceof HTMLImageElement||u.b(i)?A.getImageData(i):i,{width:m,height:v,data:w}=p;if(m===void 0||v===void 0)return this.fire(new u.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(m!==c.data.width||v!==c.data.height)return this.fire(new u.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const E=!(i instanceof HTMLImageElement||u.b(i));return c.data.replace(w,E),this.style.updateImage(y,c),this}getImage(y){return this.style.getImage(y)}hasImage(y){return y?!!this.style.getImage(y):(this.fire(new u.j(new Error("Missing required image id"))),!1)}removeImage(y){this.style.removeImage(y)}loadImage(y){return H.getImage(this._requestManager.transformRequest(y,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(y,i){return this._lazyInitEmptyStyle(),this.style.addLayer(y,i),this._update(!0)}moveLayer(y,i){return this.style.moveLayer(y,i),this._update(!0)}removeLayer(y){return this.style.removeLayer(y),this._update(!0)}getLayer(y){return this.style.getLayer(y)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(y,i,c){return this.style.setLayerZoomRange(y,i,c),this._update(!0)}setFilter(y,i,c={}){return this.style.setFilter(y,i,c),this._update(!0)}getFilter(y){return this.style.getFilter(y)}setPaintProperty(y,i,c,p={}){return this.style.setPaintProperty(y,i,c,p),this._update(!0)}getPaintProperty(y,i){return this.style.getPaintProperty(y,i)}setLayoutProperty(y,i,c,p={}){return this.style.setLayoutProperty(y,i,c,p),this._update(!0)}getLayoutProperty(y,i){return this.style.getLayoutProperty(y,i)}setGlyphs(y,i={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(y,i),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(y,i,c={}){return this._lazyInitEmptyStyle(),this.style.addSprite(y,i,c,p=>{p||this._update(!0)}),this}removeSprite(y){return this._lazyInitEmptyStyle(),this.style.removeSprite(y),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(y,i={}){return this._lazyInitEmptyStyle(),this.style.setSprite(y,i,c=>{c||this._update(!0)}),this}setLight(y,i={}){return this._lazyInitEmptyStyle(),this.style.setLight(y,i),this._update(!0)}getLight(){return this.style.getLight()}setSky(y){return this._lazyInitEmptyStyle(),this.style.setSky(y),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(y,i){return this.style.setFeatureState(y,i),this._update()}removeFeatureState(y,i){return this.style.removeFeatureState(y,i),this._update()}getFeatureState(y){return this.style.getFeatureState(y)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let y=0,i=0;return this._container&&(y=this._container.clientWidth||400,i=this._container.clientHeight||300),[y,i]}_setupContainer(){const y=this._container;y.classList.add("maplibregl-map");const i=this._canvasContainer=I.create("div","maplibregl-canvas-container",y);this._interactive&&i.classList.add("maplibregl-interactive"),this._canvas=I.create("canvas","maplibregl-canvas",i),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const c=this._containerDimensions(),p=this._getClampedPixelRatio(c[0],c[1]);this._resizeCanvas(c[0],c[1],p);const m=this._controlContainer=I.create("div","maplibregl-control-container",y),v=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(w=>{v[w]=I.create("div",`maplibregl-ctrl-${w} `,m)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(y,i,c){this._canvas.width=Math.floor(c*y),this._canvas.height=Math.floor(c*i),this._canvas.style.width=`${y}px`,this._canvas.style.height=`${i}px`}_setupPainter(){const y={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let i=null;this._canvas.addEventListener("webglcontextcreationerror",p=>{i={requestedAttributes:y},p&&(i.statusMessage=p.statusMessage,i.type=p.type)},{once:!0});const c=this._canvas.getContext("webgl2",y)||this._canvas.getContext("webgl",y);if(!c){const p="Failed to initialize WebGL";throw i?(i.message=p,new Error(JSON.stringify(i))):new Error(p)}this.painter=new hp(c,this.transform),G.testSupport(c)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(y){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||y,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(y){return this._update(),this._renderTaskQueue.add(y)}_cancelRenderFrame(y){this._renderTaskQueue.remove(y)}_render(y){const i=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(y),this._removed)return;let c=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const m=this.transform.zoom,v=A.now();this.style.zoomHistory.update(m,v);const w=new u.a9(m,{now:v,fadeDuration:i,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),E=w.crossFadingFactor();E===1&&E===this._crossFadingFactor||(c=!0,this._crossFadingFactor=E),this.style.update(w)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,i,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:i,showPadding:this.showPadding}),this.fire(new u.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,u.be.mark(u.bf.load),this.fire(new u.k("load"))),this.style&&(this.style.hasTransitions()||c)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const p=this._sourcesDirty||this._styleDirty||this._placementDirty;return p||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new u.k("idle")),!this._loaded||this._fullyLoaded||p||(this._fullyLoaded=!0,u.be.mark(u.bf.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var y;this._hash&&this._hash.remove();for(const c of this._controls)c.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),H.removeThrottleControl(this._imageQueueHandle),(y=this._resizeObserver)===null||y===void 0||y.disconnect();const i=this.painter.context.gl.getExtension("WEBGL_lose_context");i!=null&&i.loseContext&&i.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),I.remove(this._canvasContainer),I.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),u.be.clearMetrics(),this._removed=!0,this.fire(new u.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,A.frameAsync(this._frameRequest).then(y=>{u.be.frame(y),this._frameRequest=null,this._render(y)}).catch(()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(y){this._showTileBoundaries!==y&&(this._showTileBoundaries=y,this._update())}get showPadding(){return!!this._showPadding}set showPadding(y){this._showPadding!==y&&(this._showPadding=y,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(y){this._showCollisionBoxes!==y&&(this._showCollisionBoxes=y,y?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(y){this._showOverdrawInspector!==y&&(this._showOverdrawInspector=y,this._update())}get repaint(){return!!this._repaint}set repaint(y){this._repaint!==y&&(this._repaint=y,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(y){this._vertices=y,this._update()}get version(){return Zh}getCameraTargetElevation(){return this.transform.elevation}},f.MapMouseEvent=vi,f.MapTouchEvent=Fl,f.MapWheelEvent=kh,f.Marker=tn,f.NavigationControl=class{constructor(y){this._updateZoomButtons=()=>{const i=this._map.getZoom(),c=i===this._map.getMaxZoom(),p=i===this._map.getMinZoom();this._zoomInButton.disabled=c,this._zoomOutButton.disabled=p,this._zoomInButton.setAttribute("aria-disabled",c.toString()),this._zoomOutButton.setAttribute("aria-disabled",p.toString())},this._rotateCompassArrow=()=>{const i=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=i},this._setButtonTitle=(i,c)=>{const p=this._map._getUIString(`NavigationControl.${c}`);i.title=p,i.setAttribute("aria-label",p)},this.options=u.e({},Kh,y),this._container=I.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",i=>i.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",i=>this._map.zoomIn({},{originalEvent:i})),I.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",i=>this._map.zoomOut({},{originalEvent:i})),I.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",i=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:i}):this._map.resetNorth({},{originalEvent:i})}),this._compassIcon=I.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(y){return this._map=y,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new bp(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){I.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(y,i){const c=I.create("button",y,this._container);return c.type="button",c.addEventListener("click",i),c}},f.Popup=class extends u.E{constructor(y){super(),this.remove=()=>(this._content&&I.remove(this._content),this._container&&(I.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new u.k("close"))),this),this._onMouseUp=i=>{this._update(i.point)},this._onMouseMove=i=>{this._update(i.point)},this._onDrag=i=>{this._update(i.point)},this._update=i=>{var c;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=I.create("div","maplibregl-popup",this._map.getContainer()),this._tip=I.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const E of this.options.className.split(" "))this._container.classList.add(E);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?wp(this._lngLat,this._flatPos,this._map.transform):(c=this._lngLat)===null||c===void 0?void 0:c.wrap(),this._trackPointer&&!i)return;const p=this._flatPos=this._pos=this._trackPointer&&i?i:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&i?i:this._map.transform.locationPoint(this._lngLat));let m=this.options.anchor;const v=It(this.options.offset);if(!m){const E=this._container.offsetWidth,k=this._container.offsetHeight;let z;z=p.y+v.bottom.y<k?["top"]:p.y>this._map.transform.height-k?["bottom"]:[],p.x<E/2?z.push("left"):p.x>this._map.transform.width-E/2&&z.push("right"),m=z.length===0?"bottom":z.join("-")}let w=p.add(v[m]);this.options.subpixelPositioning||(w=w.round()),I.setTransform(this._container,`${Xh[m]} translate(${w.x}px,${w.y}px)`),Oa(this._container,m,"popup")},this._onClose=()=>{this.remove()},this.options=u.e(Object.create(Xo),y)}addTo(y){return this._map&&this.remove(),this._map=y,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new u.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(y){return this._lngLat=u.N.convert(y),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(y){return this.setDOMContent(document.createTextNode(y))}setHTML(y){const i=document.createDocumentFragment(),c=document.createElement("body");let p;for(c.innerHTML=y;p=c.firstChild,p;)i.appendChild(p);return this.setDOMContent(i)}getMaxWidth(){var y;return(y=this._container)===null||y===void 0?void 0:y.style.maxWidth}setMaxWidth(y){return this.options.maxWidth=y,this._update(),this}setDOMContent(y){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=I.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(y),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(y){return this._container&&this._container.classList.add(y),this}removeClassName(y){return this._container&&this._container.classList.remove(y),this}setOffset(y){return this.options.offset=y,this._update(),this}toggleClassName(y){if(this._container)return this._container.classList.toggle(y)}setSubpixelPositioning(y){this.options.subpixelPositioning=y}_createCloseButton(){this.options.closeButton&&(this._closeButton=I.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const y=this._container.querySelector(Wc);y&&y.focus()}},f.RasterDEMTileSource=Ft,f.RasterTileSource=mt,f.ScaleControl=class{constructor(y){this._onMove=()=>{Jh(this._map,this._container,this.options)},this.setUnit=i=>{this.options.unit=i,Jh(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Sp),y)}getDefaultPosition(){return"bottom-left"}onAdd(y){return this._map=y,this._container=I.create("div","maplibregl-ctrl maplibregl-ctrl-scale",y.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){I.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},f.ScrollZoomHandler=Vh,f.Style=Vr,f.TerrainControl=class{constructor(y){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=y}onAdd(y){return this._map=y,this._container=I.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=I.create("button","maplibregl-ctrl-terrain",this._container),I.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){I.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},f.TwoFingersTouchPitchHandler=Nh,f.TwoFingersTouchRotateHandler=Bh,f.TwoFingersTouchZoomHandler=Fh,f.TwoFingersTouchZoomRotateHandler=Hh,f.VectorTileSource=yr,f.VideoSource=Qt,f.addSourceType=(y,i)=>u._(void 0,void 0,void 0,function*(){if(Nn(y))throw new Error(`A source type called "${y}" already exists.`);((c,p)=>{vr[c]=p})(y,i)}),f.clearPrewarmedResources=function(){const y=Lt;y&&(y.isPreloaded()&&y.numActive()===1?(y.release(st),Lt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},f.getMaxParallelImageRequests=function(){return u.a.MAX_PARALLEL_IMAGE_REQUESTS},f.getRTLTextPluginStatus=function(){return Nr().getRTLTextPluginStatus()},f.getVersion=function(){return Bt},f.getWorkerCount=function(){return St.workerCount},f.getWorkerUrl=function(){return u.a.WORKER_URL},f.importScriptInWorkers=function(y){return tr().broadcast("IS",y)},f.prewarm=function(){or().acquire(st)},f.setMaxParallelImageRequests=function(y){u.a.MAX_PARALLEL_IMAGE_REQUESTS=y},f.setRTLTextPlugin=function(y,i){return Nr().setRTLTextPlugin(y,i)},f.setWorkerCount=function(y){St.workerCount=y},f.setWorkerUrl=function(y){u.a.WORKER_URL=y}});var d=r;return d})})(WT);var K4=WT.exports;const D2=zg(K4),X4=()=>{const[e,t]=L.useState(new Date);L.useEffect(()=>{const a=setInterval(()=>{t(new Date)},1e3);return()=>clearInterval(a)},[]);const r=a=>a.toUTCString().split(" ")[4];return qe.jsx("div",{className:"zulu-clock",children:qe.jsx("p",{children:qe.jsxs("strong",{children:[r(e)," UTC"]})})})};function ZT(e,t){return function(){return e.apply(t,arguments)}}const{toString:J4}=Object.prototype,{getPrototypeOf:fx}=Object,Xg=(e=>t=>{const r=J4.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Aa=e=>(e=e.toLowerCase(),t=>Xg(t)===e),Jg=e=>t=>typeof t===e,{isArray:nh}=Array,_f=Jg("undefined");function Y4(e){return e!==null&&!_f(e)&&e.constructor!==null&&!_f(e.constructor)&&jo(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const KT=Aa("ArrayBuffer");function Q4(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&KT(e.buffer),t}const ez=Jg("string"),jo=Jg("function"),XT=Jg("number"),Yg=e=>e!==null&&typeof e=="object",tz=e=>e===!0||e===!1,Fm=e=>{if(Xg(e)!=="object")return!1;const t=fx(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},rz=Aa("Date"),nz=Aa("File"),iz=Aa("Blob"),oz=Aa("FileList"),az=e=>Yg(e)&&jo(e.pipe),sz=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||jo(e.append)&&((t=Xg(e))==="formdata"||t==="object"&&jo(e.toString)&&e.toString()==="[object FormData]"))},lz=Aa("URLSearchParams"),[cz,uz,hz,dz]=["ReadableStream","Request","Response","Headers"].map(Aa),fz=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function $f(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let a,l;if(typeof e!="object"&&(e=[e]),nh(e))for(a=0,l=e.length;a<l;a++)t.call(null,e[a],a,e);else{const d=r?Object.getOwnPropertyNames(e):Object.keys(e),f=d.length;let u;for(a=0;a<f;a++)u=d[a],t.call(null,e[u],u,e)}}function JT(e,t){t=t.toLowerCase();const r=Object.keys(e);let a=r.length,l;for(;a-- >0;)if(l=r[a],t===l.toLowerCase())return l;return null}const ac=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,YT=e=>!_f(e)&&e!==ac;function p_(){const{caseless:e}=YT(this)&&this||{},t={},r=(a,l)=>{const d=e&&JT(t,l)||l;Fm(t[d])&&Fm(a)?t[d]=p_(t[d],a):Fm(a)?t[d]=p_({},a):nh(a)?t[d]=a.slice():t[d]=a};for(let a=0,l=arguments.length;a<l;a++)arguments[a]&&$f(arguments[a],r);return t}const pz=(e,t,r,{allOwnKeys:a}={})=>($f(t,(l,d)=>{r&&jo(l)?e[d]=ZT(l,r):e[d]=l},{allOwnKeys:a}),e),mz=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),gz=(e,t,r,a)=>{e.prototype=Object.create(t.prototype,a),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},yz=(e,t,r,a)=>{let l,d,f;const u={};if(t=t||{},e==null)return t;do{for(l=Object.getOwnPropertyNames(e),d=l.length;d-- >0;)f=l[d],(!a||a(f,e,t))&&!u[f]&&(t[f]=e[f],u[f]=!0);e=r!==!1&&fx(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},vz=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const a=e.indexOf(t,r);return a!==-1&&a===r},_z=e=>{if(!e)return null;if(nh(e))return e;let t=e.length;if(!XT(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},xz=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&fx(Uint8Array)),bz=(e,t)=>{const a=(e&&e[Symbol.iterator]).call(e);let l;for(;(l=a.next())&&!l.done;){const d=l.value;t.call(e,d[0],d[1])}},wz=(e,t)=>{let r;const a=[];for(;(r=e.exec(t))!==null;)a.push(r);return a},Sz=Aa("HTMLFormElement"),Cz=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,a,l){return a.toUpperCase()+l}),F2=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),Ez=Aa("RegExp"),QT=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),a={};$f(r,(l,d)=>{let f;(f=t(l,d,e))!==!1&&(a[d]=f||l)}),Object.defineProperties(e,a)},Tz=e=>{QT(e,(t,r)=>{if(jo(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const a=e[r];if(jo(a)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},Pz=(e,t)=>{const r={},a=l=>{l.forEach(d=>{r[d]=!0})};return nh(e)?a(e):a(String(e).split(t)),r},Iz=()=>{},kz=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t,e0="abcdefghijklmnopqrstuvwxyz",O2="0123456789",eP={DIGIT:O2,ALPHA:e0,ALPHA_DIGIT:e0+e0.toUpperCase()+O2},Mz=(e=16,t=eP.ALPHA_DIGIT)=>{let r="";const{length:a}=t;for(;e--;)r+=t[Math.random()*a|0];return r};function Az(e){return!!(e&&jo(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const zz=e=>{const t=new Array(10),r=(a,l)=>{if(Yg(a)){if(t.indexOf(a)>=0)return;if(!("toJSON"in a)){t[l]=a;const d=nh(a)?[]:{};return $f(a,(f,u)=>{const S=r(f,l+1);!_f(S)&&(d[u]=S)}),t[l]=void 0,d}}return a};return r(e,0)},Rz=Aa("AsyncFunction"),Lz=e=>e&&(Yg(e)||jo(e))&&jo(e.then)&&jo(e.catch),tP=((e,t)=>e?setImmediate:t?((r,a)=>(ac.addEventListener("message",({source:l,data:d})=>{l===ac&&d===r&&a.length&&a.shift()()},!1),l=>{a.push(l),ac.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",jo(ac.postMessage)),Dz=typeof queueMicrotask<"u"?queueMicrotask.bind(ac):typeof process<"u"&&process.nextTick||tP,Ue={isArray:nh,isArrayBuffer:KT,isBuffer:Y4,isFormData:sz,isArrayBufferView:Q4,isString:ez,isNumber:XT,isBoolean:tz,isObject:Yg,isPlainObject:Fm,isReadableStream:cz,isRequest:uz,isResponse:hz,isHeaders:dz,isUndefined:_f,isDate:rz,isFile:nz,isBlob:iz,isRegExp:Ez,isFunction:jo,isStream:az,isURLSearchParams:lz,isTypedArray:xz,isFileList:oz,forEach:$f,merge:p_,extend:pz,trim:fz,stripBOM:mz,inherits:gz,toFlatObject:yz,kindOf:Xg,kindOfTest:Aa,endsWith:vz,toArray:_z,forEachEntry:bz,matchAll:wz,isHTMLForm:Sz,hasOwnProperty:F2,hasOwnProp:F2,reduceDescriptors:QT,freezeMethods:Tz,toObjectSet:Pz,toCamelCase:Cz,noop:Iz,toFiniteNumber:kz,findKey:JT,global:ac,isContextDefined:YT,ALPHABET:eP,generateString:Mz,isSpecCompliantForm:Az,toJSONObject:zz,isAsyncFn:Rz,isThenable:Lz,setImmediate:tP,asap:Dz};function ar(e,t,r,a,l){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),a&&(this.request=a),l&&(this.response=l,this.status=l.status?l.status:null)}Ue.inherits(ar,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ue.toJSONObject(this.config),code:this.code,status:this.status}}});const rP=ar.prototype,nP={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{nP[e]={value:e}});Object.defineProperties(ar,nP);Object.defineProperty(rP,"isAxiosError",{value:!0});ar.from=(e,t,r,a,l,d)=>{const f=Object.create(rP);return Ue.toFlatObject(e,f,function(S){return S!==Error.prototype},u=>u!=="isAxiosError"),ar.call(f,e.message,t,r,a,l),f.cause=e,f.name=e.name,d&&Object.assign(f,d),f};const Fz=null;function m_(e){return Ue.isPlainObject(e)||Ue.isArray(e)}function iP(e){return Ue.endsWith(e,"[]")?e.slice(0,-2):e}function B2(e,t,r){return e?e.concat(t).map(function(l,d){return l=iP(l),!r&&d?"["+l+"]":l}).join(r?".":""):t}function Oz(e){return Ue.isArray(e)&&!e.some(m_)}const Bz=Ue.toFlatObject(Ue,{},null,function(t){return/^is[A-Z]/.test(t)});function Qg(e,t,r){if(!Ue.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=Ue.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(q,Z){return!Ue.isUndefined(Z[q])});const a=r.metaTokens,l=r.visitor||M,d=r.dots,f=r.indexes,S=(r.Blob||typeof Blob<"u"&&Blob)&&Ue.isSpecCompliantForm(t);if(!Ue.isFunction(l))throw new TypeError("visitor must be a function");function T(N){if(N===null)return"";if(Ue.isDate(N))return N.toISOString();if(!S&&Ue.isBlob(N))throw new ar("Blob is not supported. Use a Buffer instead.");return Ue.isArrayBuffer(N)||Ue.isTypedArray(N)?S&&typeof Blob=="function"?new Blob([N]):Buffer.from(N):N}function M(N,q,Z){let V=N;if(N&&!Z&&typeof N=="object"){if(Ue.endsWith(q,"{}"))q=a?q:q.slice(0,-2),N=JSON.stringify(N);else if(Ue.isArray(N)&&Oz(N)||(Ue.isFileList(N)||Ue.endsWith(q,"[]"))&&(V=Ue.toArray(N)))return q=iP(q),V.forEach(function(H,Y){!(Ue.isUndefined(H)||H===null)&&t.append(f===!0?B2([q],Y,d):f===null?q:q+"[]",T(H))}),!1}return m_(N)?!0:(t.append(B2(Z,q,d),T(N)),!1)}const A=[],I=Object.assign(Bz,{defaultVisitor:M,convertValue:T,isVisitable:m_});function G(N,q){if(!Ue.isUndefined(N)){if(A.indexOf(N)!==-1)throw Error("Circular reference detected in "+q.join("."));A.push(N),Ue.forEach(N,function(V,F){(!(Ue.isUndefined(V)||V===null)&&l.call(t,V,Ue.isString(F)?F.trim():F,q,I))===!0&&G(V,q?q.concat(F):[F])}),A.pop()}}if(!Ue.isObject(e))throw new TypeError("data must be an object");return G(e),t}function N2(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(a){return t[a]})}function px(e,t){this._pairs=[],e&&Qg(e,this,t)}const oP=px.prototype;oP.append=function(t,r){this._pairs.push([t,r])};oP.toString=function(t){const r=t?function(a){return t.call(this,a,N2)}:N2;return this._pairs.map(function(l){return r(l[0])+"="+r(l[1])},"").join("&")};function Nz(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function aP(e,t,r){if(!t)return e;const a=r&&r.encode||Nz,l=r&&r.serialize;let d;if(l?d=l(t,r):d=Ue.isURLSearchParams(t)?t.toString():new px(t,r).toString(a),d){const f=e.indexOf("#");f!==-1&&(e=e.slice(0,f)),e+=(e.indexOf("?")===-1?"?":"&")+d}return e}class $2{constructor(){this.handlers=[]}use(t,r,a){return this.handlers.push({fulfilled:t,rejected:r,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Ue.forEach(this.handlers,function(a){a!==null&&t(a)})}}const sP={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},$z=typeof URLSearchParams<"u"?URLSearchParams:px,jz=typeof FormData<"u"?FormData:null,Vz=typeof Blob<"u"?Blob:null,Uz={isBrowser:!0,classes:{URLSearchParams:$z,FormData:jz,Blob:Vz},protocols:["http","https","file","blob","url","data"]},mx=typeof window<"u"&&typeof document<"u",g_=typeof navigator=="object"&&navigator||void 0,Hz=mx&&(!g_||["ReactNative","NativeScript","NS"].indexOf(g_.product)<0),qz=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Wz=mx&&window.location.href||"http://localhost",Gz=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:mx,hasStandardBrowserEnv:Hz,hasStandardBrowserWebWorkerEnv:qz,navigator:g_,origin:Wz},Symbol.toStringTag,{value:"Module"})),_o={...Gz,...Uz};function Zz(e,t){return Qg(e,new _o.classes.URLSearchParams,Object.assign({visitor:function(r,a,l,d){return _o.isNode&&Ue.isBuffer(r)?(this.append(a,r.toString("base64")),!1):d.defaultVisitor.apply(this,arguments)}},t))}function Kz(e){return Ue.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Xz(e){const t={},r=Object.keys(e);let a;const l=r.length;let d;for(a=0;a<l;a++)d=r[a],t[d]=e[d];return t}function lP(e){function t(r,a,l,d){let f=r[d++];if(f==="__proto__")return!0;const u=Number.isFinite(+f),S=d>=r.length;return f=!f&&Ue.isArray(l)?l.length:f,S?(Ue.hasOwnProp(l,f)?l[f]=[l[f],a]:l[f]=a,!u):((!l[f]||!Ue.isObject(l[f]))&&(l[f]=[]),t(r,a,l[f],d)&&Ue.isArray(l[f])&&(l[f]=Xz(l[f])),!u)}if(Ue.isFormData(e)&&Ue.isFunction(e.entries)){const r={};return Ue.forEachEntry(e,(a,l)=>{t(Kz(a),l,r,0)}),r}return null}function Jz(e,t,r){if(Ue.isString(e))try{return(t||JSON.parse)(e),Ue.trim(e)}catch(a){if(a.name!=="SyntaxError")throw a}return(0,JSON.stringify)(e)}const jf={transitional:sP,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const a=r.getContentType()||"",l=a.indexOf("application/json")>-1,d=Ue.isObject(t);if(d&&Ue.isHTMLForm(t)&&(t=new FormData(t)),Ue.isFormData(t))return l?JSON.stringify(lP(t)):t;if(Ue.isArrayBuffer(t)||Ue.isBuffer(t)||Ue.isStream(t)||Ue.isFile(t)||Ue.isBlob(t)||Ue.isReadableStream(t))return t;if(Ue.isArrayBufferView(t))return t.buffer;if(Ue.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let u;if(d){if(a.indexOf("application/x-www-form-urlencoded")>-1)return Zz(t,this.formSerializer).toString();if((u=Ue.isFileList(t))||a.indexOf("multipart/form-data")>-1){const S=this.env&&this.env.FormData;return Qg(u?{"files[]":t}:t,S&&new S,this.formSerializer)}}return d||l?(r.setContentType("application/json",!1),Jz(t)):t}],transformResponse:[function(t){const r=this.transitional||jf.transitional,a=r&&r.forcedJSONParsing,l=this.responseType==="json";if(Ue.isResponse(t)||Ue.isReadableStream(t))return t;if(t&&Ue.isString(t)&&(a&&!this.responseType||l)){const f=!(r&&r.silentJSONParsing)&&l;try{return JSON.parse(t)}catch(u){if(f)throw u.name==="SyntaxError"?ar.from(u,ar.ERR_BAD_RESPONSE,this,null,this.response):u}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:_o.classes.FormData,Blob:_o.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Ue.forEach(["delete","get","head","post","put","patch"],e=>{jf.headers[e]={}});const Yz=Ue.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Qz=e=>{const t={};let r,a,l;return e&&e.split(`
`).forEach(function(f){l=f.indexOf(":"),r=f.substring(0,l).trim().toLowerCase(),a=f.substring(l+1).trim(),!(!r||t[r]&&Yz[r])&&(r==="set-cookie"?t[r]?t[r].push(a):t[r]=[a]:t[r]=t[r]?t[r]+", "+a:a)}),t},j2=Symbol("internals");function Id(e){return e&&String(e).trim().toLowerCase()}function Om(e){return e===!1||e==null?e:Ue.isArray(e)?e.map(Om):String(e)}function eR(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let a;for(;a=r.exec(e);)t[a[1]]=a[2];return t}const tR=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function t0(e,t,r,a,l){if(Ue.isFunction(a))return a.call(this,t,r);if(l&&(t=r),!!Ue.isString(t)){if(Ue.isString(a))return t.indexOf(a)!==-1;if(Ue.isRegExp(a))return a.test(t)}}function rR(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,a)=>r.toUpperCase()+a)}function nR(e,t){const r=Ue.toCamelCase(" "+t);["get","set","has"].forEach(a=>{Object.defineProperty(e,a+r,{value:function(l,d,f){return this[a].call(this,t,l,d,f)},configurable:!0})})}class xo{constructor(t){t&&this.set(t)}set(t,r,a){const l=this;function d(u,S,T){const M=Id(S);if(!M)throw new Error("header name must be a non-empty string");const A=Ue.findKey(l,M);(!A||l[A]===void 0||T===!0||T===void 0&&l[A]!==!1)&&(l[A||S]=Om(u))}const f=(u,S)=>Ue.forEach(u,(T,M)=>d(T,M,S));if(Ue.isPlainObject(t)||t instanceof this.constructor)f(t,r);else if(Ue.isString(t)&&(t=t.trim())&&!tR(t))f(Qz(t),r);else if(Ue.isHeaders(t))for(const[u,S]of t.entries())d(S,u,a);else t!=null&&d(r,t,a);return this}get(t,r){if(t=Id(t),t){const a=Ue.findKey(this,t);if(a){const l=this[a];if(!r)return l;if(r===!0)return eR(l);if(Ue.isFunction(r))return r.call(this,l,a);if(Ue.isRegExp(r))return r.exec(l);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=Id(t),t){const a=Ue.findKey(this,t);return!!(a&&this[a]!==void 0&&(!r||t0(this,this[a],a,r)))}return!1}delete(t,r){const a=this;let l=!1;function d(f){if(f=Id(f),f){const u=Ue.findKey(a,f);u&&(!r||t0(a,a[u],u,r))&&(delete a[u],l=!0)}}return Ue.isArray(t)?t.forEach(d):d(t),l}clear(t){const r=Object.keys(this);let a=r.length,l=!1;for(;a--;){const d=r[a];(!t||t0(this,this[d],d,t,!0))&&(delete this[d],l=!0)}return l}normalize(t){const r=this,a={};return Ue.forEach(this,(l,d)=>{const f=Ue.findKey(a,d);if(f){r[f]=Om(l),delete r[d];return}const u=t?rR(d):String(d).trim();u!==d&&delete r[d],r[u]=Om(l),a[u]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return Ue.forEach(this,(a,l)=>{a!=null&&a!==!1&&(r[l]=t&&Ue.isArray(a)?a.join(", "):a)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const a=new this(t);return r.forEach(l=>a.set(l)),a}static accessor(t){const a=(this[j2]=this[j2]={accessors:{}}).accessors,l=this.prototype;function d(f){const u=Id(f);a[u]||(nR(l,f),a[u]=!0)}return Ue.isArray(t)?t.forEach(d):d(t),this}}xo.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Ue.reduceDescriptors(xo.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(a){this[r]=a}}});Ue.freezeMethods(xo);function r0(e,t){const r=this||jf,a=t||r,l=xo.from(a.headers);let d=a.data;return Ue.forEach(e,function(u){d=u.call(r,d,l.normalize(),t?t.status:void 0)}),l.normalize(),d}function cP(e){return!!(e&&e.__CANCEL__)}function ih(e,t,r){ar.call(this,e??"canceled",ar.ERR_CANCELED,t,r),this.name="CanceledError"}Ue.inherits(ih,ar,{__CANCEL__:!0});function uP(e,t,r){const a=r.config.validateStatus;!r.status||!a||a(r.status)?e(r):t(new ar("Request failed with status code "+r.status,[ar.ERR_BAD_REQUEST,ar.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function iR(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function oR(e,t){e=e||10;const r=new Array(e),a=new Array(e);let l=0,d=0,f;return t=t!==void 0?t:1e3,function(S){const T=Date.now(),M=a[d];f||(f=T),r[l]=S,a[l]=T;let A=d,I=0;for(;A!==l;)I+=r[A++],A=A%e;if(l=(l+1)%e,l===d&&(d=(d+1)%e),T-f<t)return;const G=M&&T-M;return G?Math.round(I*1e3/G):void 0}}function aR(e,t){let r=0,a=1e3/t,l,d;const f=(T,M=Date.now())=>{r=M,l=null,d&&(clearTimeout(d),d=null),e.apply(null,T)};return[(...T)=>{const M=Date.now(),A=M-r;A>=a?f(T,M):(l=T,d||(d=setTimeout(()=>{d=null,f(l)},a-A)))},()=>l&&f(l)]}const yg=(e,t,r=3)=>{let a=0;const l=oR(50,250);return aR(d=>{const f=d.loaded,u=d.lengthComputable?d.total:void 0,S=f-a,T=l(S),M=f<=u;a=f;const A={loaded:f,total:u,progress:u?f/u:void 0,bytes:S,rate:T||void 0,estimated:T&&u&&M?(u-f)/T:void 0,event:d,lengthComputable:u!=null,[t?"download":"upload"]:!0};e(A)},r)},V2=(e,t)=>{const r=e!=null;return[a=>t[0]({lengthComputable:r,total:e,loaded:a}),t[1]]},U2=e=>(...t)=>Ue.asap(()=>e(...t)),sR=_o.hasStandardBrowserEnv?function(){const t=_o.navigator&&/(msie|trident)/i.test(_o.navigator.userAgent),r=document.createElement("a");let a;function l(d){let f=d;return t&&(r.setAttribute("href",f),f=r.href),r.setAttribute("href",f),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return a=l(window.location.href),function(f){const u=Ue.isString(f)?l(f):f;return u.protocol===a.protocol&&u.host===a.host}}():function(){return function(){return!0}}(),lR=_o.hasStandardBrowserEnv?{write(e,t,r,a,l,d){const f=[e+"="+encodeURIComponent(t)];Ue.isNumber(r)&&f.push("expires="+new Date(r).toGMTString()),Ue.isString(a)&&f.push("path="+a),Ue.isString(l)&&f.push("domain="+l),d===!0&&f.push("secure"),document.cookie=f.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function cR(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function uR(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function hP(e,t){return e&&!cR(t)?uR(e,t):t}const H2=e=>e instanceof xo?{...e}:e;function _c(e,t){t=t||{};const r={};function a(T,M,A){return Ue.isPlainObject(T)&&Ue.isPlainObject(M)?Ue.merge.call({caseless:A},T,M):Ue.isPlainObject(M)?Ue.merge({},M):Ue.isArray(M)?M.slice():M}function l(T,M,A){if(Ue.isUndefined(M)){if(!Ue.isUndefined(T))return a(void 0,T,A)}else return a(T,M,A)}function d(T,M){if(!Ue.isUndefined(M))return a(void 0,M)}function f(T,M){if(Ue.isUndefined(M)){if(!Ue.isUndefined(T))return a(void 0,T)}else return a(void 0,M)}function u(T,M,A){if(A in t)return a(T,M);if(A in e)return a(void 0,T)}const S={url:d,method:d,data:d,baseURL:f,transformRequest:f,transformResponse:f,paramsSerializer:f,timeout:f,timeoutMessage:f,withCredentials:f,withXSRFToken:f,adapter:f,responseType:f,xsrfCookieName:f,xsrfHeaderName:f,onUploadProgress:f,onDownloadProgress:f,decompress:f,maxContentLength:f,maxBodyLength:f,beforeRedirect:f,transport:f,httpAgent:f,httpsAgent:f,cancelToken:f,socketPath:f,responseEncoding:f,validateStatus:u,headers:(T,M)=>l(H2(T),H2(M),!0)};return Ue.forEach(Object.keys(Object.assign({},e,t)),function(M){const A=S[M]||l,I=A(e[M],t[M],M);Ue.isUndefined(I)&&A!==u||(r[M]=I)}),r}const dP=e=>{const t=_c({},e);let{data:r,withXSRFToken:a,xsrfHeaderName:l,xsrfCookieName:d,headers:f,auth:u}=t;t.headers=f=xo.from(f),t.url=aP(hP(t.baseURL,t.url),e.params,e.paramsSerializer),u&&f.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):"")));let S;if(Ue.isFormData(r)){if(_o.hasStandardBrowserEnv||_o.hasStandardBrowserWebWorkerEnv)f.setContentType(void 0);else if((S=f.getContentType())!==!1){const[T,...M]=S?S.split(";").map(A=>A.trim()).filter(Boolean):[];f.setContentType([T||"multipart/form-data",...M].join("; "))}}if(_o.hasStandardBrowserEnv&&(a&&Ue.isFunction(a)&&(a=a(t)),a||a!==!1&&sR(t.url))){const T=l&&d&&lR.read(d);T&&f.set(l,T)}return t},hR=typeof XMLHttpRequest<"u",dR=hR&&function(e){return new Promise(function(r,a){const l=dP(e);let d=l.data;const f=xo.from(l.headers).normalize();let{responseType:u,onUploadProgress:S,onDownloadProgress:T}=l,M,A,I,G,N;function q(){G&&G(),N&&N(),l.cancelToken&&l.cancelToken.unsubscribe(M),l.signal&&l.signal.removeEventListener("abort",M)}let Z=new XMLHttpRequest;Z.open(l.method.toUpperCase(),l.url,!0),Z.timeout=l.timeout;function V(){if(!Z)return;const H=xo.from("getAllResponseHeaders"in Z&&Z.getAllResponseHeaders()),ne={data:!u||u==="text"||u==="json"?Z.responseText:Z.response,status:Z.status,statusText:Z.statusText,headers:H,config:e,request:Z};uP(function(ie){r(ie),q()},function(ie){a(ie),q()},ne),Z=null}"onloadend"in Z?Z.onloadend=V:Z.onreadystatechange=function(){!Z||Z.readyState!==4||Z.status===0&&!(Z.responseURL&&Z.responseURL.indexOf("file:")===0)||setTimeout(V)},Z.onabort=function(){Z&&(a(new ar("Request aborted",ar.ECONNABORTED,e,Z)),Z=null)},Z.onerror=function(){a(new ar("Network Error",ar.ERR_NETWORK,e,Z)),Z=null},Z.ontimeout=function(){let Y=l.timeout?"timeout of "+l.timeout+"ms exceeded":"timeout exceeded";const ne=l.transitional||sP;l.timeoutErrorMessage&&(Y=l.timeoutErrorMessage),a(new ar(Y,ne.clarifyTimeoutError?ar.ETIMEDOUT:ar.ECONNABORTED,e,Z)),Z=null},d===void 0&&f.setContentType(null),"setRequestHeader"in Z&&Ue.forEach(f.toJSON(),function(Y,ne){Z.setRequestHeader(ne,Y)}),Ue.isUndefined(l.withCredentials)||(Z.withCredentials=!!l.withCredentials),u&&u!=="json"&&(Z.responseType=l.responseType),T&&([I,N]=yg(T,!0),Z.addEventListener("progress",I)),S&&Z.upload&&([A,G]=yg(S),Z.upload.addEventListener("progress",A),Z.upload.addEventListener("loadend",G)),(l.cancelToken||l.signal)&&(M=H=>{Z&&(a(!H||H.type?new ih(null,e,Z):H),Z.abort(),Z=null)},l.cancelToken&&l.cancelToken.subscribe(M),l.signal&&(l.signal.aborted?M():l.signal.addEventListener("abort",M)));const F=iR(l.url);if(F&&_o.protocols.indexOf(F)===-1){a(new ar("Unsupported protocol "+F+":",ar.ERR_BAD_REQUEST,e));return}Z.send(d||null)})},fR=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let a=new AbortController,l;const d=function(T){if(!l){l=!0,u();const M=T instanceof Error?T:this.reason;a.abort(M instanceof ar?M:new ih(M instanceof Error?M.message:M))}};let f=t&&setTimeout(()=>{f=null,d(new ar(`timeout ${t} of ms exceeded`,ar.ETIMEDOUT))},t);const u=()=>{e&&(f&&clearTimeout(f),f=null,e.forEach(T=>{T.unsubscribe?T.unsubscribe(d):T.removeEventListener("abort",d)}),e=null)};e.forEach(T=>T.addEventListener("abort",d));const{signal:S}=a;return S.unsubscribe=()=>Ue.asap(u),S}},pR=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let a=0,l;for(;a<r;)l=a+t,yield e.slice(a,l),a=l},mR=async function*(e,t){for await(const r of gR(e))yield*pR(r,t)},gR=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:a}=await t.read();if(r)break;yield a}}finally{await t.cancel()}},q2=(e,t,r,a)=>{const l=mR(e,t);let d=0,f,u=S=>{f||(f=!0,a&&a(S))};return new ReadableStream({async pull(S){try{const{done:T,value:M}=await l.next();if(T){u(),S.close();return}let A=M.byteLength;if(r){let I=d+=A;r(I)}S.enqueue(new Uint8Array(M))}catch(T){throw u(T),T}},cancel(S){return u(S),l.return()}},{highWaterMark:2})},ey=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",fP=ey&&typeof ReadableStream=="function",yR=ey&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),pP=(e,...t)=>{try{return!!e(...t)}catch{return!1}},vR=fP&&pP(()=>{let e=!1;const t=new Request(_o.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),W2=64*1024,y_=fP&&pP(()=>Ue.isReadableStream(new Response("").body)),vg={stream:y_&&(e=>e.body)};ey&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!vg[t]&&(vg[t]=Ue.isFunction(e[t])?r=>r[t]():(r,a)=>{throw new ar(`Response type '${t}' is not supported`,ar.ERR_NOT_SUPPORT,a)})})})(new Response);const _R=async e=>{if(e==null)return 0;if(Ue.isBlob(e))return e.size;if(Ue.isSpecCompliantForm(e))return(await new Request(_o.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(Ue.isArrayBufferView(e)||Ue.isArrayBuffer(e))return e.byteLength;if(Ue.isURLSearchParams(e)&&(e=e+""),Ue.isString(e))return(await yR(e)).byteLength},xR=async(e,t)=>{const r=Ue.toFiniteNumber(e.getContentLength());return r??_R(t)},bR=ey&&(async e=>{let{url:t,method:r,data:a,signal:l,cancelToken:d,timeout:f,onDownloadProgress:u,onUploadProgress:S,responseType:T,headers:M,withCredentials:A="same-origin",fetchOptions:I}=dP(e);T=T?(T+"").toLowerCase():"text";let G=fR([l,d&&d.toAbortSignal()],f),N;const q=G&&G.unsubscribe&&(()=>{G.unsubscribe()});let Z;try{if(S&&vR&&r!=="get"&&r!=="head"&&(Z=await xR(M,a))!==0){let ne=new Request(t,{method:"POST",body:a,duplex:"half"}),fe;if(Ue.isFormData(a)&&(fe=ne.headers.get("content-type"))&&M.setContentType(fe),ne.body){const[ie,_e]=V2(Z,yg(U2(S)));a=q2(ne.body,W2,ie,_e)}}Ue.isString(A)||(A=A?"include":"omit");const V="credentials"in Request.prototype;N=new Request(t,{...I,signal:G,method:r.toUpperCase(),headers:M.normalize().toJSON(),body:a,duplex:"half",credentials:V?A:void 0});let F=await fetch(N);const H=y_&&(T==="stream"||T==="response");if(y_&&(u||H&&q)){const ne={};["status","statusText","headers"].forEach(be=>{ne[be]=F[be]});const fe=Ue.toFiniteNumber(F.headers.get("content-length")),[ie,_e]=u&&V2(fe,yg(U2(u),!0))||[];F=new Response(q2(F.body,W2,ie,()=>{_e&&_e(),q&&q()}),ne)}T=T||"text";let Y=await vg[Ue.findKey(vg,T)||"text"](F,e);return!H&&q&&q(),await new Promise((ne,fe)=>{uP(ne,fe,{data:Y,headers:xo.from(F.headers),status:F.status,statusText:F.statusText,config:e,request:N})})}catch(V){throw q&&q(),V&&V.name==="TypeError"&&/fetch/i.test(V.message)?Object.assign(new ar("Network Error",ar.ERR_NETWORK,e,N),{cause:V.cause||V}):ar.from(V,V&&V.code,e,N)}}),v_={http:Fz,xhr:dR,fetch:bR};Ue.forEach(v_,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const G2=e=>`- ${e}`,wR=e=>Ue.isFunction(e)||e===null||e===!1,mP={getAdapter:e=>{e=Ue.isArray(e)?e:[e];const{length:t}=e;let r,a;const l={};for(let d=0;d<t;d++){r=e[d];let f;if(a=r,!wR(r)&&(a=v_[(f=String(r)).toLowerCase()],a===void 0))throw new ar(`Unknown adapter '${f}'`);if(a)break;l[f||"#"+d]=a}if(!a){const d=Object.entries(l).map(([u,S])=>`adapter ${u} `+(S===!1?"is not supported by the environment":"is not available in the build"));let f=t?d.length>1?`since :
`+d.map(G2).join(`
`):" "+G2(d[0]):"as no adapter specified";throw new ar("There is no suitable adapter to dispatch the request "+f,"ERR_NOT_SUPPORT")}return a},adapters:v_};function n0(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new ih(null,e)}function Z2(e){return n0(e),e.headers=xo.from(e.headers),e.data=r0.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),mP.getAdapter(e.adapter||jf.adapter)(e).then(function(a){return n0(e),a.data=r0.call(e,e.transformResponse,a),a.headers=xo.from(a.headers),a},function(a){return cP(a)||(n0(e),a&&a.response&&(a.response.data=r0.call(e,e.transformResponse,a.response),a.response.headers=xo.from(a.response.headers))),Promise.reject(a)})}const gP="1.7.7",gx={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{gx[e]=function(a){return typeof a===e||"a"+(t<1?"n ":" ")+e}});const K2={};gx.transitional=function(t,r,a){function l(d,f){return"[Axios v"+gP+"] Transitional option '"+d+"'"+f+(a?". "+a:"")}return(d,f,u)=>{if(t===!1)throw new ar(l(f," has been removed"+(r?" in "+r:"")),ar.ERR_DEPRECATED);return r&&!K2[f]&&(K2[f]=!0,console.warn(l(f," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(d,f,u):!0}};function SR(e,t,r){if(typeof e!="object")throw new ar("options must be an object",ar.ERR_BAD_OPTION_VALUE);const a=Object.keys(e);let l=a.length;for(;l-- >0;){const d=a[l],f=t[d];if(f){const u=e[d],S=u===void 0||f(u,d,e);if(S!==!0)throw new ar("option "+d+" must be "+S,ar.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new ar("Unknown option "+d,ar.ERR_BAD_OPTION)}}const __={assertOptions:SR,validators:gx},el=__.validators;class hc{constructor(t){this.defaults=t,this.interceptors={request:new $2,response:new $2}}async request(t,r){try{return await this._request(t,r)}catch(a){if(a instanceof Error){let l;Error.captureStackTrace?Error.captureStackTrace(l={}):l=new Error;const d=l.stack?l.stack.replace(/^.+\n/,""):"";try{a.stack?d&&!String(a.stack).endsWith(d.replace(/^.+\n.+\n/,""))&&(a.stack+=`
`+d):a.stack=d}catch{}}throw a}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=_c(this.defaults,r);const{transitional:a,paramsSerializer:l,headers:d}=r;a!==void 0&&__.assertOptions(a,{silentJSONParsing:el.transitional(el.boolean),forcedJSONParsing:el.transitional(el.boolean),clarifyTimeoutError:el.transitional(el.boolean)},!1),l!=null&&(Ue.isFunction(l)?r.paramsSerializer={serialize:l}:__.assertOptions(l,{encode:el.function,serialize:el.function},!0)),r.method=(r.method||this.defaults.method||"get").toLowerCase();let f=d&&Ue.merge(d.common,d[r.method]);d&&Ue.forEach(["delete","get","head","post","put","patch","common"],N=>{delete d[N]}),r.headers=xo.concat(f,d);const u=[];let S=!0;this.interceptors.request.forEach(function(q){typeof q.runWhen=="function"&&q.runWhen(r)===!1||(S=S&&q.synchronous,u.unshift(q.fulfilled,q.rejected))});const T=[];this.interceptors.response.forEach(function(q){T.push(q.fulfilled,q.rejected)});let M,A=0,I;if(!S){const N=[Z2.bind(this),void 0];for(N.unshift.apply(N,u),N.push.apply(N,T),I=N.length,M=Promise.resolve(r);A<I;)M=M.then(N[A++],N[A++]);return M}I=u.length;let G=r;for(A=0;A<I;){const N=u[A++],q=u[A++];try{G=N(G)}catch(Z){q.call(this,Z);break}}try{M=Z2.call(this,G)}catch(N){return Promise.reject(N)}for(A=0,I=T.length;A<I;)M=M.then(T[A++],T[A++]);return M}getUri(t){t=_c(this.defaults,t);const r=hP(t.baseURL,t.url);return aP(r,t.params,t.paramsSerializer)}}Ue.forEach(["delete","get","head","options"],function(t){hc.prototype[t]=function(r,a){return this.request(_c(a||{},{method:t,url:r,data:(a||{}).data}))}});Ue.forEach(["post","put","patch"],function(t){function r(a){return function(d,f,u){return this.request(_c(u||{},{method:t,headers:a?{"Content-Type":"multipart/form-data"}:{},url:d,data:f}))}}hc.prototype[t]=r(),hc.prototype[t+"Form"]=r(!0)});class yx{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(d){r=d});const a=this;this.promise.then(l=>{if(!a._listeners)return;let d=a._listeners.length;for(;d-- >0;)a._listeners[d](l);a._listeners=null}),this.promise.then=l=>{let d;const f=new Promise(u=>{a.subscribe(u),d=u}).then(l);return f.cancel=function(){a.unsubscribe(d)},f},t(function(d,f,u){a.reason||(a.reason=new ih(d,f,u),r(a.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=a=>{t.abort(a)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new yx(function(l){t=l}),cancel:t}}}function CR(e){return function(r){return e.apply(null,r)}}function ER(e){return Ue.isObject(e)&&e.isAxiosError===!0}const x_={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(x_).forEach(([e,t])=>{x_[t]=e});function yP(e){const t=new hc(e),r=ZT(hc.prototype.request,t);return Ue.extend(r,hc.prototype,t,{allOwnKeys:!0}),Ue.extend(r,t,null,{allOwnKeys:!0}),r.create=function(l){return yP(_c(e,l))},r}const vn=yP(jf);vn.Axios=hc;vn.CanceledError=ih;vn.CancelToken=yx;vn.isCancel=cP;vn.VERSION=gP;vn.toFormData=Qg;vn.AxiosError=ar;vn.Cancel=vn.CanceledError;vn.all=function(t){return Promise.all(t)};vn.spread=CR;vn.isAxiosError=ER;vn.mergeConfig=_c;vn.AxiosHeaders=xo;vn.formToJSON=e=>lP(Ue.isHTMLForm(e)?new FormData(e):e);vn.getAdapter=mP.getAdapter;vn.HttpStatusCode=x_;vn.default=vn;const Jl="nvo8c790hfa9q3duho2jhgd2jf8tgwqw",Yl="https://api.infiniteflight.com/public/v2",vs={getSessionData:async e=>{try{return(await vn.get(`${Yl}/sessions/${e}?apikey=${Jl}`)).data.result}catch(t){throw console.error("Error fetching session data:",t),t}},getFlightData:async e=>{try{return(await vn.get(`${Yl}/sessions/${e}/flights?apikey=${Jl}`)).data.result}catch(t){throw console.error("Error fetching flight data:",t),t}},getAirportData:async e=>{try{return(await vn.get(`${Yl}/world/status/${e}?apikey=${Jl}`)).data.result}catch(t){throw console.error("Error fetching airport data:",t),t}},getAtcData:async e=>{try{return(await vn.get(`${Yl}/sessions/${e}/atc?apikey=${Jl}`)).data.result.filter(r=>r.airportName&&r.type!==null)}catch(t){throw console.error("Error fetching ATC data:",t),t}},getFlightPlan:async(e,t)=>{try{return(await vn.get(`${Yl}/sessions/${e}/flights/${t}/flightplan?apikey=${Jl}`)).data}catch(r){throw console.error("Error fetching flight plan data:",r),r}},userStatus:async e=>{try{const t={userIds:[e]},r={"Content-type":"application/json",Accept:"text/plain"},a=`${Yl}/user/stats?apikey=${Jl}`;return(await vn.post(a,t,{headers:r})).data.result[0]}catch(t){return console.error("Error fetching user status:",t),null}},getRoute:async(e,t)=>{try{const r=`${Yl}/sessions/${e}/flights/${t}/route?apikey=${Jl}`;return(await vn.get(r)).data.result}catch(r){throw console.error("Error fetching route data:",r),r}}},TR=({sessionId:e,onIconClick:t})=>{const r=L.useRef(null),a=L.useRef(),l=L.useRef([]),[d,f]=L.useState([]),[u,S]=L.useState([]);L.useEffect(()=>{const I=async()=>{try{const N=await vs.getFlightData(e);l.current.forEach(q=>q.remove()),l.current=[],N.forEach(q=>{const{latitude:Z,longitude:V,heading:F,flightId:H}=q,Y=document.createElement("div");Y.className="airplane-icon",Y.addEventListener("click",async()=>{T(),t(q);try{const fe=await vs.getRoute(e,H);if(fe){let _e=fe.map(ze=>[ze.longitude,ze.latitude]);_e.push([V,Z]);const be=M(_e),Pe=[];be.forEach((ze,We)=>{const Ce=`flight-route-segment-${We}`;a.current.addSource(Ce,{type:"geojson",data:{type:"Feature",geometry:{type:"LineString",coordinates:ze}}}),a.current.addLayer({id:Ce,type:"line",source:Ce,paint:{"line-color":"#0000FF","line-width":2}}),Pe.push(Ce)}),f(Pe)}const ie=await vs.getFlightPlan(e,H);if(ie&&ie.result&&ie.result.flightPlanItems){const _e=A(ie.result.flightPlanItems);if(_e.length>0){const be=M(_e),Pe=[];be.forEach((ze,We)=>{const Ce=`flight-plan-route-segment-${We}`;a.current.addSource(Ce,{type:"geojson",data:{type:"Feature",geometry:{type:"LineString",coordinates:ze}}}),a.current.addLayer({id:Ce,type:"line",source:Ce,paint:{"line-color":"black","line-width":1,"line-dasharray":[4,2]}}),Pe.push(Ce)}),S(Pe)}else console.error("No coordinates found in flight plan.")}else console.error("Flight plan is empty or malformed.")}catch(fe){console.error("Error fetching route or flight plan:",fe)}});const ne=new D2.Marker({element:Y}).setLngLat([V,Z]).addTo(a.current);ne.setRotation(F),l.current.push(ne)})}catch(N){console.error("Error fetching flight data:",N)}};!a.current&&r.current&&(a.current=new D2.Map({container:r.current,style:"https://api.maptiler.com/maps/basic/style.json?key=oLMznTPIDCPrc3mGZdoh",center:[0,0],zoom:2}),a.current.on("click",()=>{T()})),I();const G=setInterval(I,3e4);return()=>clearInterval(G)},[e,t]);const T=()=>{d.length>0&&(d.forEach(I=>{a.current.getLayer(I)&&a.current.removeLayer(I),a.current.getSource(I)&&a.current.removeSource(I)}),f([])),u.length>0&&(u.forEach(I=>{a.current.getLayer(I)&&a.current.removeLayer(I),a.current.getSource(I)&&a.current.removeSource(I)}),S([]))},M=I=>{let G=[],N=[I[0]];for(let q=1;q<I.length;q++){const[Z,V]=N[N.length-1],[F,H]=I[q];if(Math.abs(F-Z)>180){const Y=F>0?F-360:F+360;N.push([Y,H]),G.push(N),N=[[F,H]]}else N.push([F,H])}return G.push(N),G},A=I=>{let G=[];return I.forEach(N=>{N.location&&N.location.latitude&&N.location.longitude&&G.push([N.location.longitude,N.location.latitude]),N.children&&N.children.length>0&&N.children.forEach(q=>{q.location&&q.location.latitude&&q.location.longitude&&G.push([q.location.longitude,q.location.latitude])})}),G};return qe.jsxs("div",{style:{position:"relative",width:"100%",height:"100vh"},children:[qe.jsx("div",{id:"map",ref:r,style:{width:"100%",height:"100%"}}),qe.jsx(X4,{})]})};var vP={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function r(){for(var d="",f=0;f<arguments.length;f++){var u=arguments[f];u&&(d=l(d,a(u)))}return d}function a(d){if(typeof d=="string"||typeof d=="number")return d;if(typeof d!="object")return"";if(Array.isArray(d))return r.apply(null,d);if(d.toString!==Object.prototype.toString&&!d.toString.toString().includes("[native code]"))return d.toString();var f="";for(var u in d)t.call(d,u)&&d[u]&&(f=l(f,u));return f}function l(d,f){return f?d?d+" "+f:d+f:d}e.exports?(r.default=r,e.exports=r):window.classNames=r})()})(vP);var PR=vP.exports;const Mr=zg(PR);function br(){return br=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},br.apply(null,arguments)}var _P={exports:{}},an={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vx=Symbol.for("react.element"),_x=Symbol.for("react.portal"),ty=Symbol.for("react.fragment"),ry=Symbol.for("react.strict_mode"),ny=Symbol.for("react.profiler"),iy=Symbol.for("react.provider"),oy=Symbol.for("react.context"),IR=Symbol.for("react.server_context"),ay=Symbol.for("react.forward_ref"),sy=Symbol.for("react.suspense"),ly=Symbol.for("react.suspense_list"),cy=Symbol.for("react.memo"),uy=Symbol.for("react.lazy"),kR=Symbol.for("react.offscreen"),xP;xP=Symbol.for("react.module.reference");function la(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case vx:switch(e=e.type,e){case ty:case ny:case ry:case sy:case ly:return e;default:switch(e=e&&e.$$typeof,e){case IR:case oy:case ay:case uy:case cy:case iy:return e;default:return t}}case _x:return t}}}an.ContextConsumer=oy;an.ContextProvider=iy;an.Element=vx;an.ForwardRef=ay;an.Fragment=ty;an.Lazy=uy;an.Memo=cy;an.Portal=_x;an.Profiler=ny;an.StrictMode=ry;an.Suspense=sy;an.SuspenseList=ly;an.isAsyncMode=function(){return!1};an.isConcurrentMode=function(){return!1};an.isContextConsumer=function(e){return la(e)===oy};an.isContextProvider=function(e){return la(e)===iy};an.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===vx};an.isForwardRef=function(e){return la(e)===ay};an.isFragment=function(e){return la(e)===ty};an.isLazy=function(e){return la(e)===uy};an.isMemo=function(e){return la(e)===cy};an.isPortal=function(e){return la(e)===_x};an.isProfiler=function(e){return la(e)===ny};an.isStrictMode=function(e){return la(e)===ry};an.isSuspense=function(e){return la(e)===sy};an.isSuspenseList=function(e){return la(e)===ly};an.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===ty||e===ny||e===ry||e===sy||e===ly||e===kR||typeof e=="object"&&e!==null&&(e.$$typeof===uy||e.$$typeof===cy||e.$$typeof===iy||e.$$typeof===oy||e.$$typeof===ay||e.$$typeof===xP||e.getModuleId!==void 0)};an.typeOf=la;_P.exports=an;var Kd=_P.exports;function xc(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=[];return nn.Children.forEach(e,function(a){a==null&&!t.keepEmpty||(Array.isArray(a)?r=r.concat(xc(a)):Kd.isFragment(a)&&a.props?r=r.concat(xc(a.props.children,t)):r.push(a))}),r}var b_={},MR=function(t){};function AR(e,t){}function zR(e,t){}function RR(){b_={}}function bP(e,t,r){!t&&!b_[r]&&(e(!1,r),b_[r]=!0)}function ro(e,t){bP(AR,e,t)}function LR(e,t){bP(zR,e,t)}ro.preMessage=MR;ro.resetWarned=RR;ro.noteOnce=LR;function ir(e){"@babel/helpers - typeof";return ir=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ir(e)}function DR(e,t){if(ir(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(ir(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wP(e){var t=DR(e,"string");return ir(t)=="symbol"?t:t+""}function De(e,t,r){return(t=wP(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function X2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function $e(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?X2(Object(r),!0).forEach(function(a){De(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X2(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function xf(e){return e instanceof HTMLElement||e instanceof SVGElement}function FR(e){return e&&ir(e)==="object"&&xf(e.nativeElement)?e.nativeElement:xf(e)?e:null}function Bm(e){var t=FR(e);if(t)return t;if(e instanceof nn.Component){var r;return(r=R2.findDOMNode)===null||r===void 0?void 0:r.call(R2,e)}return null}function hy(e,t,r){var a=L.useRef({});return(!("value"in a.current)||r(a.current.condition,t))&&(a.current.value=e(),a.current.condition=t),a.current.value}var xx=function(t,r){typeof t=="function"?t(r):ir(t)==="object"&&t&&"current"in t&&(t.current=r)},SP=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];var l=r.filter(Boolean);return l.length<=1?l[0]:function(d){r.forEach(function(f){xx(f,d)})}},dy=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return hy(function(){return SP.apply(void 0,r)},r,function(l,d){return l.length!==d.length||l.every(function(f,u){return f!==d[u]})})},fy=function(t){var r,a,l=Kd.isMemo(t)?t.type.type:t.type;return!(typeof l=="function"&&!((r=l.prototype)!==null&&r!==void 0&&r.render)&&l.$$typeof!==Kd.ForwardRef||typeof t=="function"&&!((a=t.prototype)!==null&&a!==void 0&&a.render)&&t.$$typeof!==Kd.ForwardRef)};function J2(e){return L.isValidElement(e)&&!Kd.isFragment(e)}Number(L.version.split(".")[0])>=19;var w_=L.createContext(null);function OR(e){var t=e.children,r=e.onBatchResize,a=L.useRef(0),l=L.useRef([]),d=L.useContext(w_),f=L.useCallback(function(u,S,T){a.current+=1;var M=a.current;l.current.push({size:u,element:S,data:T}),Promise.resolve().then(function(){M===a.current&&(r==null||r(l.current),l.current=[])}),d==null||d(u,S,T)},[r,d]);return L.createElement(w_.Provider,{value:f},t)}var CP=function(){if(typeof Map<"u")return Map;function e(t,r){var a=-1;return t.some(function(l,d){return l[0]===r?(a=d,!0):!1}),a}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(r){var a=e(this.__entries__,r),l=this.__entries__[a];return l&&l[1]},t.prototype.set=function(r,a){var l=e(this.__entries__,r);~l?this.__entries__[l][1]=a:this.__entries__.push([r,a])},t.prototype.delete=function(r){var a=this.__entries__,l=e(a,r);~l&&a.splice(l,1)},t.prototype.has=function(r){return!!~e(this.__entries__,r)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(r,a){a===void 0&&(a=null);for(var l=0,d=this.__entries__;l<d.length;l++){var f=d[l];r.call(a,f[1],f[0])}},t}()}(),S_=typeof window<"u"&&typeof document<"u"&&window.document===document,_g=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),BR=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(_g):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)}}(),NR=2;function $R(e,t){var r=!1,a=!1,l=0;function d(){r&&(r=!1,e()),a&&u()}function f(){BR(d)}function u(){var S=Date.now();if(r){if(S-l<NR)return;a=!0}else r=!0,a=!1,setTimeout(f,t);l=S}return u}var jR=20,VR=["top","right","bottom","left","width","height","size","weight"],UR=typeof MutationObserver<"u",HR=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=$R(this.refresh.bind(this),jR)}return e.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},e.prototype.removeObserver=function(t){var r=this.observers_,a=r.indexOf(t);~a&&r.splice(a,1),!r.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){var t=this.updateObservers_();t&&this.refresh()},e.prototype.updateObservers_=function(){var t=this.observers_.filter(function(r){return r.gatherActive(),r.hasActive()});return t.forEach(function(r){return r.broadcastActive()}),t.length>0},e.prototype.connect_=function(){!S_||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),UR?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){!S_||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(t){var r=t.propertyName,a=r===void 0?"":r,l=VR.some(function(d){return!!~a.indexOf(d)});l&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),EP=function(e,t){for(var r=0,a=Object.keys(t);r<a.length;r++){var l=a[r];Object.defineProperty(e,l,{value:t[l],enumerable:!1,writable:!1,configurable:!0})}return e},Ku=function(e){var t=e&&e.ownerDocument&&e.ownerDocument.defaultView;return t||_g},TP=py(0,0,0,0);function xg(e){return parseFloat(e)||0}function Y2(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return t.reduce(function(a,l){var d=e["border-"+l+"-width"];return a+xg(d)},0)}function qR(e){for(var t=["top","right","bottom","left"],r={},a=0,l=t;a<l.length;a++){var d=l[a],f=e["padding-"+d];r[d]=xg(f)}return r}function WR(e){var t=e.getBBox();return py(0,0,t.width,t.height)}function GR(e){var t=e.clientWidth,r=e.clientHeight;if(!t&&!r)return TP;var a=Ku(e).getComputedStyle(e),l=qR(a),d=l.left+l.right,f=l.top+l.bottom,u=xg(a.width),S=xg(a.height);if(a.boxSizing==="border-box"&&(Math.round(u+d)!==t&&(u-=Y2(a,"left","right")+d),Math.round(S+f)!==r&&(S-=Y2(a,"top","bottom")+f)),!KR(e)){var T=Math.round(u+d)-t,M=Math.round(S+f)-r;Math.abs(T)!==1&&(u-=T),Math.abs(M)!==1&&(S-=M)}return py(l.left,l.top,u,S)}var ZR=function(){return typeof SVGGraphicsElement<"u"?function(e){return e instanceof Ku(e).SVGGraphicsElement}:function(e){return e instanceof Ku(e).SVGElement&&typeof e.getBBox=="function"}}();function KR(e){return e===Ku(e).document.documentElement}function XR(e){return S_?ZR(e)?WR(e):GR(e):TP}function JR(e){var t=e.x,r=e.y,a=e.width,l=e.height,d=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,f=Object.create(d.prototype);return EP(f,{x:t,y:r,width:a,height:l,top:r,right:t+a,bottom:l+r,left:t}),f}function py(e,t,r,a){return{x:e,y:t,width:r,height:a}}var YR=function(){function e(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=py(0,0,0,0),this.target=t}return e.prototype.isActive=function(){var t=XR(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},e}(),QR=function(){function e(t,r){var a=JR(r);EP(this,{target:t,contentRect:a})}return e}(),e5=function(){function e(t,r,a){if(this.activeObservations_=[],this.observations_=new CP,typeof t!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=r,this.callbackCtx_=a}return e.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof Ku(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var r=this.observations_;r.has(t)||(r.set(t,new YR(t)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof Ku(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var r=this.observations_;r.has(t)&&(r.delete(t),r.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(r){r.isActive()&&t.activeObservations_.push(r)})},e.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,r=this.activeObservations_.map(function(a){return new QR(a.target,a.broadcastRect())});this.callback_.call(t,r,t),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),PP=typeof WeakMap<"u"?new WeakMap:new CP,IP=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var r=HR.getInstance(),a=new e5(t,r,this);PP.set(this,a)}return e}();["observe","unobserve","disconnect"].forEach(function(e){IP.prototype[e]=function(){var t;return(t=PP.get(this))[e].apply(t,arguments)}});var t5=function(){return typeof _g.ResizeObserver<"u"?_g.ResizeObserver:IP}(),cl=new Map;function r5(e){e.forEach(function(t){var r,a=t.target;(r=cl.get(a))===null||r===void 0||r.forEach(function(l){return l(a)})})}var kP=new t5(r5);function n5(e,t){cl.has(e)||(cl.set(e,new Set),kP.observe(e)),cl.get(e).add(t)}function i5(e,t){cl.has(e)&&(cl.get(e).delete(t),cl.get(e).size||(kP.unobserve(e),cl.delete(e)))}function Ti(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Q2(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,wP(a.key),a)}}function Pi(e,t,r){return t&&Q2(e.prototype,t),r&&Q2(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function bf(e,t){return bf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},bf(e,t)}function Tl(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bf(e,t)}function wf(e){return wf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},wf(e)}function bx(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(bx=function(){return!!e})()}function gr(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function o5(e,t){if(t&&(ir(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gr(e)}function Pl(e){var t=bx();return function(){var r,a=wf(e);if(t){var l=wf(this).constructor;r=Reflect.construct(a,arguments,l)}else r=a.apply(this,arguments);return o5(this,r)}}var a5=function(e){Tl(r,e);var t=Pl(r);function r(){return Ti(this,r),t.apply(this,arguments)}return Pi(r,[{key:"render",value:function(){return this.props.children}}]),r}(L.Component);function s5(e,t){var r=e.children,a=e.disabled,l=L.useRef(null),d=L.useRef(null),f=L.useContext(w_),u=typeof r=="function",S=u?r(l):r,T=L.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),M=!u&&L.isValidElement(S)&&fy(S),A=M?S.ref:null,I=dy(A,l),G=function(){var V;return Bm(l.current)||(l.current&&ir(l.current)==="object"?Bm((V=l.current)===null||V===void 0?void 0:V.nativeElement):null)||Bm(d.current)};L.useImperativeHandle(t,function(){return G()});var N=L.useRef(e);N.current=e;var q=L.useCallback(function(Z){var V=N.current,F=V.onResize,H=V.data,Y=Z.getBoundingClientRect(),ne=Y.width,fe=Y.height,ie=Z.offsetWidth,_e=Z.offsetHeight,be=Math.floor(ne),Pe=Math.floor(fe);if(T.current.width!==be||T.current.height!==Pe||T.current.offsetWidth!==ie||T.current.offsetHeight!==_e){var ze={width:be,height:Pe,offsetWidth:ie,offsetHeight:_e};T.current=ze;var We=ie===Math.round(ne)?ne:ie,Ce=_e===Math.round(fe)?fe:_e,Ie=$e($e({},ze),{},{offsetWidth:We,offsetHeight:Ce});f==null||f(Ie,Z,H),F&&Promise.resolve().then(function(){F(Ie,Z)})}},[]);return L.useEffect(function(){var Z=G();return Z&&!a&&n5(Z,q),function(){return i5(Z,q)}},[l.current,a]),L.createElement(a5,{ref:d},M?L.cloneElement(S,{ref:I}):S)}var l5=L.forwardRef(s5),c5="rc-observer-key";function u5(e,t){var r=e.children,a=typeof r=="function"?[r]:xc(r);return a.map(function(l,d){var f=(l==null?void 0:l.key)||"".concat(c5,"-").concat(d);return L.createElement(l5,br({},e,{key:f,ref:d===0?t:void 0}),l)})}var Vf=L.forwardRef(u5);Vf.Collection=OR;function Sc(e,t){var r=Object.assign({},e);return Array.isArray(t)&&t.forEach(function(a){delete r[a]}),r}function C_(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=Array(t);r<t;r++)a[r]=e[r];return a}function h5(e){if(Array.isArray(e))return C_(e)}function MP(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function wx(e,t){if(e){if(typeof e=="string")return C_(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?C_(e,t):void 0}}function d5(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nt(e){return h5(e)||MP(e)||wx(e)||d5()}var AP=function(t){return+setTimeout(t,16)},zP=function(t){return clearTimeout(t)};typeof window<"u"&&"requestAnimationFrame"in window&&(AP=function(t){return window.requestAnimationFrame(t)},zP=function(t){return window.cancelAnimationFrame(t)});var eS=0,Sx=new Map;function RP(e){Sx.delete(e)}var xs=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;eS+=1;var a=eS;function l(d){if(d===0)RP(a),t();else{var f=AP(function(){l(d-1)});Sx.set(a,f)}}return l(r),a};xs.cancel=function(e){var t=Sx.get(e);return RP(e),zP(t)};function LP(e){if(Array.isArray(e))return e}function f5(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,l,d,f,u=[],S=!0,T=!1;try{if(d=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;S=!1}else for(;!(S=(a=d.call(r)).done)&&(u.push(a.value),u.length!==t);S=!0);}catch(M){T=!0,l=M}finally{try{if(!S&&r.return!=null&&(f=r.return(),Object(f)!==f))return}finally{if(T)throw l}}return u}}function DP(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nt(e,t){return LP(e)||f5(e,t)||wx(e,t)||DP()}function Sf(e){for(var t=0,r,a=0,l=e.length;l>=4;++a,l-=4)r=e.charCodeAt(a)&255|(e.charCodeAt(++a)&255)<<8|(e.charCodeAt(++a)&255)<<16|(e.charCodeAt(++a)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,t=(r&65535)*1540483477+((r>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(l){case 3:t^=(e.charCodeAt(a+2)&255)<<16;case 2:t^=(e.charCodeAt(a+1)&255)<<8;case 1:t^=e.charCodeAt(a)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}function Uo(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function p5(e,t){if(!e)return!1;if(e.contains)return e.contains(t);for(var r=t;r;){if(r===e)return!0;r=r.parentNode}return!1}var tS="data-rc-order",rS="data-rc-priority",m5="rc-util-key",E_=new Map;function FP(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.mark;return t?t.startsWith("data-")?t:"data-".concat(t):m5}function my(e){if(e.attachTo)return e.attachTo;var t=document.querySelector("head");return t||document.body}function g5(e){return e==="queue"?"prependQueue":e?"prepend":"append"}function Cx(e){return Array.from((E_.get(e)||e).children).filter(function(t){return t.tagName==="STYLE"})}function OP(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Uo())return null;var r=t.csp,a=t.prepend,l=t.priority,d=l===void 0?0:l,f=g5(a),u=f==="prependQueue",S=document.createElement("style");S.setAttribute(tS,f),u&&d&&S.setAttribute(rS,"".concat(d)),r!=null&&r.nonce&&(S.nonce=r==null?void 0:r.nonce),S.innerHTML=e;var T=my(t),M=T.firstChild;if(a){if(u){var A=(t.styles||Cx(T)).filter(function(I){if(!["prepend","prependQueue"].includes(I.getAttribute(tS)))return!1;var G=Number(I.getAttribute(rS)||0);return d>=G});if(A.length)return T.insertBefore(S,A[A.length-1].nextSibling),S}T.insertBefore(S,M)}else T.appendChild(S);return S}function BP(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=my(t);return(t.styles||Cx(r)).find(function(a){return a.getAttribute(FP(t))===e})}function Cf(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=BP(e,t);if(r){var a=my(t);a.removeChild(r)}}function y5(e,t){var r=E_.get(e);if(!r||!p5(document,r)){var a=OP("",t),l=a.parentNode;E_.set(e,l),e.removeChild(a)}}function bs(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=my(r),l=Cx(a),d=$e($e({},r),{},{styles:l});y5(a,d);var f=BP(t,d);if(f){var u,S;if((u=d.csp)!==null&&u!==void 0&&u.nonce&&f.nonce!==((S=d.csp)===null||S===void 0?void 0:S.nonce)){var T;f.nonce=(T=d.csp)===null||T===void 0?void 0:T.nonce}return f.innerHTML!==e&&(f.innerHTML=e),f}var M=OP(e,d);return M.setAttribute(FP(d),t),M}function v5(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.includes(a))continue;r[a]=e[a]}return r}function xn(e,t){if(e==null)return{};var r,a,l=v5(e,t);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(a=0;a<d.length;a++)r=d[a],t.includes(r)||{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function Ef(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=new Set;function l(d,f){var u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,S=a.has(d);if(ro(!S,"Warning: There may be circular references"),S)return!1;if(d===f)return!0;if(r&&u>1)return!1;a.add(d);var T=u+1;if(Array.isArray(d)){if(!Array.isArray(f)||d.length!==f.length)return!1;for(var M=0;M<d.length;M++)if(!l(d[M],f[M],T))return!1;return!0}if(d&&f&&ir(d)==="object"&&ir(f)==="object"){var A=Object.keys(d);return A.length!==Object.keys(f).length?!1:A.every(function(I){return l(d[I],f[I],T)})}return!1}return l(e,t)}var _5="%";function T_(e){return e.join(_5)}var x5=function(){function e(t){Ti(this,e),De(this,"instanceId",void 0),De(this,"cache",new Map),this.instanceId=t}return Pi(e,[{key:"get",value:function(r){return this.opGet(T_(r))}},{key:"opGet",value:function(r){return this.cache.get(r)||null}},{key:"update",value:function(r,a){return this.opUpdate(T_(r),a)}},{key:"opUpdate",value:function(r,a){var l=this.cache.get(r),d=a(l);d===null?this.cache.delete(r):this.cache.set(r,d)}}]),e}(),Xu="data-token-hash",Ta="data-css-hash",ul="__cssinjs_instance__";function b5(){var e=Math.random().toString(12).slice(2);if(typeof document<"u"&&document.head&&document.body){var t=document.body.querySelectorAll("style[".concat(Ta,"]"))||[],r=document.head.firstChild;Array.from(t).forEach(function(l){l[ul]=l[ul]||e,l[ul]===e&&document.head.insertBefore(l,r)});var a={};Array.from(document.querySelectorAll("style[".concat(Ta,"]"))).forEach(function(l){var d=l.getAttribute(Ta);if(a[d]){if(l[ul]===e){var f;(f=l.parentNode)===null||f===void 0||f.removeChild(l)}}else a[d]=!0})}return new x5(e)}var gy=L.createContext({hashPriority:"low",cache:b5(),defaultCache:!0});function w5(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}var Ex=function(){function e(){Ti(this,e),De(this,"cache",void 0),De(this,"keys",void 0),De(this,"cacheCallTimes",void 0),this.cache=new Map,this.keys=[],this.cacheCallTimes=0}return Pi(e,[{key:"size",value:function(){return this.keys.length}},{key:"internalGet",value:function(r){var a,l,d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,f={map:this.cache};return r.forEach(function(u){if(!f)f=void 0;else{var S;f=(S=f)===null||S===void 0||(S=S.map)===null||S===void 0?void 0:S.get(u)}}),(a=f)!==null&&a!==void 0&&a.value&&d&&(f.value[1]=this.cacheCallTimes++),(l=f)===null||l===void 0?void 0:l.value}},{key:"get",value:function(r){var a;return(a=this.internalGet(r,!0))===null||a===void 0?void 0:a[0]}},{key:"has",value:function(r){return!!this.internalGet(r)}},{key:"set",value:function(r,a){var l=this;if(!this.has(r)){if(this.size()+1>e.MAX_CACHE_SIZE+e.MAX_CACHE_OFFSET){var d=this.keys.reduce(function(T,M){var A=nt(T,2),I=A[1];return l.internalGet(M)[1]<I?[M,l.internalGet(M)[1]]:T},[this.keys[0],this.cacheCallTimes]),f=nt(d,1),u=f[0];this.delete(u)}this.keys.push(r)}var S=this.cache;r.forEach(function(T,M){if(M===r.length-1)S.set(T,{value:[a,l.cacheCallTimes++]});else{var A=S.get(T);A?A.map||(A.map=new Map):S.set(T,{map:new Map}),S=S.get(T).map}})}},{key:"deleteByPath",value:function(r,a){var l=r.get(a[0]);if(a.length===1){var d;return l.map?r.set(a[0],{map:l.map}):r.delete(a[0]),(d=l.value)===null||d===void 0?void 0:d[0]}var f=this.deleteByPath(l.map,a.slice(1));return(!l.map||l.map.size===0)&&!l.value&&r.delete(a[0]),f}},{key:"delete",value:function(r){if(this.has(r))return this.keys=this.keys.filter(function(a){return!w5(a,r)}),this.deleteByPath(this.cache,r)}}]),e}();De(Ex,"MAX_CACHE_SIZE",20);De(Ex,"MAX_CACHE_OFFSET",5);var nS=0,NP=function(){function e(t){Ti(this,e),De(this,"derivatives",void 0),De(this,"id",void 0),this.derivatives=Array.isArray(t)?t:[t],this.id=nS,t.length===0&&(t.length>0,void 0),nS+=1}return Pi(e,[{key:"getDerivativeToken",value:function(r){return this.derivatives.reduce(function(a,l){return l(r,a)},void 0)}}]),e}(),i0=new Ex;function P_(e){var t=Array.isArray(e)?e:[e];return i0.has(t)||i0.set(t,new NP(t)),i0.get(t)}var S5=new WeakMap,o0={};function C5(e,t){for(var r=S5,a=0;a<t.length;a+=1){var l=t[a];r.has(l)||r.set(l,new WeakMap),r=r.get(l)}return r.has(o0)||r.set(o0,e()),r.get(o0)}var iS=new WeakMap;function Xd(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=iS.get(e)||"";return r||(Object.keys(e).forEach(function(a){var l=e[a];r+=a,l instanceof NP?r+=l.id:l&&ir(l)==="object"?r+=Xd(l,t):r+=l}),t&&(r=Sf(r)),iS.set(e,r)),r}function oS(e,t){return Sf("".concat(t,"_").concat(Xd(e,!0)))}var I_=Uo();function Ir(e){return typeof e=="number"?"".concat(e,"px"):e}function bg(e,t,r){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(l)return e;var d=$e($e({},a),{},De(De({},Xu,t),Ta,r)),f=Object.keys(d).map(function(u){var S=d[u];return S?"".concat(u,'="').concat(S,'"'):null}).filter(function(u){return u}).join(" ");return"<style ".concat(f,">").concat(e,"</style>")}var Nm=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return"--".concat(r?"".concat(r,"-"):"").concat(t).replace(/([a-z0-9])([A-Z])/g,"$1-$2").replace(/([A-Z]+)([A-Z][a-z0-9]+)/g,"$1-$2").replace(/([a-z])([A-Z0-9])/g,"$1-$2").toLowerCase()},E5=function(t,r,a){return Object.keys(t).length?".".concat(r).concat(a!=null&&a.scope?".".concat(a.scope):"","{").concat(Object.entries(t).map(function(l){var d=nt(l,2),f=d[0],u=d[1];return"".concat(f,":").concat(u,";")}).join(""),"}"):""},$P=function(t,r,a){var l={},d={};return Object.entries(t).forEach(function(f){var u,S,T=nt(f,2),M=T[0],A=T[1];if(a!=null&&(u=a.preserve)!==null&&u!==void 0&&u[M])d[M]=A;else if((typeof A=="string"||typeof A=="number")&&!(a!=null&&(S=a.ignore)!==null&&S!==void 0&&S[M])){var I,G=Nm(M,a==null?void 0:a.prefix);l[G]=typeof A=="number"&&!(a!=null&&(I=a.unitless)!==null&&I!==void 0&&I[M])?"".concat(A,"px"):String(A),d[M]="var(".concat(G,")")}}),[d,E5(l,r,{scope:a==null?void 0:a.scope})]},aS=Uo()?L.useLayoutEffect:L.useEffect,Ui=function(t,r){var a=L.useRef(!0);aS(function(){return t(a.current)},r),aS(function(){return a.current=!1,function(){a.current=!0}},[])},sS=function(t,r){Ui(function(a){if(!a)return t()},r)},T5=$e({},Lg),lS=T5.useInsertionEffect,P5=function(t,r,a){L.useMemo(t,a),Ui(function(){return r(!0)},a)},I5=lS?function(e,t,r){return lS(function(){return e(),t()},r)}:P5,k5=$e({},Lg),M5=k5.useInsertionEffect,A5=function(t){var r=[],a=!1;function l(d){a||r.push(d)}return L.useEffect(function(){return a=!1,function(){a=!0,r.length&&r.forEach(function(d){return d()})}},t),l},z5=function(){return function(t){t()}},R5=typeof M5<"u"?A5:z5;function Tx(e,t,r,a,l){var d=L.useContext(gy),f=d.cache,u=[e].concat(Nt(t)),S=T_(u),T=R5([S]),M=function(N){f.opUpdate(S,function(q){var Z=q||[void 0,void 0],V=nt(Z,2),F=V[0],H=F===void 0?0:F,Y=V[1],ne=Y,fe=ne||r(),ie=[H,fe];return N?N(ie):ie})};L.useMemo(function(){M()},[S]);var A=f.opGet(S),I=A[1];return I5(function(){l==null||l(I)},function(G){return M(function(N){var q=nt(N,2),Z=q[0],V=q[1];return G&&Z===0&&(l==null||l(I)),[Z+1,V]}),function(){f.opUpdate(S,function(N){var q=N||[],Z=nt(q,2),V=Z[0],F=V===void 0?0:V,H=Z[1],Y=F-1;return Y===0?(T(function(){(G||!f.opGet(S))&&(a==null||a(H,!1))}),null):[F-1,H]})}},[S]),I}var L5={},D5="css",rc=new Map;function F5(e){rc.set(e,(rc.get(e)||0)+1)}function O5(e,t){if(typeof document<"u"){var r=document.querySelectorAll("style[".concat(Xu,'="').concat(e,'"]'));r.forEach(function(a){if(a[ul]===t){var l;(l=a.parentNode)===null||l===void 0||l.removeChild(a)}})}}var B5=0;function N5(e,t){rc.set(e,(rc.get(e)||0)-1);var r=Array.from(rc.keys()),a=r.filter(function(l){var d=rc.get(l)||0;return d<=0});r.length-a.length>B5&&a.forEach(function(l){O5(l,t),rc.delete(l)})}var $5=function(t,r,a,l){var d=a.getDerivativeToken(t),f=$e($e({},d),r);return l&&(f=l(f)),f},jP="token";function j5(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=L.useContext(gy),l=a.cache.instanceId,d=a.container,f=r.salt,u=f===void 0?"":f,S=r.override,T=S===void 0?L5:S,M=r.formatToken,A=r.getComputedToken,I=r.cssVar,G=C5(function(){return Object.assign.apply(Object,[{}].concat(Nt(t)))},t),N=Xd(G),q=Xd(T),Z=I?Xd(I):"",V=Tx(jP,[u,e.id,N,q,Z],function(){var F,H=A?A(G,T,e):$5(G,T,e,M),Y=$e({},H),ne="";if(I){var fe=$P(H,I.key,{prefix:I.prefix,ignore:I.ignore,unitless:I.unitless,preserve:I.preserve}),ie=nt(fe,2);H=ie[0],ne=ie[1]}var _e=oS(H,u);H._tokenKey=_e,Y._tokenKey=oS(Y,u);var be=(F=I==null?void 0:I.key)!==null&&F!==void 0?F:_e;H._themeKey=be,F5(be);var Pe="".concat(D5,"-").concat(Sf(_e));return H._hashId=Pe,[H,Pe,Y,ne,(I==null?void 0:I.key)||""]},function(F){N5(F[0]._themeKey,l)},function(F){var H=nt(F,4),Y=H[0],ne=H[3];if(I&&ne){var fe=bs(ne,Sf("css-variables-".concat(Y._themeKey)),{mark:Ta,prepend:"queue",attachTo:d,priority:-999});fe[ul]=l,fe.setAttribute(Xu,Y._themeKey)}});return V}var V5=function(t,r,a){var l=nt(t,5),d=l[2],f=l[3],u=l[4],S=a||{},T=S.plain;if(!f)return null;var M=d._tokenKey,A=-999,I={"data-rc-order":"prependQueue","data-rc-priority":"".concat(A)},G=bg(f,u,M,I,T);return[A,M,G]},U5={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},VP="comm",UP="rule",HP="decl",H5="@import",q5="@keyframes",W5="@layer",qP=Math.abs,Px=String.fromCharCode;function WP(e){return e.trim()}function $m(e,t,r){return e.replace(t,r)}function G5(e,t,r){return e.indexOf(t,r)}function Tf(e,t){return e.charCodeAt(t)|0}function Pf(e,t,r){return e.slice(t,r)}function ms(e){return e.length}function Z5(e){return e.length}function hm(e,t){return t.push(e),e}var yy=1,Ju=1,GP=0,sa=0,Xn=0,oh="";function Ix(e,t,r,a,l,d,f,u){return{value:e,root:t,parent:r,type:a,props:l,children:d,line:yy,column:Ju,length:f,return:"",siblings:u}}function K5(){return Xn}function X5(){return Xn=sa>0?Tf(oh,--sa):0,Ju--,Xn===10&&(Ju=1,yy--),Xn}function Pa(){return Xn=sa<GP?Tf(oh,sa++):0,Ju++,Xn===10&&(Ju=1,yy++),Xn}function dc(){return Tf(oh,sa)}function jm(){return sa}function vy(e,t){return Pf(oh,e,t)}function k_(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function J5(e){return yy=Ju=1,GP=ms(oh=e),sa=0,[]}function Y5(e){return oh="",e}function a0(e){return WP(vy(sa-1,M_(e===91?e+2:e===40?e+1:e)))}function Q5(e){for(;(Xn=dc())&&Xn<33;)Pa();return k_(e)>2||k_(Xn)>3?"":" "}function eL(e,t){for(;--t&&Pa()&&!(Xn<48||Xn>102||Xn>57&&Xn<65||Xn>70&&Xn<97););return vy(e,jm()+(t<6&&dc()==32&&Pa()==32))}function M_(e){for(;Pa();)switch(Xn){case e:return sa;case 34:case 39:e!==34&&e!==39&&M_(Xn);break;case 40:e===41&&M_(e);break;case 92:Pa();break}return sa}function tL(e,t){for(;Pa()&&e+Xn!==57;)if(e+Xn===84&&dc()===47)break;return"/*"+vy(t,sa-1)+"*"+Px(e===47?e:Pa())}function rL(e){for(;!k_(dc());)Pa();return vy(e,sa)}function nL(e){return Y5(Vm("",null,null,null,[""],e=J5(e),0,[0],e))}function Vm(e,t,r,a,l,d,f,u,S){for(var T=0,M=0,A=f,I=0,G=0,N=0,q=1,Z=1,V=1,F=0,H="",Y=l,ne=d,fe=a,ie=H;Z;)switch(N=F,F=Pa()){case 40:if(N!=108&&Tf(ie,A-1)==58){G5(ie+=$m(a0(F),"&","&\f"),"&\f",qP(T?u[T-1]:0))!=-1&&(V=-1);break}case 34:case 39:case 91:ie+=a0(F);break;case 9:case 10:case 13:case 32:ie+=Q5(N);break;case 92:ie+=eL(jm()-1,7);continue;case 47:switch(dc()){case 42:case 47:hm(iL(tL(Pa(),jm()),t,r,S),S);break;default:ie+="/"}break;case 123*q:u[T++]=ms(ie)*V;case 125*q:case 59:case 0:switch(F){case 0:case 125:Z=0;case 59+M:V==-1&&(ie=$m(ie,/\f/g,"")),G>0&&ms(ie)-A&&hm(G>32?uS(ie+";",a,r,A-1,S):uS($m(ie," ","")+";",a,r,A-2,S),S);break;case 59:ie+=";";default:if(hm(fe=cS(ie,t,r,T,M,l,u,H,Y=[],ne=[],A,d),d),F===123)if(M===0)Vm(ie,t,fe,fe,Y,d,A,u,ne);else switch(I===99&&Tf(ie,3)===110?100:I){case 100:case 108:case 109:case 115:Vm(e,fe,fe,a&&hm(cS(e,fe,fe,0,0,l,u,H,l,Y=[],A,ne),ne),l,ne,A,u,a?Y:ne);break;default:Vm(ie,fe,fe,fe,[""],ne,0,u,ne)}}T=M=G=0,q=V=1,H=ie="",A=f;break;case 58:A=1+ms(ie),G=N;default:if(q<1){if(F==123)--q;else if(F==125&&q++==0&&X5()==125)continue}switch(ie+=Px(F),F*q){case 38:V=M>0?1:(ie+="\f",-1);break;case 44:u[T++]=(ms(ie)-1)*V,V=1;break;case 64:dc()===45&&(ie+=a0(Pa())),I=dc(),M=A=ms(H=ie+=rL(jm())),F++;break;case 45:N===45&&ms(ie)==2&&(q=0)}}return d}function cS(e,t,r,a,l,d,f,u,S,T,M,A){for(var I=l-1,G=l===0?d:[""],N=Z5(G),q=0,Z=0,V=0;q<a;++q)for(var F=0,H=Pf(e,I+1,I=qP(Z=f[q])),Y=e;F<N;++F)(Y=WP(Z>0?G[F]+" "+H:$m(H,/&\f/g,G[F])))&&(S[V++]=Y);return Ix(e,t,r,l===0?UP:u,S,T,M,A)}function iL(e,t,r,a){return Ix(e,t,r,VP,Px(K5()),Pf(e,2,-2),0,a)}function uS(e,t,r,a,l){return Ix(e,t,r,HP,Pf(e,0,a),Pf(e,a+1,-1),a,l)}function A_(e,t){for(var r="",a=0;a<e.length;a++)r+=t(e[a],a,e,t)||"";return r}function oL(e,t,r,a){switch(e.type){case W5:if(e.children.length)break;case H5:case HP:return e.return=e.return||e.value;case VP:return"";case q5:return e.return=e.value+"{"+A_(e.children,a)+"}";case UP:if(!ms(e.value=e.props.join(",")))return""}return ms(r=A_(e.children,a))?e.return=e.value+"{"+r+"}":""}var hS="data-ant-cssinjs-cache-path",ZP="_FILE_STYLE__",fc,KP=!0;function aL(){if(!fc&&(fc={},Uo())){var e=document.createElement("div");e.className=hS,e.style.position="fixed",e.style.visibility="hidden",e.style.top="-9999px",document.body.appendChild(e);var t=getComputedStyle(e).content||"";t=t.replace(/^"/,"").replace(/"$/,""),t.split(";").forEach(function(l){var d=l.split(":"),f=nt(d,2),u=f[0],S=f[1];fc[u]=S});var r=document.querySelector("style[".concat(hS,"]"));if(r){var a;KP=!1,(a=r.parentNode)===null||a===void 0||a.removeChild(r)}document.body.removeChild(e)}}function sL(e){return aL(),!!fc[e]}function lL(e){var t=fc[e],r=null;if(t&&Uo())if(KP)r=ZP;else{var a=document.querySelector("style[".concat(Ta,'="').concat(fc[e],'"]'));a?r=a.innerHTML:delete fc[e]}return[r,t]}var cL="_skip_check_",XP="_multi_value_";function Um(e){var t=A_(nL(e),oL);return t.replace(/\{%%%\:[^;];}/g,";")}function uL(e){return ir(e)==="object"&&e&&(cL in e||XP in e)}function hL(e,t,r){if(!t)return e;var a=".".concat(t),l=r==="low"?":where(".concat(a,")"):a,d=e.split(",").map(function(f){var u,S=f.trim().split(/\s+/),T=S[0]||"",M=((u=T.match(/^\w+/))===null||u===void 0?void 0:u[0])||"";return T="".concat(M).concat(l).concat(T.slice(M.length)),[T].concat(Nt(S.slice(1))).join(" ")});return d.join(",")}var dL=function e(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{root:!0,parentSelectors:[]},l=a.root,d=a.injectHash,f=a.parentSelectors,u=r.hashId,S=r.layer;r.path;var T=r.hashPriority,M=r.transformers,A=M===void 0?[]:M;r.linters;var I="",G={};function N(V){var F=V.getName(u);if(!G[F]){var H=e(V.style,r,{root:!1,parentSelectors:f}),Y=nt(H,1),ne=Y[0];G[F]="@keyframes ".concat(V.getName(u)).concat(ne)}}function q(V){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return V.forEach(function(H){Array.isArray(H)?q(H,F):H&&F.push(H)}),F}var Z=q(Array.isArray(t)?t:[t]);return Z.forEach(function(V){var F=typeof V=="string"&&!l?{}:V;if(typeof F=="string")I+="".concat(F,`
`);else if(F._keyframe)N(F);else{var H=A.reduce(function(Y,ne){var fe;return(ne==null||(fe=ne.visit)===null||fe===void 0?void 0:fe.call(ne,Y))||Y},F);Object.keys(H).forEach(function(Y){var ne=H[Y];if(ir(ne)==="object"&&ne&&(Y!=="animationName"||!ne._keyframe)&&!uL(ne)){var fe=!1,ie=Y.trim(),_e=!1;(l||d)&&u?ie.startsWith("@")?fe=!0:ie=hL(Y,u,T):l&&!u&&(ie==="&"||ie==="")&&(ie="",_e=!0);var be=e(ne,r,{root:_e,injectHash:fe,parentSelectors:[].concat(Nt(f),[ie])}),Pe=nt(be,2),ze=Pe[0],We=Pe[1];G=$e($e({},G),We),I+="".concat(ie).concat(ze)}else{let Ke=function(ke,Se){var ge=ke.replace(/[A-Z]/g,function(Be){return"-".concat(Be.toLowerCase())}),Fe=Se;!U5[ke]&&typeof Fe=="number"&&Fe!==0&&(Fe="".concat(Fe,"px")),ke==="animationName"&&Se!==null&&Se!==void 0&&Se._keyframe&&(N(Se),Fe=Se.getName(u)),I+="".concat(ge,":").concat(Fe,";")};var Ce,Ie=(Ce=ne==null?void 0:ne.value)!==null&&Ce!==void 0?Ce:ne;ir(ne)==="object"&&ne!==null&&ne!==void 0&&ne[XP]&&Array.isArray(Ie)?Ie.forEach(function(ke){Ke(Y,ke)}):Ke(Y,Ie)}})}}),l?S&&(I="@layer ".concat(S.name," {").concat(I,"}"),S.dependencies&&(G["@layer ".concat(S.name)]=S.dependencies.map(function(V){return"@layer ".concat(V,", ").concat(S.name,";")}).join(`
`))):I="{".concat(I,"}"),[I,G]};function JP(e,t){return Sf("".concat(e.join("%")).concat(t))}function fL(){return null}var YP="style";function z_(e,t){var r=e.token,a=e.path,l=e.hashId,d=e.layer,f=e.nonce,u=e.clientOnly,S=e.order,T=S===void 0?0:S,M=L.useContext(gy),A=M.autoClear;M.mock;var I=M.defaultCache,G=M.hashPriority,N=M.container,q=M.ssrInline,Z=M.transformers,V=M.linters,F=M.cache,H=M.layer,Y=r._tokenKey,ne=[Y];H&&ne.push("layer"),ne.push.apply(ne,Nt(a));var fe=I_,ie=Tx(YP,ne,function(){var We=ne.join("|");if(sL(We)){var Ce=lL(We),Ie=nt(Ce,2),Ke=Ie[0],ke=Ie[1];if(Ke)return[Ke,Y,ke,{},u,T]}var Se=t(),ge=dL(Se,{hashId:l,hashPriority:G,layer:H?d:void 0,path:a.join("-"),transformers:Z,linters:V}),Fe=nt(ge,2),Be=Fe[0],Ve=Fe[1],Ze=Um(Be),gt=JP(ne,Ze);return[Ze,Y,gt,Ve,u,T]},function(We,Ce){var Ie=nt(We,3),Ke=Ie[2];(Ce||A)&&I_&&Cf(Ke,{mark:Ta})},function(We){var Ce=nt(We,4),Ie=Ce[0];Ce[1];var Ke=Ce[2],ke=Ce[3];if(fe&&Ie!==ZP){var Se={mark:Ta,prepend:H?!1:"queue",attachTo:N,priority:T},ge=typeof f=="function"?f():f;ge&&(Se.csp={nonce:ge});var Fe=[],Be=[];Object.keys(ke).forEach(function(Ze){Ze.startsWith("@layer")?Fe.push(Ze):Be.push(Ze)}),Fe.forEach(function(Ze){bs(Um(ke[Ze]),"_layer-".concat(Ze),$e($e({},Se),{},{prepend:!0}))});var Ve=bs(Ie,Ke,Se);Ve[ul]=F.instanceId,Ve.setAttribute(Xu,Y),Be.forEach(function(Ze){bs(Um(ke[Ze]),"_effect-".concat(Ze),Se)})}}),_e=nt(ie,3),be=_e[0],Pe=_e[1],ze=_e[2];return function(We){var Ce;return!q||fe||!I?Ce=L.createElement(fL,null):Ce=L.createElement("style",br({},De(De({},Xu,Pe),Ta,ze),{dangerouslySetInnerHTML:{__html:be}})),L.createElement(L.Fragment,null,Ce,We)}}var pL=function(t,r,a){var l=nt(t,6),d=l[0],f=l[1],u=l[2],S=l[3],T=l[4],M=l[5],A=a||{},I=A.plain;if(T)return null;var G=d,N={"data-rc-order":"prependQueue","data-rc-priority":"".concat(M)};return G=bg(d,f,u,N,I),S&&Object.keys(S).forEach(function(q){if(!r[q]){r[q]=!0;var Z=Um(S[q]),V=bg(Z,f,"_effect-".concat(q),N,I);q.startsWith("@layer")?G=V+G:G+=V}}),[M,u,G]},QP="cssVar",mL=function(t,r){var a=t.key,l=t.prefix,d=t.unitless,f=t.ignore,u=t.token,S=t.scope,T=S===void 0?"":S,M=L.useContext(gy),A=M.cache.instanceId,I=M.container,G=u._tokenKey,N=[].concat(Nt(t.path),[a,T,G]),q=Tx(QP,N,function(){var Z=r(),V=$P(Z,a,{prefix:l,unitless:d,ignore:f,scope:T}),F=nt(V,2),H=F[0],Y=F[1],ne=JP(N,Y);return[H,Y,ne,a]},function(Z){var V=nt(Z,3),F=V[2];I_&&Cf(F,{mark:Ta})},function(Z){var V=nt(Z,3),F=V[1],H=V[2];if(F){var Y=bs(F,H,{mark:Ta,prepend:"queue",attachTo:I,priority:-999});Y[ul]=A,Y.setAttribute(Xu,a)}});return q},gL=function(t,r,a){var l=nt(t,4),d=l[1],f=l[2],u=l[3],S=a||{},T=S.plain;if(!d)return null;var M=-999,A={"data-rc-order":"prependQueue","data-rc-priority":"".concat(M)},I=bg(d,u,f,A,T);return[M,f,I]};De(De(De({},YP,pL),jP,V5),QP,gL);var Yn=function(){function e(t,r){Ti(this,e),De(this,"name",void 0),De(this,"style",void 0),De(this,"_keyframe",!0),this.name=t,this.style=r}return Pi(e,[{key:"getName",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return r?"".concat(r,"-").concat(this.name):this.name}}]),e}();function hu(e){return e.notSplit=!0,e}hu(["borderTop","borderBottom"]),hu(["borderTop"]),hu(["borderBottom"]),hu(["borderLeft","borderRight"]),hu(["borderLeft"]),hu(["borderRight"]);var kx=L.createContext({});function yL(e){return LP(e)||MP(e)||wx(e)||DP()}function Ga(e,t){for(var r=e,a=0;a<t.length;a+=1){if(r==null)return;r=r[t[a]]}return r}function eI(e,t,r,a){if(!t.length)return r;var l=yL(t),d=l[0],f=l.slice(1),u;return!e&&typeof d=="number"?u=[]:Array.isArray(e)?u=Nt(e):u=$e({},e),a&&r===void 0&&f.length===1?delete u[d][f[0]]:u[d]=eI(u[d],f,r,a),u}function ba(e,t,r){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return t.length&&a&&r===void 0&&!Ga(e,t.slice(0,-1))?e:eI(e,t,r,a)}function vL(e){return ir(e)==="object"&&e!==null&&Object.getPrototypeOf(e)===Object.prototype}function dS(e){return Array.isArray(e)?[]:{}}var _L=typeof Reflect>"u"?Object.keys:Reflect.ownKeys;function zu(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var a=dS(t[0]);return t.forEach(function(l){function d(f,u){var S=new Set(u),T=Ga(l,f),M=Array.isArray(T);if(M||vL(T)){if(!S.has(T)){S.add(T);var A=Ga(a,f);M?a=ba(a,f,[]):(!A||ir(A)!=="object")&&(a=ba(a,f,dS(T))),_L(T).forEach(function(I){d([].concat(Nt(f),[I]),S)})}}else a=ba(a,f,T)}d([])}),a}function xL(){}const bL=L.createContext({}),tI=()=>{const e=()=>{};return e.deprecated=xL,e},wL=L.createContext(void 0);var SL={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"},CL={yearFormat:"YYYY",dayFormat:"D",cellMeridiemFormat:"A",monthBeforeYear:!0},EL=$e($e({},CL),{},{locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"OK",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",dateFormat:"M/D/YYYY",dateTimeFormat:"M/D/YYYY HH:mm:ss",previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"});const rI={placeholder:"Select time",rangePlaceholder:["Start time","End time"]},fS={lang:Object.assign({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeQuarterPlaceholder:["Start quarter","End quarter"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},EL),timePickerLocale:Object.assign({},rI)},Lo="${label} is not a valid ${type}",_y={locale:"en",Pagination:SL,DatePicker:fS,TimePicker:rI,Calendar:fS,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckall:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Tour:{Next:"Next",Previous:"Previous",Finish:"Finish"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",deselectAll:"Deselect all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand",collapse:"Collapse"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:Lo,method:Lo,array:Lo,object:Lo,number:Lo,date:Lo,boolean:Lo,integer:Lo,float:Lo,regexp:Lo,email:Lo,url:Lo,hex:Lo},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"},QRCode:{expired:"QR code expired",refresh:"Refresh",scanned:"Scanned"},ColorPicker:{presetEmpty:"Empty",transparent:"Transparent",singleColor:"Single",gradientColor:"Gradient"}};Object.assign({},_y.Modal);let Hm=[];const pS=()=>Hm.reduce((e,t)=>Object.assign(Object.assign({},e),t),_y.Modal);function TL(e){if(e){const t=Object.assign({},e);return Hm.push(t),pS(),()=>{Hm=Hm.filter(r=>r!==t),pS()}}Object.assign({},_y.Modal)}const nI=L.createContext(void 0),PL="internalMark",IL=e=>{const{locale:t={},children:r,_ANT_MARK__:a}=e;L.useEffect(()=>TL(t==null?void 0:t.Modal),[t]);const l=L.useMemo(()=>Object.assign(Object.assign({},t),{exist:!0}),[t]);return L.createElement(nI.Provider,{value:l},r)};function Ci(e,t){kL(e)&&(e="100%");var r=ML(e);return e=t===360?e:Math.min(t,Math.max(0,parseFloat(e))),r&&(e=parseInt(String(e*t),10)/100),Math.abs(e-t)<1e-6?1:(t===360?e=(e<0?e%t+t:e%t)/parseFloat(String(t)):e=e%t/parseFloat(String(t)),e)}function dm(e){return Math.min(1,Math.max(0,e))}function kL(e){return typeof e=="string"&&e.indexOf(".")!==-1&&parseFloat(e)===1}function ML(e){return typeof e=="string"&&e.indexOf("%")!==-1}function iI(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function fm(e){return e<=1?"".concat(Number(e)*100,"%"):e}function sc(e){return e.length===1?"0"+e:String(e)}function AL(e,t,r){return{r:Ci(e,255)*255,g:Ci(t,255)*255,b:Ci(r,255)*255}}function mS(e,t,r){e=Ci(e,255),t=Ci(t,255),r=Ci(r,255);var a=Math.max(e,t,r),l=Math.min(e,t,r),d=0,f=0,u=(a+l)/2;if(a===l)f=0,d=0;else{var S=a-l;switch(f=u>.5?S/(2-a-l):S/(a+l),a){case e:d=(t-r)/S+(t<r?6:0);break;case t:d=(r-e)/S+2;break;case r:d=(e-t)/S+4;break}d/=6}return{h:d,s:f,l:u}}function s0(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*(6*r):r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function zL(e,t,r){var a,l,d;if(e=Ci(e,360),t=Ci(t,100),r=Ci(r,100),t===0)l=r,d=r,a=r;else{var f=r<.5?r*(1+t):r+t-r*t,u=2*r-f;a=s0(u,f,e+1/3),l=s0(u,f,e),d=s0(u,f,e-1/3)}return{r:a*255,g:l*255,b:d*255}}function R_(e,t,r){e=Ci(e,255),t=Ci(t,255),r=Ci(r,255);var a=Math.max(e,t,r),l=Math.min(e,t,r),d=0,f=a,u=a-l,S=a===0?0:u/a;if(a===l)d=0;else{switch(a){case e:d=(t-r)/u+(t<r?6:0);break;case t:d=(r-e)/u+2;break;case r:d=(e-t)/u+4;break}d/=6}return{h:d,s:S,v:f}}function RL(e,t,r){e=Ci(e,360)*6,t=Ci(t,100),r=Ci(r,100);var a=Math.floor(e),l=e-a,d=r*(1-t),f=r*(1-l*t),u=r*(1-(1-l)*t),S=a%6,T=[r,f,d,d,u,r][S],M=[u,r,r,f,d,d][S],A=[d,d,u,r,r,f][S];return{r:T*255,g:M*255,b:A*255}}function L_(e,t,r,a){var l=[sc(Math.round(e).toString(16)),sc(Math.round(t).toString(16)),sc(Math.round(r).toString(16))];return a&&l[0].startsWith(l[0].charAt(1))&&l[1].startsWith(l[1].charAt(1))&&l[2].startsWith(l[2].charAt(1))?l[0].charAt(0)+l[1].charAt(0)+l[2].charAt(0):l.join("")}function LL(e,t,r,a,l){var d=[sc(Math.round(e).toString(16)),sc(Math.round(t).toString(16)),sc(Math.round(r).toString(16)),sc(DL(a))];return l&&d[0].startsWith(d[0].charAt(1))&&d[1].startsWith(d[1].charAt(1))&&d[2].startsWith(d[2].charAt(1))&&d[3].startsWith(d[3].charAt(1))?d[0].charAt(0)+d[1].charAt(0)+d[2].charAt(0)+d[3].charAt(0):d.join("")}function DL(e){return Math.round(parseFloat(e)*255).toString(16)}function gS(e){return Fo(e)/255}function Fo(e){return parseInt(e,16)}function FL(e){return{r:e>>16,g:(e&65280)>>8,b:e&255}}var D_={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function _u(e){var t={r:0,g:0,b:0},r=1,a=null,l=null,d=null,f=!1,u=!1;return typeof e=="string"&&(e=NL(e)),typeof e=="object"&&(hs(e.r)&&hs(e.g)&&hs(e.b)?(t=AL(e.r,e.g,e.b),f=!0,u=String(e.r).substr(-1)==="%"?"prgb":"rgb"):hs(e.h)&&hs(e.s)&&hs(e.v)?(a=fm(e.s),l=fm(e.v),t=RL(e.h,a,l),f=!0,u="hsv"):hs(e.h)&&hs(e.s)&&hs(e.l)&&(a=fm(e.s),d=fm(e.l),t=zL(e.h,a,d),f=!0,u="hsl"),Object.prototype.hasOwnProperty.call(e,"a")&&(r=e.a)),r=iI(r),{ok:f,format:e.format||u,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:r}}var OL="[-\\+]?\\d+%?",BL="[-\\+]?\\d*\\.\\d+%?",hl="(?:".concat(BL,")|(?:").concat(OL,")"),l0="[\\s|\\(]+(".concat(hl,")[,|\\s]+(").concat(hl,")[,|\\s]+(").concat(hl,")\\s*\\)?"),c0="[\\s|\\(]+(".concat(hl,")[,|\\s]+(").concat(hl,")[,|\\s]+(").concat(hl,")[,|\\s]+(").concat(hl,")\\s*\\)?"),va={CSS_UNIT:new RegExp(hl),rgb:new RegExp("rgb"+l0),rgba:new RegExp("rgba"+c0),hsl:new RegExp("hsl"+l0),hsla:new RegExp("hsla"+c0),hsv:new RegExp("hsv"+l0),hsva:new RegExp("hsva"+c0),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function NL(e){if(e=e.trim().toLowerCase(),e.length===0)return!1;var t=!1;if(D_[e])e=D_[e],t=!0;else if(e==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var r=va.rgb.exec(e);return r?{r:r[1],g:r[2],b:r[3]}:(r=va.rgba.exec(e),r?{r:r[1],g:r[2],b:r[3],a:r[4]}:(r=va.hsl.exec(e),r?{h:r[1],s:r[2],l:r[3]}:(r=va.hsla.exec(e),r?{h:r[1],s:r[2],l:r[3],a:r[4]}:(r=va.hsv.exec(e),r?{h:r[1],s:r[2],v:r[3]}:(r=va.hsva.exec(e),r?{h:r[1],s:r[2],v:r[3],a:r[4]}:(r=va.hex8.exec(e),r?{r:Fo(r[1]),g:Fo(r[2]),b:Fo(r[3]),a:gS(r[4]),format:t?"name":"hex8"}:(r=va.hex6.exec(e),r?{r:Fo(r[1]),g:Fo(r[2]),b:Fo(r[3]),format:t?"name":"hex"}:(r=va.hex4.exec(e),r?{r:Fo(r[1]+r[1]),g:Fo(r[2]+r[2]),b:Fo(r[3]+r[3]),a:gS(r[4]+r[4]),format:t?"name":"hex8"}:(r=va.hex3.exec(e),r?{r:Fo(r[1]+r[1]),g:Fo(r[2]+r[2]),b:Fo(r[3]+r[3]),format:t?"name":"hex"}:!1)))))))))}function hs(e){return!!va.CSS_UNIT.exec(String(e))}var eo=function(){function e(t,r){t===void 0&&(t=""),r===void 0&&(r={});var a;if(t instanceof e)return t;typeof t=="number"&&(t=FL(t)),this.originalInput=t;var l=_u(t);this.originalInput=t,this.r=l.r,this.g=l.g,this.b=l.b,this.a=l.a,this.roundA=Math.round(100*this.a)/100,this.format=(a=r.format)!==null&&a!==void 0?a:l.format,this.gradientType=r.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=l.ok}return e.prototype.isDark=function(){return this.getBrightness()<128},e.prototype.isLight=function(){return!this.isDark()},e.prototype.getBrightness=function(){var t=this.toRgb();return(t.r*299+t.g*587+t.b*114)/1e3},e.prototype.getLuminance=function(){var t=this.toRgb(),r,a,l,d=t.r/255,f=t.g/255,u=t.b/255;return d<=.03928?r=d/12.92:r=Math.pow((d+.055)/1.055,2.4),f<=.03928?a=f/12.92:a=Math.pow((f+.055)/1.055,2.4),u<=.03928?l=u/12.92:l=Math.pow((u+.055)/1.055,2.4),.2126*r+.7152*a+.0722*l},e.prototype.getAlpha=function(){return this.a},e.prototype.setAlpha=function(t){return this.a=iI(t),this.roundA=Math.round(100*this.a)/100,this},e.prototype.isMonochrome=function(){var t=this.toHsl().s;return t===0},e.prototype.toHsv=function(){var t=R_(this.r,this.g,this.b);return{h:t.h*360,s:t.s,v:t.v,a:this.a}},e.prototype.toHsvString=function(){var t=R_(this.r,this.g,this.b),r=Math.round(t.h*360),a=Math.round(t.s*100),l=Math.round(t.v*100);return this.a===1?"hsv(".concat(r,", ").concat(a,"%, ").concat(l,"%)"):"hsva(".concat(r,", ").concat(a,"%, ").concat(l,"%, ").concat(this.roundA,")")},e.prototype.toHsl=function(){var t=mS(this.r,this.g,this.b);return{h:t.h*360,s:t.s,l:t.l,a:this.a}},e.prototype.toHslString=function(){var t=mS(this.r,this.g,this.b),r=Math.round(t.h*360),a=Math.round(t.s*100),l=Math.round(t.l*100);return this.a===1?"hsl(".concat(r,", ").concat(a,"%, ").concat(l,"%)"):"hsla(".concat(r,", ").concat(a,"%, ").concat(l,"%, ").concat(this.roundA,")")},e.prototype.toHex=function(t){return t===void 0&&(t=!1),L_(this.r,this.g,this.b,t)},e.prototype.toHexString=function(t){return t===void 0&&(t=!1),"#"+this.toHex(t)},e.prototype.toHex8=function(t){return t===void 0&&(t=!1),LL(this.r,this.g,this.b,this.a,t)},e.prototype.toHex8String=function(t){return t===void 0&&(t=!1),"#"+this.toHex8(t)},e.prototype.toHexShortString=function(t){return t===void 0&&(t=!1),this.a===1?this.toHexString(t):this.toHex8String(t)},e.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},e.prototype.toRgbString=function(){var t=Math.round(this.r),r=Math.round(this.g),a=Math.round(this.b);return this.a===1?"rgb(".concat(t,", ").concat(r,", ").concat(a,")"):"rgba(".concat(t,", ").concat(r,", ").concat(a,", ").concat(this.roundA,")")},e.prototype.toPercentageRgb=function(){var t=function(r){return"".concat(Math.round(Ci(r,255)*100),"%")};return{r:t(this.r),g:t(this.g),b:t(this.b),a:this.a}},e.prototype.toPercentageRgbString=function(){var t=function(r){return Math.round(Ci(r,255)*100)};return this.a===1?"rgb(".concat(t(this.r),"%, ").concat(t(this.g),"%, ").concat(t(this.b),"%)"):"rgba(".concat(t(this.r),"%, ").concat(t(this.g),"%, ").concat(t(this.b),"%, ").concat(this.roundA,")")},e.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var t="#"+L_(this.r,this.g,this.b,!1),r=0,a=Object.entries(D_);r<a.length;r++){var l=a[r],d=l[0],f=l[1];if(t===f)return d}return!1},e.prototype.toString=function(t){var r=!!t;t=t??this.format;var a=!1,l=this.a<1&&this.a>=0,d=!r&&l&&(t.startsWith("hex")||t==="name");return d?t==="name"&&this.a===0?this.toName():this.toRgbString():(t==="rgb"&&(a=this.toRgbString()),t==="prgb"&&(a=this.toPercentageRgbString()),(t==="hex"||t==="hex6")&&(a=this.toHexString()),t==="hex3"&&(a=this.toHexString(!0)),t==="hex4"&&(a=this.toHex8String(!0)),t==="hex8"&&(a=this.toHex8String()),t==="name"&&(a=this.toName()),t==="hsl"&&(a=this.toHslString()),t==="hsv"&&(a=this.toHsvString()),a||this.toHexString())},e.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},e.prototype.clone=function(){return new e(this.toString())},e.prototype.lighten=function(t){t===void 0&&(t=10);var r=this.toHsl();return r.l+=t/100,r.l=dm(r.l),new e(r)},e.prototype.brighten=function(t){t===void 0&&(t=10);var r=this.toRgb();return r.r=Math.max(0,Math.min(255,r.r-Math.round(255*-(t/100)))),r.g=Math.max(0,Math.min(255,r.g-Math.round(255*-(t/100)))),r.b=Math.max(0,Math.min(255,r.b-Math.round(255*-(t/100)))),new e(r)},e.prototype.darken=function(t){t===void 0&&(t=10);var r=this.toHsl();return r.l-=t/100,r.l=dm(r.l),new e(r)},e.prototype.tint=function(t){return t===void 0&&(t=10),this.mix("white",t)},e.prototype.shade=function(t){return t===void 0&&(t=10),this.mix("black",t)},e.prototype.desaturate=function(t){t===void 0&&(t=10);var r=this.toHsl();return r.s-=t/100,r.s=dm(r.s),new e(r)},e.prototype.saturate=function(t){t===void 0&&(t=10);var r=this.toHsl();return r.s+=t/100,r.s=dm(r.s),new e(r)},e.prototype.greyscale=function(){return this.desaturate(100)},e.prototype.spin=function(t){var r=this.toHsl(),a=(r.h+t)%360;return r.h=a<0?360+a:a,new e(r)},e.prototype.mix=function(t,r){r===void 0&&(r=50);var a=this.toRgb(),l=new e(t).toRgb(),d=r/100,f={r:(l.r-a.r)*d+a.r,g:(l.g-a.g)*d+a.g,b:(l.b-a.b)*d+a.b,a:(l.a-a.a)*d+a.a};return new e(f)},e.prototype.analogous=function(t,r){t===void 0&&(t=6),r===void 0&&(r=30);var a=this.toHsl(),l=360/r,d=[this];for(a.h=(a.h-(l*t>>1)+720)%360;--t;)a.h=(a.h+l)%360,d.push(new e(a));return d},e.prototype.complement=function(){var t=this.toHsl();return t.h=(t.h+180)%360,new e(t)},e.prototype.monochromatic=function(t){t===void 0&&(t=6);for(var r=this.toHsv(),a=r.h,l=r.s,d=r.v,f=[],u=1/t;t--;)f.push(new e({h:a,s:l,v:d})),d=(d+u)%1;return f},e.prototype.splitcomplement=function(){var t=this.toHsl(),r=t.h;return[this,new e({h:(r+72)%360,s:t.s,l:t.l}),new e({h:(r+216)%360,s:t.s,l:t.l})]},e.prototype.onBackground=function(t){var r=this.toRgb(),a=new e(t).toRgb(),l=r.a+a.a*(1-r.a);return new e({r:(r.r*r.a+a.r*a.a*(1-r.a))/l,g:(r.g*r.a+a.g*a.a*(1-r.a))/l,b:(r.b*r.a+a.b*a.a*(1-r.a))/l,a:l})},e.prototype.triad=function(){return this.polyad(3)},e.prototype.tetrad=function(){return this.polyad(4)},e.prototype.polyad=function(t){for(var r=this.toHsl(),a=r.h,l=[this],d=360/t,f=1;f<t;f++)l.push(new e({h:(a+f*d)%360,s:r.s,l:r.l}));return l},e.prototype.equals=function(t){return this.toRgbString()===new e(t).toRgbString()},e}(),pm=2,yS=.16,$L=.05,jL=.05,VL=.15,oI=5,aI=4,UL=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function vS(e){var t=e.r,r=e.g,a=e.b,l=R_(t,r,a);return{h:l.h*360,s:l.s,v:l.v}}function mm(e){var t=e.r,r=e.g,a=e.b;return"#".concat(L_(t,r,a,!1))}function HL(e,t,r){var a=r/100,l={r:(t.r-e.r)*a+e.r,g:(t.g-e.g)*a+e.g,b:(t.b-e.b)*a+e.b};return l}function _S(e,t,r){var a;return Math.round(e.h)>=60&&Math.round(e.h)<=240?a=r?Math.round(e.h)-pm*t:Math.round(e.h)+pm*t:a=r?Math.round(e.h)+pm*t:Math.round(e.h)-pm*t,a<0?a+=360:a>=360&&(a-=360),a}function xS(e,t,r){if(e.h===0&&e.s===0)return e.s;var a;return r?a=e.s-yS*t:t===aI?a=e.s+yS:a=e.s+$L*t,a>1&&(a=1),r&&t===oI&&a>.1&&(a=.1),a<.06&&(a=.06),Number(a.toFixed(2))}function bS(e,t,r){var a;return r?a=e.v+jL*t:a=e.v-VL*t,a>1&&(a=1),Number(a.toFixed(2))}function If(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=[],a=_u(e),l=oI;l>0;l-=1){var d=vS(a),f=mm(_u({h:_S(d,l,!0),s:xS(d,l,!0),v:bS(d,l,!0)}));r.push(f)}r.push(mm(a));for(var u=1;u<=aI;u+=1){var S=vS(a),T=mm(_u({h:_S(S,u),s:xS(S,u),v:bS(S,u)}));r.push(T)}return t.theme==="dark"?UL.map(function(M){var A=M.index,I=M.opacity,G=mm(HL(_u(t.backgroundColor||"#141414"),_u(r[A]),I*100));return G}):r}var u0={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1677FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},F_=["#fff1f0","#ffccc7","#ffa39e","#ff7875","#ff4d4f","#f5222d","#cf1322","#a8071a","#820014","#5c0011"];F_.primary=F_[5];var O_=["#fff2e8","#ffd8bf","#ffbb96","#ff9c6e","#ff7a45","#fa541c","#d4380d","#ad2102","#871400","#610b00"];O_.primary=O_[5];var B_=["#fff7e6","#ffe7ba","#ffd591","#ffc069","#ffa940","#fa8c16","#d46b08","#ad4e00","#873800","#612500"];B_.primary=B_[5];var N_=["#fffbe6","#fff1b8","#ffe58f","#ffd666","#ffc53d","#faad14","#d48806","#ad6800","#874d00","#613400"];N_.primary=N_[5];var $_=["#feffe6","#ffffb8","#fffb8f","#fff566","#ffec3d","#fadb14","#d4b106","#ad8b00","#876800","#614700"];$_.primary=$_[5];var j_=["#fcffe6","#f4ffb8","#eaff8f","#d3f261","#bae637","#a0d911","#7cb305","#5b8c00","#3f6600","#254000"];j_.primary=j_[5];var V_=["#f6ffed","#d9f7be","#b7eb8f","#95de64","#73d13d","#52c41a","#389e0d","#237804","#135200","#092b00"];V_.primary=V_[5];var U_=["#e6fffb","#b5f5ec","#87e8de","#5cdbd3","#36cfc9","#13c2c2","#08979c","#006d75","#00474f","#002329"];U_.primary=U_[5];var wg=["#e6f4ff","#bae0ff","#91caff","#69b1ff","#4096ff","#1677ff","#0958d9","#003eb3","#002c8c","#001d66"];wg.primary=wg[5];var H_=["#f0f5ff","#d6e4ff","#adc6ff","#85a5ff","#597ef7","#2f54eb","#1d39c4","#10239e","#061178","#030852"];H_.primary=H_[5];var q_=["#f9f0ff","#efdbff","#d3adf7","#b37feb","#9254de","#722ed1","#531dab","#391085","#22075e","#120338"];q_.primary=q_[5];var W_=["#fff0f6","#ffd6e7","#ffadd2","#ff85c0","#f759ab","#eb2f96","#c41d7f","#9e1068","#780650","#520339"];W_.primary=W_[5];var G_=["#a6a6a6","#999999","#8c8c8c","#808080","#737373","#666666","#404040","#1a1a1a","#000000","#000000"];G_.primary=G_[5];var h0={red:F_,volcano:O_,orange:B_,gold:N_,yellow:$_,lime:j_,green:V_,cyan:U_,blue:wg,geekblue:H_,purple:q_,magenta:W_,grey:G_};const sI={blue:"#1677FF",purple:"#722ED1",cyan:"#13C2C2",green:"#52C41A",magenta:"#EB2F96",pink:"#EB2F96",red:"#F5222D",orange:"#FA8C16",yellow:"#FADB14",volcano:"#FA541C",geekblue:"#2F54EB",gold:"#FAAD14",lime:"#A0D911"},kf=Object.assign(Object.assign({},sI),{colorPrimary:"#1677ff",colorSuccess:"#52c41a",colorWarning:"#faad14",colorError:"#ff4d4f",colorInfo:"#1677ff",colorLink:"",colorTextBase:"",colorBgBase:"",fontFamily:`-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial,
'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',
'Noto Color Emoji'`,fontFamilyCode:"'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace",fontSize:14,lineWidth:1,lineType:"solid",motionUnit:.1,motionBase:0,motionEaseOutCirc:"cubic-bezier(0.08, 0.82, 0.17, 1)",motionEaseInOutCirc:"cubic-bezier(0.78, 0.14, 0.15, 0.86)",motionEaseOut:"cubic-bezier(0.215, 0.61, 0.355, 1)",motionEaseInOut:"cubic-bezier(0.645, 0.045, 0.355, 1)",motionEaseOutBack:"cubic-bezier(0.12, 0.4, 0.29, 1.46)",motionEaseInBack:"cubic-bezier(0.71, -0.46, 0.88, 0.6)",motionEaseInQuint:"cubic-bezier(0.755, 0.05, 0.855, 0.06)",motionEaseOutQuint:"cubic-bezier(0.23, 1, 0.32, 1)",borderRadius:6,sizeUnit:4,sizeStep:4,sizePopupArrow:16,controlHeight:32,zIndexBase:0,zIndexPopupBase:1e3,opacityImage:1,wireframe:!1,motion:!0});function qL(e,t){let{generateColorPalettes:r,generateNeutralColorPalettes:a}=t;const{colorSuccess:l,colorWarning:d,colorError:f,colorInfo:u,colorPrimary:S,colorBgBase:T,colorTextBase:M}=e,A=r(S),I=r(l),G=r(d),N=r(f),q=r(u),Z=a(T,M),V=e.colorLink||e.colorInfo,F=r(V);return Object.assign(Object.assign({},Z),{colorPrimaryBg:A[1],colorPrimaryBgHover:A[2],colorPrimaryBorder:A[3],colorPrimaryBorderHover:A[4],colorPrimaryHover:A[5],colorPrimary:A[6],colorPrimaryActive:A[7],colorPrimaryTextHover:A[8],colorPrimaryText:A[9],colorPrimaryTextActive:A[10],colorSuccessBg:I[1],colorSuccessBgHover:I[2],colorSuccessBorder:I[3],colorSuccessBorderHover:I[4],colorSuccessHover:I[4],colorSuccess:I[6],colorSuccessActive:I[7],colorSuccessTextHover:I[8],colorSuccessText:I[9],colorSuccessTextActive:I[10],colorErrorBg:N[1],colorErrorBgHover:N[2],colorErrorBgActive:N[3],colorErrorBorder:N[3],colorErrorBorderHover:N[4],colorErrorHover:N[5],colorError:N[6],colorErrorActive:N[7],colorErrorTextHover:N[8],colorErrorText:N[9],colorErrorTextActive:N[10],colorWarningBg:G[1],colorWarningBgHover:G[2],colorWarningBorder:G[3],colorWarningBorderHover:G[4],colorWarningHover:G[4],colorWarning:G[6],colorWarningActive:G[7],colorWarningTextHover:G[8],colorWarningText:G[9],colorWarningTextActive:G[10],colorInfoBg:q[1],colorInfoBgHover:q[2],colorInfoBorder:q[3],colorInfoBorderHover:q[4],colorInfoHover:q[4],colorInfo:q[6],colorInfoActive:q[7],colorInfoTextHover:q[8],colorInfoText:q[9],colorInfoTextActive:q[10],colorLinkHover:F[4],colorLink:F[6],colorLinkActive:F[7],colorBgMask:new eo("#000").setAlpha(.45).toRgbString(),colorWhite:"#fff"})}const WL=e=>{let t=e,r=e,a=e,l=e;return e<6&&e>=5?t=e+1:e<16&&e>=6?t=e+2:e>=16&&(t=16),e<7&&e>=5?r=4:e<8&&e>=7?r=5:e<14&&e>=8?r=6:e<16&&e>=14?r=7:e>=16&&(r=8),e<6&&e>=2?a=1:e>=6&&(a=2),e>4&&e<8?l=4:e>=8&&(l=6),{borderRadius:e,borderRadiusXS:a,borderRadiusSM:r,borderRadiusLG:t,borderRadiusOuter:l}};function GL(e){const{motionUnit:t,motionBase:r,borderRadius:a,lineWidth:l}=e;return Object.assign({motionDurationFast:`${(r+t).toFixed(1)}s`,motionDurationMid:`${(r+t*2).toFixed(1)}s`,motionDurationSlow:`${(r+t*3).toFixed(1)}s`,lineWidthBold:l+1},WL(a))}const ZL=e=>{const{controlHeight:t}=e;return{controlHeightSM:t*.75,controlHeightXS:t*.5,controlHeightLG:t*1.25}};function KL(e){return(e+8)/e}function XL(e){const t=new Array(10).fill(null).map((r,a)=>{const l=a-1,d=e*Math.pow(Math.E,l/5),f=a>1?Math.floor(d):Math.ceil(d);return Math.floor(f/2)*2});return t[1]=e,t.map(r=>({size:r,lineHeight:KL(r)}))}const JL=e=>{const t=XL(e),r=t.map(M=>M.size),a=t.map(M=>M.lineHeight),l=r[1],d=r[0],f=r[2],u=a[1],S=a[0],T=a[2];return{fontSizeSM:d,fontSize:l,fontSizeLG:f,fontSizeXL:r[3],fontSizeHeading1:r[6],fontSizeHeading2:r[5],fontSizeHeading3:r[4],fontSizeHeading4:r[3],fontSizeHeading5:r[2],lineHeight:u,lineHeightLG:T,lineHeightSM:S,fontHeight:Math.round(u*l),fontHeightLG:Math.round(T*f),fontHeightSM:Math.round(S*d),lineHeightHeading1:a[6],lineHeightHeading2:a[5],lineHeightHeading3:a[4],lineHeightHeading4:a[3],lineHeightHeading5:a[2]}};function YL(e){const{sizeUnit:t,sizeStep:r}=e;return{sizeXXL:t*(r+8),sizeXL:t*(r+4),sizeLG:t*(r+2),sizeMD:t*(r+1),sizeMS:t*r,size:t*r,sizeSM:t*(r-1),sizeXS:t*(r-2),sizeXXS:t*(r-3)}}const ds=(e,t)=>new eo(e).setAlpha(t).toRgbString(),kd=(e,t)=>new eo(e).darken(t).toHexString(),QL=e=>{const t=If(e);return{1:t[0],2:t[1],3:t[2],4:t[3],5:t[4],6:t[5],7:t[6],8:t[4],9:t[5],10:t[6]}},eD=(e,t)=>{const r=e||"#fff",a=t||"#000";return{colorBgBase:r,colorTextBase:a,colorText:ds(a,.88),colorTextSecondary:ds(a,.65),colorTextTertiary:ds(a,.45),colorTextQuaternary:ds(a,.25),colorFill:ds(a,.15),colorFillSecondary:ds(a,.06),colorFillTertiary:ds(a,.04),colorFillQuaternary:ds(a,.02),colorBgLayout:kd(r,4),colorBgContainer:kd(r,0),colorBgElevated:kd(r,0),colorBgSpotlight:ds(a,.85),colorBgBlur:"transparent",colorBorder:kd(r,15),colorBorderSecondary:kd(r,6)}};function tD(e){u0.pink=u0.magenta,h0.pink=h0.magenta;const t=Object.keys(sI).map(r=>{const a=e[r]===u0[r]?h0[r]:If(e[r]);return new Array(10).fill(1).reduce((l,d,f)=>(l[`${r}-${f+1}`]=a[f],l[`${r}${f+1}`]=a[f],l),{})}).reduce((r,a)=>(r=Object.assign(Object.assign({},r),a),r),{});return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},e),t),qL(e,{generateColorPalettes:QL,generateNeutralColorPalettes:eD})),JL(e.fontSize)),YL(e)),ZL(e)),GL(e))}const lI=P_(tD),Z_={token:kf,override:{override:kf},hashed:!0},cI=nn.createContext(Z_),Sg="ant",uI="anticon",rD=(e,t)=>t||(e?`${Sg}-${e}`:Sg),Ho=L.createContext({getPrefixCls:rD,iconPrefixCls:uI}),nD=`-ant-${Date.now()}-${Math.random()}`;function iD(e,t){const r={},a=(f,u)=>{let S=f.clone();return S=(u==null?void 0:u(S))||S,S.toRgbString()},l=(f,u)=>{const S=new eo(f),T=If(S.toRgbString());r[`${u}-color`]=a(S),r[`${u}-color-disabled`]=T[1],r[`${u}-color-hover`]=T[4],r[`${u}-color-active`]=T[6],r[`${u}-color-outline`]=S.clone().setAlpha(.2).toRgbString(),r[`${u}-color-deprecated-bg`]=T[0],r[`${u}-color-deprecated-border`]=T[2]};if(t.primaryColor){l(t.primaryColor,"primary");const f=new eo(t.primaryColor),u=If(f.toRgbString());u.forEach((T,M)=>{r[`primary-${M+1}`]=T}),r["primary-color-deprecated-l-35"]=a(f,T=>T.lighten(35)),r["primary-color-deprecated-l-20"]=a(f,T=>T.lighten(20)),r["primary-color-deprecated-t-20"]=a(f,T=>T.tint(20)),r["primary-color-deprecated-t-50"]=a(f,T=>T.tint(50)),r["primary-color-deprecated-f-12"]=a(f,T=>T.setAlpha(T.getAlpha()*.12));const S=new eo(u[0]);r["primary-color-active-deprecated-f-30"]=a(S,T=>T.setAlpha(T.getAlpha()*.3)),r["primary-color-active-deprecated-d-02"]=a(S,T=>T.darken(2))}return t.successColor&&l(t.successColor,"success"),t.warningColor&&l(t.warningColor,"warning"),t.errorColor&&l(t.errorColor,"error"),t.infoColor&&l(t.infoColor,"info"),`
  :root {
    ${Object.keys(r).map(f=>`--${e}-${f}: ${r[f]};`).join(`
`)}
  }
  `.trim()}function oD(e,t){const r=iD(e,t);Uo()&&bs(r,`${nD}-dynamic-theme`)}const K_=L.createContext(!1),aD=e=>{let{children:t,disabled:r}=e;const a=L.useContext(K_);return L.createElement(K_.Provider,{value:r??a},t)},Mf=L.createContext(void 0),sD=e=>{let{children:t,size:r}=e;const a=L.useContext(Mf);return L.createElement(Mf.Provider,{value:r||a},t)};function lD(){const e=L.useContext(K_),t=L.useContext(Mf);return{componentDisabled:e,componentSize:t}}var hI=Pi(function e(){Ti(this,e)}),dI="CALC_UNIT",cD=new RegExp(dI,"g");function d0(e){return typeof e=="number"?"".concat(e).concat(dI):e}var uD=function(e){Tl(r,e);var t=Pl(r);function r(a,l){var d;Ti(this,r),d=t.call(this),De(gr(d),"result",""),De(gr(d),"unitlessCssVar",void 0),De(gr(d),"lowPriority",void 0);var f=ir(a);return d.unitlessCssVar=l,a instanceof r?d.result="(".concat(a.result,")"):f==="number"?d.result=d0(a):f==="string"&&(d.result=a),d}return Pi(r,[{key:"add",value:function(l){return l instanceof r?this.result="".concat(this.result," + ").concat(l.getResult()):(typeof l=="number"||typeof l=="string")&&(this.result="".concat(this.result," + ").concat(d0(l))),this.lowPriority=!0,this}},{key:"sub",value:function(l){return l instanceof r?this.result="".concat(this.result," - ").concat(l.getResult()):(typeof l=="number"||typeof l=="string")&&(this.result="".concat(this.result," - ").concat(d0(l))),this.lowPriority=!0,this}},{key:"mul",value:function(l){return this.lowPriority&&(this.result="(".concat(this.result,")")),l instanceof r?this.result="".concat(this.result," * ").concat(l.getResult(!0)):(typeof l=="number"||typeof l=="string")&&(this.result="".concat(this.result," * ").concat(l)),this.lowPriority=!1,this}},{key:"div",value:function(l){return this.lowPriority&&(this.result="(".concat(this.result,")")),l instanceof r?this.result="".concat(this.result," / ").concat(l.getResult(!0)):(typeof l=="number"||typeof l=="string")&&(this.result="".concat(this.result," / ").concat(l)),this.lowPriority=!1,this}},{key:"getResult",value:function(l){return this.lowPriority||l?"(".concat(this.result,")"):this.result}},{key:"equal",value:function(l){var d=this,f=l||{},u=f.unit,S=!0;return typeof u=="boolean"?S=u:Array.from(this.unitlessCssVar).some(function(T){return d.result.includes(T)})&&(S=!1),this.result=this.result.replace(cD,S?"px":""),typeof this.lowPriority<"u"?"calc(".concat(this.result,")"):this.result}}]),r}(hI),hD=function(e){Tl(r,e);var t=Pl(r);function r(a){var l;return Ti(this,r),l=t.call(this),De(gr(l),"result",0),a instanceof r?l.result=a.result:typeof a=="number"&&(l.result=a),l}return Pi(r,[{key:"add",value:function(l){return l instanceof r?this.result+=l.result:typeof l=="number"&&(this.result+=l),this}},{key:"sub",value:function(l){return l instanceof r?this.result-=l.result:typeof l=="number"&&(this.result-=l),this}},{key:"mul",value:function(l){return l instanceof r?this.result*=l.result:typeof l=="number"&&(this.result*=l),this}},{key:"div",value:function(l){return l instanceof r?this.result/=l.result:typeof l=="number"&&(this.result/=l),this}},{key:"equal",value:function(){return this.result}}]),r}(hI),dD=function(t,r){var a=t==="css"?uD:hD;return function(l){return new a(l,r)}},wS=function(t,r){return"".concat([r,t.replace(/([A-Z]+)([A-Z][a-z]+)/g,"$1-$2").replace(/([a-z])([A-Z])/g,"$1-$2")].filter(Boolean).join("-"))};function po(e){var t=L.useRef();t.current=e;var r=L.useCallback(function(){for(var a,l=arguments.length,d=new Array(l),f=0;f<l;f++)d[f]=arguments[f];return(a=t.current)===null||a===void 0?void 0:a.call.apply(a,[t].concat(d))},[]);return r}function Af(e){var t=L.useRef(!1),r=L.useState(e),a=nt(r,2),l=a[0],d=a[1];L.useEffect(function(){return t.current=!1,function(){t.current=!0}},[]);function f(u,S){S&&t.current||d(u)}return[l,f]}function f0(e){return e!==void 0}function Jd(e,t){var r=t||{},a=r.defaultValue,l=r.value,d=r.onChange,f=r.postState,u=Af(function(){return f0(l)?l:f0(a)?typeof a=="function"?a():a:typeof e=="function"?e():e}),S=nt(u,2),T=S[0],M=S[1],A=l!==void 0?l:T,I=f?f(A):A,G=po(d),N=Af([A]),q=nt(N,2),Z=q[0],V=q[1];sS(function(){var H=Z[0];T!==H&&G(T,H)},[Z]),sS(function(){f0(l)||M(l)},[l]);var F=po(function(H,Y){M(H,Y),V([A],Y)});return[I,F]}function SS(e,t,r,a){var l=$e({},t[e]);if(a!=null&&a.deprecatedTokens){var d=a.deprecatedTokens;d.forEach(function(u){var S=nt(u,2),T=S[0],M=S[1];if(l!=null&&l[T]||l!=null&&l[M]){var A;(A=l[M])!==null&&A!==void 0||(l[M]=l==null?void 0:l[T])}})}var f=$e($e({},r),l);return Object.keys(f).forEach(function(u){f[u]===t[u]&&delete f[u]}),f}var fI=typeof CSSINJS_STATISTIC<"u",X_=!0;function Yu(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(!fI)return Object.assign.apply(Object,[{}].concat(t));X_=!1;var a={};return t.forEach(function(l){if(ir(l)==="object"){var d=Object.keys(l);d.forEach(function(f){Object.defineProperty(a,f,{configurable:!0,enumerable:!0,get:function(){return l[f]}})})}}),X_=!0,a}var CS={};function fD(){}var pD=function(t){var r,a=t,l=fD;return fI&&typeof Proxy<"u"&&(r=new Set,a=new Proxy(t,{get:function(f,u){return X_&&r.add(u),f[u]}}),l=function(f,u){var S;CS[f]={global:Array.from(r),component:$e($e({},(S=CS[f])===null||S===void 0?void 0:S.component),u)}}),{token:a,keys:r,flush:l}};function ES(e,t,r){if(typeof r=="function"){var a;return r(Yu(t,(a=t[e])!==null&&a!==void 0?a:{}))}return r??{}}function mD(e){return e==="js"?{max:Math.max,min:Math.min}:{max:function(){for(var r=arguments.length,a=new Array(r),l=0;l<r;l++)a[l]=arguments[l];return"max(".concat(a.map(function(d){return Ir(d)}).join(","),")")},min:function(){for(var r=arguments.length,a=new Array(r),l=0;l<r;l++)a[l]=arguments[l];return"min(".concat(a.map(function(d){return Ir(d)}).join(","),")")}}}var gD=1e3*60*10,yD=function(){function e(){Ti(this,e),De(this,"map",new Map),De(this,"objectIDMap",new WeakMap),De(this,"nextID",0),De(this,"lastAccessBeat",new Map),De(this,"accessBeat",0)}return Pi(e,[{key:"set",value:function(r,a){this.clear();var l=this.getCompositeKey(r);this.map.set(l,a),this.lastAccessBeat.set(l,Date.now())}},{key:"get",value:function(r){var a=this.getCompositeKey(r),l=this.map.get(a);return this.lastAccessBeat.set(a,Date.now()),this.accessBeat+=1,l}},{key:"getCompositeKey",value:function(r){var a=this,l=r.map(function(d){return d&&ir(d)==="object"?"obj_".concat(a.getObjectID(d)):"".concat(ir(d),"_").concat(d)});return l.join("|")}},{key:"getObjectID",value:function(r){if(this.objectIDMap.has(r))return this.objectIDMap.get(r);var a=this.nextID;return this.objectIDMap.set(r,a),this.nextID+=1,a}},{key:"clear",value:function(){var r=this;if(this.accessBeat>1e4){var a=Date.now();this.lastAccessBeat.forEach(function(l,d){a-l>gD&&(r.map.delete(d),r.lastAccessBeat.delete(d))}),this.accessBeat=0}}}]),e}(),TS=new yD;function vD(e,t){return nn.useMemo(function(){var r=TS.get(t);if(r)return r;var a=e();return TS.set(t,a),a},t)}var _D=function(){return{}};function xD(e){var t=e.useCSP,r=t===void 0?_D:t,a=e.useToken,l=e.usePrefix,d=e.getResetStyles,f=e.getCommonStyle,u=e.getCompUnitless;function S(I,G,N,q){var Z=Array.isArray(I)?I[0]:I;function V(_e){return"".concat(String(Z)).concat(_e.slice(0,1).toUpperCase()).concat(_e.slice(1))}var F=(q==null?void 0:q.unitless)||{},H=typeof u=="function"?u(I):{},Y=$e($e({},H),{},De({},V("zIndexPopup"),!0));Object.keys(F).forEach(function(_e){Y[V(_e)]=F[_e]});var ne=$e($e({},q),{},{unitless:Y,prefixToken:V}),fe=M(I,G,N,ne),ie=T(Z,N,ne);return function(_e){var be=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_e,Pe=fe(_e,be),ze=nt(Pe,2),We=ze[1],Ce=ie(be),Ie=nt(Ce,2),Ke=Ie[0],ke=Ie[1];return[Ke,We,ke]}}function T(I,G,N){var q=N.unitless,Z=N.injectStyle,V=Z===void 0?!0:Z,F=N.prefixToken,H=N.ignore,Y=function(ie){var _e=ie.rootCls,be=ie.cssVar,Pe=be===void 0?{}:be,ze=a(),We=ze.realToken;return mL({path:[I],prefix:Pe.prefix,key:Pe.key,unitless:q,ignore:H,token:We,scope:_e},function(){var Ce=ES(I,We,G),Ie=SS(I,We,Ce,{deprecatedTokens:N==null?void 0:N.deprecatedTokens});return Object.keys(Ce).forEach(function(Ke){Ie[F(Ke)]=Ie[Ke],delete Ie[Ke]}),Ie}),null},ne=function(ie){var _e=a(),be=_e.cssVar;return[function(Pe){return V&&be?nn.createElement(nn.Fragment,null,nn.createElement(Y,{rootCls:ie,cssVar:be,component:I}),Pe):Pe},be==null?void 0:be.key]};return ne}function M(I,G,N){var q=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},Z=Array.isArray(I)?I:[I,I],V=nt(Z,1),F=V[0],H=Z.join("-");return function(Y){var ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Y,fe=a(),ie=fe.theme,_e=fe.realToken,be=fe.hashId,Pe=fe.token,ze=fe.cssVar,We=l(),Ce=We.rootPrefixCls,Ie=We.iconPrefixCls,Ke=r(),ke=ze?"css":"js",Se=vD(function(){var gt=new Set;return ze&&Object.keys(q.unitless||{}).forEach(function(st){gt.add(Nm(st,ze.prefix)),gt.add(Nm(st,wS(F,ze.prefix)))}),dD(ke,gt)},[ke,F,ze==null?void 0:ze.prefix]),ge=mD(ke),Fe=ge.max,Be=ge.min,Ve={theme:ie,token:Pe,hashId:be,nonce:function(){return Ke.nonce},clientOnly:q.clientOnly,layer:{name:"antd"},order:q.order||-999};z_($e($e({},Ve),{},{clientOnly:!1,path:["Shared",Ce]}),function(){return typeof d=="function"?d(Pe):[]});var Ze=z_($e($e({},Ve),{},{path:[H,Y,Ie]}),function(){if(q.injectStyle===!1)return[];var gt=pD(Pe),st=gt.token,St=gt.flush,Et=ES(F,_e,N),Lt=".".concat(Y),Vt=SS(F,_e,Et,{deprecatedTokens:q.deprecatedTokens});ze&&ir(Et)==="object"&&Object.keys(Et).forEach(function(rr){Et[rr]="var(".concat(Nm(rr,wS(F,ze.prefix)),")")});var or=Yu(st,{componentCls:Lt,prefixCls:Y,iconCls:".".concat(Ie),antCls:".".concat(Ce),calc:Se,max:Fe,min:Be},ze?Et:Vt),Jt=G(or,{hashId:be,prefixCls:Y,rootPrefixCls:Ce,iconPrefixCls:Ie});St(F,Vt);var tr=typeof f=="function"?f(or,Y,ne,q.resetFont):null;return[q.resetStyle===!1?null:tr,Jt]});return[Ze,be]}}function A(I,G,N){var q=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},Z=M(I,G,N,$e({resetStyle:!1,order:-998},q)),V=function(H){var Y=H.prefixCls,ne=H.rootCls,fe=ne===void 0?Y:ne;return Z(Y,fe),null};return V}return{genStyleHooks:S,genSubStyleComponent:A,genComponentStyleHook:M}}const Cg=["blue","purple","cyan","green","magenta","pink","red","orange","yellow","volcano","geekblue","lime","gold"],bD="5.20.0";function p0(e){return e>=0&&e<=255}function gm(e,t){const{r,g:a,b:l,a:d}=new eo(e).toRgb();if(d<1)return e;const{r:f,g:u,b:S}=new eo(t).toRgb();for(let T=.01;T<=1;T+=.01){const M=Math.round((r-f*(1-T))/T),A=Math.round((a-u*(1-T))/T),I=Math.round((l-S*(1-T))/T);if(p0(M)&&p0(A)&&p0(I))return new eo({r:M,g:A,b:I,a:Math.round(T*100)/100}).toRgbString()}return new eo({r,g:a,b:l,a:1}).toRgbString()}var wD=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,a=Object.getOwnPropertySymbols(e);l<a.length;l++)t.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(r[a[l]]=e[a[l]]);return r};function pI(e){const{override:t}=e,r=wD(e,["override"]),a=Object.assign({},t);Object.keys(kf).forEach(I=>{delete a[I]});const l=Object.assign(Object.assign({},r),a),d=480,f=576,u=768,S=992,T=1200,M=1600;if(l.motion===!1){const I="0s";l.motionDurationFast=I,l.motionDurationMid=I,l.motionDurationSlow=I}return Object.assign(Object.assign(Object.assign({},l),{colorFillContent:l.colorFillSecondary,colorFillContentHover:l.colorFill,colorFillAlter:l.colorFillQuaternary,colorBgContainerDisabled:l.colorFillTertiary,colorBorderBg:l.colorBgContainer,colorSplit:gm(l.colorBorderSecondary,l.colorBgContainer),colorTextPlaceholder:l.colorTextQuaternary,colorTextDisabled:l.colorTextQuaternary,colorTextHeading:l.colorText,colorTextLabel:l.colorTextSecondary,colorTextDescription:l.colorTextTertiary,colorTextLightSolid:l.colorWhite,colorHighlight:l.colorError,colorBgTextHover:l.colorFillSecondary,colorBgTextActive:l.colorFill,colorIcon:l.colorTextTertiary,colorIconHover:l.colorText,colorErrorOutline:gm(l.colorErrorBg,l.colorBgContainer),colorWarningOutline:gm(l.colorWarningBg,l.colorBgContainer),fontSizeIcon:l.fontSizeSM,lineWidthFocus:l.lineWidth*4,lineWidth:l.lineWidth,controlOutlineWidth:l.lineWidth*2,controlInteractiveSize:l.controlHeight/2,controlItemBgHover:l.colorFillTertiary,controlItemBgActive:l.colorPrimaryBg,controlItemBgActiveHover:l.colorPrimaryBgHover,controlItemBgActiveDisabled:l.colorFill,controlTmpOutline:l.colorFillQuaternary,controlOutline:gm(l.colorPrimaryBg,l.colorBgContainer),lineType:l.lineType,borderRadius:l.borderRadius,borderRadiusXS:l.borderRadiusXS,borderRadiusSM:l.borderRadiusSM,borderRadiusLG:l.borderRadiusLG,fontWeightStrong:600,opacityLoading:.65,linkDecoration:"none",linkHoverDecoration:"none",linkFocusDecoration:"none",controlPaddingHorizontal:12,controlPaddingHorizontalSM:8,paddingXXS:l.sizeXXS,paddingXS:l.sizeXS,paddingSM:l.sizeSM,padding:l.size,paddingMD:l.sizeMD,paddingLG:l.sizeLG,paddingXL:l.sizeXL,paddingContentHorizontalLG:l.sizeLG,paddingContentVerticalLG:l.sizeMS,paddingContentHorizontal:l.sizeMS,paddingContentVertical:l.sizeSM,paddingContentHorizontalSM:l.size,paddingContentVerticalSM:l.sizeXS,marginXXS:l.sizeXXS,marginXS:l.sizeXS,marginSM:l.sizeSM,margin:l.size,marginMD:l.sizeMD,marginLG:l.sizeLG,marginXL:l.sizeXL,marginXXL:l.sizeXXL,boxShadow:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowSecondary:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTertiary:`
      0 1px 2px 0 rgba(0, 0, 0, 0.03),
      0 1px 6px -1px rgba(0, 0, 0, 0.02),
      0 2px 4px 0 rgba(0, 0, 0, 0.02)
    `,screenXS:d,screenXSMin:d,screenXSMax:f-1,screenSM:f,screenSMMin:f,screenSMMax:u-1,screenMD:u,screenMDMin:u,screenMDMax:S-1,screenLG:S,screenLGMin:S,screenLGMax:T-1,screenXL:T,screenXLMin:T,screenXLMax:M-1,screenXXL:M,screenXXLMin:M,boxShadowPopoverArrow:"2px 2px 5px rgba(0, 0, 0, 0.05)",boxShadowCard:`
      0 1px 2px -2px ${new eo("rgba(0, 0, 0, 0.16)").toRgbString()},
      0 3px 6px 0 ${new eo("rgba(0, 0, 0, 0.12)").toRgbString()},
      0 5px 12px 4px ${new eo("rgba(0, 0, 0, 0.09)").toRgbString()}
    `,boxShadowDrawerRight:`
      -6px 0 16px 0 rgba(0, 0, 0, 0.08),
      -3px 0 6px -4px rgba(0, 0, 0, 0.12),
      -9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerLeft:`
      6px 0 16px 0 rgba(0, 0, 0, 0.08),
      3px 0 6px -4px rgba(0, 0, 0, 0.12),
      9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerUp:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerDown:`
      0 -6px 16px 0 rgba(0, 0, 0, 0.08),
      0 -3px 6px -4px rgba(0, 0, 0, 0.12),
      0 -9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTabsOverflowLeft:"inset 10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowRight:"inset -10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowTop:"inset 0 10px 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowBottom:"inset 0 -10px 8px -8px rgba(0, 0, 0, 0.08)"}),a)}var PS=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,a=Object.getOwnPropertySymbols(e);l<a.length;l++)t.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(r[a[l]]=e[a[l]]);return r};const mI={lineHeight:!0,lineHeightSM:!0,lineHeightLG:!0,lineHeightHeading1:!0,lineHeightHeading2:!0,lineHeightHeading3:!0,lineHeightHeading4:!0,lineHeightHeading5:!0,opacityLoading:!0,fontWeightStrong:!0,zIndexPopupBase:!0,zIndexBase:!0,opacityImage:!0},SD={size:!0,sizeSM:!0,sizeLG:!0,sizeMD:!0,sizeXS:!0,sizeXXS:!0,sizeMS:!0,sizeXL:!0,sizeXXL:!0,sizeUnit:!0,sizeStep:!0,motionBase:!0,motionUnit:!0},CD={screenXS:!0,screenXSMin:!0,screenXSMax:!0,screenSM:!0,screenSMMin:!0,screenSMMax:!0,screenMD:!0,screenMDMin:!0,screenMDMax:!0,screenLG:!0,screenLGMin:!0,screenLGMax:!0,screenXL:!0,screenXLMin:!0,screenXLMax:!0,screenXXL:!0,screenXXLMin:!0},gI=(e,t,r)=>{const a=r.getDerivativeToken(e),{override:l}=t,d=PS(t,["override"]);let f=Object.assign(Object.assign({},a),{override:l});return f=pI(f),d&&Object.entries(d).forEach(u=>{let[S,T]=u;const{theme:M}=T,A=PS(T,["theme"]);let I=A;M&&(I=gI(Object.assign(Object.assign({},f),A),{override:A},M)),f[S]=I}),f};function ah(){const{token:e,hashed:t,theme:r,override:a,cssVar:l}=nn.useContext(cI),d=`${bD}-${t||""}`,f=r||lI,[u,S,T]=j5(f,[kf,e],{salt:d,override:a,getComputedToken:gI,formatToken:pI,cssVar:l&&{prefix:l.prefix,key:l.key,unitless:mI,ignore:SD,preserve:CD}});return[f,T,t?S:"",u,l]}const ED={overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},yI=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return{boxSizing:"border-box",margin:0,padding:0,color:e.colorText,fontSize:e.fontSize,lineHeight:e.lineHeight,listStyle:"none",fontFamily:t?"inherit":e.fontFamily}},vI=()=>({display:"inline-flex",alignItems:"center",color:"inherit",fontStyle:"normal",lineHeight:0,textAlign:"center",textTransform:"none",verticalAlign:"-0.125em",textRendering:"optimizeLegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","> *":{lineHeight:1},svg:{display:"inline-block"}}),IS=()=>({"&::before":{display:"table",content:'""'},"&::after":{display:"table",clear:"both",content:'""'}}),TD=e=>({a:{color:e.colorLink,textDecoration:e.linkDecoration,backgroundColor:"transparent",outline:"none",cursor:"pointer",transition:`color ${e.motionDurationSlow}`,"-webkit-text-decoration-skip":"objects","&:hover":{color:e.colorLinkHover},"&:active":{color:e.colorLinkActive},"&:active, &:hover":{textDecoration:e.linkHoverDecoration,outline:0},"&:focus":{textDecoration:e.linkFocusDecoration,outline:0},"&[disabled]":{color:e.colorTextDisabled,cursor:"not-allowed"}}}),PD=(e,t,r,a)=>{const l=`[class^="${t}"], [class*=" ${t}"]`,d=r?`.${r}`:l,f={boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"}};let u={};return a!==!1&&(u={fontFamily:e.fontFamily,fontSize:e.fontSize}),{[d]:Object.assign(Object.assign(Object.assign({},u),f),{[l]:f})}},ID=e=>({outline:`${Ir(e.lineWidthFocus)} solid ${e.colorPrimaryBorder}`,outlineOffset:1,transition:"outline-offset 0s, outline 0s"}),_I=(e,t)=>{const[r,a]=ah();return z_({theme:r,token:a,hashId:"",path:["ant-design-icons",e],nonce:()=>t==null?void 0:t.nonce,layer:{name:"antd"}},()=>[{[`.${e}`]:Object.assign(Object.assign({},vI()),{[`.${e} .${e}-icon`]:{display:"block"}})}])},{genStyleHooks:Mx,genComponentStyleHook:X8,genSubStyleComponent:J8}=xD({usePrefix:()=>{const{getPrefixCls:e,iconPrefixCls:t}=L.useContext(Ho);return{rootPrefixCls:e(),iconPrefixCls:t}},useToken:()=>{const[e,t,r,a,l]=ah();return{theme:e,realToken:t,hashId:r,token:a,cssVar:l}},useCSP:()=>{const{csp:e,iconPrefixCls:t}=L.useContext(Ho);return _I(t,e),e??{}},getResetStyles:e=>[{"&":TD(e)}],getCommonStyle:PD,getCompUnitless:()=>mI});function kD(e,t){return Cg.reduce((r,a)=>{const l=e[`${a}1`],d=e[`${a}3`],f=e[`${a}6`],u=e[`${a}7`];return Object.assign(Object.assign({},r),t(a,{lightColor:l,lightBorderColor:d,darkColor:f,textColor:u}))},{})}const MD=Object.assign({},Lg),{useId:kS}=MD,AD=()=>"",zD=typeof kS>"u"?AD:kS;function RD(e,t,r){var a;tI();const l=e||{},d=l.inherit===!1||!t?Object.assign(Object.assign({},Z_),{hashed:(a=t==null?void 0:t.hashed)!==null&&a!==void 0?a:Z_.hashed,cssVar:t==null?void 0:t.cssVar}):t,f=zD();return hy(()=>{var u,S;if(!e)return t;const T=Object.assign({},d.components);Object.keys(e.components||{}).forEach(I=>{T[I]=Object.assign(Object.assign({},T[I]),e.components[I])});const M=`css-var-${f.replace(/:/g,"")}`,A=((u=l.cssVar)!==null&&u!==void 0?u:d.cssVar)&&Object.assign(Object.assign(Object.assign({prefix:r==null?void 0:r.prefixCls},typeof d.cssVar=="object"?d.cssVar:{}),typeof l.cssVar=="object"?l.cssVar:{}),{key:typeof l.cssVar=="object"&&((S=l.cssVar)===null||S===void 0?void 0:S.key)||M});return Object.assign(Object.assign(Object.assign({},d),l),{token:Object.assign(Object.assign({},d.token),l.token),components:T,cssVar:A})},[l,d],(u,S)=>u.some((T,M)=>{const A=S[M];return!Ef(T,A,!0)}))}var LD=["children"],xI=L.createContext({});function DD(e){var t=e.children,r=xn(e,LD);return L.createElement(xI.Provider,{value:r},t)}var FD=function(e){Tl(r,e);var t=Pl(r);function r(){return Ti(this,r),t.apply(this,arguments)}return Pi(r,[{key:"render",value:function(){return this.props.children}}]),r}(L.Component);function OD(e){var t=L.useReducer(function(u){return u+1},0),r=nt(t,2),a=r[1],l=L.useRef(e),d=po(function(){return l.current}),f=po(function(u){l.current=typeof u=="function"?u(l.current):u,a()});return[d,f]}var rl="none",ym="appear",vm="enter",_m="leave",MS="none",wa="prepare",Ru="start",Lu="active",Ax="end",bI="prepared";function AS(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit".concat(e)]="webkit".concat(t),r["Moz".concat(e)]="moz".concat(t),r["ms".concat(e)]="MS".concat(t),r["O".concat(e)]="o".concat(t.toLowerCase()),r}function BD(e,t){var r={animationend:AS("Animation","AnimationEnd"),transitionend:AS("Transition","TransitionEnd")};return e&&("AnimationEvent"in t||delete r.animationend.animation,"TransitionEvent"in t||delete r.transitionend.transition),r}var ND=BD(Uo(),typeof window<"u"?window:{}),wI={};if(Uo()){var $D=document.createElement("div");wI=$D.style}var xm={};function SI(e){if(xm[e])return xm[e];var t=ND[e];if(t)for(var r=Object.keys(t),a=r.length,l=0;l<a;l+=1){var d=r[l];if(Object.prototype.hasOwnProperty.call(t,d)&&d in wI)return xm[e]=t[d],xm[e]}return""}var CI=SI("animationend"),EI=SI("transitionend"),TI=!!(CI&&EI),zS=CI||"animationend",RS=EI||"transitionend";function LS(e,t){if(!e)return null;if(ir(e)==="object"){var r=t.replace(/-\w/g,function(a){return a[1].toUpperCase()});return e[r]}return"".concat(e,"-").concat(t)}const jD=function(e){var t=L.useRef();function r(l){l&&(l.removeEventListener(RS,e),l.removeEventListener(zS,e))}function a(l){t.current&&t.current!==l&&r(t.current),l&&l!==t.current&&(l.addEventListener(RS,e),l.addEventListener(zS,e),t.current=l)}return L.useEffect(function(){return function(){r(t.current)}},[]),[a,r]};var PI=Uo()?L.useLayoutEffect:L.useEffect;const VD=function(){var e=L.useRef(null);function t(){xs.cancel(e.current)}function r(a){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;t();var d=xs(function(){l<=1?a({isCanceled:function(){return d!==e.current}}):r(a,l-1)});e.current=d}return L.useEffect(function(){return function(){t()}},[]),[r,t]};var UD=[wa,Ru,Lu,Ax],HD=[wa,bI],II=!1,qD=!0;function kI(e){return e===Lu||e===Ax}const WD=function(e,t,r){var a=Af(MS),l=nt(a,2),d=l[0],f=l[1],u=VD(),S=nt(u,2),T=S[0],M=S[1];function A(){f(wa,!0)}var I=t?HD:UD;return PI(function(){if(d!==MS&&d!==Ax){var G=I.indexOf(d),N=I[G+1],q=r(d);q===II?f(N,!0):N&&T(function(Z){function V(){Z.isCanceled()||f(N,!0)}q===!0?V():Promise.resolve(q).then(V)})}},[e,d]),L.useEffect(function(){return function(){M()}},[]),[A,d]};function GD(e,t,r,a){var l=a.motionEnter,d=l===void 0?!0:l,f=a.motionAppear,u=f===void 0?!0:f,S=a.motionLeave,T=S===void 0?!0:S,M=a.motionDeadline,A=a.motionLeaveImmediately,I=a.onAppearPrepare,G=a.onEnterPrepare,N=a.onLeavePrepare,q=a.onAppearStart,Z=a.onEnterStart,V=a.onLeaveStart,F=a.onAppearActive,H=a.onEnterActive,Y=a.onLeaveActive,ne=a.onAppearEnd,fe=a.onEnterEnd,ie=a.onLeaveEnd,_e=a.onVisibleChanged,be=Af(),Pe=nt(be,2),ze=Pe[0],We=Pe[1],Ce=OD(rl),Ie=nt(Ce,2),Ke=Ie[0],ke=Ie[1],Se=Af(null),ge=nt(Se,2),Fe=ge[0],Be=ge[1],Ve=Ke(),Ze=L.useRef(!1),gt=L.useRef(null);function st(){return r()}var St=L.useRef(!1);function Et(){ke(rl),Be(null,!0)}var Lt=po(function(Ft){var Xt=Ke();if(Xt!==rl){var Sr=st();if(!(Ft&&!Ft.deadline&&Ft.target!==Sr)){var Zt=St.current,Qt;Xt===ym&&Zt?Qt=ne==null?void 0:ne(Sr,Ft):Xt===vm&&Zt?Qt=fe==null?void 0:fe(Sr,Ft):Xt===_m&&Zt&&(Qt=ie==null?void 0:ie(Sr,Ft)),Zt&&Qt!==!1&&Et()}}}),Vt=jD(Lt),or=nt(Vt,1),Jt=or[0],tr=function(Xt){switch(Xt){case ym:return De(De(De({},wa,I),Ru,q),Lu,F);case vm:return De(De(De({},wa,G),Ru,Z),Lu,H);case _m:return De(De(De({},wa,N),Ru,V),Lu,Y);default:return{}}},rr=L.useMemo(function(){return tr(Ve)},[Ve]),Gr=WD(Ve,!e,function(Ft){if(Ft===wa){var Xt=rr[wa];return Xt?Xt(st()):II}if(Te in rr){var Sr;Be(((Sr=rr[Te])===null||Sr===void 0?void 0:Sr.call(rr,st(),null))||null)}return Te===Lu&&Ve!==rl&&(Jt(st()),M>0&&(clearTimeout(gt.current),gt.current=setTimeout(function(){Lt({deadline:!0})},M))),Te===bI&&Et(),qD}),sr=nt(Gr,2),Br=sr[0],Te=sr[1],Ar=kI(Te);St.current=Ar,PI(function(){We(t);var Ft=Ze.current;Ze.current=!0;var Xt;!Ft&&t&&u&&(Xt=ym),Ft&&t&&d&&(Xt=vm),(Ft&&!t&&T||!Ft&&A&&!t&&T)&&(Xt=_m);var Sr=tr(Xt);Xt&&(e||Sr[wa])?(ke(Xt),Br()):ke(rl)},[t]),L.useEffect(function(){(Ve===ym&&!u||Ve===vm&&!d||Ve===_m&&!T)&&ke(rl)},[u,d,T]),L.useEffect(function(){return function(){Ze.current=!1,clearTimeout(gt.current)}},[]);var yr=L.useRef(!1);L.useEffect(function(){ze&&(yr.current=!0),ze!==void 0&&Ve===rl&&((yr.current||ze)&&(_e==null||_e(ze)),yr.current=!0)},[ze,Ve]);var mt=Fe;return rr[wa]&&Te===Ru&&(mt=$e({transition:"none"},mt)),[Ve,Te,mt,ze??t]}function ZD(e){var t=e;ir(e)==="object"&&(t=e.transitionSupport);function r(l,d){return!!(l.motionName&&t&&d!==!1)}var a=L.forwardRef(function(l,d){var f=l.visible,u=f===void 0?!0:f,S=l.removeOnLeave,T=S===void 0?!0:S,M=l.forceRender,A=l.children,I=l.motionName,G=l.leavedClassName,N=l.eventProps,q=L.useContext(xI),Z=q.motion,V=r(l,Z),F=L.useRef(),H=L.useRef();function Y(){try{return F.current instanceof HTMLElement?F.current:Bm(H.current)}catch{return null}}var ne=GD(V,u,Y,l),fe=nt(ne,4),ie=fe[0],_e=fe[1],be=fe[2],Pe=fe[3],ze=L.useRef(Pe);Pe&&(ze.current=!0);var We=L.useCallback(function(Fe){F.current=Fe,xx(d,Fe)},[d]),Ce,Ie=$e($e({},N),{},{visible:u});if(!A)Ce=null;else if(ie===rl)Pe?Ce=A($e({},Ie),We):!T&&ze.current&&G?Ce=A($e($e({},Ie),{},{className:G}),We):M||!T&&!G?Ce=A($e($e({},Ie),{},{style:{display:"none"}}),We):Ce=null;else{var Ke;_e===wa?Ke="prepare":kI(_e)?Ke="active":_e===Ru&&(Ke="start");var ke=LS(I,"".concat(ie,"-").concat(Ke));Ce=A($e($e({},Ie),{},{className:Mr(LS(I,ie),De(De({},ke,ke&&Ke),I,typeof I=="string")),style:be}),We)}if(L.isValidElement(Ce)&&fy(Ce)){var Se=Ce,ge=Se.ref;ge||(Ce=L.cloneElement(Ce,{ref:We}))}return L.createElement(FD,{ref:H},Ce)});return a.displayName="CSSMotion",a}const xy=ZD(TI);var J_="add",Y_="keep",Q_="remove",m0="removed";function KD(e){var t;return e&&ir(e)==="object"&&"key"in e?t=e:t={key:e},$e($e({},t),{},{key:String(t.key)})}function e1(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return e.map(KD)}function XD(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=[],a=0,l=t.length,d=e1(e),f=e1(t);d.forEach(function(T){for(var M=!1,A=a;A<l;A+=1){var I=f[A];if(I.key===T.key){a<A&&(r=r.concat(f.slice(a,A).map(function(G){return $e($e({},G),{},{status:J_})})),a=A),r.push($e($e({},I),{},{status:Y_})),a+=1,M=!0;break}}M||r.push($e($e({},T),{},{status:Q_}))}),a<l&&(r=r.concat(f.slice(a).map(function(T){return $e($e({},T),{},{status:J_})})));var u={};r.forEach(function(T){var M=T.key;u[M]=(u[M]||0)+1});var S=Object.keys(u).filter(function(T){return u[T]>1});return S.forEach(function(T){r=r.filter(function(M){var A=M.key,I=M.status;return A!==T||I!==Q_}),r.forEach(function(M){M.key===T&&(M.status=Y_)})}),r}var JD=["component","children","onVisibleChanged","onAllRemoved"],YD=["status"],QD=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function eF(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:xy,r=function(a){Tl(d,a);var l=Pl(d);function d(){var f;Ti(this,d);for(var u=arguments.length,S=new Array(u),T=0;T<u;T++)S[T]=arguments[T];return f=l.call.apply(l,[this].concat(S)),De(gr(f),"state",{keyEntities:[]}),De(gr(f),"removeKey",function(M){var A=f.state.keyEntities,I=A.map(function(G){return G.key!==M?G:$e($e({},G),{},{status:m0})});return f.setState({keyEntities:I}),I.filter(function(G){var N=G.status;return N!==m0}).length}),f}return Pi(d,[{key:"render",value:function(){var u=this,S=this.state.keyEntities,T=this.props,M=T.component,A=T.children,I=T.onVisibleChanged,G=T.onAllRemoved,N=xn(T,JD),q=M||L.Fragment,Z={};return QD.forEach(function(V){Z[V]=N[V],delete N[V]}),delete N.keys,L.createElement(q,N,S.map(function(V,F){var H=V.status,Y=xn(V,YD),ne=H===J_||H===Y_;return L.createElement(t,br({},Z,{key:Y.key,visible:ne,eventProps:Y,onVisibleChanged:function(ie){if(I==null||I(ie,{key:Y.key}),!ie){var _e=u.removeKey(Y.key);_e===0&&G&&G()}}}),function(fe,ie){return A($e($e({},fe),{},{index:F}),ie)})}))}}],[{key:"getDerivedStateFromProps",value:function(u,S){var T=u.keys,M=S.keyEntities,A=e1(T),I=XD(M,A);return{keyEntities:I.filter(function(G){var N=M.find(function(q){var Z=q.key;return G.key===Z});return!(N&&N.status===m0&&G.status===Q_)})}}}]),d}(L.Component);return De(r,"defaultProps",{component:"div"}),r}eF(TI);function tF(e){const{children:t}=e,[,r]=ah(),{motion:a}=r,l=L.useRef(!1);return l.current=l.current||a===!1,l.current?L.createElement(DD,{motion:a},t):t}const rF=()=>null;var nF=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,a=Object.getOwnPropertySymbols(e);l<a.length;l++)t.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(r[a[l]]=e[a[l]]);return r};const iF=["getTargetContainer","getPopupContainer","renderEmpty","input","pagination","form","select","button"];let MI;function oF(){return MI||Sg}function aF(e){return Object.keys(e).some(t=>t.endsWith("Color"))}const sF=e=>{const{prefixCls:t,iconPrefixCls:r,theme:a,holderRender:l}=e;t!==void 0&&(MI=t),a&&aF(a)&&oD(oF(),a)},lF=e=>{const{children:t,csp:r,autoInsertSpaceInButton:a,alert:l,anchor:d,form:f,locale:u,componentSize:S,direction:T,space:M,virtual:A,dropdownMatchSelectWidth:I,popupMatchSelectWidth:G,popupOverflow:N,legacyLocale:q,parentContext:Z,iconPrefixCls:V,theme:F,componentDisabled:H,segmented:Y,statistic:ne,spin:fe,calendar:ie,carousel:_e,cascader:be,collapse:Pe,typography:ze,checkbox:We,descriptions:Ce,divider:Ie,drawer:Ke,skeleton:ke,steps:Se,image:ge,layout:Fe,list:Be,mentions:Ve,modal:Ze,progress:gt,result:st,slider:St,breadcrumb:Et,menu:Lt,pagination:Vt,input:or,textArea:Jt,empty:tr,badge:rr,radio:Gr,rate:sr,switch:Br,transfer:Te,avatar:Ar,message:yr,tag:mt,table:Ft,card:Xt,tabs:Sr,timeline:Zt,timePicker:Qt,upload:Cr,notification:vr,tree:Nn,colorPicker:Xe,datePicker:_r,rangePicker:nr,flex:Nr,wave:Lr,dropdown:Ye,warning:Dt,tour:ht,floatButtonGroup:lr,variant:Dr,inputNumber:kt,treeSelect:Zr}=e,Fr=L.useCallback((ue,Re)=>{const{prefixCls:je}=e;if(Re)return Re;const Le=je||Z.getPrefixCls("");return ue?`${Le}-${ue}`:Le},[Z.getPrefixCls,e.prefixCls]),Xr=V||Z.iconPrefixCls||uI,Jr=r||Z.csp;_I(Xr,Jr);const oe=RD(F,Z.theme,{prefixCls:Fr("")}),U={csp:Jr,autoInsertSpaceInButton:a,alert:l,anchor:d,locale:u||q,direction:T,space:M,virtual:A,popupMatchSelectWidth:G??I,popupOverflow:N,getPrefixCls:Fr,iconPrefixCls:Xr,theme:oe,segmented:Y,statistic:ne,spin:fe,calendar:ie,carousel:_e,cascader:be,collapse:Pe,typography:ze,checkbox:We,descriptions:Ce,divider:Ie,drawer:Ke,skeleton:ke,steps:Se,image:ge,input:or,textArea:Jt,layout:Fe,list:Be,mentions:Ve,modal:Ze,progress:gt,result:st,slider:St,breadcrumb:Et,menu:Lt,pagination:Vt,empty:tr,badge:rr,radio:Gr,rate:sr,switch:Br,transfer:Te,avatar:Ar,message:yr,tag:mt,table:Ft,card:Xt,tabs:Sr,timeline:Zt,timePicker:Qt,upload:Cr,notification:vr,tree:Nn,colorPicker:Xe,datePicker:_r,rangePicker:nr,flex:Nr,wave:Lr,dropdown:Ye,warning:Dt,tour:ht,floatButtonGroup:lr,variant:Dr,inputNumber:kt,treeSelect:Zr},$=Object.assign({},Z);Object.keys(U).forEach(ue=>{U[ue]!==void 0&&($[ue]=U[ue])}),iF.forEach(ue=>{const Re=e[ue];Re&&($[ue]=Re)}),typeof a<"u"&&($.button=Object.assign({autoInsertSpace:a},$.button));const X=hy(()=>$,$,(ue,Re)=>{const je=Object.keys(ue),Le=Object.keys(Re);return je.length!==Le.length||je.some(Qe=>ue[Qe]!==Re[Qe])}),te=L.useMemo(()=>({prefixCls:Xr,csp:Jr}),[Xr,Jr]);let se=L.createElement(L.Fragment,null,L.createElement(rF,{dropdownMatchSelectWidth:I}),t);const me=L.useMemo(()=>{var ue,Re,je,Le;return zu(((ue=_y.Form)===null||ue===void 0?void 0:ue.defaultValidateMessages)||{},((je=(Re=X.locale)===null||Re===void 0?void 0:Re.Form)===null||je===void 0?void 0:je.defaultValidateMessages)||{},((Le=X.form)===null||Le===void 0?void 0:Le.validateMessages)||{},(f==null?void 0:f.validateMessages)||{})},[X,f==null?void 0:f.validateMessages]);Object.keys(me).length>0&&(se=L.createElement(wL.Provider,{value:me},se)),u&&(se=L.createElement(IL,{locale:u,_ANT_MARK__:PL},se)),(Xr||Jr)&&(se=L.createElement(kx.Provider,{value:te},se)),S&&(se=L.createElement(sD,{size:S},se)),se=L.createElement(tF,null,se);const xe=L.useMemo(()=>{const ue=oe||{},{algorithm:Re,token:je,components:Le,cssVar:Qe}=ue,vt=nF(ue,["algorithm","token","components","cssVar"]),wt=Re&&(!Array.isArray(Re)||Re.length>0)?P_(Re):lI,At={};Object.entries(Le||{}).forEach(zt=>{let[Yt,zr]=zt;const cr=Object.assign({},zr);"algorithm"in cr&&(cr.algorithm===!0?cr.theme=wt:(Array.isArray(cr.algorithm)||typeof cr.algorithm=="function")&&(cr.theme=P_(cr.algorithm)),delete cr.algorithm),At[Yt]=cr});const Kt=Object.assign(Object.assign({},kf),je);return Object.assign(Object.assign({},vt),{theme:wt,token:Kt,components:At,override:Object.assign({override:Kt},At),cssVar:Qe})},[oe]);return F&&(se=L.createElement(cI.Provider,{value:xe},se)),X.warning&&(se=L.createElement(bL.Provider,{value:X.warning},se)),H!==void 0&&(se=L.createElement(aD,{disabled:H},se)),L.createElement(Ho.Provider,{value:X},se)},Uf=e=>{const t=L.useContext(Ho),r=L.useContext(nI);return L.createElement(lF,Object.assign({parentContext:t,legacyLocale:r},e))};Uf.ConfigContext=Ho;Uf.SizeContext=Mf;Uf.config=sF;Uf.useConfig=lD;Object.defineProperty(Uf,"SizeContext",{get:()=>Mf});function AI(e){var t;return e==null||(t=e.getRootNode)===null||t===void 0?void 0:t.call(e)}function cF(e){return AI(e)instanceof ShadowRoot}function Eg(e){return cF(e)?AI(e):null}function uF(e){return e.replace(/-(.)/g,function(t,r){return r.toUpperCase()})}function hF(e,t){ro(e,"[@ant-design/icons] ".concat(t))}function DS(e){return ir(e)==="object"&&typeof e.name=="string"&&typeof e.theme=="string"&&(ir(e.icon)==="object"||typeof e.icon=="function")}function FS(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(e).reduce(function(t,r){var a=e[r];switch(r){case"class":t.className=a,delete t.class;break;default:delete t[r],t[uF(r)]=a}return t},{})}function t1(e,t,r){return r?nn.createElement(e.tag,$e($e({key:t},FS(e.attrs)),r),(e.children||[]).map(function(a,l){return t1(a,"".concat(t,"-").concat(e.tag,"-").concat(l))})):nn.createElement(e.tag,$e({key:t},FS(e.attrs)),(e.children||[]).map(function(a,l){return t1(a,"".concat(t,"-").concat(e.tag,"-").concat(l))}))}function zI(e){return If(e)[0]}function RI(e){return e?Array.isArray(e)?e:[e]:[]}var dF=`
.anticon {
  display: inline-flex;
  align-items: center;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`,fF=function(t){var r=L.useContext(kx),a=r.csp,l=r.prefixCls,d=dF;l&&(d=d.replace(/anticon/g,l)),L.useEffect(function(){var f=t.current,u=Eg(f);bs(d,"@ant-design-icons",{prepend:!0,csp:a,attachTo:u})},[])},pF=["icon","className","onClick","style","primaryColor","secondaryColor"],Yd={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function mF(e){var t=e.primaryColor,r=e.secondaryColor;Yd.primaryColor=t,Yd.secondaryColor=r||zI(t),Yd.calculated=!!r}function gF(){return $e({},Yd)}var sh=function(t){var r=t.icon,a=t.className,l=t.onClick,d=t.style,f=t.primaryColor,u=t.secondaryColor,S=xn(t,pF),T=L.useRef(),M=Yd;if(f&&(M={primaryColor:f,secondaryColor:u||zI(f)}),fF(T),hF(DS(r),"icon should be icon definiton, but got ".concat(r)),!DS(r))return null;var A=r;return A&&typeof A.icon=="function"&&(A=$e($e({},A),{},{icon:A.icon(M.primaryColor,M.secondaryColor)})),t1(A.icon,"svg-".concat(A.name),$e($e({className:a,onClick:l,style:d,"data-icon":A.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},S),{},{ref:T}))};sh.displayName="IconReact";sh.getTwoToneColors=gF;sh.setTwoToneColors=mF;function LI(e){var t=RI(e),r=nt(t,2),a=r[0],l=r[1];return sh.setTwoToneColors({primaryColor:a,secondaryColor:l})}function yF(){var e=sh.getTwoToneColors();return e.calculated?[e.primaryColor,e.secondaryColor]:e.primaryColor}var vF=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];LI(wg.primary);var Cc=L.forwardRef(function(e,t){var r=e.className,a=e.icon,l=e.spin,d=e.rotate,f=e.tabIndex,u=e.onClick,S=e.twoToneColor,T=xn(e,vF),M=L.useContext(kx),A=M.prefixCls,I=A===void 0?"anticon":A,G=M.rootClassName,N=Mr(G,I,De(De({},"".concat(I,"-").concat(a.name),!!a.name),"".concat(I,"-spin"),!!l||a.name==="loading"),r),q=f;q===void 0&&u&&(q=-1);var Z=d?{msTransform:"rotate(".concat(d,"deg)"),transform:"rotate(".concat(d,"deg)")}:void 0,V=RI(S),F=nt(V,2),H=F[0],Y=F[1];return L.createElement("span",br({role:"img","aria-label":a.name},T,{ref:t,tabIndex:q,onClick:u,className:N}),L.createElement(sh,{icon:a,primaryColor:H,secondaryColor:Y,style:Z}))});Cc.displayName="AntdIcon";Cc.getTwoToneColor=yF;Cc.setTwoToneColor=LI;function _F(e){return e&&nn.isValidElement(e)&&e.type===nn.Fragment}const xF=(e,t,r)=>nn.isValidElement(e)?nn.cloneElement(e,typeof r=="function"?r(e.props||{}):r):t;function by(e,t){return xF(e,e,t)}const bF=e=>{const[,,,,t]=ah();return t?`${e}-css-var`:""};var $t={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(t){var r=t.keyCode;if(t.altKey&&!t.ctrlKey||t.metaKey||r>=$t.F1&&r<=$t.F12)return!1;switch(r){case $t.ALT:case $t.CAPS_LOCK:case $t.CONTEXT_MENU:case $t.CTRL:case $t.DOWN:case $t.END:case $t.ESC:case $t.HOME:case $t.INSERT:case $t.LEFT:case $t.MAC_FF_META:case $t.META:case $t.NUMLOCK:case $t.NUM_CENTER:case $t.PAGE_DOWN:case $t.PAGE_UP:case $t.PAUSE:case $t.PRINT_SCREEN:case $t.RIGHT:case $t.SHIFT:case $t.UP:case $t.WIN_KEY:case $t.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(t){if(t>=$t.ZERO&&t<=$t.NINE||t>=$t.NUM_ZERO&&t<=$t.NUM_MULTIPLY||t>=$t.A&&t<=$t.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&t===0)return!0;switch(t){case $t.SPACE:case $t.QUESTION_MARK:case $t.NUM_PLUS:case $t.NUM_MINUS:case $t.NUM_PERIOD:case $t.NUM_DIVISION:case $t.SEMICOLON:case $t.DASH:case $t.EQUALS:case $t.COMMA:case $t.PERIOD:case $t.SLASH:case $t.APOSTROPHE:case $t.SINGLE_QUOTE:case $t.OPEN_SQUARE_BRACKET:case $t.BACKSLASH:case $t.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}};const DI=nn.createContext(void 0),du=100,FI={Modal:du,Drawer:du,Popover:du,Popconfirm:du,Tooltip:du,Tour:du},wF={SelectLike:50,Dropdown:50,DatePicker:50,Menu:50,ImagePreview:1};function SF(e){return e in FI}function OI(e,t){const[,r]=ah(),a=nn.useContext(DI),l=SF(e);let d;if(t!==void 0)d=[t,t];else{let f=a??0;l?f+=(a?0:r.zIndexPopupBase)+FI[e]:f+=wF[e],d=[a===void 0?t:f,f]}return d}function ka(){ka=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,l=Object.defineProperty||function(ke,Se,ge){ke[Se]=ge.value},d=typeof Symbol=="function"?Symbol:{},f=d.iterator||"@@iterator",u=d.asyncIterator||"@@asyncIterator",S=d.toStringTag||"@@toStringTag";function T(ke,Se,ge){return Object.defineProperty(ke,Se,{value:ge,enumerable:!0,configurable:!0,writable:!0}),ke[Se]}try{T({},"")}catch{T=function(ge,Fe,Be){return ge[Fe]=Be}}function M(ke,Se,ge,Fe){var Be=Se&&Se.prototype instanceof V?Se:V,Ve=Object.create(Be.prototype),Ze=new Ie(Fe||[]);return l(Ve,"_invoke",{value:Pe(ke,ge,Ze)}),Ve}function A(ke,Se,ge){try{return{type:"normal",arg:ke.call(Se,ge)}}catch(Fe){return{type:"throw",arg:Fe}}}t.wrap=M;var I="suspendedStart",G="suspendedYield",N="executing",q="completed",Z={};function V(){}function F(){}function H(){}var Y={};T(Y,f,function(){return this});var ne=Object.getPrototypeOf,fe=ne&&ne(ne(Ke([])));fe&&fe!==r&&a.call(fe,f)&&(Y=fe);var ie=H.prototype=V.prototype=Object.create(Y);function _e(ke){["next","throw","return"].forEach(function(Se){T(ke,Se,function(ge){return this._invoke(Se,ge)})})}function be(ke,Se){function ge(Be,Ve,Ze,gt){var st=A(ke[Be],ke,Ve);if(st.type!=="throw"){var St=st.arg,Et=St.value;return Et&&ir(Et)=="object"&&a.call(Et,"__await")?Se.resolve(Et.__await).then(function(Lt){ge("next",Lt,Ze,gt)},function(Lt){ge("throw",Lt,Ze,gt)}):Se.resolve(Et).then(function(Lt){St.value=Lt,Ze(St)},function(Lt){return ge("throw",Lt,Ze,gt)})}gt(st.arg)}var Fe;l(this,"_invoke",{value:function(Ve,Ze){function gt(){return new Se(function(st,St){ge(Ve,Ze,st,St)})}return Fe=Fe?Fe.then(gt,gt):gt()}})}function Pe(ke,Se,ge){var Fe=I;return function(Be,Ve){if(Fe===N)throw Error("Generator is already running");if(Fe===q){if(Be==="throw")throw Ve;return{value:e,done:!0}}for(ge.method=Be,ge.arg=Ve;;){var Ze=ge.delegate;if(Ze){var gt=ze(Ze,ge);if(gt){if(gt===Z)continue;return gt}}if(ge.method==="next")ge.sent=ge._sent=ge.arg;else if(ge.method==="throw"){if(Fe===I)throw Fe=q,ge.arg;ge.dispatchException(ge.arg)}else ge.method==="return"&&ge.abrupt("return",ge.arg);Fe=N;var st=A(ke,Se,ge);if(st.type==="normal"){if(Fe=ge.done?q:G,st.arg===Z)continue;return{value:st.arg,done:ge.done}}st.type==="throw"&&(Fe=q,ge.method="throw",ge.arg=st.arg)}}}function ze(ke,Se){var ge=Se.method,Fe=ke.iterator[ge];if(Fe===e)return Se.delegate=null,ge==="throw"&&ke.iterator.return&&(Se.method="return",Se.arg=e,ze(ke,Se),Se.method==="throw")||ge!=="return"&&(Se.method="throw",Se.arg=new TypeError("The iterator does not provide a '"+ge+"' method")),Z;var Be=A(Fe,ke.iterator,Se.arg);if(Be.type==="throw")return Se.method="throw",Se.arg=Be.arg,Se.delegate=null,Z;var Ve=Be.arg;return Ve?Ve.done?(Se[ke.resultName]=Ve.value,Se.next=ke.nextLoc,Se.method!=="return"&&(Se.method="next",Se.arg=e),Se.delegate=null,Z):Ve:(Se.method="throw",Se.arg=new TypeError("iterator result is not an object"),Se.delegate=null,Z)}function We(ke){var Se={tryLoc:ke[0]};1 in ke&&(Se.catchLoc=ke[1]),2 in ke&&(Se.finallyLoc=ke[2],Se.afterLoc=ke[3]),this.tryEntries.push(Se)}function Ce(ke){var Se=ke.completion||{};Se.type="normal",delete Se.arg,ke.completion=Se}function Ie(ke){this.tryEntries=[{tryLoc:"root"}],ke.forEach(We,this),this.reset(!0)}function Ke(ke){if(ke||ke===""){var Se=ke[f];if(Se)return Se.call(ke);if(typeof ke.next=="function")return ke;if(!isNaN(ke.length)){var ge=-1,Fe=function Be(){for(;++ge<ke.length;)if(a.call(ke,ge))return Be.value=ke[ge],Be.done=!1,Be;return Be.value=e,Be.done=!0,Be};return Fe.next=Fe}}throw new TypeError(ir(ke)+" is not iterable")}return F.prototype=H,l(ie,"constructor",{value:H,configurable:!0}),l(H,"constructor",{value:F,configurable:!0}),F.displayName=T(H,S,"GeneratorFunction"),t.isGeneratorFunction=function(ke){var Se=typeof ke=="function"&&ke.constructor;return!!Se&&(Se===F||(Se.displayName||Se.name)==="GeneratorFunction")},t.mark=function(ke){return Object.setPrototypeOf?Object.setPrototypeOf(ke,H):(ke.__proto__=H,T(ke,S,"GeneratorFunction")),ke.prototype=Object.create(ie),ke},t.awrap=function(ke){return{__await:ke}},_e(be.prototype),T(be.prototype,u,function(){return this}),t.AsyncIterator=be,t.async=function(ke,Se,ge,Fe,Be){Be===void 0&&(Be=Promise);var Ve=new be(M(ke,Se,ge,Fe),Be);return t.isGeneratorFunction(Se)?Ve:Ve.next().then(function(Ze){return Ze.done?Ze.value:Ve.next()})},_e(ie),T(ie,S,"Generator"),T(ie,f,function(){return this}),T(ie,"toString",function(){return"[object Generator]"}),t.keys=function(ke){var Se=Object(ke),ge=[];for(var Fe in Se)ge.push(Fe);return ge.reverse(),function Be(){for(;ge.length;){var Ve=ge.pop();if(Ve in Se)return Be.value=Ve,Be.done=!1,Be}return Be.done=!0,Be}},t.values=Ke,Ie.prototype={constructor:Ie,reset:function(Se){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(Ce),!Se)for(var ge in this)ge.charAt(0)==="t"&&a.call(this,ge)&&!isNaN(+ge.slice(1))&&(this[ge]=e)},stop:function(){this.done=!0;var Se=this.tryEntries[0].completion;if(Se.type==="throw")throw Se.arg;return this.rval},dispatchException:function(Se){if(this.done)throw Se;var ge=this;function Fe(St,Et){return Ze.type="throw",Ze.arg=Se,ge.next=St,Et&&(ge.method="next",ge.arg=e),!!Et}for(var Be=this.tryEntries.length-1;Be>=0;--Be){var Ve=this.tryEntries[Be],Ze=Ve.completion;if(Ve.tryLoc==="root")return Fe("end");if(Ve.tryLoc<=this.prev){var gt=a.call(Ve,"catchLoc"),st=a.call(Ve,"finallyLoc");if(gt&&st){if(this.prev<Ve.catchLoc)return Fe(Ve.catchLoc,!0);if(this.prev<Ve.finallyLoc)return Fe(Ve.finallyLoc)}else if(gt){if(this.prev<Ve.catchLoc)return Fe(Ve.catchLoc,!0)}else{if(!st)throw Error("try statement without catch or finally");if(this.prev<Ve.finallyLoc)return Fe(Ve.finallyLoc)}}}},abrupt:function(Se,ge){for(var Fe=this.tryEntries.length-1;Fe>=0;--Fe){var Be=this.tryEntries[Fe];if(Be.tryLoc<=this.prev&&a.call(Be,"finallyLoc")&&this.prev<Be.finallyLoc){var Ve=Be;break}}Ve&&(Se==="break"||Se==="continue")&&Ve.tryLoc<=ge&&ge<=Ve.finallyLoc&&(Ve=null);var Ze=Ve?Ve.completion:{};return Ze.type=Se,Ze.arg=ge,Ve?(this.method="next",this.next=Ve.finallyLoc,Z):this.complete(Ze)},complete:function(Se,ge){if(Se.type==="throw")throw Se.arg;return Se.type==="break"||Se.type==="continue"?this.next=Se.arg:Se.type==="return"?(this.rval=this.arg=Se.arg,this.method="return",this.next="end"):Se.type==="normal"&&ge&&(this.next=ge),Z},finish:function(Se){for(var ge=this.tryEntries.length-1;ge>=0;--ge){var Fe=this.tryEntries[ge];if(Fe.finallyLoc===Se)return this.complete(Fe.completion,Fe.afterLoc),Ce(Fe),Z}},catch:function(Se){for(var ge=this.tryEntries.length-1;ge>=0;--ge){var Fe=this.tryEntries[ge];if(Fe.tryLoc===Se){var Be=Fe.completion;if(Be.type==="throw"){var Ve=Be.arg;Ce(Fe)}return Ve}}throw Error("illegal catch attempt")},delegateYield:function(Se,ge,Fe){return this.delegate={iterator:Ke(Se),resultName:ge,nextLoc:Fe},this.method==="next"&&(this.arg=e),Z}},t}function OS(e,t,r,a,l,d,f){try{var u=e[d](f),S=u.value}catch(T){return void r(T)}u.done?t(S):Promise.resolve(S).then(a,l)}function Hf(e){return function(){var t=this,r=arguments;return new Promise(function(a,l){var d=e.apply(t,r);function f(S){OS(d,a,l,f,u,"next",S)}function u(S){OS(d,a,l,f,u,"throw",S)}f(void 0)})}}const g0=()=>({height:0,opacity:0}),BS=e=>{const{scrollHeight:t}=e;return{height:t,opacity:1}},CF=e=>({height:e?e.offsetHeight:0}),y0=(e,t)=>(t==null?void 0:t.deadline)===!0||t.propertyName==="height",EF=function(){return{motionName:`${arguments.length>0&&arguments[0]!==void 0?arguments[0]:Sg}-motion-collapse`,onAppearStart:g0,onEnterStart:g0,onAppearActive:BS,onEnterActive:BS,onLeaveStart:CF,onLeaveActive:g0,onAppearEnd:y0,onEnterEnd:y0,onLeaveEnd:y0,motionDeadline:500}},TF=(e,t,r)=>r!==void 0?r:`${e}-${t}`,BI=function(e){if(!e)return!1;if(e instanceof Element){if(e.offsetParent)return!0;if(e.getBBox){var t=e.getBBox(),r=t.width,a=t.height;if(r||a)return!0}if(e.getBoundingClientRect){var l=e.getBoundingClientRect(),d=l.width,f=l.height;if(d||f)return!0}}return!1},PF=L.createContext(null),IF=e=>{let{children:t}=e;return L.createElement(PF.Provider,{value:null},t)};var NI=L.createContext(null),NS=[];function kF(e,t){var r=L.useState(function(){if(!Uo())return null;var N=document.createElement("div");return N}),a=nt(r,1),l=a[0],d=L.useRef(!1),f=L.useContext(NI),u=L.useState(NS),S=nt(u,2),T=S[0],M=S[1],A=f||(d.current?void 0:function(N){M(function(q){var Z=[N].concat(Nt(q));return Z})});function I(){l.parentElement||document.body.appendChild(l),d.current=!0}function G(){var N;(N=l.parentElement)===null||N===void 0||N.removeChild(l),d.current=!1}return Ui(function(){return e?f?f(I):I():G(),G},[e]),Ui(function(){T.length&&(T.forEach(function(N){return N()}),M(NS))},[T]),[l,A]}function MF(e){var t="rc-scrollbar-measure-".concat(Math.random().toString(36).substring(7)),r=document.createElement("div");r.id=t;var a=r.style;a.position="absolute",a.left="0",a.top="0",a.width="100px",a.height="100px",a.overflow="scroll";var l,d;if(e){var f=getComputedStyle(e);a.scrollbarColor=f.scrollbarColor,a.scrollbarWidth=f.scrollbarWidth;var u=getComputedStyle(e,"::-webkit-scrollbar"),S=parseInt(u.width,10),T=parseInt(u.height,10);try{var M=S?"width: ".concat(u.width,";"):"",A=T?"height: ".concat(u.height,";"):"";bs(`
#`.concat(t,`::-webkit-scrollbar {
`).concat(M,`
`).concat(A,`
}`),t)}catch(N){console.error(N),l=S,d=T}}document.body.appendChild(r);var I=e&&l&&!isNaN(l)?l:r.offsetWidth-r.clientWidth,G=e&&d&&!isNaN(d)?d:r.offsetHeight-r.clientHeight;return document.body.removeChild(r),Cf(t),{width:I,height:G}}function AF(e){return typeof document>"u"||!e||!(e instanceof Element)?{width:0,height:0}:MF(e)}function zF(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth}var RF="rc-util-locker-".concat(Date.now()),$S=0;function LF(e){var t=!!e,r=L.useState(function(){return $S+=1,"".concat(RF,"_").concat($S)}),a=nt(r,1),l=a[0];Ui(function(){if(t){var d=AF(document.body).width,f=zF();bs(`
html body {
  overflow-y: hidden;
  `.concat(f?"width: calc(100% - ".concat(d,"px);"):"",`
}`),l)}else Cf(l);return function(){Cf(l)}},[t,l])}var DF=!1;function FF(e){return DF}var jS=function(t){return t===!1?!1:!Uo()||!t?null:typeof t=="string"?document.querySelector(t):typeof t=="function"?t():t},$I=L.forwardRef(function(e,t){var r=e.open,a=e.autoLock,l=e.getContainer;e.debug;var d=e.autoDestroy,f=d===void 0?!0:d,u=e.children,S=L.useState(r),T=nt(S,2),M=T[0],A=T[1],I=M||r;L.useEffect(function(){(f||r)&&A(r)},[r,f]);var G=L.useState(function(){return jS(l)}),N=nt(G,2),q=N[0],Z=N[1];L.useEffect(function(){var ze=jS(l);Z(ze??null)});var V=kF(I&&!q),F=nt(V,2),H=F[0],Y=F[1],ne=q??H;LF(a&&r&&Uo()&&(ne===H||ne===document.body));var fe=null;if(u&&fy(u)&&t){var ie=u;fe=ie.ref}var _e=dy(fe,t);if(!I||!Uo()||q===void 0)return null;var be=ne===!1||FF(),Pe=u;return t&&(Pe=L.cloneElement(u,{ref:_e})),L.createElement(NI.Provider,{value:Y},be?Pe:Nf.createPortal(Pe,ne))});function OF(){var e=$e({},Lg);return e.useId}var VS=0,US=OF();const BF=US?function(t){var r=US();return t||r}:function(t){var r=L.useState("ssr-id"),a=nt(r,2),l=a[0],d=a[1];return L.useEffect(function(){var f=VS;VS+=1,d("rc_unique_".concat(f))},[]),t||l};var lc="RC_FORM_INTERNAL_HOOKS",fn=function(){ro(!1,"Can not find FormContext. Please make sure you wrap Field under Form.")},Qu=L.createContext({getFieldValue:fn,getFieldsValue:fn,getFieldError:fn,getFieldWarning:fn,getFieldsError:fn,isFieldsTouched:fn,isFieldTouched:fn,isFieldValidating:fn,isFieldsValidating:fn,resetFields:fn,setFields:fn,setFieldValue:fn,setFieldsValue:fn,validateFields:fn,submit:fn,getInternalHooks:function(){return fn(),{dispatch:fn,initEntityValue:fn,registerField:fn,useSubscribe:fn,setInitialValues:fn,destroyForm:fn,setCallbacks:fn,registerWatch:fn,getFields:fn,setValidateMessages:fn,setPreserve:fn,getInitialValue:fn}}}),Tg=L.createContext(null);function r1(e){return e==null?[]:Array.isArray(e)?e:[e]}function NF(e){return e&&!!e._init}function n1(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var t=JSON.parse(JSON.stringify(this));return t.clone=this.clone,t}}}var i1=n1();function $F(e){try{return Function.toString.call(e).indexOf("[native code]")!==-1}catch{return typeof e=="function"}}function jF(e,t,r){if(bx())return Reflect.construct.apply(null,arguments);var a=[null];a.push.apply(a,t);var l=new(e.bind.apply(e,a));return r&&bf(l,r.prototype),l}function o1(e){var t=typeof Map=="function"?new Map:void 0;return o1=function(a){if(a===null||!$F(a))return a;if(typeof a!="function")throw new TypeError("Super expression must either be null or a function");if(t!==void 0){if(t.has(a))return t.get(a);t.set(a,l)}function l(){return jF(a,arguments,wf(this).constructor)}return l.prototype=Object.create(a.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),bf(l,a)},o1(e)}var VF=/%[sdj%]/g,UF=function(){};function a1(e){if(!e||!e.length)return null;var t={};return e.forEach(function(r){var a=r.field;t[a]=t[a]||[],t[a].push(r)}),t}function No(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];var l=0,d=r.length;if(typeof e=="function")return e.apply(null,r);if(typeof e=="string"){var f=e.replace(VF,function(u){if(u==="%%")return"%";if(l>=d)return u;switch(u){case"%s":return String(r[l++]);case"%d":return Number(r[l++]);case"%j":try{return JSON.stringify(r[l++])}catch{return"[Circular]"}break;default:return u}});return f}return e}function HF(e){return e==="string"||e==="url"||e==="hex"||e==="email"||e==="date"||e==="pattern"}function oi(e,t){return!!(e==null||t==="array"&&Array.isArray(e)&&!e.length||HF(t)&&typeof e=="string"&&!e)}function qF(e,t,r){var a=[],l=0,d=e.length;function f(u){a.push.apply(a,Nt(u||[])),l++,l===d&&r(a)}e.forEach(function(u){t(u,f)})}function HS(e,t,r){var a=0,l=e.length;function d(f){if(f&&f.length){r(f);return}var u=a;a=a+1,u<l?t(e[u],d):r([])}d([])}function WF(e){var t=[];return Object.keys(e).forEach(function(r){t.push.apply(t,Nt(e[r]||[]))}),t}var qS=function(e){Tl(r,e);var t=Pl(r);function r(a,l){var d;return Ti(this,r),d=t.call(this,"Async Validation Error"),De(gr(d),"errors",void 0),De(gr(d),"fields",void 0),d.errors=a,d.fields=l,d}return Pi(r)}(o1(Error));function GF(e,t,r,a,l){if(t.first){var d=new Promise(function(I,G){var N=function(V){return a(V),V.length?G(new qS(V,a1(V))):I(l)},q=WF(e);HS(q,r,N)});return d.catch(function(I){return I}),d}var f=t.firstFields===!0?Object.keys(e):t.firstFields||[],u=Object.keys(e),S=u.length,T=0,M=[],A=new Promise(function(I,G){var N=function(Z){if(M.push.apply(M,Z),T++,T===S)return a(M),M.length?G(new qS(M,a1(M))):I(l)};u.length||(a(M),I(l)),u.forEach(function(q){var Z=e[q];f.indexOf(q)!==-1?HS(Z,r,N):qF(Z,r,N)})});return A.catch(function(I){return I}),A}function ZF(e){return!!(e&&e.message!==void 0)}function KF(e,t){for(var r=e,a=0;a<t.length;a++){if(r==null)return r;r=r[t[a]]}return r}function WS(e,t){return function(r){var a;return e.fullFields?a=KF(t,e.fullFields):a=t[r.field||e.fullField],ZF(r)?(r.field=r.field||e.fullField,r.fieldValue=a,r):{message:typeof r=="function"?r():r,fieldValue:a,field:r.field||e.fullField}}}function GS(e,t){if(t){for(var r in t)if(t.hasOwnProperty(r)){var a=t[r];ir(a)==="object"&&ir(e[r])==="object"?e[r]=$e($e({},e[r]),a):e[r]=a}}return e}var fu="enum",XF=function(t,r,a,l,d){t[fu]=Array.isArray(t[fu])?t[fu]:[],t[fu].indexOf(r)===-1&&l.push(No(d.messages[fu],t.fullField,t[fu].join(", ")))},JF=function(t,r,a,l,d){if(t.pattern){if(t.pattern instanceof RegExp)t.pattern.lastIndex=0,t.pattern.test(r)||l.push(No(d.messages.pattern.mismatch,t.fullField,r,t.pattern));else if(typeof t.pattern=="string"){var f=new RegExp(t.pattern);f.test(r)||l.push(No(d.messages.pattern.mismatch,t.fullField,r,t.pattern))}}},YF=function(t,r,a,l,d){var f=typeof t.len=="number",u=typeof t.min=="number",S=typeof t.max=="number",T=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,M=r,A=null,I=typeof r=="number",G=typeof r=="string",N=Array.isArray(r);if(I?A="number":G?A="string":N&&(A="array"),!A)return!1;N&&(M=r.length),G&&(M=r.replace(T,"_").length),f?M!==t.len&&l.push(No(d.messages[A].len,t.fullField,t.len)):u&&!S&&M<t.min?l.push(No(d.messages[A].min,t.fullField,t.min)):S&&!u&&M>t.max?l.push(No(d.messages[A].max,t.fullField,t.max)):u&&S&&(M<t.min||M>t.max)&&l.push(No(d.messages[A].range,t.fullField,t.min,t.max))},jI=function(t,r,a,l,d,f){t.required&&(!a.hasOwnProperty(t.field)||oi(r,f||t.type))&&l.push(No(d.messages.required,t.fullField))},bm;const QF=function(){if(bm)return bm;var e="[a-fA-F\\d:]",t=function(fe){return fe&&fe.includeBoundaries?"(?:(?<=\\s|^)(?=".concat(e,")|(?<=").concat(e,")(?=\\s|$))"):""},r="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",a="[a-fA-F\\d]{1,4}",l=["(?:".concat(a,":){7}(?:").concat(a,"|:)"),"(?:".concat(a,":){6}(?:").concat(r,"|:").concat(a,"|:)"),"(?:".concat(a,":){5}(?::").concat(r,"|(?::").concat(a,"){1,2}|:)"),"(?:".concat(a,":){4}(?:(?::").concat(a,"){0,1}:").concat(r,"|(?::").concat(a,"){1,3}|:)"),"(?:".concat(a,":){3}(?:(?::").concat(a,"){0,2}:").concat(r,"|(?::").concat(a,"){1,4}|:)"),"(?:".concat(a,":){2}(?:(?::").concat(a,"){0,3}:").concat(r,"|(?::").concat(a,"){1,5}|:)"),"(?:".concat(a,":){1}(?:(?::").concat(a,"){0,4}:").concat(r,"|(?::").concat(a,"){1,6}|:)"),"(?::(?:(?::".concat(a,"){0,5}:").concat(r,"|(?::").concat(a,"){1,7}|:))")],d="(?:%[0-9a-zA-Z]{1,})?",f="(?:".concat(l.join("|"),")").concat(d),u=new RegExp("(?:^".concat(r,"$)|(?:^").concat(f,"$)")),S=new RegExp("^".concat(r,"$")),T=new RegExp("^".concat(f,"$")),M=function(fe){return fe&&fe.exact?u:new RegExp("(?:".concat(t(fe)).concat(r).concat(t(fe),")|(?:").concat(t(fe)).concat(f).concat(t(fe),")"),"g")};M.v4=function(ne){return ne&&ne.exact?S:new RegExp("".concat(t(ne)).concat(r).concat(t(ne)),"g")},M.v6=function(ne){return ne&&ne.exact?T:new RegExp("".concat(t(ne)).concat(f).concat(t(ne)),"g")};var A="(?:(?:[a-z]+:)?//)",I="(?:\\S+(?::\\S*)?@)?",G=M.v4().source,N=M.v6().source,q="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",Z="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",V="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",F="(?::\\d{2,5})?",H='(?:[/?#][^\\s"]*)?',Y="(?:".concat(A,"|www\\.)").concat(I,"(?:localhost|").concat(G,"|").concat(N,"|").concat(q).concat(Z).concat(V,")").concat(F).concat(H);return bm=new RegExp("(?:^".concat(Y,"$)"),"i"),bm};var ZS={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},Bd={integer:function(t){return Bd.number(t)&&parseInt(t,10)===t},float:function(t){return Bd.number(t)&&!Bd.integer(t)},array:function(t){return Array.isArray(t)},regexp:function(t){if(t instanceof RegExp)return!0;try{return!!new RegExp(t)}catch{return!1}},date:function(t){return typeof t.getTime=="function"&&typeof t.getMonth=="function"&&typeof t.getYear=="function"&&!isNaN(t.getTime())},number:function(t){return isNaN(t)?!1:typeof t=="number"},object:function(t){return ir(t)==="object"&&!Bd.array(t)},method:function(t){return typeof t=="function"},email:function(t){return typeof t=="string"&&t.length<=320&&!!t.match(ZS.email)},url:function(t){return typeof t=="string"&&t.length<=2048&&!!t.match(QF())},hex:function(t){return typeof t=="string"&&!!t.match(ZS.hex)}},eO=function(t,r,a,l,d){if(t.required&&r===void 0){jI(t,r,a,l,d);return}var f=["integer","float","array","regexp","object","method","email","number","date","url","hex"],u=t.type;f.indexOf(u)>-1?Bd[u](r)||l.push(No(d.messages.types[u],t.fullField,t.type)):u&&ir(r)!==t.type&&l.push(No(d.messages.types[u],t.fullField,t.type))},tO=function(t,r,a,l,d){(/^\s+$/.test(r)||r==="")&&l.push(No(d.messages.whitespace,t.fullField))};const kr={required:jI,whitespace:tO,type:eO,range:YF,enum:XF,pattern:JF};var rO=function(t,r,a,l,d){var f=[],u=t.required||!t.required&&l.hasOwnProperty(t.field);if(u){if(oi(r)&&!t.required)return a();kr.required(t,r,l,f,d)}a(f)},nO=function(t,r,a,l,d){var f=[],u=t.required||!t.required&&l.hasOwnProperty(t.field);if(u){if(r==null&&!t.required)return a();kr.required(t,r,l,f,d,"array"),r!=null&&(kr.type(t,r,l,f,d),kr.range(t,r,l,f,d))}a(f)},iO=function(t,r,a,l,d){var f=[],u=t.required||!t.required&&l.hasOwnProperty(t.field);if(u){if(oi(r)&&!t.required)return a();kr.required(t,r,l,f,d),r!==void 0&&kr.type(t,r,l,f,d)}a(f)},oO=function(t,r,a,l,d){var f=[],u=t.required||!t.required&&l.hasOwnProperty(t.field);if(u){if(oi(r,"date")&&!t.required)return a();if(kr.required(t,r,l,f,d),!oi(r,"date")){var S;r instanceof Date?S=r:S=new Date(r),kr.type(t,S,l,f,d),S&&kr.range(t,S.getTime(),l,f,d)}}a(f)},aO="enum",sO=function(t,r,a,l,d){var f=[],u=t.required||!t.required&&l.hasOwnProperty(t.field);if(u){if(oi(r)&&!t.required)return a();kr.required(t,r,l,f,d),r!==void 0&&kr[aO](t,r,l,f,d)}a(f)},lO=function(t,r,a,l,d){var f=[],u=t.required||!t.required&&l.hasOwnProperty(t.field);if(u){if(oi(r)&&!t.required)return a();kr.required(t,r,l,f,d),r!==void 0&&(kr.type(t,r,l,f,d),kr.range(t,r,l,f,d))}a(f)},cO=function(t,r,a,l,d){var f=[],u=t.required||!t.required&&l.hasOwnProperty(t.field);if(u){if(oi(r)&&!t.required)return a();kr.required(t,r,l,f,d),r!==void 0&&(kr.type(t,r,l,f,d),kr.range(t,r,l,f,d))}a(f)},uO=function(t,r,a,l,d){var f=[],u=t.required||!t.required&&l.hasOwnProperty(t.field);if(u){if(oi(r)&&!t.required)return a();kr.required(t,r,l,f,d),r!==void 0&&kr.type(t,r,l,f,d)}a(f)},hO=function(t,r,a,l,d){var f=[],u=t.required||!t.required&&l.hasOwnProperty(t.field);if(u){if(r===""&&(r=void 0),oi(r)&&!t.required)return a();kr.required(t,r,l,f,d),r!==void 0&&(kr.type(t,r,l,f,d),kr.range(t,r,l,f,d))}a(f)},dO=function(t,r,a,l,d){var f=[],u=t.required||!t.required&&l.hasOwnProperty(t.field);if(u){if(oi(r)&&!t.required)return a();kr.required(t,r,l,f,d),r!==void 0&&kr.type(t,r,l,f,d)}a(f)},fO=function(t,r,a,l,d){var f=[],u=t.required||!t.required&&l.hasOwnProperty(t.field);if(u){if(oi(r,"string")&&!t.required)return a();kr.required(t,r,l,f,d),oi(r,"string")||kr.pattern(t,r,l,f,d)}a(f)},pO=function(t,r,a,l,d){var f=[],u=t.required||!t.required&&l.hasOwnProperty(t.field);if(u){if(oi(r)&&!t.required)return a();kr.required(t,r,l,f,d),oi(r)||kr.type(t,r,l,f,d)}a(f)},mO=function(t,r,a,l,d){var f=[],u=Array.isArray(r)?"array":ir(r);kr.required(t,r,l,f,d,u),a(f)},gO=function(t,r,a,l,d){var f=[],u=t.required||!t.required&&l.hasOwnProperty(t.field);if(u){if(oi(r,"string")&&!t.required)return a();kr.required(t,r,l,f,d,"string"),oi(r,"string")||(kr.type(t,r,l,f,d),kr.range(t,r,l,f,d),kr.pattern(t,r,l,f,d),t.whitespace===!0&&kr.whitespace(t,r,l,f,d))}a(f)},v0=function(t,r,a,l,d){var f=t.type,u=[],S=t.required||!t.required&&l.hasOwnProperty(t.field);if(S){if(oi(r,f)&&!t.required)return a();kr.required(t,r,l,u,d,f),oi(r,f)||kr.type(t,r,l,u,d)}a(u)};const Qd={string:gO,method:uO,number:hO,boolean:iO,regexp:pO,integer:cO,float:lO,array:nO,object:dO,enum:sO,pattern:fO,date:oO,url:v0,hex:v0,email:v0,required:mO,any:rO};var qf=function(){function e(t){Ti(this,e),De(this,"rules",null),De(this,"_messages",i1),this.define(t)}return Pi(e,[{key:"define",value:function(r){var a=this;if(!r)throw new Error("Cannot configure a schema with no rules");if(ir(r)!=="object"||Array.isArray(r))throw new Error("Rules must be an object");this.rules={},Object.keys(r).forEach(function(l){var d=r[l];a.rules[l]=Array.isArray(d)?d:[d]})}},{key:"messages",value:function(r){return r&&(this._messages=GS(n1(),r)),this._messages}},{key:"validate",value:function(r){var a=this,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){},f=r,u=l,S=d;if(typeof u=="function"&&(S=u,u={}),!this.rules||Object.keys(this.rules).length===0)return S&&S(null,f),Promise.resolve(f);function T(N){var q=[],Z={};function V(H){if(Array.isArray(H)){var Y;q=(Y=q).concat.apply(Y,Nt(H))}else q.push(H)}for(var F=0;F<N.length;F++)V(N[F]);q.length?(Z=a1(q),S(q,Z)):S(null,f)}if(u.messages){var M=this.messages();M===i1&&(M=n1()),GS(M,u.messages),u.messages=M}else u.messages=this.messages();var A={},I=u.keys||Object.keys(this.rules);I.forEach(function(N){var q=a.rules[N],Z=f[N];q.forEach(function(V){var F=V;typeof F.transform=="function"&&(f===r&&(f=$e({},f)),Z=f[N]=F.transform(Z),Z!=null&&(F.type=F.type||(Array.isArray(Z)?"array":ir(Z)))),typeof F=="function"?F={validator:F}:F=$e({},F),F.validator=a.getValidationMethod(F),F.validator&&(F.field=N,F.fullField=F.fullField||N,F.type=a.getType(F),A[N]=A[N]||[],A[N].push({rule:F,value:Z,source:f,field:N}))})});var G={};return GF(A,u,function(N,q){var Z=N.rule,V=(Z.type==="object"||Z.type==="array")&&(ir(Z.fields)==="object"||ir(Z.defaultField)==="object");V=V&&(Z.required||!Z.required&&N.value),Z.field=N.field;function F(ie,_e){return $e($e({},_e),{},{fullField:"".concat(Z.fullField,".").concat(ie),fullFields:Z.fullFields?[].concat(Nt(Z.fullFields),[ie]):[ie]})}function H(){var ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],_e=Array.isArray(ie)?ie:[ie];!u.suppressWarning&&_e.length&&e.warning("async-validator:",_e),_e.length&&Z.message!==void 0&&(_e=[].concat(Z.message));var be=_e.map(WS(Z,f));if(u.first&&be.length)return G[Z.field]=1,q(be);if(!V)q(be);else{if(Z.required&&!N.value)return Z.message!==void 0?be=[].concat(Z.message).map(WS(Z,f)):u.error&&(be=[u.error(Z,No(u.messages.required,Z.field))]),q(be);var Pe={};Z.defaultField&&Object.keys(N.value).map(function(Ce){Pe[Ce]=Z.defaultField}),Pe=$e($e({},Pe),N.rule.fields);var ze={};Object.keys(Pe).forEach(function(Ce){var Ie=Pe[Ce],Ke=Array.isArray(Ie)?Ie:[Ie];ze[Ce]=Ke.map(F.bind(null,Ce))});var We=new e(ze);We.messages(u.messages),N.rule.options&&(N.rule.options.messages=u.messages,N.rule.options.error=u.error),We.validate(N.value,N.rule.options||u,function(Ce){var Ie=[];be&&be.length&&Ie.push.apply(Ie,Nt(be)),Ce&&Ce.length&&Ie.push.apply(Ie,Nt(Ce)),q(Ie.length?Ie:null)})}}var Y;if(Z.asyncValidator)Y=Z.asyncValidator(Z,N.value,H,N.source,u);else if(Z.validator){try{Y=Z.validator(Z,N.value,H,N.source,u)}catch(ie){var ne,fe;(ne=(fe=console).error)===null||ne===void 0||ne.call(fe,ie),u.suppressValidatorError||setTimeout(function(){throw ie},0),H(ie.message)}Y===!0?H():Y===!1?H(typeof Z.message=="function"?Z.message(Z.fullField||Z.field):Z.message||"".concat(Z.fullField||Z.field," fails")):Y instanceof Array?H(Y):Y instanceof Error&&H(Y.message)}Y&&Y.then&&Y.then(function(){return H()},function(ie){return H(ie)})},function(N){T(N)},f)}},{key:"getType",value:function(r){if(r.type===void 0&&r.pattern instanceof RegExp&&(r.type="pattern"),typeof r.validator!="function"&&r.type&&!Qd.hasOwnProperty(r.type))throw new Error(No("Unknown rule type %s",r.type));return r.type||"string"}},{key:"getValidationMethod",value:function(r){if(typeof r.validator=="function")return r.validator;var a=Object.keys(r),l=a.indexOf("message");return l!==-1&&a.splice(l,1),a.length===1&&a[0]==="required"?Qd.required:Qd[this.getType(r)]||void 0}}]),e}();De(qf,"register",function(t,r){if(typeof r!="function")throw new Error("Cannot register a validator by type, validator is not a function");Qd[t]=r});De(qf,"warning",UF);De(qf,"messages",i1);De(qf,"validators",Qd);var Do="'${name}' is not a valid ${type}",VI={default:"Validation error on field '${name}'",required:"'${name}' is required",enum:"'${name}' must be one of [${enum}]",whitespace:"'${name}' cannot be empty",date:{format:"'${name}' is invalid for format date",parse:"'${name}' could not be parsed as date",invalid:"'${name}' is invalid date"},types:{string:Do,method:Do,array:Do,object:Do,number:Do,date:Do,boolean:Do,integer:Do,float:Do,regexp:Do,email:Do,url:Do,hex:Do},string:{len:"'${name}' must be exactly ${len} characters",min:"'${name}' must be at least ${min} characters",max:"'${name}' cannot be longer than ${max} characters",range:"'${name}' must be between ${min} and ${max} characters"},number:{len:"'${name}' must equal ${len}",min:"'${name}' cannot be less than ${min}",max:"'${name}' cannot be greater than ${max}",range:"'${name}' must be between ${min} and ${max}"},array:{len:"'${name}' must be exactly ${len} in length",min:"'${name}' cannot be less than ${min} in length",max:"'${name}' cannot be greater than ${max} in length",range:"'${name}' must be between ${min} and ${max} in length"},pattern:{mismatch:"'${name}' does not match pattern ${pattern}"}},KS=qf;function yO(e,t){return e.replace(/\$\{\w+\}/g,function(r){var a=r.slice(2,-1);return t[a]})}var XS="CODE_LOGIC_ERROR";function s1(e,t,r,a,l){return l1.apply(this,arguments)}function l1(){return l1=Hf(ka().mark(function e(t,r,a,l,d){var f,u,S,T,M,A,I,G,N;return ka().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return f=$e({},a),delete f.ruleIndex,KS.warning=function(){},f.validator&&(u=f.validator,f.validator=function(){try{return u.apply(void 0,arguments)}catch(V){return console.error(V),Promise.reject(XS)}}),S=null,f&&f.type==="array"&&f.defaultField&&(S=f.defaultField,delete f.defaultField),T=new KS(De({},t,[f])),M=zu(VI,l.validateMessages),T.messages(M),A=[],Z.prev=10,Z.next=13,Promise.resolve(T.validate(De({},t,r),$e({},l)));case 13:Z.next=18;break;case 15:Z.prev=15,Z.t0=Z.catch(10),Z.t0.errors&&(A=Z.t0.errors.map(function(V,F){var H=V.message,Y=H===XS?M.default:H;return L.isValidElement(Y)?L.cloneElement(Y,{key:"error_".concat(F)}):Y}));case 18:if(!(!A.length&&S)){Z.next=23;break}return Z.next=21,Promise.all(r.map(function(V,F){return s1("".concat(t,".").concat(F),V,S,l,d)}));case 21:return I=Z.sent,Z.abrupt("return",I.reduce(function(V,F){return[].concat(Nt(V),Nt(F))},[]));case 23:return G=$e($e({},a),{},{name:t,enum:(a.enum||[]).join(", ")},d),N=A.map(function(V){return typeof V=="string"?yO(V,G):V}),Z.abrupt("return",N);case 26:case"end":return Z.stop()}},e,null,[[10,15]])})),l1.apply(this,arguments)}function vO(e,t,r,a,l,d){var f=e.join("."),u=r.map(function(M,A){var I=M.validator,G=$e($e({},M),{},{ruleIndex:A});return I&&(G.validator=function(N,q,Z){var V=!1,F=function(){for(var ne=arguments.length,fe=new Array(ne),ie=0;ie<ne;ie++)fe[ie]=arguments[ie];Promise.resolve().then(function(){ro(!V,"Your validator function has already return a promise. `callback` will be ignored."),V||Z.apply(void 0,fe)})},H=I(N,q,F);V=H&&typeof H.then=="function"&&typeof H.catch=="function",ro(V,"`callback` is deprecated. Please return a promise instead."),V&&H.then(function(){Z()}).catch(function(Y){Z(Y||" ")})}),G}).sort(function(M,A){var I=M.warningOnly,G=M.ruleIndex,N=A.warningOnly,q=A.ruleIndex;return!!I==!!N?G-q:I?1:-1}),S;if(l===!0)S=new Promise(function(){var M=Hf(ka().mark(function A(I,G){var N,q,Z;return ka().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:N=0;case 1:if(!(N<u.length)){F.next=12;break}return q=u[N],F.next=5,s1(f,t,q,a,d);case 5:if(Z=F.sent,!Z.length){F.next=9;break}return G([{errors:Z,rule:q}]),F.abrupt("return");case 9:N+=1,F.next=1;break;case 12:I([]);case 13:case"end":return F.stop()}},A)}));return function(A,I){return M.apply(this,arguments)}}());else{var T=u.map(function(M){return s1(f,t,M,a,d).then(function(A){return{errors:A,rule:M}})});S=(l?xO(T):_O(T)).then(function(M){return Promise.reject(M)})}return S.catch(function(M){return M}),S}function _O(e){return c1.apply(this,arguments)}function c1(){return c1=Hf(ka().mark(function e(t){return ka().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",Promise.all(t).then(function(l){var d,f=(d=[]).concat.apply(d,Nt(l));return f}));case 1:case"end":return a.stop()}},e)})),c1.apply(this,arguments)}function xO(e){return u1.apply(this,arguments)}function u1(){return u1=Hf(ka().mark(function e(t){var r;return ka().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return r=0,l.abrupt("return",new Promise(function(d){t.forEach(function(f){f.then(function(u){u.errors.length&&d([u]),r+=1,r===t.length&&d([])})})}));case 2:case"end":return l.stop()}},e)})),u1.apply(this,arguments)}function Hn(e){return r1(e)}function JS(e,t){var r={};return t.forEach(function(a){var l=Ga(e,a);r=ba(r,a,l)}),r}function ju(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return e&&e.some(function(a){return UI(t,a,r)})}function UI(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return!e||!t||!r&&e.length!==t.length?!1:t.every(function(a,l){return e[l]===a})}function bO(e,t){if(e===t)return!0;if(!e&&t||e&&!t||!e||!t||ir(e)!=="object"||ir(t)!=="object")return!1;var r=Object.keys(e),a=Object.keys(t),l=new Set([].concat(r,a));return Nt(l).every(function(d){var f=e[d],u=t[d];return typeof f=="function"&&typeof u=="function"?!0:f===u})}function wO(e){var t=arguments.length<=1?void 0:arguments[1];return t&&t.target&&ir(t.target)==="object"&&e in t.target?t.target[e]:t}function YS(e,t,r){var a=e.length;if(t<0||t>=a||r<0||r>=a)return e;var l=e[t],d=t-r;return d>0?[].concat(Nt(e.slice(0,r)),[l],Nt(e.slice(r,t)),Nt(e.slice(t+1,a))):d<0?[].concat(Nt(e.slice(0,t)),Nt(e.slice(t+1,r+1)),[l],Nt(e.slice(r+1,a))):e}var SO=["name"],Qo=[];function QS(e,t,r,a,l,d){return typeof e=="function"?e(t,r,"source"in d?{source:d.source}:{}):a!==l}var zx=function(e){Tl(r,e);var t=Pl(r);function r(a){var l;if(Ti(this,r),l=t.call(this,a),De(gr(l),"state",{resetCount:0}),De(gr(l),"cancelRegisterFunc",null),De(gr(l),"mounted",!1),De(gr(l),"touched",!1),De(gr(l),"dirty",!1),De(gr(l),"validatePromise",void 0),De(gr(l),"prevValidating",void 0),De(gr(l),"errors",Qo),De(gr(l),"warnings",Qo),De(gr(l),"cancelRegister",function(){var S=l.props,T=S.preserve,M=S.isListField,A=S.name;l.cancelRegisterFunc&&l.cancelRegisterFunc(M,T,Hn(A)),l.cancelRegisterFunc=null}),De(gr(l),"getNamePath",function(){var S=l.props,T=S.name,M=S.fieldContext,A=M.prefixName,I=A===void 0?[]:A;return T!==void 0?[].concat(Nt(I),Nt(T)):[]}),De(gr(l),"getRules",function(){var S=l.props,T=S.rules,M=T===void 0?[]:T,A=S.fieldContext;return M.map(function(I){return typeof I=="function"?I(A):I})}),De(gr(l),"refresh",function(){l.mounted&&l.setState(function(S){var T=S.resetCount;return{resetCount:T+1}})}),De(gr(l),"metaCache",null),De(gr(l),"triggerMetaEvent",function(S){var T=l.props.onMetaChange;if(T){var M=$e($e({},l.getMeta()),{},{destroy:S});Ef(l.metaCache,M)||T(M),l.metaCache=M}else l.metaCache=null}),De(gr(l),"onStoreChange",function(S,T,M){var A=l.props,I=A.shouldUpdate,G=A.dependencies,N=G===void 0?[]:G,q=A.onReset,Z=M.store,V=l.getNamePath(),F=l.getValue(S),H=l.getValue(Z),Y=T&&ju(T,V);switch(M.type==="valueUpdate"&&M.source==="external"&&!Ef(F,H)&&(l.touched=!0,l.dirty=!0,l.validatePromise=null,l.errors=Qo,l.warnings=Qo,l.triggerMetaEvent()),M.type){case"reset":if(!T||Y){l.touched=!1,l.dirty=!1,l.validatePromise=void 0,l.errors=Qo,l.warnings=Qo,l.triggerMetaEvent(),q==null||q(),l.refresh();return}break;case"remove":{if(I){l.reRender();return}break}case"setField":{var ne=M.data;if(Y){"touched"in ne&&(l.touched=ne.touched),"validating"in ne&&!("originRCField"in ne)&&(l.validatePromise=ne.validating?Promise.resolve([]):null),"errors"in ne&&(l.errors=ne.errors||Qo),"warnings"in ne&&(l.warnings=ne.warnings||Qo),l.dirty=!0,l.triggerMetaEvent(),l.reRender();return}else if("value"in ne&&ju(T,V,!0)){l.reRender();return}if(I&&!V.length&&QS(I,S,Z,F,H,M)){l.reRender();return}break}case"dependenciesUpdate":{var fe=N.map(Hn);if(fe.some(function(ie){return ju(M.relatedFields,ie)})){l.reRender();return}break}default:if(Y||(!N.length||V.length||I)&&QS(I,S,Z,F,H,M)){l.reRender();return}break}I===!0&&l.reRender()}),De(gr(l),"validateRules",function(S){var T=l.getNamePath(),M=l.getValue(),A=S||{},I=A.triggerName,G=A.validateOnly,N=G===void 0?!1:G,q=Promise.resolve().then(Hf(ka().mark(function Z(){var V,F,H,Y,ne,fe,ie;return ka().wrap(function(be){for(;;)switch(be.prev=be.next){case 0:if(l.mounted){be.next=2;break}return be.abrupt("return",[]);case 2:if(V=l.props,F=V.validateFirst,H=F===void 0?!1:F,Y=V.messageVariables,ne=V.validateDebounce,fe=l.getRules(),I&&(fe=fe.filter(function(Pe){return Pe}).filter(function(Pe){var ze=Pe.validateTrigger;if(!ze)return!0;var We=r1(ze);return We.includes(I)})),!(ne&&I)){be.next=10;break}return be.next=8,new Promise(function(Pe){setTimeout(Pe,ne)});case 8:if(l.validatePromise===q){be.next=10;break}return be.abrupt("return",[]);case 10:return ie=vO(T,M,fe,S,H,Y),ie.catch(function(Pe){return Pe}).then(function(){var Pe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Qo;if(l.validatePromise===q){var ze;l.validatePromise=null;var We=[],Ce=[];(ze=Pe.forEach)===null||ze===void 0||ze.call(Pe,function(Ie){var Ke=Ie.rule.warningOnly,ke=Ie.errors,Se=ke===void 0?Qo:ke;Ke?Ce.push.apply(Ce,Nt(Se)):We.push.apply(We,Nt(Se))}),l.errors=We,l.warnings=Ce,l.triggerMetaEvent(),l.reRender()}}),be.abrupt("return",ie);case 13:case"end":return be.stop()}},Z)})));return N||(l.validatePromise=q,l.dirty=!0,l.errors=Qo,l.warnings=Qo,l.triggerMetaEvent(),l.reRender()),q}),De(gr(l),"isFieldValidating",function(){return!!l.validatePromise}),De(gr(l),"isFieldTouched",function(){return l.touched}),De(gr(l),"isFieldDirty",function(){if(l.dirty||l.props.initialValue!==void 0)return!0;var S=l.props.fieldContext,T=S.getInternalHooks(lc),M=T.getInitialValue;return M(l.getNamePath())!==void 0}),De(gr(l),"getErrors",function(){return l.errors}),De(gr(l),"getWarnings",function(){return l.warnings}),De(gr(l),"isListField",function(){return l.props.isListField}),De(gr(l),"isList",function(){return l.props.isList}),De(gr(l),"isPreserve",function(){return l.props.preserve}),De(gr(l),"getMeta",function(){l.prevValidating=l.isFieldValidating();var S={touched:l.isFieldTouched(),validating:l.prevValidating,errors:l.errors,warnings:l.warnings,name:l.getNamePath(),validated:l.validatePromise===null};return S}),De(gr(l),"getOnlyChild",function(S){if(typeof S=="function"){var T=l.getMeta();return $e($e({},l.getOnlyChild(S(l.getControlled(),T,l.props.fieldContext))),{},{isFunction:!0})}var M=xc(S);return M.length!==1||!L.isValidElement(M[0])?{child:M,isFunction:!1}:{child:M[0],isFunction:!1}}),De(gr(l),"getValue",function(S){var T=l.props.fieldContext.getFieldsValue,M=l.getNamePath();return Ga(S||T(!0),M)}),De(gr(l),"getControlled",function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},T=l.props,M=T.name,A=T.trigger,I=T.validateTrigger,G=T.getValueFromEvent,N=T.normalize,q=T.valuePropName,Z=T.getValueProps,V=T.fieldContext,F=I!==void 0?I:V.validateTrigger,H=l.getNamePath(),Y=V.getInternalHooks,ne=V.getFieldsValue,fe=Y(lc),ie=fe.dispatch,_e=l.getValue(),be=Z||function(Ie){return De({},q,Ie)},Pe=S[A],ze=M!==void 0?be(_e):{},We=$e($e({},S),ze);We[A]=function(){l.touched=!0,l.dirty=!0,l.triggerMetaEvent();for(var Ie,Ke=arguments.length,ke=new Array(Ke),Se=0;Se<Ke;Se++)ke[Se]=arguments[Se];G?Ie=G.apply(void 0,ke):Ie=wO.apply(void 0,[q].concat(ke)),N&&(Ie=N(Ie,_e,ne(!0))),ie({type:"updateValue",namePath:H,value:Ie}),Pe&&Pe.apply(void 0,ke)};var Ce=r1(F||[]);return Ce.forEach(function(Ie){var Ke=We[Ie];We[Ie]=function(){Ke&&Ke.apply(void 0,arguments);var ke=l.props.rules;ke&&ke.length&&ie({type:"validateField",namePath:H,triggerName:Ie})}}),We}),a.fieldContext){var d=a.fieldContext.getInternalHooks,f=d(lc),u=f.initEntityValue;u(gr(l))}return l}return Pi(r,[{key:"componentDidMount",value:function(){var l=this.props,d=l.shouldUpdate,f=l.fieldContext;if(this.mounted=!0,f){var u=f.getInternalHooks,S=u(lc),T=S.registerField;this.cancelRegisterFunc=T(this)}d===!0&&this.reRender()}},{key:"componentWillUnmount",value:function(){this.cancelRegister(),this.triggerMetaEvent(!0),this.mounted=!1}},{key:"reRender",value:function(){this.mounted&&this.forceUpdate()}},{key:"render",value:function(){var l=this.state.resetCount,d=this.props.children,f=this.getOnlyChild(d),u=f.child,S=f.isFunction,T;return S?T=u:L.isValidElement(u)?T=L.cloneElement(u,this.getControlled(u.props)):(ro(!u,"`children` of Field is not validate ReactElement."),T=u),L.createElement(L.Fragment,{key:l},T)}}]),r}(L.Component);De(zx,"contextType",Qu);De(zx,"defaultProps",{trigger:"onChange",valuePropName:"value"});function HI(e){var t=e.name,r=xn(e,SO),a=L.useContext(Qu),l=L.useContext(Tg),d=t!==void 0?Hn(t):void 0,f="keep";return r.isListField||(f="_".concat((d||[]).join("_"))),L.createElement(zx,br({key:f,name:d,isListField:!!l},r,{fieldContext:a}))}function CO(e){var t=e.name,r=e.initialValue,a=e.children,l=e.rules,d=e.validateTrigger,f=e.isListField,u=L.useContext(Qu),S=L.useContext(Tg),T=L.useRef({keys:[],id:0}),M=T.current,A=L.useMemo(function(){var q=Hn(u.prefixName)||[];return[].concat(Nt(q),Nt(Hn(t)))},[u.prefixName,t]),I=L.useMemo(function(){return $e($e({},u),{},{prefixName:A})},[u,A]),G=L.useMemo(function(){return{getKey:function(Z){var V=A.length,F=Z[V];return[M.keys[F],Z.slice(V+1)]}}},[A]);if(typeof a!="function")return ro(!1,"Form.List only accepts function as children."),null;var N=function(Z,V,F){var H=F.source;return H==="internal"?!1:Z!==V};return L.createElement(Tg.Provider,{value:G},L.createElement(Qu.Provider,{value:I},L.createElement(HI,{name:[],shouldUpdate:N,rules:l,validateTrigger:d,initialValue:r,isList:!0,isListField:f??!!S},function(q,Z){var V=q.value,F=V===void 0?[]:V,H=q.onChange,Y=u.getFieldValue,ne=function(){var be=Y(A||[]);return be||[]},fe={add:function(be,Pe){var ze=ne();Pe>=0&&Pe<=ze.length?(M.keys=[].concat(Nt(M.keys.slice(0,Pe)),[M.id],Nt(M.keys.slice(Pe))),H([].concat(Nt(ze.slice(0,Pe)),[be],Nt(ze.slice(Pe))))):(M.keys=[].concat(Nt(M.keys),[M.id]),H([].concat(Nt(ze),[be]))),M.id+=1},remove:function(be){var Pe=ne(),ze=new Set(Array.isArray(be)?be:[be]);ze.size<=0||(M.keys=M.keys.filter(function(We,Ce){return!ze.has(Ce)}),H(Pe.filter(function(We,Ce){return!ze.has(Ce)})))},move:function(be,Pe){if(be!==Pe){var ze=ne();be<0||be>=ze.length||Pe<0||Pe>=ze.length||(M.keys=YS(M.keys,be,Pe),H(YS(ze,be,Pe)))}}},ie=F||[];return Array.isArray(ie)||(ie=[]),a(ie.map(function(_e,be){var Pe=M.keys[be];return Pe===void 0&&(M.keys[be]=M.id,Pe=M.keys[be],M.id+=1),{name:be,key:Pe,isListField:!0}}),fe,Z)})))}function EO(e){var t=!1,r=e.length,a=[];return e.length?new Promise(function(l,d){e.forEach(function(f,u){f.catch(function(S){return t=!0,S}).then(function(S){r-=1,a[u]=S,!(r>0)&&(t&&d(a),l(a))})})}):Promise.resolve([])}var qI="__@field_split__";function _0(e){return e.map(function(t){return"".concat(ir(t),":").concat(t)}).join(qI)}var pu=function(){function e(){Ti(this,e),De(this,"kvs",new Map)}return Pi(e,[{key:"set",value:function(r,a){this.kvs.set(_0(r),a)}},{key:"get",value:function(r){return this.kvs.get(_0(r))}},{key:"update",value:function(r,a){var l=this.get(r),d=a(l);d?this.set(r,d):this.delete(r)}},{key:"delete",value:function(r){this.kvs.delete(_0(r))}},{key:"map",value:function(r){return Nt(this.kvs.entries()).map(function(a){var l=nt(a,2),d=l[0],f=l[1],u=d.split(qI);return r({key:u.map(function(S){var T=S.match(/^([^:]*):(.*)$/),M=nt(T,3),A=M[1],I=M[2];return A==="number"?Number(I):I}),value:f})})}},{key:"toJSON",value:function(){var r={};return this.map(function(a){var l=a.key,d=a.value;return r[l.join(".")]=d,null}),r}}]),e}(),TO=["name"],PO=Pi(function e(t){var r=this;Ti(this,e),De(this,"formHooked",!1),De(this,"forceRootUpdate",void 0),De(this,"subscribable",!0),De(this,"store",{}),De(this,"fieldEntities",[]),De(this,"initialValues",{}),De(this,"callbacks",{}),De(this,"validateMessages",null),De(this,"preserve",null),De(this,"lastValidatePromise",null),De(this,"getForm",function(){return{getFieldValue:r.getFieldValue,getFieldsValue:r.getFieldsValue,getFieldError:r.getFieldError,getFieldWarning:r.getFieldWarning,getFieldsError:r.getFieldsError,isFieldsTouched:r.isFieldsTouched,isFieldTouched:r.isFieldTouched,isFieldValidating:r.isFieldValidating,isFieldsValidating:r.isFieldsValidating,resetFields:r.resetFields,setFields:r.setFields,setFieldValue:r.setFieldValue,setFieldsValue:r.setFieldsValue,validateFields:r.validateFields,submit:r.submit,_init:!0,getInternalHooks:r.getInternalHooks}}),De(this,"getInternalHooks",function(a){return a===lc?(r.formHooked=!0,{dispatch:r.dispatch,initEntityValue:r.initEntityValue,registerField:r.registerField,useSubscribe:r.useSubscribe,setInitialValues:r.setInitialValues,destroyForm:r.destroyForm,setCallbacks:r.setCallbacks,setValidateMessages:r.setValidateMessages,getFields:r.getFields,setPreserve:r.setPreserve,getInitialValue:r.getInitialValue,registerWatch:r.registerWatch}):(ro(!1,"`getInternalHooks` is internal usage. Should not call directly."),null)}),De(this,"useSubscribe",function(a){r.subscribable=a}),De(this,"prevWithoutPreserves",null),De(this,"setInitialValues",function(a,l){if(r.initialValues=a||{},l){var d,f=zu(a,r.store);(d=r.prevWithoutPreserves)===null||d===void 0||d.map(function(u){var S=u.key;f=ba(f,S,Ga(a,S))}),r.prevWithoutPreserves=null,r.updateStore(f)}}),De(this,"destroyForm",function(a){if(a)r.updateStore({});else{var l=new pu;r.getFieldEntities(!0).forEach(function(d){r.isMergedPreserve(d.isPreserve())||l.set(d.getNamePath(),!0)}),r.prevWithoutPreserves=l}}),De(this,"getInitialValue",function(a){var l=Ga(r.initialValues,a);return a.length?zu(l):l}),De(this,"setCallbacks",function(a){r.callbacks=a}),De(this,"setValidateMessages",function(a){r.validateMessages=a}),De(this,"setPreserve",function(a){r.preserve=a}),De(this,"watchList",[]),De(this,"registerWatch",function(a){return r.watchList.push(a),function(){r.watchList=r.watchList.filter(function(l){return l!==a})}}),De(this,"notifyWatch",function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if(r.watchList.length){var l=r.getFieldsValue(),d=r.getFieldsValue(!0);r.watchList.forEach(function(f){f(l,d,a)})}}),De(this,"timeoutId",null),De(this,"warningUnhooked",function(){}),De(this,"updateStore",function(a){r.store=a}),De(this,"getFieldEntities",function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return a?r.fieldEntities.filter(function(l){return l.getNamePath().length}):r.fieldEntities}),De(this,"getFieldsMap",function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,l=new pu;return r.getFieldEntities(a).forEach(function(d){var f=d.getNamePath();l.set(f,d)}),l}),De(this,"getFieldEntitiesForNamePathList",function(a){if(!a)return r.getFieldEntities(!0);var l=r.getFieldsMap(!0);return a.map(function(d){var f=Hn(d);return l.get(f)||{INVALIDATE_NAME_PATH:Hn(d)}})}),De(this,"getFieldsValue",function(a,l){r.warningUnhooked();var d,f,u;if(a===!0||Array.isArray(a)?(d=a,f=l):a&&ir(a)==="object"&&(u=a.strict,f=a.filter),d===!0&&!f)return r.store;var S=r.getFieldEntitiesForNamePathList(Array.isArray(d)?d:null),T=[];return S.forEach(function(M){var A,I,G="INVALIDATE_NAME_PATH"in M?M.INVALIDATE_NAME_PATH:M.getNamePath();if(u){var N,q;if((N=(q=M).isList)!==null&&N!==void 0&&N.call(q))return}else if(!d&&(A=(I=M).isListField)!==null&&A!==void 0&&A.call(I))return;if(!f)T.push(G);else{var Z="getMeta"in M?M.getMeta():null;f(Z)&&T.push(G)}}),JS(r.store,T.map(Hn))}),De(this,"getFieldValue",function(a){r.warningUnhooked();var l=Hn(a);return Ga(r.store,l)}),De(this,"getFieldsError",function(a){r.warningUnhooked();var l=r.getFieldEntitiesForNamePathList(a);return l.map(function(d,f){return d&&!("INVALIDATE_NAME_PATH"in d)?{name:d.getNamePath(),errors:d.getErrors(),warnings:d.getWarnings()}:{name:Hn(a[f]),errors:[],warnings:[]}})}),De(this,"getFieldError",function(a){r.warningUnhooked();var l=Hn(a),d=r.getFieldsError([l])[0];return d.errors}),De(this,"getFieldWarning",function(a){r.warningUnhooked();var l=Hn(a),d=r.getFieldsError([l])[0];return d.warnings}),De(this,"isFieldsTouched",function(){r.warningUnhooked();for(var a=arguments.length,l=new Array(a),d=0;d<a;d++)l[d]=arguments[d];var f=l[0],u=l[1],S,T=!1;l.length===0?S=null:l.length===1?Array.isArray(f)?(S=f.map(Hn),T=!1):(S=null,T=f):(S=f.map(Hn),T=u);var M=r.getFieldEntities(!0),A=function(Z){return Z.isFieldTouched()};if(!S)return T?M.every(function(q){return A(q)||q.isList()}):M.some(A);var I=new pu;S.forEach(function(q){I.set(q,[])}),M.forEach(function(q){var Z=q.getNamePath();S.forEach(function(V){V.every(function(F,H){return Z[H]===F})&&I.update(V,function(F){return[].concat(Nt(F),[q])})})});var G=function(Z){return Z.some(A)},N=I.map(function(q){var Z=q.value;return Z});return T?N.every(G):N.some(G)}),De(this,"isFieldTouched",function(a){return r.warningUnhooked(),r.isFieldsTouched([a])}),De(this,"isFieldsValidating",function(a){r.warningUnhooked();var l=r.getFieldEntities();if(!a)return l.some(function(f){return f.isFieldValidating()});var d=a.map(Hn);return l.some(function(f){var u=f.getNamePath();return ju(d,u)&&f.isFieldValidating()})}),De(this,"isFieldValidating",function(a){return r.warningUnhooked(),r.isFieldsValidating([a])}),De(this,"resetWithFieldInitialValue",function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},l=new pu,d=r.getFieldEntities(!0);d.forEach(function(S){var T=S.props.initialValue,M=S.getNamePath();if(T!==void 0){var A=l.get(M)||new Set;A.add({entity:S,value:T}),l.set(M,A)}});var f=function(T){T.forEach(function(M){var A=M.props.initialValue;if(A!==void 0){var I=M.getNamePath(),G=r.getInitialValue(I);if(G!==void 0)ro(!1,"Form already set 'initialValues' with path '".concat(I.join("."),"'. Field can not overwrite it."));else{var N=l.get(I);if(N&&N.size>1)ro(!1,"Multiple Field with path '".concat(I.join("."),"' set 'initialValue'. Can not decide which one to pick."));else if(N){var q=r.getFieldValue(I),Z=M.isListField();!Z&&(!a.skipExist||q===void 0)&&r.updateStore(ba(r.store,I,Nt(N)[0].value))}}}})},u;a.entities?u=a.entities:a.namePathList?(u=[],a.namePathList.forEach(function(S){var T=l.get(S);if(T){var M;(M=u).push.apply(M,Nt(Nt(T).map(function(A){return A.entity})))}})):u=d,f(u)}),De(this,"resetFields",function(a){r.warningUnhooked();var l=r.store;if(!a){r.updateStore(zu(r.initialValues)),r.resetWithFieldInitialValue(),r.notifyObservers(l,null,{type:"reset"}),r.notifyWatch();return}var d=a.map(Hn);d.forEach(function(f){var u=r.getInitialValue(f);r.updateStore(ba(r.store,f,u))}),r.resetWithFieldInitialValue({namePathList:d}),r.notifyObservers(l,d,{type:"reset"}),r.notifyWatch(d)}),De(this,"setFields",function(a){r.warningUnhooked();var l=r.store,d=[];a.forEach(function(f){var u=f.name,S=xn(f,TO),T=Hn(u);d.push(T),"value"in S&&r.updateStore(ba(r.store,T,S.value)),r.notifyObservers(l,[T],{type:"setField",data:f})}),r.notifyWatch(d)}),De(this,"getFields",function(){var a=r.getFieldEntities(!0),l=a.map(function(d){var f=d.getNamePath(),u=d.getMeta(),S=$e($e({},u),{},{name:f,value:r.getFieldValue(f)});return Object.defineProperty(S,"originRCField",{value:!0}),S});return l}),De(this,"initEntityValue",function(a){var l=a.props.initialValue;if(l!==void 0){var d=a.getNamePath(),f=Ga(r.store,d);f===void 0&&r.updateStore(ba(r.store,d,l))}}),De(this,"isMergedPreserve",function(a){var l=a!==void 0?a:r.preserve;return l??!0}),De(this,"registerField",function(a){r.fieldEntities.push(a);var l=a.getNamePath();if(r.notifyWatch([l]),a.props.initialValue!==void 0){var d=r.store;r.resetWithFieldInitialValue({entities:[a],skipExist:!0}),r.notifyObservers(d,[a.getNamePath()],{type:"valueUpdate",source:"internal"})}return function(f,u){var S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(r.fieldEntities=r.fieldEntities.filter(function(A){return A!==a}),!r.isMergedPreserve(u)&&(!f||S.length>1)){var T=f?void 0:r.getInitialValue(l);if(l.length&&r.getFieldValue(l)!==T&&r.fieldEntities.every(function(A){return!UI(A.getNamePath(),l)})){var M=r.store;r.updateStore(ba(M,l,T,!0)),r.notifyObservers(M,[l],{type:"remove"}),r.triggerDependenciesUpdate(M,l)}}r.notifyWatch([l])}}),De(this,"dispatch",function(a){switch(a.type){case"updateValue":{var l=a.namePath,d=a.value;r.updateValue(l,d);break}case"validateField":{var f=a.namePath,u=a.triggerName;r.validateFields([f],{triggerName:u});break}}}),De(this,"notifyObservers",function(a,l,d){if(r.subscribable){var f=$e($e({},d),{},{store:r.getFieldsValue(!0)});r.getFieldEntities().forEach(function(u){var S=u.onStoreChange;S(a,l,f)})}else r.forceRootUpdate()}),De(this,"triggerDependenciesUpdate",function(a,l){var d=r.getDependencyChildrenFields(l);return d.length&&r.validateFields(d),r.notifyObservers(a,d,{type:"dependenciesUpdate",relatedFields:[l].concat(Nt(d))}),d}),De(this,"updateValue",function(a,l){var d=Hn(a),f=r.store;r.updateStore(ba(r.store,d,l)),r.notifyObservers(f,[d],{type:"valueUpdate",source:"internal"}),r.notifyWatch([d]);var u=r.triggerDependenciesUpdate(f,d),S=r.callbacks.onValuesChange;if(S){var T=JS(r.store,[d]);S(T,r.getFieldsValue())}r.triggerOnFieldsChange([d].concat(Nt(u)))}),De(this,"setFieldsValue",function(a){r.warningUnhooked();var l=r.store;if(a){var d=zu(r.store,a);r.updateStore(d)}r.notifyObservers(l,null,{type:"valueUpdate",source:"external"}),r.notifyWatch()}),De(this,"setFieldValue",function(a,l){r.setFields([{name:a,value:l}])}),De(this,"getDependencyChildrenFields",function(a){var l=new Set,d=[],f=new pu;r.getFieldEntities().forEach(function(S){var T=S.props.dependencies;(T||[]).forEach(function(M){var A=Hn(M);f.update(A,function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Set;return I.add(S),I})})});var u=function S(T){var M=f.get(T)||new Set;M.forEach(function(A){if(!l.has(A)){l.add(A);var I=A.getNamePath();A.isFieldDirty()&&I.length&&(d.push(I),S(I))}})};return u(a),d}),De(this,"triggerOnFieldsChange",function(a,l){var d=r.callbacks.onFieldsChange;if(d){var f=r.getFields();if(l){var u=new pu;l.forEach(function(T){var M=T.name,A=T.errors;u.set(M,A)}),f.forEach(function(T){T.errors=u.get(T.name)||T.errors})}var S=f.filter(function(T){var M=T.name;return ju(a,M)});S.length&&d(S,f)}}),De(this,"validateFields",function(a,l){r.warningUnhooked();var d,f;Array.isArray(a)||typeof a=="string"||typeof l=="string"?(d=a,f=l):f=a;var u=!!d,S=u?d.map(Hn):[],T=[],M=String(Date.now()),A=new Set,I=f||{},G=I.recursive,N=I.dirty;r.getFieldEntities(!0).forEach(function(F){if(u||S.push(F.getNamePath()),!(!F.props.rules||!F.props.rules.length)&&!(N&&!F.isFieldDirty())){var H=F.getNamePath();if(A.add(H.join(M)),!u||ju(S,H,G)){var Y=F.validateRules($e({validateMessages:$e($e({},VI),r.validateMessages)},f));T.push(Y.then(function(){return{name:H,errors:[],warnings:[]}}).catch(function(ne){var fe,ie=[],_e=[];return(fe=ne.forEach)===null||fe===void 0||fe.call(ne,function(be){var Pe=be.rule.warningOnly,ze=be.errors;Pe?_e.push.apply(_e,Nt(ze)):ie.push.apply(ie,Nt(ze))}),ie.length?Promise.reject({name:H,errors:ie,warnings:_e}):{name:H,errors:ie,warnings:_e}}))}}});var q=EO(T);r.lastValidatePromise=q,q.catch(function(F){return F}).then(function(F){var H=F.map(function(Y){var ne=Y.name;return ne});r.notifyObservers(r.store,H,{type:"validateFinish"}),r.triggerOnFieldsChange(H,F)});var Z=q.then(function(){return r.lastValidatePromise===q?Promise.resolve(r.getFieldsValue(S)):Promise.reject([])}).catch(function(F){var H=F.filter(function(Y){return Y&&Y.errors.length});return Promise.reject({values:r.getFieldsValue(S),errorFields:H,outOfDate:r.lastValidatePromise!==q})});Z.catch(function(F){return F});var V=S.filter(function(F){return A.has(F.join(M))});return r.triggerOnFieldsChange(V),Z}),De(this,"submit",function(){r.warningUnhooked(),r.validateFields().then(function(a){var l=r.callbacks.onFinish;if(l)try{l(a)}catch(d){console.error(d)}}).catch(function(a){var l=r.callbacks.onFinishFailed;l&&l(a)})}),this.forceRootUpdate=t});function WI(e){var t=L.useRef(),r=L.useState({}),a=nt(r,2),l=a[1];if(!t.current)if(e)t.current=e;else{var d=function(){l({})},f=new PO(d);t.current=f.getForm()}return[t.current]}var h1=L.createContext({triggerFormChange:function(){},triggerFormFinish:function(){},registerForm:function(){},unregisterForm:function(){}}),IO=function(t){var r=t.validateMessages,a=t.onFormChange,l=t.onFormFinish,d=t.children,f=L.useContext(h1),u=L.useRef({});return L.createElement(h1.Provider,{value:$e($e({},f),{},{validateMessages:$e($e({},f.validateMessages),r),triggerFormChange:function(T,M){a&&a(T,{changedFields:M,forms:u.current}),f.triggerFormChange(T,M)},triggerFormFinish:function(T,M){l&&l(T,{values:M,forms:u.current}),f.triggerFormFinish(T,M)},registerForm:function(T,M){T&&(u.current=$e($e({},u.current),{},De({},T,M))),f.registerForm(T,M)},unregisterForm:function(T){var M=$e({},u.current);delete M[T],u.current=M,f.unregisterForm(T)}})},d)},kO=["name","initialValues","fields","form","preserve","children","component","validateMessages","validateTrigger","onValuesChange","onFieldsChange","onFinish","onFinishFailed","clearOnDestroy"],MO=function(t,r){var a=t.name,l=t.initialValues,d=t.fields,f=t.form,u=t.preserve,S=t.children,T=t.component,M=T===void 0?"form":T,A=t.validateMessages,I=t.validateTrigger,G=I===void 0?"onChange":I,N=t.onValuesChange,q=t.onFieldsChange,Z=t.onFinish,V=t.onFinishFailed,F=t.clearOnDestroy,H=xn(t,kO),Y=L.useRef(null),ne=L.useContext(h1),fe=WI(f),ie=nt(fe,1),_e=ie[0],be=_e.getInternalHooks(lc),Pe=be.useSubscribe,ze=be.setInitialValues,We=be.setCallbacks,Ce=be.setValidateMessages,Ie=be.setPreserve,Ke=be.destroyForm;L.useImperativeHandle(r,function(){return $e($e({},_e),{},{nativeElement:Y.current})}),L.useEffect(function(){return ne.registerForm(a,_e),function(){ne.unregisterForm(a)}},[ne,_e,a]),Ce($e($e({},ne.validateMessages),A)),We({onValuesChange:N,onFieldsChange:function(st){if(ne.triggerFormChange(a,st),q){for(var St=arguments.length,Et=new Array(St>1?St-1:0),Lt=1;Lt<St;Lt++)Et[Lt-1]=arguments[Lt];q.apply(void 0,[st].concat(Et))}},onFinish:function(st){ne.triggerFormFinish(a,st),Z&&Z(st)},onFinishFailed:V}),Ie(u);var ke=L.useRef(null);ze(l,!ke.current),ke.current||(ke.current=!0),L.useEffect(function(){return function(){return Ke(F)}},[]);var Se,ge=typeof S=="function";if(ge){var Fe=_e.getFieldsValue(!0);Se=S(Fe,_e)}else Se=S;Pe(!ge);var Be=L.useRef();L.useEffect(function(){bO(Be.current||[],d||[])||_e.setFields(d||[]),Be.current=d},[d,_e]);var Ve=L.useMemo(function(){return $e($e({},_e),{},{validateTrigger:G})},[_e,G]),Ze=L.createElement(Tg.Provider,{value:null},L.createElement(Qu.Provider,{value:Ve},Se));return M===!1?Ze:L.createElement(M,br({},H,{ref:Y,onSubmit:function(st){st.preventDefault(),st.stopPropagation(),_e.submit()},onReset:function(st){var St;st.preventDefault(),_e.resetFields(),(St=H.onReset)===null||St===void 0||St.call(H,st)}}),Ze)};function eC(e){try{return JSON.stringify(e)}catch{return Math.random()}}function AO(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var a=t[0],l=t[1],d=l===void 0?{}:l,f=NF(d)?{form:d}:d,u=f.form,S=L.useState(),T=nt(S,2),M=T[0],A=T[1],I=L.useMemo(function(){return eC(M)},[M]),G=L.useRef(I);G.current=I;var N=L.useContext(Qu),q=u||N,Z=q&&q._init,V=Hn(a),F=L.useRef(V);return F.current=V,L.useEffect(function(){if(Z){var H=q.getFieldsValue,Y=q.getInternalHooks,ne=Y(lc),fe=ne.registerWatch,ie=function(ze,We){var Ce=f.preserve?We:ze;return typeof a=="function"?a(Ce):Ga(Ce,F.current)},_e=fe(function(Pe,ze){var We=ie(Pe,ze),Ce=eC(We);G.current!==Ce&&(G.current=Ce,A(We))}),be=ie(H(),H(!0));return M!==be&&A(be),_e}},[Z]),M}var zO=L.forwardRef(MO),Wf=zO;Wf.FormProvider=IO;Wf.Field=HI;Wf.List=CO;Wf.useForm=WI;Wf.useWatch=AO;const tC=L.createContext({}),RO=e=>{let{children:t,status:r,override:a}=e;const l=L.useContext(tC),d=L.useMemo(()=>{const f=Object.assign({},l);return a&&delete f.isFormItemInput,r&&(delete f.status,delete f.hasFeedback,delete f.feedbackIcon),f},[r,a,l]);return L.createElement(tC.Provider,{value:d},t)},LO=e=>{const{space:t,form:r,children:a}=e;if(a==null)return null;let l=a;return r&&(l=nn.createElement(RO,{override:!0,status:!0},l)),t&&(l=nn.createElement(IF,null,l)),l},DO=e=>({[e.componentCls]:{[`${e.antCls}-motion-collapse-legacy`]:{overflow:"hidden","&-active":{transition:`height ${e.motionDurationMid} ${e.motionEaseInOut},
        opacity ${e.motionDurationMid} ${e.motionEaseInOut} !important`}},[`${e.antCls}-motion-collapse`]:{overflow:"hidden",transition:`height ${e.motionDurationMid} ${e.motionEaseInOut},
        opacity ${e.motionDurationMid} ${e.motionEaseInOut} !important`}}}),FO=e=>({animationDuration:e,animationFillMode:"both"}),OO=e=>({animationDuration:e,animationFillMode:"both"}),GI=function(e,t,r,a){const d=(arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1)?"&":"";return{[`
      ${d}${e}-enter,
      ${d}${e}-appear
    `]:Object.assign(Object.assign({},FO(a)),{animationPlayState:"paused"}),[`${d}${e}-leave`]:Object.assign(Object.assign({},OO(a)),{animationPlayState:"paused"}),[`
      ${d}${e}-enter${e}-enter-active,
      ${d}${e}-appear${e}-appear-active
    `]:{animationName:t,animationPlayState:"running"},[`${d}${e}-leave${e}-leave-active`]:{animationName:r,animationPlayState:"running",pointerEvents:"none"}}},BO=new Yn("antSlideUpIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1}}),NO=new Yn("antSlideUpOut",{"0%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0}}),$O=new Yn("antSlideDownIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1}}),jO=new Yn("antSlideDownOut",{"0%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0}}),VO=new Yn("antSlideLeftIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1}}),UO=new Yn("antSlideLeftOut",{"0%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0}}),HO=new Yn("antSlideRightIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1}}),qO=new Yn("antSlideRightOut",{"0%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0}}),WO={"slide-up":{inKeyframes:BO,outKeyframes:NO},"slide-down":{inKeyframes:$O,outKeyframes:jO},"slide-left":{inKeyframes:VO,outKeyframes:UO},"slide-right":{inKeyframes:HO,outKeyframes:qO}},rC=(e,t)=>{const{antCls:r}=e,a=`${r}-${t}`,{inKeyframes:l,outKeyframes:d}=WO[t];return[GI(a,l,d,e.motionDurationMid),{[`
      ${a}-enter,
      ${a}-appear
    `]:{transform:"scale(0)",transformOrigin:"0% 0%",opacity:0,animationTimingFunction:e.motionEaseOutQuint,"&-prepare":{transform:"scale(1)"}},[`${a}-leave`]:{animationTimingFunction:e.motionEaseInQuint}}]},GO=new Yn("antZoomIn",{"0%":{transform:"scale(0.2)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),ZO=new Yn("antZoomOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.2)",opacity:0}}),nC=new Yn("antZoomBigIn",{"0%":{transform:"scale(0.8)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),iC=new Yn("antZoomBigOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.8)",opacity:0}}),KO=new Yn("antZoomUpIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 0%"}}),XO=new Yn("antZoomUpOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 0%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0}}),JO=new Yn("antZoomLeftIn",{"0%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"0% 50%"}}),YO=new Yn("antZoomLeftOut",{"0%":{transform:"scale(1)",transformOrigin:"0% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0}}),QO=new Yn("antZoomRightIn",{"0%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"100% 50%"}}),e6=new Yn("antZoomRightOut",{"0%":{transform:"scale(1)",transformOrigin:"100% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0}}),t6=new Yn("antZoomDownIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 100%"}}),r6=new Yn("antZoomDownOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 100%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0}}),n6={zoom:{inKeyframes:GO,outKeyframes:ZO},"zoom-big":{inKeyframes:nC,outKeyframes:iC},"zoom-big-fast":{inKeyframes:nC,outKeyframes:iC},"zoom-left":{inKeyframes:JO,outKeyframes:YO},"zoom-right":{inKeyframes:QO,outKeyframes:e6},"zoom-up":{inKeyframes:KO,outKeyframes:XO},"zoom-down":{inKeyframes:t6,outKeyframes:r6}},ZI=(e,t)=>{const{antCls:r}=e,a=`${r}-${t}`,{inKeyframes:l,outKeyframes:d}=n6[t];return[GI(a,l,d,t==="zoom-big-fast"?e.motionDurationFast:e.motionDurationMid),{[`
        ${a}-enter,
        ${a}-appear
      `]:{transform:"scale(0)",opacity:0,animationTimingFunction:e.motionEaseOutCirc,"&-prepare":{transform:"none"}},[`${a}-leave`]:{animationTimingFunction:e.motionEaseInOutCirc}}]},i6=function(){if(typeof navigator>"u"||typeof window>"u")return!1;var e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(e==null?void 0:e.substr(0,4))};var o6=["prefixCls","invalidate","item","renderItem","responsive","responsiveDisabled","registerSize","itemKey","className","style","children","display","order","component"],mu=void 0;function a6(e,t){var r=e.prefixCls,a=e.invalidate,l=e.item,d=e.renderItem,f=e.responsive,u=e.responsiveDisabled,S=e.registerSize,T=e.itemKey,M=e.className,A=e.style,I=e.children,G=e.display,N=e.order,q=e.component,Z=q===void 0?"div":q,V=xn(e,o6),F=f&&!G;function H(_e){S(T,_e)}L.useEffect(function(){return function(){H(null)}},[]);var Y=d&&l!==mu?d(l):I,ne;a||(ne={opacity:F?0:1,height:F?0:mu,overflowY:F?"hidden":mu,order:f?N:mu,pointerEvents:F?"none":mu,position:F?"absolute":mu});var fe={};F&&(fe["aria-hidden"]=!0);var ie=L.createElement(Z,br({className:Mr(!a&&r,M),style:$e($e({},ne),A)},fe,V,{ref:t}),Y);return f&&(ie=L.createElement(Vf,{onResize:function(be){var Pe=be.offsetWidth;H(Pe)},disabled:u},ie)),ie}var ef=L.forwardRef(a6);ef.displayName="Item";function s6(e){if(typeof MessageChannel>"u")xs(e);else{var t=new MessageChannel;t.port1.onmessage=function(){return e()},t.port2.postMessage(void 0)}}function l6(){var e=L.useRef(null),t=function(a){e.current||(e.current=[],s6(function(){Nf.unstable_batchedUpdates(function(){e.current.forEach(function(l){l()}),e.current=null})})),e.current.push(a)};return t}function Md(e,t){var r=L.useState(t),a=nt(r,2),l=a[0],d=a[1],f=po(function(u){e(function(){d(u)})});return[l,f]}var Pg=nn.createContext(null),c6=["component"],u6=["className"],h6=["className"],d6=function(t,r){var a=L.useContext(Pg);if(!a){var l=t.component,d=l===void 0?"div":l,f=xn(t,c6);return L.createElement(d,br({},f,{ref:r}))}var u=a.className,S=xn(a,u6),T=t.className,M=xn(t,h6);return L.createElement(Pg.Provider,{value:null},L.createElement(ef,br({ref:r,className:Mr(u,T)},S,M)))},KI=L.forwardRef(d6);KI.displayName="RawItem";var f6=["prefixCls","data","renderItem","renderRawItem","itemKey","itemWidth","ssr","style","className","maxCount","renderRest","renderRawRest","suffix","component","itemComponent","onVisibleChange"],XI="responsive",JI="invalidate";function p6(e){return"+ ".concat(e.length," ...")}function m6(e,t){var r=e.prefixCls,a=r===void 0?"rc-overflow":r,l=e.data,d=l===void 0?[]:l,f=e.renderItem,u=e.renderRawItem,S=e.itemKey,T=e.itemWidth,M=T===void 0?10:T,A=e.ssr,I=e.style,G=e.className,N=e.maxCount,q=e.renderRest,Z=e.renderRawRest,V=e.suffix,F=e.component,H=F===void 0?"div":F,Y=e.itemComponent,ne=e.onVisibleChange,fe=xn(e,f6),ie=A==="full",_e=l6(),be=Md(_e,null),Pe=nt(be,2),ze=Pe[0],We=Pe[1],Ce=ze||0,Ie=Md(_e,new Map),Ke=nt(Ie,2),ke=Ke[0],Se=Ke[1],ge=Md(_e,0),Fe=nt(ge,2),Be=Fe[0],Ve=Fe[1],Ze=Md(_e,0),gt=nt(Ze,2),st=gt[0],St=gt[1],Et=Md(_e,0),Lt=nt(Et,2),Vt=Lt[0],or=Lt[1],Jt=L.useState(null),tr=nt(Jt,2),rr=tr[0],Gr=tr[1],sr=L.useState(null),Br=nt(sr,2),Te=Br[0],Ar=Br[1],yr=L.useMemo(function(){return Te===null&&ie?Number.MAX_SAFE_INTEGER:Te||0},[Te,ze]),mt=L.useState(!1),Ft=nt(mt,2),Xt=Ft[0],Sr=Ft[1],Zt="".concat(a,"-item"),Qt=Math.max(Be,st),Cr=N===XI,vr=d.length&&Cr,Nn=N===JI,Xe=vr||typeof N=="number"&&d.length>N,_r=L.useMemo(function(){var te=d;return vr?ze===null&&ie?te=d:te=d.slice(0,Math.min(d.length,Ce/M)):typeof N=="number"&&(te=d.slice(0,N)),te},[d,M,ze,N,vr]),nr=L.useMemo(function(){return vr?d.slice(yr+1):d.slice(_r.length)},[d,_r,vr,yr]),Nr=L.useCallback(function(te,se){var me;return typeof S=="function"?S(te):(me=S&&(te==null?void 0:te[S]))!==null&&me!==void 0?me:se},[S]),Lr=L.useCallback(f||function(te){return te},[f]);function Ye(te,se,me){Te===te&&(se===void 0||se===rr)||(Ar(te),me||(Sr(te<d.length-1),ne==null||ne(te)),se!==void 0&&Gr(se))}function Dt(te,se){We(se.clientWidth)}function ht(te,se){Se(function(me){var xe=new Map(me);return se===null?xe.delete(te):xe.set(te,se),xe})}function lr(te,se){St(se),Ve(st)}function Dr(te,se){or(se)}function kt(te){return ke.get(Nr(_r[te],te))}Ui(function(){if(Ce&&typeof Qt=="number"&&_r){var te=Vt,se=_r.length,me=se-1;if(!se){Ye(0,null);return}for(var xe=0;xe<se;xe+=1){var ue=kt(xe);if(ie&&(ue=ue||0),ue===void 0){Ye(xe-1,void 0,!0);break}if(te+=ue,me===0&&te<=Ce||xe===me-1&&te+kt(me)<=Ce){Ye(me,null);break}else if(te+Qt>Ce){Ye(xe-1,te-ue-Vt+st);break}}V&&kt(0)+Vt>Ce&&Gr(null)}},[Ce,ke,st,Vt,Nr,_r]);var Zr=Xt&&!!nr.length,Fr={};rr!==null&&vr&&(Fr={position:"absolute",left:rr,top:0});var Xr={prefixCls:Zt,responsive:vr,component:Y,invalidate:Nn},Jr=u?function(te,se){var me=Nr(te,se);return L.createElement(Pg.Provider,{key:me,value:$e($e({},Xr),{},{order:se,item:te,itemKey:me,registerSize:ht,display:se<=yr})},u(te,se))}:function(te,se){var me=Nr(te,se);return L.createElement(ef,br({},Xr,{order:se,key:me,item:te,renderItem:Lr,itemKey:me,registerSize:ht,display:se<=yr}))},oe,U={order:Zr?yr:Number.MAX_SAFE_INTEGER,className:"".concat(Zt,"-rest"),registerSize:lr,display:Zr};if(Z)Z&&(oe=L.createElement(Pg.Provider,{value:$e($e({},Xr),U)},Z(nr)));else{var $=q||p6;oe=L.createElement(ef,br({},Xr,U),typeof $=="function"?$(nr):$)}var X=L.createElement(H,br({className:Mr(!Nn&&a,G),style:I,ref:t},fe),_r.map(Jr),Xe?oe:null,V&&L.createElement(ef,br({},Xr,{responsive:Cr,responsiveDisabled:!vr,order:yr,className:"".concat(Zt,"-suffix"),registerSize:Dr,display:!0,style:Fr}),V));return Cr&&(X=L.createElement(Vf,{onResize:Dt,disabled:!vr},X)),X}var ws=L.forwardRef(m6);ws.displayName="Overflow";ws.Item=KI;ws.RESPONSIVE=XI;ws.INVALIDATE=JI;function g6(e){var t=e.prefixCls,r=e.align,a=e.arrow,l=e.arrowPos,d=a||{},f=d.className,u=d.content,S=l.x,T=S===void 0?0:S,M=l.y,A=M===void 0?0:M,I=L.useRef();if(!r||!r.points)return null;var G={position:"absolute"};if(r.autoArrow!==!1){var N=r.points[0],q=r.points[1],Z=N[0],V=N[1],F=q[0],H=q[1];Z===F||!["t","b"].includes(Z)?G.top=A:Z==="t"?G.top=0:G.bottom=0,V===H||!["l","r"].includes(V)?G.left=T:V==="l"?G.left=0:G.right=0}return L.createElement("div",{ref:I,className:Mr("".concat(t,"-arrow"),f),style:G},u)}function y6(e){var t=e.prefixCls,r=e.open,a=e.zIndex,l=e.mask,d=e.motion;return l?L.createElement(xy,br({},d,{motionAppear:!0,visible:r,removeOnLeave:!0}),function(f){var u=f.className;return L.createElement("div",{style:{zIndex:a},className:Mr("".concat(t,"-mask"),u)})}):null}var v6=L.memo(function(e){var t=e.children;return t},function(e,t){return t.cache}),_6=L.forwardRef(function(e,t){var r=e.popup,a=e.className,l=e.prefixCls,d=e.style,f=e.target,u=e.onVisibleChanged,S=e.open,T=e.keepDom,M=e.fresh,A=e.onClick,I=e.mask,G=e.arrow,N=e.arrowPos,q=e.align,Z=e.motion,V=e.maskMotion,F=e.forceRender,H=e.getPopupContainer,Y=e.autoDestroy,ne=e.portal,fe=e.zIndex,ie=e.onMouseEnter,_e=e.onMouseLeave,be=e.onPointerEnter,Pe=e.ready,ze=e.offsetX,We=e.offsetY,Ce=e.offsetR,Ie=e.offsetB,Ke=e.onAlign,ke=e.onPrepare,Se=e.stretch,ge=e.targetWidth,Fe=e.targetHeight,Be=typeof r=="function"?r():r,Ve=S||T,Ze=(H==null?void 0:H.length)>0,gt=L.useState(!H||!Ze),st=nt(gt,2),St=st[0],Et=st[1];if(Ui(function(){!St&&Ze&&f&&Et(!0)},[St,Ze,f]),!St)return null;var Lt="auto",Vt={left:"-1000vw",top:"-1000vh",right:Lt,bottom:Lt};if(Pe||!S){var or,Jt=q.points,tr=q.dynamicInset||((or=q._experimental)===null||or===void 0?void 0:or.dynamicInset),rr=tr&&Jt[0][1]==="r",Gr=tr&&Jt[0][0]==="b";rr?(Vt.right=Ce,Vt.left=Lt):(Vt.left=ze,Vt.right=Lt),Gr?(Vt.bottom=Ie,Vt.top=Lt):(Vt.top=We,Vt.bottom=Lt)}var sr={};return Se&&(Se.includes("height")&&Fe?sr.height=Fe:Se.includes("minHeight")&&Fe&&(sr.minHeight=Fe),Se.includes("width")&&ge?sr.width=ge:Se.includes("minWidth")&&ge&&(sr.minWidth=ge)),S||(sr.pointerEvents="none"),L.createElement(ne,{open:F||Ve,getContainer:H&&function(){return H(f)},autoDestroy:Y},L.createElement(y6,{prefixCls:l,open:S,zIndex:fe,mask:I,motion:V}),L.createElement(Vf,{onResize:Ke,disabled:!S},function(Br){return L.createElement(xy,br({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,forceRender:F,leavedClassName:"".concat(l,"-hidden")},Z,{onAppearPrepare:ke,onEnterPrepare:ke,visible:S,onVisibleChanged:function(Ar){var yr;Z==null||(yr=Z.onVisibleChanged)===null||yr===void 0||yr.call(Z,Ar),u(Ar)}}),function(Te,Ar){var yr=Te.className,mt=Te.style,Ft=Mr(l,yr,a);return L.createElement("div",{ref:SP(Br,t,Ar),className:Ft,style:$e($e($e($e({"--arrow-x":"".concat(N.x||0,"px"),"--arrow-y":"".concat(N.y||0,"px")},Vt),sr),mt),{},{boxSizing:"border-box",zIndex:fe},d),onMouseEnter:ie,onMouseLeave:_e,onPointerEnter:be,onClick:A},G&&L.createElement(g6,{prefixCls:l,arrow:G,arrowPos:N,align:q}),L.createElement(v6,{cache:!S&&!M},Be))})}))}),x6=L.forwardRef(function(e,t){var r=e.children,a=e.getTriggerDOMNode,l=fy(r),d=L.useCallback(function(u){xx(t,a?a(u):u)},[a]),f=dy(d,r.ref);return l?L.cloneElement(r,{ref:f}):r}),oC=L.createContext(null);function aC(e){return e?Array.isArray(e)?e:[e]:[]}function b6(e,t,r,a){return L.useMemo(function(){var l=aC(r??t),d=aC(a??t),f=new Set(l),u=new Set(d);return e&&(f.has("hover")&&(f.delete("hover"),f.add("click")),u.has("hover")&&(u.delete("hover"),u.add("click"))),[f,u]},[e,t,r,a])}function w6(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0;return r?e[0]===t[0]:e[0]===t[0]&&e[1]===t[1]}function S6(e,t,r,a){for(var l=r.points,d=Object.keys(e),f=0;f<d.length;f+=1){var u,S=d[f];if(w6((u=e[S])===null||u===void 0?void 0:u.points,l,a))return"".concat(t,"-placement-").concat(S)}return""}function sC(e,t,r,a){return t||(r?{motionName:"".concat(e,"-").concat(r)}:a?{motionName:a}:null)}function Gf(e){return e.ownerDocument.defaultView}function d1(e){for(var t=[],r=e==null?void 0:e.parentElement,a=["hidden","scroll","clip","auto"];r;){var l=Gf(r).getComputedStyle(r),d=l.overflowX,f=l.overflowY,u=l.overflow;[d,f,u].some(function(S){return a.includes(S)})&&t.push(r),r=r.parentElement}return t}function zf(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return Number.isNaN(e)?t:e}function Ad(e){return zf(parseFloat(e),0)}function lC(e,t){var r=$e({},e);return(t||[]).forEach(function(a){if(!(a instanceof HTMLBodyElement||a instanceof HTMLHtmlElement)){var l=Gf(a).getComputedStyle(a),d=l.overflow,f=l.overflowClipMargin,u=l.borderTopWidth,S=l.borderBottomWidth,T=l.borderLeftWidth,M=l.borderRightWidth,A=a.getBoundingClientRect(),I=a.offsetHeight,G=a.clientHeight,N=a.offsetWidth,q=a.clientWidth,Z=Ad(u),V=Ad(S),F=Ad(T),H=Ad(M),Y=zf(Math.round(A.width/N*1e3)/1e3),ne=zf(Math.round(A.height/I*1e3)/1e3),fe=(N-q-F-H)*Y,ie=(I-G-Z-V)*ne,_e=Z*ne,be=V*ne,Pe=F*Y,ze=H*Y,We=0,Ce=0;if(d==="clip"){var Ie=Ad(f);We=Ie*Y,Ce=Ie*ne}var Ke=A.x+Pe-We,ke=A.y+_e-Ce,Se=Ke+A.width+2*We-Pe-ze-fe,ge=ke+A.height+2*Ce-_e-be-ie;r.left=Math.max(r.left,Ke),r.top=Math.max(r.top,ke),r.right=Math.min(r.right,Se),r.bottom=Math.min(r.bottom,ge)}}),r}function cC(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r="".concat(t),a=r.match(/^(.*)\%$/);return a?e*(parseFloat(a[1])/100):parseFloat(r)}function uC(e,t){var r=t||[],a=nt(r,2),l=a[0],d=a[1];return[cC(e.width,l),cC(e.height,d)]}function hC(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return[e[0],e[1]]}function gu(e,t){var r=t[0],a=t[1],l,d;return r==="t"?d=e.y:r==="b"?d=e.y+e.height:d=e.y+e.height/2,a==="l"?l=e.x:a==="r"?l=e.x+e.width:l=e.x+e.width/2,{x:l,y:d}}function tl(e,t){var r={t:"b",b:"t",l:"r",r:"l"};return e.map(function(a,l){return l===t?r[a]||"c":a}).join("")}function C6(e,t,r,a,l,d,f){var u=L.useState({ready:!1,offsetX:0,offsetY:0,offsetR:0,offsetB:0,arrowX:0,arrowY:0,scaleX:1,scaleY:1,align:l[a]||{}}),S=nt(u,2),T=S[0],M=S[1],A=L.useRef(0),I=L.useMemo(function(){return t?d1(t):[]},[t]),G=L.useRef({}),N=function(){G.current={}};e||N();var q=po(function(){if(t&&r&&e){let Qr=function(Is,lo){var ca=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ft,yi=Be.x+Is,So=Be.y+lo,Qn=yi+or,ei=So+Vt,ua=Math.max(yi,ca.left),La=Math.max(So,ca.top),Tt=Math.min(Qn,ca.right),Wt=Math.min(ei,ca.bottom);return Math.max(0,(Tt-ua)*(Wt-La))},Xa=function(){At=Be.y+$,Kt=At+Vt,zt=Be.x+U,Yt=zt+or};var Ki=Qr,so=Xa,F,H,Y=t,ne=Y.ownerDocument,fe=Gf(Y),ie=fe.getComputedStyle(Y),_e=ie.width,be=ie.height,Pe=ie.position,ze=Y.style.left,We=Y.style.top,Ce=Y.style.right,Ie=Y.style.bottom,Ke=Y.style.overflow,ke=$e($e({},l[a]),d),Se=ne.createElement("div");(F=Y.parentElement)===null||F===void 0||F.appendChild(Se),Se.style.left="".concat(Y.offsetLeft,"px"),Se.style.top="".concat(Y.offsetTop,"px"),Se.style.position=Pe,Se.style.height="".concat(Y.offsetHeight,"px"),Se.style.width="".concat(Y.offsetWidth,"px"),Y.style.left="0",Y.style.top="0",Y.style.right="auto",Y.style.bottom="auto",Y.style.overflow="hidden";var ge;if(Array.isArray(r))ge={x:r[0],y:r[1],width:0,height:0};else{var Fe=r.getBoundingClientRect();ge={x:Fe.x,y:Fe.y,width:Fe.width,height:Fe.height}}var Be=Y.getBoundingClientRect(),Ve=ne.documentElement,Ze=Ve.clientWidth,gt=Ve.clientHeight,st=Ve.scrollWidth,St=Ve.scrollHeight,Et=Ve.scrollTop,Lt=Ve.scrollLeft,Vt=Be.height,or=Be.width,Jt=ge.height,tr=ge.width,rr={left:0,top:0,right:Ze,bottom:gt},Gr={left:-Lt,top:-Et,right:st-Lt,bottom:St-Et},sr=ke.htmlRegion,Br="visible",Te="visibleFirst";sr!=="scroll"&&sr!==Te&&(sr=Br);var Ar=sr===Te,yr=lC(Gr,I),mt=lC(rr,I),Ft=sr===Br?mt:yr,Xt=Ar?mt:Ft;Y.style.left="auto",Y.style.top="auto",Y.style.right="0",Y.style.bottom="0";var Sr=Y.getBoundingClientRect();Y.style.left=ze,Y.style.top=We,Y.style.right=Ce,Y.style.bottom=Ie,Y.style.overflow=Ke,(H=Y.parentElement)===null||H===void 0||H.removeChild(Se);var Zt=zf(Math.round(or/parseFloat(_e)*1e3)/1e3),Qt=zf(Math.round(Vt/parseFloat(be)*1e3)/1e3);if(Zt===0||Qt===0||xf(r)&&!BI(r))return;var Cr=ke.offset,vr=ke.targetOffset,Nn=uC(Be,Cr),Xe=nt(Nn,2),_r=Xe[0],nr=Xe[1],Nr=uC(ge,vr),Lr=nt(Nr,2),Ye=Lr[0],Dt=Lr[1];ge.x-=Ye,ge.y-=Dt;var ht=ke.points||[],lr=nt(ht,2),Dr=lr[0],kt=lr[1],Zr=hC(kt),Fr=hC(Dr),Xr=gu(ge,Zr),Jr=gu(Be,Fr),oe=$e({},ke),U=Xr.x-Jr.x+_r,$=Xr.y-Jr.y+nr,X=Qr(U,$),te=Qr(U,$,mt),se=gu(ge,["t","l"]),me=gu(Be,["t","l"]),xe=gu(ge,["b","r"]),ue=gu(Be,["b","r"]),Re=ke.overflow||{},je=Re.adjustX,Le=Re.adjustY,Qe=Re.shiftX,vt=Re.shiftY,wt=function(lo){return typeof lo=="boolean"?lo:lo>=0},At,Kt,zt,Yt;Xa();var zr=wt(Le),cr=Fr[0]===Zr[0];if(zr&&Fr[0]==="t"&&(Kt>Xt.bottom||G.current.bt)){var Ut=$;cr?Ut-=Vt-Jt:Ut=se.y-ue.y-nr;var fr=Qr(U,Ut),Er=Qr(U,Ut,mt);fr>X||fr===X&&(!Ar||Er>=te)?(G.current.bt=!0,$=Ut,nr=-nr,oe.points=[tl(Fr,0),tl(Zr,0)]):G.current.bt=!1}if(zr&&Fr[0]==="b"&&(At<Xt.top||G.current.tb)){var $r=$;cr?$r+=Vt-Jt:$r=xe.y-me.y-nr;var Rr=Qr(U,$r),En=Qr(U,$r,mt);Rr>X||Rr===X&&(!Ar||En>=te)?(G.current.tb=!0,$=$r,nr=-nr,oe.points=[tl(Fr,0),tl(Zr,0)]):G.current.tb=!1}var oo=wt(je),pr=Fr[1]===Zr[1];if(oo&&Fr[1]==="l"&&(Yt>Xt.right||G.current.rl)){var Ii=U;pr?Ii-=or-tr:Ii=se.x-ue.x-_r;var ki=Qr(Ii,$),An=Qr(Ii,$,mt);ki>X||ki===X&&(!Ar||An>=te)?(G.current.rl=!0,U=Ii,_r=-_r,oe.points=[tl(Fr,1),tl(Zr,1)]):G.current.rl=!1}if(oo&&Fr[1]==="r"&&(zt<Xt.left||G.current.lr)){var bn=U;pr?bn+=or-tr:bn=xe.x-me.x-_r;var Ra=Qr(bn,$),$n=Qr(bn,$,mt);Ra>X||Ra===X&&(!Ar||$n>=te)?(G.current.lr=!0,U=bn,_r=-_r,oe.points=[tl(Fr,1),tl(Zr,1)]):G.current.lr=!1}Xa();var jr=Qe===!0?0:Qe;typeof jr=="number"&&(zt<mt.left&&(U-=zt-mt.left-_r,ge.x+tr<mt.left+jr&&(U+=ge.x-mt.left+tr-jr)),Yt>mt.right&&(U-=Yt-mt.right-_r,ge.x>mt.right-jr&&(U+=ge.x-mt.right+jr)));var jn=vt===!0?0:vt;typeof jn=="number"&&(At<mt.top&&($-=At-mt.top-nr,ge.y+Jt<mt.top+jn&&($+=ge.y-mt.top+Jt-jn)),Kt>mt.bottom&&($-=Kt-mt.bottom-nr,ge.y>mt.bottom-jn&&($+=ge.y-mt.bottom+jn)));var qi=Be.x+U,Yr=qi+or,Fn=Be.y+$,Wn=Fn+Vt,Hr=ge.x,Wi=Hr+tr,mn=ge.y,bo=mn+Jt,Mi=Math.max(qi,Hr),Vr=Math.min(Yr,Wi),ur=(Mi+Vr)/2,mr=ur-qi,qt=Math.max(Fn,mn),Tn=Math.min(Wn,bo),Gi=(qt+Tn)/2,Zi=Gi-Fn;f==null||f(t,oe);var ao=Sr.right-Be.x-(U+Be.width),Ai=Sr.bottom-Be.y-($+Be.height);Zt===1&&(U=Math.round(U),ao=Math.round(ao)),Qt===1&&($=Math.round($),Ai=Math.round(Ai));var wo={ready:!0,offsetX:U/Zt,offsetY:$/Qt,offsetR:ao/Zt,offsetB:Ai/Qt,arrowX:mr/Zt,arrowY:Zi/Qt,scaleX:Zt,scaleY:Qt,align:oe};M(wo)}}),Z=function(){A.current+=1;var H=A.current;Promise.resolve().then(function(){A.current===H&&q()})},V=function(){M(function(H){return $e($e({},H),{},{ready:!1})})};return Ui(V,[a]),Ui(function(){e||V()},[e]),[T.ready,T.offsetX,T.offsetY,T.offsetR,T.offsetB,T.arrowX,T.arrowY,T.scaleX,T.scaleY,T.align,Z]}function E6(e,t,r,a,l){Ui(function(){if(e&&t&&r){let I=function(){a(),l()};var A=I,d=t,f=r,u=d1(d),S=d1(f),T=Gf(f),M=new Set([T].concat(Nt(u),Nt(S)));return M.forEach(function(G){G.addEventListener("scroll",I,{passive:!0})}),T.addEventListener("resize",I,{passive:!0}),a(),function(){M.forEach(function(G){G.removeEventListener("scroll",I),T.removeEventListener("resize",I)})}}},[e,t,r])}function T6(e,t,r,a,l,d,f,u){var S=L.useRef(e);S.current=e,L.useEffect(function(){if(t&&a&&(!l||d)){var T=function(G){var N;S.current&&!f(((N=G.composedPath)===null||N===void 0||(N=N.call(G))===null||N===void 0?void 0:N[0])||G.target)&&u(!1)},M=Gf(a);M.addEventListener("mousedown",T,!0),M.addEventListener("contextmenu",T,!0);var A=Eg(r);return A&&(A.addEventListener("mousedown",T,!0),A.addEventListener("contextmenu",T,!0)),function(){M.removeEventListener("mousedown",T,!0),M.removeEventListener("contextmenu",T,!0),A&&(A.removeEventListener("mousedown",T,!0),A.removeEventListener("contextmenu",T,!0))}}},[t,r,a,l,d])}var P6=["prefixCls","children","action","showAction","hideAction","popupVisible","defaultPopupVisible","onPopupVisibleChange","afterPopupVisibleChange","mouseEnterDelay","mouseLeaveDelay","focusDelay","blurDelay","mask","maskClosable","getPopupContainer","forceRender","autoDestroy","destroyPopupOnHide","popup","popupClassName","popupStyle","popupPlacement","builtinPlacements","popupAlign","zIndex","stretch","getPopupClassNameFromAlign","fresh","alignPoint","onPopupClick","onPopupAlign","arrow","popupMotion","maskMotion","popupTransitionName","popupAnimation","maskTransitionName","maskAnimation","className","getTriggerDOMNode"];function I6(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:$I,t=L.forwardRef(function(r,a){var l=r.prefixCls,d=l===void 0?"rc-trigger-popup":l,f=r.children,u=r.action,S=u===void 0?"hover":u,T=r.showAction,M=r.hideAction,A=r.popupVisible,I=r.defaultPopupVisible,G=r.onPopupVisibleChange,N=r.afterPopupVisibleChange,q=r.mouseEnterDelay,Z=r.mouseLeaveDelay,V=Z===void 0?.1:Z,F=r.focusDelay,H=r.blurDelay,Y=r.mask,ne=r.maskClosable,fe=ne===void 0?!0:ne,ie=r.getPopupContainer,_e=r.forceRender,be=r.autoDestroy,Pe=r.destroyPopupOnHide,ze=r.popup,We=r.popupClassName,Ce=r.popupStyle,Ie=r.popupPlacement,Ke=r.builtinPlacements,ke=Ke===void 0?{}:Ke,Se=r.popupAlign,ge=r.zIndex,Fe=r.stretch,Be=r.getPopupClassNameFromAlign,Ve=r.fresh,Ze=r.alignPoint,gt=r.onPopupClick,st=r.onPopupAlign,St=r.arrow,Et=r.popupMotion,Lt=r.maskMotion,Vt=r.popupTransitionName,or=r.popupAnimation,Jt=r.maskTransitionName,tr=r.maskAnimation,rr=r.className,Gr=r.getTriggerDOMNode,sr=xn(r,P6),Br=be||Pe||!1,Te=L.useState(!1),Ar=nt(Te,2),yr=Ar[0],mt=Ar[1];Ui(function(){mt(i6())},[]);var Ft=L.useRef({}),Xt=L.useContext(oC),Sr=L.useMemo(function(){return{registerSubPopup:function(Wt,Ur){Ft.current[Wt]=Ur,Xt==null||Xt.registerSubPopup(Wt,Ur)}}},[Xt]),Zt=BF(),Qt=L.useState(null),Cr=nt(Qt,2),vr=Cr[0],Nn=Cr[1],Xe=L.useRef(null),_r=po(function(Tt){Xe.current=Tt,xf(Tt)&&vr!==Tt&&Nn(Tt),Xt==null||Xt.registerSubPopup(Zt,Tt)}),nr=L.useState(null),Nr=nt(nr,2),Lr=Nr[0],Ye=Nr[1],Dt=L.useRef(null),ht=po(function(Tt){xf(Tt)&&Lr!==Tt&&(Ye(Tt),Dt.current=Tt)}),lr=L.Children.only(f),Dr=(lr==null?void 0:lr.props)||{},kt={},Zr=po(function(Tt){var Wt,Ur,Pn=Lr;return(Pn==null?void 0:Pn.contains(Tt))||((Wt=Eg(Pn))===null||Wt===void 0?void 0:Wt.host)===Tt||Tt===Pn||(vr==null?void 0:vr.contains(Tt))||((Ur=Eg(vr))===null||Ur===void 0?void 0:Ur.host)===Tt||Tt===vr||Object.values(Ft.current).some(function(gn){return(gn==null?void 0:gn.contains(Tt))||Tt===gn})}),Fr=sC(d,Et,or,Vt),Xr=sC(d,Lt,tr,Jt),Jr=L.useState(I||!1),oe=nt(Jr,2),U=oe[0],$=oe[1],X=A??U,te=po(function(Tt){A===void 0&&$(Tt)});Ui(function(){$(A||!1)},[A]);var se=L.useRef(X);se.current=X;var me=L.useRef([]);me.current=[];var xe=po(function(Tt){var Wt;te(Tt),((Wt=me.current[me.current.length-1])!==null&&Wt!==void 0?Wt:X)!==Tt&&(me.current.push(Tt),G==null||G(Tt))}),ue=L.useRef(),Re=function(){clearTimeout(ue.current)},je=function(Wt){var Ur=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;Re(),Ur===0?xe(Wt):ue.current=setTimeout(function(){xe(Wt)},Ur*1e3)};L.useEffect(function(){return Re},[]);var Le=L.useState(!1),Qe=nt(Le,2),vt=Qe[0],wt=Qe[1];Ui(function(Tt){(!Tt||X)&&wt(!0)},[X]);var At=L.useState(null),Kt=nt(At,2),zt=Kt[0],Yt=Kt[1],zr=L.useState([0,0]),cr=nt(zr,2),Ut=cr[0],fr=cr[1],Er=function(Wt){fr([Wt.clientX,Wt.clientY])},$r=C6(X,vr,Ze?Ut:Lr,Ie,ke,Se,st),Rr=nt($r,11),En=Rr[0],oo=Rr[1],pr=Rr[2],Ii=Rr[3],ki=Rr[4],An=Rr[5],bn=Rr[6],Ra=Rr[7],$n=Rr[8],jr=Rr[9],jn=Rr[10],qi=b6(yr,S,T,M),Yr=nt(qi,2),Fn=Yr[0],Wn=Yr[1],Hr=Fn.has("click"),Wi=Wn.has("click")||Wn.has("contextMenu"),mn=po(function(){vt||jn()}),bo=function(){se.current&&Ze&&Wi&&je(!1)};E6(X,Lr,vr,mn,bo),Ui(function(){mn()},[Ut,Ie]),Ui(function(){X&&!(ke!=null&&ke[Ie])&&mn()},[JSON.stringify(Se)]);var Mi=L.useMemo(function(){var Tt=S6(ke,d,jr,Ze);return Mr(Tt,Be==null?void 0:Be(jr))},[jr,Be,ke,d,Ze]);L.useImperativeHandle(a,function(){return{nativeElement:Dt.current,popupElement:Xe.current,forceAlign:mn}});var Vr=L.useState(0),ur=nt(Vr,2),mr=ur[0],qt=ur[1],Tn=L.useState(0),Gi=nt(Tn,2),Zi=Gi[0],ao=Gi[1],Ai=function(){if(Fe&&Lr){var Wt=Lr.getBoundingClientRect();qt(Wt.width),ao(Wt.height)}},wo=function(){Ai(),mn()},Ki=function(Wt){wt(!1),jn(),N==null||N(Wt)},so=function(){return new Promise(function(Wt){Ai(),Yt(function(){return Wt})})};Ui(function(){zt&&(jn(),zt(),Yt(null))},[zt]);function Qr(Tt,Wt,Ur,Pn){kt[Tt]=function(gn){var ks;Pn==null||Pn(gn),je(Wt,Ur);for(var Ms=arguments.length,Il=new Array(Ms>1?Ms-1:0),As=1;As<Ms;As++)Il[As-1]=arguments[As];(ks=Dr[Tt])===null||ks===void 0||ks.call.apply(ks,[Dr,gn].concat(Il))}}(Hr||Wi)&&(kt.onClick=function(Tt){var Wt;se.current&&Wi?je(!1):!se.current&&Hr&&(Er(Tt),je(!0));for(var Ur=arguments.length,Pn=new Array(Ur>1?Ur-1:0),gn=1;gn<Ur;gn++)Pn[gn-1]=arguments[gn];(Wt=Dr.onClick)===null||Wt===void 0||Wt.call.apply(Wt,[Dr,Tt].concat(Pn))}),T6(X,Wi,Lr,vr,Y,fe,Zr,je);var Xa=Fn.has("hover"),Is=Wn.has("hover"),lo,ca;Xa&&(Qr("onMouseEnter",!0,q,function(Tt){Er(Tt)}),Qr("onPointerEnter",!0,q,function(Tt){Er(Tt)}),lo=function(Wt){(X||vt)&&vr!==null&&vr!==void 0&&vr.contains(Wt.target)&&je(!0,q)},Ze&&(kt.onMouseMove=function(Tt){var Wt;(Wt=Dr.onMouseMove)===null||Wt===void 0||Wt.call(Dr,Tt)})),Is&&(Qr("onMouseLeave",!1,V),Qr("onPointerLeave",!1,V),ca=function(){je(!1,V)}),Fn.has("focus")&&Qr("onFocus",!0,F),Wn.has("focus")&&Qr("onBlur",!1,H),Fn.has("contextMenu")&&(kt.onContextMenu=function(Tt){var Wt;se.current&&Wn.has("contextMenu")?je(!1):(Er(Tt),je(!0)),Tt.preventDefault();for(var Ur=arguments.length,Pn=new Array(Ur>1?Ur-1:0),gn=1;gn<Ur;gn++)Pn[gn-1]=arguments[gn];(Wt=Dr.onContextMenu)===null||Wt===void 0||Wt.call.apply(Wt,[Dr,Tt].concat(Pn))}),rr&&(kt.className=Mr(Dr.className,rr));var yi=$e($e({},Dr),kt),So={},Qn=["onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"];Qn.forEach(function(Tt){sr[Tt]&&(So[Tt]=function(){for(var Wt,Ur=arguments.length,Pn=new Array(Ur),gn=0;gn<Ur;gn++)Pn[gn]=arguments[gn];(Wt=yi[Tt])===null||Wt===void 0||Wt.call.apply(Wt,[yi].concat(Pn)),sr[Tt].apply(sr,Pn)})});var ei=L.cloneElement(lr,$e($e({},yi),So)),ua={x:An,y:bn},La=St?$e({},St!==!0?St:{}):null;return L.createElement(L.Fragment,null,L.createElement(Vf,{disabled:!X,ref:ht,onResize:wo},L.createElement(x6,{getTriggerDOMNode:Gr},ei)),L.createElement(oC.Provider,{value:Sr},L.createElement(_6,{portal:e,ref:_r,prefixCls:d,popup:ze,className:Mr(We,Mi),style:Ce,target:Lr,onMouseEnter:lo,onMouseLeave:ca,onPointerEnter:lo,zIndex:ge,open:X,keepDom:vt,fresh:Ve,onClick:gt,mask:Y,motion:Fr,maskMotion:Xr,onVisibleChanged:Ki,onPrepare:so,forceRender:_e,autoDestroy:Br,getPopupContainer:ie,align:jr,arrow:La,arrowPos:ua,ready:En,offsetX:oo,offsetY:pr,offsetR:Ii,offsetB:ki,onAlign:mn,stretch:Fe,targetWidth:mr/Ra,targetHeight:Zi/$n})))});return t}const YI=I6($I);function QI(e){var t=e.children,r=e.prefixCls,a=e.id,l=e.overlayInnerStyle,d=e.className,f=e.style;return L.createElement("div",{className:Mr("".concat(r,"-content"),d),style:f},L.createElement("div",{className:"".concat(r,"-inner"),id:a,role:"tooltip",style:l},typeof t=="function"?t():t))}var yu={shiftX:64,adjustY:1},vu={adjustX:1,shiftY:!0},ea=[0,0],k6={left:{points:["cr","cl"],overflow:vu,offset:[-4,0],targetOffset:ea},right:{points:["cl","cr"],overflow:vu,offset:[4,0],targetOffset:ea},top:{points:["bc","tc"],overflow:yu,offset:[0,-4],targetOffset:ea},bottom:{points:["tc","bc"],overflow:yu,offset:[0,4],targetOffset:ea},topLeft:{points:["bl","tl"],overflow:yu,offset:[0,-4],targetOffset:ea},leftTop:{points:["tr","tl"],overflow:vu,offset:[-4,0],targetOffset:ea},topRight:{points:["br","tr"],overflow:yu,offset:[0,-4],targetOffset:ea},rightTop:{points:["tl","tr"],overflow:vu,offset:[4,0],targetOffset:ea},bottomRight:{points:["tr","br"],overflow:yu,offset:[0,4],targetOffset:ea},rightBottom:{points:["bl","br"],overflow:vu,offset:[4,0],targetOffset:ea},bottomLeft:{points:["tl","bl"],overflow:yu,offset:[0,4],targetOffset:ea},leftBottom:{points:["br","bl"],overflow:vu,offset:[-4,0],targetOffset:ea}},M6=["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","motion","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer","overlayInnerStyle","arrowContent","overlay","id","showArrow"],A6=function(t,r){var a=t.overlayClassName,l=t.trigger,d=l===void 0?["hover"]:l,f=t.mouseEnterDelay,u=f===void 0?0:f,S=t.mouseLeaveDelay,T=S===void 0?.1:S,M=t.overlayStyle,A=t.prefixCls,I=A===void 0?"rc-tooltip":A,G=t.children,N=t.onVisibleChange,q=t.afterVisibleChange,Z=t.transitionName,V=t.animation,F=t.motion,H=t.placement,Y=H===void 0?"right":H,ne=t.align,fe=ne===void 0?{}:ne,ie=t.destroyTooltipOnHide,_e=ie===void 0?!1:ie,be=t.defaultVisible,Pe=t.getTooltipContainer,ze=t.overlayInnerStyle;t.arrowContent;var We=t.overlay,Ce=t.id,Ie=t.showArrow,Ke=Ie===void 0?!0:Ie,ke=xn(t,M6),Se=L.useRef(null);L.useImperativeHandle(r,function(){return Se.current});var ge=$e({},ke);"visible"in t&&(ge.popupVisible=t.visible);var Fe=function(){return L.createElement(QI,{key:"content",prefixCls:I,id:Ce,overlayInnerStyle:ze},We)};return L.createElement(YI,br({popupClassName:a,prefixCls:I,popup:Fe,action:d,builtinPlacements:k6,popupPlacement:Y,ref:Se,popupAlign:fe,getPopupContainer:Pe,onPopupVisibleChange:N,afterPopupVisibleChange:q,popupTransitionName:Z,popupAnimation:V,popupMotion:F,defaultPopupVisible:be,autoDestroy:_e,mouseLeaveDelay:T,popupStyle:M,mouseEnterDelay:u,arrow:Ke},ge),G)};const z6=L.forwardRef(A6);function R6(e){const{sizePopupArrow:t,borderRadiusXS:r,borderRadiusOuter:a}=e,l=t/2,d=0,f=l,u=a*1/Math.sqrt(2),S=l-a*(1-1/Math.sqrt(2)),T=l-r*(1/Math.sqrt(2)),M=a*(Math.sqrt(2)-1)+r*(1/Math.sqrt(2)),A=2*l-T,I=M,G=2*l-u,N=S,q=2*l-d,Z=f,V=l*Math.sqrt(2)+a*(Math.sqrt(2)-2),F=a*(Math.sqrt(2)-1),H=`polygon(${F}px 100%, 50% ${F}px, ${2*l-F}px 100%, ${F}px 100%)`,Y=`path('M ${d} ${f} A ${a} ${a} 0 0 0 ${u} ${S} L ${T} ${M} A ${r} ${r} 0 0 1 ${A} ${I} L ${G} ${N} A ${a} ${a} 0 0 0 ${q} ${Z} Z')`;return{arrowShadowWidth:V,arrowPath:Y,arrowPolygon:H}}const L6=(e,t,r)=>{const{sizePopupArrow:a,arrowPolygon:l,arrowPath:d,arrowShadowWidth:f,borderRadiusXS:u,calc:S}=e;return{pointerEvents:"none",width:a,height:a,overflow:"hidden","&::before":{position:"absolute",bottom:0,insetInlineStart:0,width:a,height:S(a).div(2).equal(),background:t,clipPath:{_multi_value_:!0,value:[l,d]},content:'""'},"&::after":{content:'""',position:"absolute",width:f,height:f,bottom:0,insetInline:0,margin:"auto",borderRadius:{_skip_check_:!0,value:`0 0 ${Ir(u)} 0`},transform:"translateY(50%) rotate(-135deg)",boxShadow:r,zIndex:0,background:"transparent"}}},ek=8;function tk(e){const{contentRadius:t,limitVerticalRadius:r}=e,a=t>12?t+2:12;return{arrowOffsetHorizontal:a,arrowOffsetVertical:r?ek:a}}function wm(e,t){return e?t:{}}function D6(e,t,r){const{componentCls:a,boxShadowPopoverArrow:l,arrowOffsetVertical:d,arrowOffsetHorizontal:f}=e,{arrowDistance:u=0,arrowPlacement:S={left:!0,right:!0,top:!0,bottom:!0}}={};return{[a]:Object.assign(Object.assign(Object.assign(Object.assign({[`${a}-arrow`]:[Object.assign(Object.assign({position:"absolute",zIndex:1,display:"block"},L6(e,t,l)),{"&:before":{background:t}})]},wm(!!S.top,{[[`&-placement-top > ${a}-arrow`,`&-placement-topLeft > ${a}-arrow`,`&-placement-topRight > ${a}-arrow`].join(",")]:{bottom:u,transform:"translateY(100%) rotate(180deg)"},[`&-placement-top > ${a}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(100%) rotate(180deg)"},"&-placement-topLeft":{"--arrow-offset-horizontal":f,[`> ${a}-arrow`]:{left:{_skip_check_:!0,value:f}}},"&-placement-topRight":{"--arrow-offset-horizontal":`calc(100% - ${Ir(f)})`,[`> ${a}-arrow`]:{right:{_skip_check_:!0,value:f}}}})),wm(!!S.bottom,{[[`&-placement-bottom > ${a}-arrow`,`&-placement-bottomLeft > ${a}-arrow`,`&-placement-bottomRight > ${a}-arrow`].join(",")]:{top:u,transform:"translateY(-100%)"},[`&-placement-bottom > ${a}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(-100%)"},"&-placement-bottomLeft":{"--arrow-offset-horizontal":f,[`> ${a}-arrow`]:{left:{_skip_check_:!0,value:f}}},"&-placement-bottomRight":{"--arrow-offset-horizontal":`calc(100% - ${Ir(f)})`,[`> ${a}-arrow`]:{right:{_skip_check_:!0,value:f}}}})),wm(!!S.left,{[[`&-placement-left > ${a}-arrow`,`&-placement-leftTop > ${a}-arrow`,`&-placement-leftBottom > ${a}-arrow`].join(",")]:{right:{_skip_check_:!0,value:u},transform:"translateX(100%) rotate(90deg)"},[`&-placement-left > ${a}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(100%) rotate(90deg)"},[`&-placement-leftTop > ${a}-arrow`]:{top:d},[`&-placement-leftBottom > ${a}-arrow`]:{bottom:d}})),wm(!!S.right,{[[`&-placement-right > ${a}-arrow`,`&-placement-rightTop > ${a}-arrow`,`&-placement-rightBottom > ${a}-arrow`].join(",")]:{left:{_skip_check_:!0,value:u},transform:"translateX(-100%) rotate(-90deg)"},[`&-placement-right > ${a}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(-100%) rotate(-90deg)"},[`&-placement-rightTop > ${a}-arrow`]:{top:d},[`&-placement-rightBottom > ${a}-arrow`]:{bottom:d}}))}}function F6(e,t,r,a){if(a===!1)return{adjustX:!1,adjustY:!1};const l=a&&typeof a=="object"?a:{},d={};switch(e){case"top":case"bottom":d.shiftX=t.arrowOffsetHorizontal*2+r,d.shiftY=!0,d.adjustY=!0;break;case"left":case"right":d.shiftY=t.arrowOffsetVertical*2+r,d.shiftX=!0,d.adjustX=!0;break}const f=Object.assign(Object.assign({},d),l);return f.shiftX||(f.adjustX=!0),f.shiftY||(f.adjustY=!0),f}const dC={left:{points:["cr","cl"]},right:{points:["cl","cr"]},top:{points:["bc","tc"]},bottom:{points:["tc","bc"]},topLeft:{points:["bl","tl"]},leftTop:{points:["tr","tl"]},topRight:{points:["br","tr"]},rightTop:{points:["tl","tr"]},bottomRight:{points:["tr","br"]},rightBottom:{points:["bl","br"]},bottomLeft:{points:["tl","bl"]},leftBottom:{points:["br","bl"]}},O6={topLeft:{points:["bl","tc"]},leftTop:{points:["tr","cl"]},topRight:{points:["br","tc"]},rightTop:{points:["tl","cr"]},bottomRight:{points:["tr","bc"]},rightBottom:{points:["bl","cr"]},bottomLeft:{points:["tl","bc"]},leftBottom:{points:["br","cl"]}},B6=new Set(["topLeft","topRight","bottomLeft","bottomRight","leftTop","leftBottom","rightTop","rightBottom"]);function N6(e){const{arrowWidth:t,autoAdjustOverflow:r,arrowPointAtCenter:a,offset:l,borderRadius:d,visibleFirst:f}=e,u=t/2,S={};return Object.keys(dC).forEach(T=>{const M=a&&O6[T]||dC[T],A=Object.assign(Object.assign({},M),{offset:[0,0],dynamicInset:!0});switch(S[T]=A,B6.has(T)&&(A.autoArrow=!1),T){case"top":case"topLeft":case"topRight":A.offset[1]=-u-l;break;case"bottom":case"bottomLeft":case"bottomRight":A.offset[1]=u+l;break;case"left":case"leftTop":case"leftBottom":A.offset[0]=-u-l;break;case"right":case"rightTop":case"rightBottom":A.offset[0]=u+l;break}const I=tk({contentRadius:d,limitVerticalRadius:!0});if(a)switch(T){case"topLeft":case"bottomLeft":A.offset[0]=-I.arrowOffsetHorizontal-u;break;case"topRight":case"bottomRight":A.offset[0]=I.arrowOffsetHorizontal+u;break;case"leftTop":case"rightTop":A.offset[1]=-I.arrowOffsetHorizontal-u;break;case"leftBottom":case"rightBottom":A.offset[1]=I.arrowOffsetHorizontal+u;break}A.overflow=F6(T,I,t,r),f&&(A.htmlRegion="visibleFirst")}),S}const $6=e=>{const{componentCls:t,tooltipMaxWidth:r,tooltipColor:a,tooltipBg:l,tooltipBorderRadius:d,zIndexPopup:f,controlHeight:u,boxShadowSecondary:S,paddingSM:T,paddingXS:M}=e;return[{[t]:Object.assign(Object.assign(Object.assign(Object.assign({},yI(e)),{position:"absolute",zIndex:f,display:"block",width:"max-content",maxWidth:r,visibility:"visible","--valid-offset-x":"var(--arrow-offset-horizontal, var(--arrow-x))",transformOrigin:["var(--valid-offset-x, 50%)","var(--arrow-y, 50%)"].join(" "),"&-hidden":{display:"none"},"--antd-arrow-background-color":l,[`${t}-inner`]:{minWidth:"1em",minHeight:u,padding:`${Ir(e.calc(T).div(2).equal())} ${Ir(M)}`,color:a,textAlign:"start",textDecoration:"none",wordWrap:"break-word",backgroundColor:l,borderRadius:d,boxShadow:S,boxSizing:"border-box"},[["&-placement-left","&-placement-leftTop","&-placement-leftBottom","&-placement-right","&-placement-rightTop","&-placement-rightBottom"].join(",")]:{[`${t}-inner`]:{borderRadius:e.min(d,ek)}},[`${t}-content`]:{position:"relative"}}),kD(e,(A,I)=>{let{darkColor:G}=I;return{[`&${t}-${A}`]:{[`${t}-inner`]:{backgroundColor:G},[`${t}-arrow`]:{"--antd-arrow-background-color":G}}}})),{"&-rtl":{direction:"rtl"}})},D6(e,"var(--antd-arrow-background-color)"),{[`${t}-pure`]:{position:"relative",maxWidth:"none",margin:e.sizePopupArrow}}]},j6=e=>Object.assign(Object.assign({zIndexPopup:e.zIndexPopupBase+70},tk({contentRadius:e.borderRadius,limitVerticalRadius:!0})),R6(Yu(e,{borderRadiusOuter:Math.min(e.borderRadiusOuter,4)}))),rk=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Mx("Tooltip",a=>{const{borderRadius:l,colorTextLightSolid:d,colorBgSpotlight:f}=a,u=Yu(a,{tooltipMaxWidth:250,tooltipColor:d,tooltipBorderRadius:l,tooltipBg:f});return[$6(u),ZI(a,"zoom-big-fast")]},j6,{resetStyle:!1,injectStyle:t})(e)},V6=Cg.map(e=>`${e}-inverse`);function U6(e){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0)?[].concat(Nt(V6),Nt(Cg)).includes(e):Cg.includes(e)}function nk(e,t){const r=U6(t),a=Mr({[`${e}-${t}`]:t&&r}),l={},d={};return t&&!r&&(l.background=t,d["--antd-arrow-background-color"]=t),{className:a,overlayStyle:l,arrowStyle:d}}const H6=e=>{const{prefixCls:t,className:r,placement:a="top",title:l,color:d,overlayInnerStyle:f}=e,{getPrefixCls:u}=L.useContext(Ho),S=u("tooltip",t),[T,M,A]=rk(S),I=nk(S,d),G=I.arrowStyle,N=Object.assign(Object.assign({},f),I.overlayStyle),q=Mr(M,A,S,`${S}-pure`,`${S}-placement-${a}`,r,I.className);return T(L.createElement("div",{className:q,style:G},L.createElement("div",{className:`${S}-arrow`}),L.createElement(QI,Object.assign({},e,{className:M,prefixCls:S,overlayInnerStyle:N}),l)))};var q6=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,a=Object.getOwnPropertySymbols(e);l<a.length;l++)t.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(r[a[l]]=e[a[l]]);return r};const W6=L.forwardRef((e,t)=>{var r,a;const{prefixCls:l,openClassName:d,getTooltipContainer:f,overlayClassName:u,color:S,overlayInnerStyle:T,children:M,afterOpenChange:A,afterVisibleChange:I,destroyTooltipOnHide:G,arrow:N=!0,title:q,overlay:Z,builtinPlacements:V,arrowPointAtCenter:F=!1,autoAdjustOverflow:H=!0}=e,Y=!!N,[,ne]=ah(),{getPopupContainer:fe,getPrefixCls:ie,direction:_e}=L.useContext(Ho),be=tI(),Pe=L.useRef(null),ze=()=>{var Zt;(Zt=Pe.current)===null||Zt===void 0||Zt.forceAlign()};L.useImperativeHandle(t,()=>{var Zt;return{forceAlign:ze,forcePopupAlign:()=>{be.deprecated(!1,"forcePopupAlign","forceAlign"),ze()},nativeElement:(Zt=Pe.current)===null||Zt===void 0?void 0:Zt.nativeElement}});const[We,Ce]=Jd(!1,{value:(r=e.open)!==null&&r!==void 0?r:e.visible,defaultValue:(a=e.defaultOpen)!==null&&a!==void 0?a:e.defaultVisible}),Ie=!q&&!Z&&q!==0,Ke=Zt=>{var Qt,Cr;Ce(Ie?!1:Zt),Ie||((Qt=e.onOpenChange)===null||Qt===void 0||Qt.call(e,Zt),(Cr=e.onVisibleChange)===null||Cr===void 0||Cr.call(e,Zt))},ke=L.useMemo(()=>{var Zt,Qt;let Cr=F;return typeof N=="object"&&(Cr=(Qt=(Zt=N.pointAtCenter)!==null&&Zt!==void 0?Zt:N.arrowPointAtCenter)!==null&&Qt!==void 0?Qt:F),V||N6({arrowPointAtCenter:Cr,autoAdjustOverflow:H,arrowWidth:Y?ne.sizePopupArrow:0,borderRadius:ne.borderRadius,offset:ne.marginXXS,visibleFirst:!0})},[F,N,V,ne]),Se=L.useMemo(()=>q===0?q:Z||q||"",[Z,q]),ge=L.createElement(LO,{space:!0},typeof Se=="function"?Se():Se),{getPopupContainer:Fe,placement:Be="top",mouseEnterDelay:Ve=.1,mouseLeaveDelay:Ze=.1,overlayStyle:gt,rootClassName:st}=e,St=q6(e,["getPopupContainer","placement","mouseEnterDelay","mouseLeaveDelay","overlayStyle","rootClassName"]),Et=ie("tooltip",l),Lt=ie(),Vt=e["data-popover-inject"];let or=We;!("open"in e)&&!("visible"in e)&&Ie&&(or=!1);const Jt=L.isValidElement(M)&&!_F(M)?M:L.createElement("span",null,M),tr=Jt.props,rr=!tr.className||typeof tr.className=="string"?Mr(tr.className,d||`${Et}-open`):tr.className,[Gr,sr,Br]=rk(Et,!Vt),Te=nk(Et,S),Ar=Te.arrowStyle,yr=Object.assign(Object.assign({},T),Te.overlayStyle),mt=Mr(u,{[`${Et}-rtl`]:_e==="rtl"},Te.className,st,sr,Br),[Ft,Xt]=OI("Tooltip",St.zIndex),Sr=L.createElement(z6,Object.assign({},St,{zIndex:Ft,showArrow:Y,placement:Be,mouseEnterDelay:Ve,mouseLeaveDelay:Ze,prefixCls:Et,overlayClassName:mt,overlayStyle:Object.assign(Object.assign({},Ar),gt),getTooltipContainer:Fe||f||fe,ref:Pe,builtinPlacements:ke,overlay:ge,visible:or,onVisibleChange:Ke,afterVisibleChange:A??I,overlayInnerStyle:yr,arrowContent:L.createElement("span",{className:`${Et}-arrow-content`}),motion:{motionName:TF(Lt,"zoom-big-fast",e.transitionName),motionDeadline:1e3},destroyTooltipOnHide:!!G}),or?by(Jt,{className:rr}):Jt);return Gr(L.createElement(DI.Provider,{value:Xt},Sr))}),ik=W6;ik._InternalPanelDoNotUseOrYouWillBeFired=H6;var G6={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M765.7 486.8L314.9 134.7A7.97 7.97 0 00302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 000-50.4z"}}]},name:"right",theme:"outlined"},Z6=function(t,r){return L.createElement(Cc,br({},t,{ref:r,icon:G6}))},fC=L.forwardRef(Z6),ok=L.createContext(null);function ak(e,t){return e===void 0?null:"".concat(e,"-").concat(t)}function sk(e){var t=L.useContext(ok);return ak(t,e)}var K6=["children","locked"],Ma=L.createContext(null);function X6(e,t){var r=$e({},e);return Object.keys(t).forEach(function(a){var l=t[a];l!==void 0&&(r[a]=l)}),r}function Rf(e){var t=e.children,r=e.locked,a=xn(e,K6),l=L.useContext(Ma),d=hy(function(){return X6(l,a)},[l,a],function(f,u){return!r&&(f[0]!==u[0]||!Ef(f[1],u[1],!0))});return L.createElement(Ma.Provider,{value:d},t)}var J6=[],lk=L.createContext(null);function wy(){return L.useContext(lk)}var ck=L.createContext(J6);function lh(e){var t=L.useContext(ck);return L.useMemo(function(){return e!==void 0?[].concat(Nt(t),[e]):t},[t,e])}var uk=L.createContext(null),Rx=L.createContext({});function pC(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(BI(e)){var r=e.nodeName.toLowerCase(),a=["input","select","textarea","button"].includes(r)||e.isContentEditable||r==="a"&&!!e.getAttribute("href"),l=e.getAttribute("tabindex"),d=Number(l),f=null;return l&&!Number.isNaN(d)?f=d:a&&f===null&&(f=0),a&&e.disabled&&(f=null),f!==null&&(f>=0||t&&f<0)}return!1}function Y6(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=Nt(e.querySelectorAll("*")).filter(function(a){return pC(a,t)});return pC(e,t)&&r.unshift(e),r}var f1=$t.LEFT,p1=$t.RIGHT,m1=$t.UP,qm=$t.DOWN,Wm=$t.ENTER,hk=$t.ESC,zd=$t.HOME,Rd=$t.END,mC=[m1,qm,f1,p1];function Q6(e,t,r,a){var l,d,f,u,S="prev",T="next",M="children",A="parent";if(e==="inline"&&a===Wm)return{inlineTrigger:!0};var I=(l={},De(l,m1,S),De(l,qm,T),l),G=(d={},De(d,f1,r?T:S),De(d,p1,r?S:T),De(d,qm,M),De(d,Wm,M),d),N=(f={},De(f,m1,S),De(f,qm,T),De(f,Wm,M),De(f,hk,A),De(f,f1,r?M:A),De(f,p1,r?A:M),f),q={inline:I,horizontal:G,vertical:N,inlineSub:I,horizontalSub:N,verticalSub:N},Z=(u=q["".concat(e).concat(t?"":"Sub")])===null||u===void 0?void 0:u[a];switch(Z){case S:return{offset:-1,sibling:!0};case T:return{offset:1,sibling:!0};case A:return{offset:-1,sibling:!1};case M:return{offset:1,sibling:!1};default:return null}}function eB(e){for(var t=e;t;){if(t.getAttribute("data-menu-list"))return t;t=t.parentElement}return null}function tB(e,t){for(var r=e||document.activeElement;r;){if(t.has(r))return r;r=r.parentElement}return null}function Lx(e,t){var r=Y6(e,!0);return r.filter(function(a){return t.has(a)})}function gC(e,t,r){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;if(!e)return null;var l=Lx(e,t),d=l.length,f=l.findIndex(function(u){return r===u});return a<0?f===-1?f=d-1:f-=1:a>0&&(f+=1),f=(f+d)%d,l[f]}var g1=function(t,r){var a=new Set,l=new Map,d=new Map;return t.forEach(function(f){var u=document.querySelector("[data-menu-id='".concat(ak(r,f),"']"));u&&(a.add(u),d.set(u,f),l.set(f,u))}),{elements:a,key2element:l,element2key:d}};function rB(e,t,r,a,l,d,f,u,S,T){var M=L.useRef(),A=L.useRef();A.current=t;var I=function(){xs.cancel(M.current)};return L.useEffect(function(){return function(){I()}},[]),function(G){var N=G.which;if([].concat(mC,[Wm,hk,zd,Rd]).includes(N)){var q=d(),Z=g1(q,a),V=Z,F=V.elements,H=V.key2element,Y=V.element2key,ne=H.get(t),fe=tB(ne,F),ie=Y.get(fe),_e=Q6(e,f(ie,!0).length===1,r,N);if(!_e&&N!==zd&&N!==Rd)return;(mC.includes(N)||[zd,Rd].includes(N))&&G.preventDefault();var be=function(Se){if(Se){var ge=Se,Fe=Se.querySelector("a");Fe!=null&&Fe.getAttribute("href")&&(ge=Fe);var Be=Y.get(Se);u(Be),I(),M.current=xs(function(){A.current===Be&&ge.focus()})}};if([zd,Rd].includes(N)||_e.sibling||!fe){var Pe;!fe||e==="inline"?Pe=l.current:Pe=eB(fe);var ze,We=Lx(Pe,F);N===zd?ze=We[0]:N===Rd?ze=We[We.length-1]:ze=gC(Pe,F,fe,_e.offset),be(ze)}else if(_e.inlineTrigger)S(ie);else if(_e.offset>0)S(ie,!0),I(),M.current=xs(function(){Z=g1(q,a);var ke=fe.getAttribute("aria-controls"),Se=document.getElementById(ke),ge=gC(Se,Z.elements);be(ge)},5);else if(_e.offset<0){var Ce=f(ie,!0),Ie=Ce[Ce.length-2],Ke=H.get(Ie);S(Ie,!1),be(Ke)}}T==null||T(G)}}function nB(e){Promise.resolve().then(e)}var Dx="__RC_UTIL_PATH_SPLIT__",yC=function(t){return t.join(Dx)},iB=function(t){return t.split(Dx)},y1="rc-menu-more";function oB(){var e=L.useState({}),t=nt(e,2),r=t[1],a=L.useRef(new Map),l=L.useRef(new Map),d=L.useState([]),f=nt(d,2),u=f[0],S=f[1],T=L.useRef(0),M=L.useRef(!1),A=function(){M.current||r({})},I=L.useCallback(function(H,Y){var ne=yC(Y);l.current.set(ne,H),a.current.set(H,ne),T.current+=1;var fe=T.current;nB(function(){fe===T.current&&A()})},[]),G=L.useCallback(function(H,Y){var ne=yC(Y);l.current.delete(ne),a.current.delete(H)},[]),N=L.useCallback(function(H){S(H)},[]),q=L.useCallback(function(H,Y){var ne=a.current.get(H)||"",fe=iB(ne);return Y&&u.includes(fe[0])&&fe.unshift(y1),fe},[u]),Z=L.useCallback(function(H,Y){return H.filter(function(ne){return ne!==void 0}).some(function(ne){var fe=q(ne,!0);return fe.includes(Y)})},[q]),V=function(){var Y=Nt(a.current.keys());return u.length&&Y.push(y1),Y},F=L.useCallback(function(H){var Y="".concat(a.current.get(H)).concat(Dx),ne=new Set;return Nt(l.current.keys()).forEach(function(fe){fe.startsWith(Y)&&ne.add(l.current.get(fe))}),ne},[]);return L.useEffect(function(){return function(){M.current=!0}},[]),{registerPath:I,unregisterPath:G,refreshOverflowKeys:N,isSubPathKey:Z,getKeyPath:q,getKeys:V,getSubPathKeys:F}}function Nd(e){var t=L.useRef(e);t.current=e;var r=L.useCallback(function(){for(var a,l=arguments.length,d=new Array(l),f=0;f<l;f++)d[f]=arguments[f];return(a=t.current)===null||a===void 0?void 0:a.call.apply(a,[t].concat(d))},[]);return e?r:void 0}var aB=Math.random().toFixed(5).toString().slice(2),vC=0;function sB(e){var t=Jd(e,{value:e}),r=nt(t,2),a=r[0],l=r[1];return L.useEffect(function(){vC+=1;var d="".concat(aB,"-").concat(vC);l("rc-menu-uuid-".concat(d))},[]),a}function dk(e,t,r,a){var l=L.useContext(Ma),d=l.activeKey,f=l.onActive,u=l.onInactive,S={active:d===e};return t||(S.onMouseEnter=function(T){r==null||r({key:e,domEvent:T}),f(e)},S.onMouseLeave=function(T){a==null||a({key:e,domEvent:T}),u(e)}),S}function fk(e){var t=L.useContext(Ma),r=t.mode,a=t.rtl,l=t.inlineIndent;if(r!=="inline")return null;var d=e;return a?{paddingRight:d*l}:{paddingLeft:d*l}}function pk(e){var t=e.icon,r=e.props,a=e.children,l;return t===null||t===!1?null:(typeof t=="function"?l=L.createElement(t,$e({},r)):typeof t!="boolean"&&(l=t),l||a||null)}var lB=["item"];function Ig(e){var t=e.item,r=xn(e,lB);return Object.defineProperty(r,"item",{get:function(){return ro(!1,"`info.item` is deprecated since we will move to function component that not provides React Node instance in future."),t}}),r}var cB=["title","attribute","elementRef"],uB=["style","className","eventKey","warnKey","disabled","itemIcon","children","role","onMouseEnter","onMouseLeave","onClick","onKeyDown","onFocus"],hB=["active"],dB=function(e){Tl(r,e);var t=Pl(r);function r(){return Ti(this,r),t.apply(this,arguments)}return Pi(r,[{key:"render",value:function(){var l=this.props,d=l.title,f=l.attribute,u=l.elementRef,S=xn(l,cB),T=Sc(S,["eventKey","popupClassName","popupOffset","onTitleClick"]);return ro(!f,"`attribute` of Menu.Item is deprecated. Please pass attribute directly."),L.createElement(ws.Item,br({},f,{title:typeof d=="string"?d:void 0},T,{ref:u}))}}]),r}(L.Component),fB=L.forwardRef(function(e,t){var r,a=e.style,l=e.className,d=e.eventKey;e.warnKey;var f=e.disabled,u=e.itemIcon,S=e.children,T=e.role,M=e.onMouseEnter,A=e.onMouseLeave,I=e.onClick,G=e.onKeyDown,N=e.onFocus,q=xn(e,uB),Z=sk(d),V=L.useContext(Ma),F=V.prefixCls,H=V.onItemClick,Y=V.disabled,ne=V.overflowDisabled,fe=V.itemIcon,ie=V.selectedKeys,_e=V.onActive,be=L.useContext(Rx),Pe=be._internalRenderMenuItem,ze="".concat(F,"-item"),We=L.useRef(),Ce=L.useRef(),Ie=Y||f,Ke=dy(t,Ce),ke=lh(d),Se=function(Jt){return{key:d,keyPath:Nt(ke).reverse(),item:We.current,domEvent:Jt}},ge=u||fe,Fe=dk(d,Ie,M,A),Be=Fe.active,Ve=xn(Fe,hB),Ze=ie.includes(d),gt=fk(ke.length),st=function(Jt){if(!Ie){var tr=Se(Jt);I==null||I(Ig(tr)),H(tr)}},St=function(Jt){if(G==null||G(Jt),Jt.which===$t.ENTER){var tr=Se(Jt);I==null||I(Ig(tr)),H(tr)}},Et=function(Jt){_e(d),N==null||N(Jt)},Lt={};e.role==="option"&&(Lt["aria-selected"]=Ze);var Vt=L.createElement(dB,br({ref:We,elementRef:Ke,role:T===null?"none":T||"menuitem",tabIndex:f?null:-1,"data-menu-id":ne&&Z?null:Z},q,Ve,Lt,{component:"li","aria-disabled":f,style:$e($e({},gt),a),className:Mr(ze,(r={},De(r,"".concat(ze,"-active"),Be),De(r,"".concat(ze,"-selected"),Ze),De(r,"".concat(ze,"-disabled"),Ie),r),l),onClick:st,onKeyDown:St,onFocus:Et}),S,L.createElement(pk,{props:$e($e({},e),{},{isSelected:Ze}),icon:ge}));return Pe&&(Vt=Pe(Vt,e,{selected:Ze})),Vt});function pB(e,t){var r=e.eventKey,a=wy(),l=lh(r);return L.useEffect(function(){if(a)return a.registerPath(r,l),function(){a.unregisterPath(r,l)}},[l]),a?null:L.createElement(fB,br({},e,{ref:t}))}const Sy=L.forwardRef(pB);var mB=["className","children"],gB=function(t,r){var a=t.className,l=t.children,d=xn(t,mB),f=L.useContext(Ma),u=f.prefixCls,S=f.mode,T=f.rtl;return L.createElement("ul",br({className:Mr(u,T&&"".concat(u,"-rtl"),"".concat(u,"-sub"),"".concat(u,"-").concat(S==="inline"?"inline":"vertical"),a),role:"menu"},d,{"data-menu-list":!0,ref:r}),l)},Fx=L.forwardRef(gB);Fx.displayName="SubMenuList";function Ox(e,t){return xc(e).map(function(r,a){if(L.isValidElement(r)){var l,d,f=r.key,u=(l=(d=r.props)===null||d===void 0?void 0:d.eventKey)!==null&&l!==void 0?l:f,S=u==null;S&&(u="tmp_key-".concat([].concat(Nt(t),[a]).join("-")));var T={key:u,eventKey:u};return L.cloneElement(r,T)}return r})}var ji={adjustX:1,adjustY:1},yB={topLeft:{points:["bl","tl"],overflow:ji},topRight:{points:["br","tr"],overflow:ji},bottomLeft:{points:["tl","bl"],overflow:ji},bottomRight:{points:["tr","br"],overflow:ji},leftTop:{points:["tr","tl"],overflow:ji},leftBottom:{points:["br","bl"],overflow:ji},rightTop:{points:["tl","tr"],overflow:ji},rightBottom:{points:["bl","br"],overflow:ji}},vB={topLeft:{points:["bl","tl"],overflow:ji},topRight:{points:["br","tr"],overflow:ji},bottomLeft:{points:["tl","bl"],overflow:ji},bottomRight:{points:["tr","br"],overflow:ji},rightTop:{points:["tr","tl"],overflow:ji},rightBottom:{points:["br","bl"],overflow:ji},leftTop:{points:["tl","tr"],overflow:ji},leftBottom:{points:["bl","br"],overflow:ji}};function mk(e,t,r){if(t)return t;if(r)return r[e]||r.other}var _B={horizontal:"bottomLeft",vertical:"rightTop","vertical-left":"rightTop","vertical-right":"leftTop"};function xB(e){var t=e.prefixCls,r=e.visible,a=e.children,l=e.popup,d=e.popupStyle,f=e.popupClassName,u=e.popupOffset,S=e.disabled,T=e.mode,M=e.onVisibleChange,A=L.useContext(Ma),I=A.getPopupContainer,G=A.rtl,N=A.subMenuOpenDelay,q=A.subMenuCloseDelay,Z=A.builtinPlacements,V=A.triggerSubMenuAction,F=A.forceSubMenuRender,H=A.rootClassName,Y=A.motion,ne=A.defaultMotions,fe=L.useState(!1),ie=nt(fe,2),_e=ie[0],be=ie[1],Pe=$e(G?$e({},vB):$e({},yB),Z),ze=_B[T],We=mk(T,Y,ne),Ce=L.useRef(We);T!=="inline"&&(Ce.current=We);var Ie=$e($e({},Ce.current),{},{leavedClassName:"".concat(t,"-hidden"),removeOnLeave:!1,motionAppear:!0}),Ke=L.useRef();return L.useEffect(function(){return Ke.current=xs(function(){be(r)}),function(){xs.cancel(Ke.current)}},[r]),L.createElement(YI,{prefixCls:t,popupClassName:Mr("".concat(t,"-popup"),De({},"".concat(t,"-rtl"),G),f,H),stretch:T==="horizontal"?"minWidth":null,getPopupContainer:I,builtinPlacements:Pe,popupPlacement:ze,popupVisible:_e,popup:l,popupStyle:d,popupAlign:u&&{offset:u},action:S?[]:[V],mouseEnterDelay:N,mouseLeaveDelay:q,onPopupVisibleChange:M,forceRender:F,popupMotion:Ie,fresh:!0},a)}function bB(e){var t=e.id,r=e.open,a=e.keyPath,l=e.children,d="inline",f=L.useContext(Ma),u=f.prefixCls,S=f.forceSubMenuRender,T=f.motion,M=f.defaultMotions,A=f.mode,I=L.useRef(!1);I.current=A===d;var G=L.useState(!I.current),N=nt(G,2),q=N[0],Z=N[1],V=I.current?r:!1;L.useEffect(function(){I.current&&Z(!1)},[A]);var F=$e({},mk(d,T,M));a.length>1&&(F.motionAppear=!1);var H=F.onVisibleChanged;return F.onVisibleChanged=function(Y){return!I.current&&!Y&&Z(!0),H==null?void 0:H(Y)},q?null:L.createElement(Rf,{mode:d,locked:!I.current},L.createElement(xy,br({visible:V},F,{forceRender:S,removeOnLeave:!1,leavedClassName:"".concat(u,"-hidden")}),function(Y){var ne=Y.className,fe=Y.style;return L.createElement(Fx,{id:t,className:ne,style:fe},l)}))}var wB=["style","className","title","eventKey","warnKey","disabled","internalPopupClose","children","itemIcon","expandIcon","popupClassName","popupOffset","popupStyle","onClick","onMouseEnter","onMouseLeave","onTitleClick","onTitleMouseEnter","onTitleMouseLeave"],SB=["active"],CB=L.forwardRef(function(e,t){var r,a=e.style,l=e.className,d=e.title,f=e.eventKey;e.warnKey;var u=e.disabled,S=e.internalPopupClose,T=e.children,M=e.itemIcon,A=e.expandIcon,I=e.popupClassName,G=e.popupOffset,N=e.popupStyle,q=e.onClick,Z=e.onMouseEnter,V=e.onMouseLeave,F=e.onTitleClick,H=e.onTitleMouseEnter,Y=e.onTitleMouseLeave,ne=xn(e,wB),fe=sk(f),ie=L.useContext(Ma),_e=ie.prefixCls,be=ie.mode,Pe=ie.openKeys,ze=ie.disabled,We=ie.overflowDisabled,Ce=ie.activeKey,Ie=ie.selectedKeys,Ke=ie.itemIcon,ke=ie.expandIcon,Se=ie.onItemClick,ge=ie.onOpenChange,Fe=ie.onActive,Be=L.useContext(Rx),Ve=Be._internalRenderSubMenuItem,Ze=L.useContext(uk),gt=Ze.isSubPathKey,st=lh(),St="".concat(_e,"-submenu"),Et=ze||u,Lt=L.useRef(),Vt=L.useRef(),or=M??Ke,Jt=A??ke,tr=Pe.includes(f),rr=!We&&tr,Gr=gt(Ie,f),sr=dk(f,Et,H,Y),Br=sr.active,Te=xn(sr,SB),Ar=L.useState(!1),yr=nt(Ar,2),mt=yr[0],Ft=yr[1],Xt=function(lr){Et||Ft(lr)},Sr=function(lr){Xt(!0),Z==null||Z({key:f,domEvent:lr})},Zt=function(lr){Xt(!1),V==null||V({key:f,domEvent:lr})},Qt=L.useMemo(function(){return Br||(be!=="inline"?mt||gt([Ce],f):!1)},[be,Br,Ce,mt,f,gt]),Cr=fk(st.length),vr=function(lr){Et||(F==null||F({key:f,domEvent:lr}),be==="inline"&&ge(f,!tr))},Nn=Nd(function(ht){q==null||q(Ig(ht)),Se(ht)}),Xe=function(lr){be!=="inline"&&ge(f,lr)},_r=function(){Fe(f)},nr=fe&&"".concat(fe,"-popup"),Nr=L.createElement("div",br({role:"menuitem",style:Cr,className:"".concat(St,"-title"),tabIndex:Et?null:-1,ref:Lt,title:typeof d=="string"?d:null,"data-menu-id":We&&fe?null:fe,"aria-expanded":rr,"aria-haspopup":!0,"aria-controls":nr,"aria-disabled":Et,onClick:vr,onFocus:_r},Te),d,L.createElement(pk,{icon:be!=="horizontal"?Jt:void 0,props:$e($e({},e),{},{isOpen:rr,isSubMenu:!0})},L.createElement("i",{className:"".concat(St,"-arrow")}))),Lr=L.useRef(be);if(be!=="inline"&&st.length>1?Lr.current="vertical":Lr.current=be,!We){var Ye=Lr.current;Nr=L.createElement(xB,{mode:Ye,prefixCls:St,visible:!S&&rr&&be!=="inline",popupClassName:I,popupOffset:G,popupStyle:N,popup:L.createElement(Rf,{mode:Ye==="horizontal"?"vertical":Ye},L.createElement(Fx,{id:nr,ref:Vt},T)),disabled:Et,onVisibleChange:Xe},Nr)}var Dt=L.createElement(ws.Item,br({ref:t,role:"none"},ne,{component:"li",style:a,className:Mr(St,"".concat(St,"-").concat(be),l,(r={},De(r,"".concat(St,"-open"),rr),De(r,"".concat(St,"-active"),Qt),De(r,"".concat(St,"-selected"),Gr),De(r,"".concat(St,"-disabled"),Et),r)),onMouseEnter:Sr,onMouseLeave:Zt}),Nr,!We&&L.createElement(bB,{id:nr,open:rr,keyPath:st},T));return Ve&&(Dt=Ve(Dt,e,{selected:Gr,active:Qt,open:rr,disabled:Et})),L.createElement(Rf,{onItemClick:Nn,mode:be==="horizontal"?"vertical":be,itemIcon:or,expandIcon:Jt},Dt)}),Cy=L.forwardRef(function(e,t){var r=e.eventKey,a=e.children,l=lh(r),d=Ox(a,l),f=wy();L.useEffect(function(){if(f)return f.registerPath(r,l),function(){f.unregisterPath(r,l)}},[l]);var u;return f?u=d:u=L.createElement(CB,br({ref:t},e),d),L.createElement(ck.Provider,{value:l},u)});function Bx(e){var t=e.className,r=e.style,a=L.useContext(Ma),l=a.prefixCls,d=wy();return d?null:L.createElement("li",{role:"separator",className:Mr("".concat(l,"-item-divider"),t),style:r})}var EB=["className","title","eventKey","children"],TB=L.forwardRef(function(e,t){var r=e.className,a=e.title;e.eventKey;var l=e.children,d=xn(e,EB),f=L.useContext(Ma),u=f.prefixCls,S="".concat(u,"-item-group");return L.createElement("li",br({ref:t,role:"presentation"},d,{onClick:function(M){return M.stopPropagation()},className:Mr(S,r)}),L.createElement("div",{role:"presentation",className:"".concat(S,"-title"),title:typeof a=="string"?a:void 0},a),L.createElement("ul",{role:"group",className:"".concat(S,"-list")},l))}),Nx=L.forwardRef(function(e,t){var r=e.eventKey,a=e.children,l=lh(r),d=Ox(a,l),f=wy();return f?d:L.createElement(TB,br({ref:t},Sc(e,["warnKey"])),d)}),PB=["label","children","key","type"];function v1(e,t){var r=t.item,a=t.group,l=t.submenu,d=t.divider;return(e||[]).map(function(f,u){if(f&&ir(f)==="object"){var S=f,T=S.label,M=S.children,A=S.key,I=S.type,G=xn(S,PB),N=A??"tmp-".concat(u);return M||I==="group"?I==="group"?L.createElement(a,br({key:N},G,{title:T}),v1(M,t)):L.createElement(l,br({key:N},G,{title:T}),v1(M,t)):I==="divider"?L.createElement(d,br({key:N},G)):L.createElement(r,br({key:N},G),T)}return null}).filter(function(f){return f})}function _C(e,t,r,a){var l=e,d=$e({divider:Bx,item:Sy,group:Nx,submenu:Cy},a);return t&&(l=v1(t,d)),Ox(l,r)}var IB=["prefixCls","rootClassName","style","className","tabIndex","items","children","direction","id","mode","inlineCollapsed","disabled","disabledOverflow","subMenuOpenDelay","subMenuCloseDelay","forceSubMenuRender","defaultOpenKeys","openKeys","activeKey","defaultActiveFirst","selectable","multiple","defaultSelectedKeys","selectedKeys","onSelect","onDeselect","inlineIndent","motion","defaultMotions","triggerSubMenuAction","builtinPlacements","itemIcon","expandIcon","overflowedIndicator","overflowedIndicatorPopupClassName","getPopupContainer","onClick","onOpenChange","onKeyDown","openAnimation","openTransitionName","_internalRenderMenuItem","_internalRenderSubMenuItem","_internalComponents"],Ql=[],kB=L.forwardRef(function(e,t){var r,a,l=e,d=l.prefixCls,f=d===void 0?"rc-menu":d,u=l.rootClassName,S=l.style,T=l.className,M=l.tabIndex,A=M===void 0?0:M,I=l.items,G=l.children,N=l.direction,q=l.id,Z=l.mode,V=Z===void 0?"vertical":Z,F=l.inlineCollapsed,H=l.disabled,Y=l.disabledOverflow,ne=l.subMenuOpenDelay,fe=ne===void 0?.1:ne,ie=l.subMenuCloseDelay,_e=ie===void 0?.1:ie,be=l.forceSubMenuRender,Pe=l.defaultOpenKeys,ze=l.openKeys,We=l.activeKey,Ce=l.defaultActiveFirst,Ie=l.selectable,Ke=Ie===void 0?!0:Ie,ke=l.multiple,Se=ke===void 0?!1:ke,ge=l.defaultSelectedKeys,Fe=l.selectedKeys,Be=l.onSelect,Ve=l.onDeselect,Ze=l.inlineIndent,gt=Ze===void 0?24:Ze,st=l.motion,St=l.defaultMotions,Et=l.triggerSubMenuAction,Lt=Et===void 0?"hover":Et,Vt=l.builtinPlacements,or=l.itemIcon,Jt=l.expandIcon,tr=l.overflowedIndicator,rr=tr===void 0?"...":tr,Gr=l.overflowedIndicatorPopupClassName,sr=l.getPopupContainer,Br=l.onClick,Te=l.onOpenChange,Ar=l.onKeyDown;l.openAnimation,l.openTransitionName;var yr=l._internalRenderMenuItem,mt=l._internalRenderSubMenuItem,Ft=l._internalComponents,Xt=xn(l,IB),Sr=L.useMemo(function(){return[_C(G,I,Ql,Ft),_C(G,I,Ql,{})]},[G,I,Ft]),Zt=nt(Sr,2),Qt=Zt[0],Cr=Zt[1],vr=L.useState(!1),Nn=nt(vr,2),Xe=Nn[0],_r=Nn[1],nr=L.useRef(),Nr=sB(q),Lr=N==="rtl",Ye=Jd(Pe,{value:ze,postState:function(ur){return ur||Ql}}),Dt=nt(Ye,2),ht=Dt[0],lr=Dt[1],Dr=function(ur){var mr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;function qt(){lr(ur),Te==null||Te(ur)}mr?Nf.flushSync(qt):qt()},kt=L.useState(ht),Zr=nt(kt,2),Fr=Zr[0],Xr=Zr[1],Jr=L.useRef(!1),oe=L.useMemo(function(){return(V==="inline"||V==="vertical")&&F?["vertical",F]:[V,!1]},[V,F]),U=nt(oe,2),$=U[0],X=U[1],te=$==="inline",se=L.useState($),me=nt(se,2),xe=me[0],ue=me[1],Re=L.useState(X),je=nt(Re,2),Le=je[0],Qe=je[1];L.useEffect(function(){ue($),Qe(X),Jr.current&&(te?lr(Fr):Dr(Ql))},[$,X]);var vt=L.useState(0),wt=nt(vt,2),At=wt[0],Kt=wt[1],zt=At>=Qt.length-1||xe!=="horizontal"||Y;L.useEffect(function(){te&&Xr(ht)},[ht]),L.useEffect(function(){return Jr.current=!0,function(){Jr.current=!1}},[]);var Yt=oB(),zr=Yt.registerPath,cr=Yt.unregisterPath,Ut=Yt.refreshOverflowKeys,fr=Yt.isSubPathKey,Er=Yt.getKeyPath,$r=Yt.getKeys,Rr=Yt.getSubPathKeys,En=L.useMemo(function(){return{registerPath:zr,unregisterPath:cr}},[zr,cr]),oo=L.useMemo(function(){return{isSubPathKey:fr}},[fr]);L.useEffect(function(){Ut(zt?Ql:Qt.slice(At+1).map(function(Vr){return Vr.key}))},[At,zt]);var pr=Jd(We||Ce&&((r=Qt[0])===null||r===void 0?void 0:r.key),{value:We}),Ii=nt(pr,2),ki=Ii[0],An=Ii[1],bn=Nd(function(Vr){An(Vr)}),Ra=Nd(function(){An(void 0)});L.useImperativeHandle(t,function(){return{list:nr.current,focus:function(ur){var mr,qt=$r(),Tn=g1(qt,Nr),Gi=Tn.elements,Zi=Tn.key2element,ao=Tn.element2key,Ai=Lx(nr.current,Gi),wo=ki??(Ai[0]?ao.get(Ai[0]):(mr=Qt.find(function(Qr){return!Qr.props.disabled}))===null||mr===void 0?void 0:mr.key),Ki=Zi.get(wo);if(wo&&Ki){var so;Ki==null||(so=Ki.focus)===null||so===void 0||so.call(Ki,ur)}}}});var $n=Jd(ge||[],{value:Fe,postState:function(ur){return Array.isArray(ur)?ur:ur==null?Ql:[ur]}}),jr=nt($n,2),jn=jr[0],qi=jr[1],Yr=function(ur){if(Ke){var mr=ur.key,qt=jn.includes(mr),Tn;Se?qt?Tn=jn.filter(function(Zi){return Zi!==mr}):Tn=[].concat(Nt(jn),[mr]):Tn=[mr],qi(Tn);var Gi=$e($e({},ur),{},{selectedKeys:Tn});qt?Ve==null||Ve(Gi):Be==null||Be(Gi)}!Se&&ht.length&&xe!=="inline"&&Dr(Ql)},Fn=Nd(function(Vr){Br==null||Br(Ig(Vr)),Yr(Vr)}),Wn=Nd(function(Vr,ur){var mr=ht.filter(function(Tn){return Tn!==Vr});if(ur)mr.push(Vr);else if(xe!=="inline"){var qt=Rr(Vr);mr=mr.filter(function(Tn){return!qt.has(Tn)})}Ef(ht,mr,!0)||Dr(mr,!0)}),Hr=function(ur,mr){var qt=mr??!ht.includes(ur);Wn(ur,qt)},Wi=rB(xe,ki,Lr,Nr,nr,$r,Er,An,Hr,Ar);L.useEffect(function(){_r(!0)},[]);var mn=L.useMemo(function(){return{_internalRenderMenuItem:yr,_internalRenderSubMenuItem:mt}},[yr,mt]),bo=xe!=="horizontal"||Y?Qt:Qt.map(function(Vr,ur){return L.createElement(Rf,{key:Vr.key,overflowDisabled:ur>At},Vr)}),Mi=L.createElement(ws,br({id:q,ref:nr,prefixCls:"".concat(f,"-overflow"),component:"ul",itemComponent:Sy,className:Mr(f,"".concat(f,"-root"),"".concat(f,"-").concat(xe),T,(a={},De(a,"".concat(f,"-inline-collapsed"),Le),De(a,"".concat(f,"-rtl"),Lr),a),u),dir:N,style:S,role:"menu",tabIndex:A,data:bo,renderRawItem:function(ur){return ur},renderRawRest:function(ur){var mr=ur.length,qt=mr?Qt.slice(-mr):null;return L.createElement(Cy,{eventKey:y1,title:rr,disabled:zt,internalPopupClose:mr===0,popupClassName:Gr},qt)},maxCount:xe!=="horizontal"||Y?ws.INVALIDATE:ws.RESPONSIVE,ssr:"full","data-menu-list":!0,onVisibleChange:function(ur){Kt(ur)},onKeyDown:Wi},Xt));return L.createElement(Rx.Provider,{value:mn},L.createElement(ok.Provider,{value:Nr},L.createElement(Rf,{prefixCls:f,rootClassName:u,mode:xe,openKeys:ht,rtl:Lr,disabled:H,motion:Xe?st:null,defaultMotions:Xe?St:null,activeKey:ki,onActive:bn,onInactive:Ra,selectedKeys:jn,inlineIndent:gt,subMenuOpenDelay:fe,subMenuCloseDelay:_e,forceSubMenuRender:be,builtinPlacements:Vt,triggerSubMenuAction:Lt,getPopupContainer:sr,itemIcon:or,expandIcon:Jt,onItemClick:Fn,onOpenChange:Wn},L.createElement(uk.Provider,{value:oo},Mi),L.createElement("div",{style:{display:"none"},"aria-hidden":!0},L.createElement(lk.Provider,{value:En},Cr)))))}),Zf=kB;Zf.Item=Sy;Zf.SubMenu=Cy;Zf.ItemGroup=Nx;Zf.Divider=Bx;var MB={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM104 228a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"bars",theme:"outlined"},AB=function(t,r){return L.createElement(Cc,br({},t,{ref:r,icon:MB}))},zB=L.forwardRef(AB),RB={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 000 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"}}]},name:"left",theme:"outlined"},LB=function(t,r){return L.createElement(Cc,br({},t,{ref:r,icon:RB}))},xC=L.forwardRef(LB);const DB=e=>!isNaN(parseFloat(e))&&isFinite(e),gk=L.createContext({siderHook:{addSider:()=>null,removeSider:()=>null}});var FB=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,a=Object.getOwnPropertySymbols(e);l<a.length;l++)t.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(r[a[l]]=e[a[l]]);return r};const bC={xs:"479.98px",sm:"575.98px",md:"767.98px",lg:"991.98px",xl:"1199.98px",xxl:"1599.98px"},Ey=L.createContext({}),OB=(()=>{let e=0;return function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return e+=1,`${t}${e}`}})(),yk=L.forwardRef((e,t)=>{const{prefixCls:r,className:a,trigger:l,children:d,defaultCollapsed:f=!1,theme:u="dark",style:S={},collapsible:T=!1,reverseArrow:M=!1,width:A=200,collapsedWidth:I=80,zeroWidthTriggerStyle:G,breakpoint:N,onCollapse:q,onBreakpoint:Z}=e,V=FB(e,["prefixCls","className","trigger","children","defaultCollapsed","theme","style","collapsible","reverseArrow","width","collapsedWidth","zeroWidthTriggerStyle","breakpoint","onCollapse","onBreakpoint"]),{siderHook:F}=L.useContext(gk),[H,Y]=L.useState("collapsed"in e?e.collapsed:f),[ne,fe]=L.useState(!1);L.useEffect(()=>{"collapsed"in e&&Y(e.collapsed)},[e.collapsed]);const ie=(Ce,Ie)=>{"collapsed"in e||Y(Ce),q==null||q(Ce,Ie)},_e=L.useRef();_e.current=Ce=>{fe(Ce.matches),Z==null||Z(Ce.matches),H!==Ce.matches&&ie(Ce.matches,"responsive")},L.useEffect(()=>{function Ce(Ke){return _e.current(Ke)}let Ie;if(typeof window<"u"){const{matchMedia:Ke}=window;if(Ke&&N&&N in bC){Ie=Ke(`screen and (max-width: ${bC[N]})`);try{Ie.addEventListener("change",Ce)}catch{Ie.addListener(Ce)}Ce(Ie)}}return()=>{try{Ie==null||Ie.removeEventListener("change",Ce)}catch{Ie==null||Ie.removeListener(Ce)}}},[N]),L.useEffect(()=>{const Ce=OB("ant-sider-");return F.addSider(Ce),()=>F.removeSider(Ce)},[]);const be=()=>{ie(!H,"clickTrigger")},{getPrefixCls:Pe}=L.useContext(Ho),ze=()=>{const Ce=Pe("layout-sider",r),Ie=Sc(V,["collapsed"]),Ke=H?I:A,ke=DB(Ke)?`${Ke}px`:String(Ke),Se=parseFloat(String(I||0))===0?L.createElement("span",{onClick:be,className:Mr(`${Ce}-zero-width-trigger`,`${Ce}-zero-width-trigger-${M?"right":"left"}`),style:G},l||L.createElement(zB,null)):null,Be={expanded:M?L.createElement(fC,null):L.createElement(xC,null),collapsed:M?L.createElement(xC,null):L.createElement(fC,null)}[H?"collapsed":"expanded"],Ve=l!==null?Se||L.createElement("div",{className:`${Ce}-trigger`,onClick:be,style:{width:ke}},l||Be):null,Ze=Object.assign(Object.assign({},S),{flex:`0 0 ${ke}`,maxWidth:ke,minWidth:ke,width:ke}),gt=Mr(Ce,`${Ce}-${u}`,{[`${Ce}-collapsed`]:!!H,[`${Ce}-has-trigger`]:T&&l!==null&&!Se,[`${Ce}-below`]:!!ne,[`${Ce}-zero-width`]:parseFloat(ke)===0},a);return L.createElement("aside",Object.assign({className:gt},Ie,{style:Ze,ref:t}),L.createElement("div",{className:`${Ce}-children`},d),T||ne&&Se?Ve:null)},We=L.useMemo(()=>({siderCollapsed:H}),[H]);return L.createElement(Ey.Provider,{value:We},ze())});var BB={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M176 511a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"ellipsis",theme:"outlined"},NB=function(t,r){return L.createElement(Cc,br({},t,{ref:r,icon:BB}))},$B=L.forwardRef(NB);const kg=L.createContext({prefixCls:"",firstLevel:!0,inlineCollapsed:!1});var jB=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,a=Object.getOwnPropertySymbols(e);l<a.length;l++)t.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(r[a[l]]=e[a[l]]);return r};const vk=e=>{const{prefixCls:t,className:r,dashed:a}=e,l=jB(e,["prefixCls","className","dashed"]),{getPrefixCls:d}=L.useContext(Ho),f=d("menu",t),u=Mr({[`${f}-item-divider-dashed`]:!!a},r);return L.createElement(Bx,Object.assign({className:u},l))},_k=e=>{var t;const{className:r,children:a,icon:l,title:d,danger:f}=e,{prefixCls:u,firstLevel:S,direction:T,disableMenuItemTitleTooltip:M,inlineCollapsed:A}=L.useContext(kg),I=F=>{const H=L.createElement("span",{className:`${u}-title-content`},a);return(!l||L.isValidElement(a)&&a.type==="span")&&a&&F&&S&&typeof a=="string"?L.createElement("div",{className:`${u}-inline-collapsed-noicon`},a.charAt(0)):H},{siderCollapsed:G}=L.useContext(Ey);let N=d;typeof d>"u"?N=S?a:"":d===!1&&(N="");const q={title:N};!G&&!A&&(q.title=null,q.open=!1);const Z=xc(a).length;let V=L.createElement(Sy,Object.assign({},Sc(e,["title","icon","danger"]),{className:Mr({[`${u}-item-danger`]:f,[`${u}-item-only-child`]:(l?Z+1:Z)===1},r),title:typeof d=="string"?d:void 0}),by(l,{className:Mr(L.isValidElement(l)?(t=l.props)===null||t===void 0?void 0:t.className:"",`${u}-item-icon`)}),I(A));return M||(V=L.createElement(ik,Object.assign({},q,{placement:T==="rtl"?"left":"right",overlayClassName:`${u}-inline-collapsed-tooltip`}),V)),V},wC=L.createContext(null),VB=e=>{const{componentCls:t,motionDurationSlow:r,horizontalLineHeight:a,colorSplit:l,lineWidth:d,lineType:f,itemPaddingInline:u}=e;return{[`${t}-horizontal`]:{lineHeight:a,border:0,borderBottom:`${Ir(d)} ${f} ${l}`,boxShadow:"none","&::after":{display:"block",clear:"both",height:0,content:'"\\20"'},[`${t}-item, ${t}-submenu`]:{position:"relative",display:"inline-block",verticalAlign:"bottom",paddingInline:u},[`> ${t}-item:hover,
        > ${t}-item-active,
        > ${t}-submenu ${t}-submenu-title:hover`]:{backgroundColor:"transparent"},[`${t}-item, ${t}-submenu-title`]:{transition:[`border-color ${r}`,`background ${r}`].join(",")},[`${t}-submenu-arrow`]:{display:"none"}}}},UB=e=>{let{componentCls:t,menuArrowOffset:r,calc:a}=e;return{[`${t}-rtl`]:{direction:"rtl"},[`${t}-submenu-rtl`]:{transformOrigin:"100% 0"},[`${t}-rtl${t}-vertical,
    ${t}-submenu-rtl ${t}-vertical`]:{[`${t}-submenu-arrow`]:{"&::before":{transform:`rotate(-45deg) translateY(${Ir(a(r).mul(-1).equal())})`},"&::after":{transform:`rotate(45deg) translateY(${Ir(r)})`}}}}},SC=e=>Object.assign({},ID(e)),CC=(e,t)=>{const{componentCls:r,itemColor:a,itemSelectedColor:l,groupTitleColor:d,itemBg:f,subMenuItemBg:u,itemSelectedBg:S,activeBarHeight:T,activeBarWidth:M,activeBarBorderWidth:A,motionDurationSlow:I,motionEaseInOut:G,motionEaseOut:N,itemPaddingInline:q,motionDurationMid:Z,itemHoverColor:V,lineType:F,colorSplit:H,itemDisabledColor:Y,dangerItemColor:ne,dangerItemHoverColor:fe,dangerItemSelectedColor:ie,dangerItemActiveBg:_e,dangerItemSelectedBg:be,popupBg:Pe,itemHoverBg:ze,itemActiveBg:We,menuSubMenuBg:Ce,horizontalItemSelectedColor:Ie,horizontalItemSelectedBg:Ke,horizontalItemBorderRadius:ke,horizontalItemHoverBg:Se}=e;return{[`${r}-${t}, ${r}-${t} > ${r}`]:{color:a,background:f,[`&${r}-root:focus-visible`]:Object.assign({},SC(e)),[`${r}-item-group-title`]:{color:d},[`${r}-submenu-selected`]:{[`> ${r}-submenu-title`]:{color:l}},[`${r}-item, ${r}-submenu-title`]:{color:a,[`&:not(${r}-item-disabled):focus-visible`]:Object.assign({},SC(e))},[`${r}-item-disabled, ${r}-submenu-disabled`]:{color:`${Y} !important`},[`${r}-item:not(${r}-item-selected):not(${r}-submenu-selected)`]:{[`&:hover, > ${r}-submenu-title:hover`]:{color:V}},[`&:not(${r}-horizontal)`]:{[`${r}-item:not(${r}-item-selected)`]:{"&:hover":{backgroundColor:ze},"&:active":{backgroundColor:We}},[`${r}-submenu-title`]:{"&:hover":{backgroundColor:ze},"&:active":{backgroundColor:We}}},[`${r}-item-danger`]:{color:ne,[`&${r}-item:hover`]:{[`&:not(${r}-item-selected):not(${r}-submenu-selected)`]:{color:fe}},[`&${r}-item:active`]:{background:_e}},[`${r}-item a`]:{"&, &:hover":{color:"inherit"}},[`${r}-item-selected`]:{color:l,[`&${r}-item-danger`]:{color:ie},"a, a:hover":{color:"inherit"}},[`& ${r}-item-selected`]:{backgroundColor:S,[`&${r}-item-danger`]:{backgroundColor:be}},[`&${r}-submenu > ${r}`]:{backgroundColor:Ce},[`&${r}-popup > ${r}`]:{backgroundColor:Pe},[`&${r}-submenu-popup > ${r}`]:{backgroundColor:Pe},[`&${r}-horizontal`]:Object.assign(Object.assign({},t==="dark"?{borderBottom:0}:{}),{[`> ${r}-item, > ${r}-submenu`]:{top:A,marginTop:e.calc(A).mul(-1).equal(),marginBottom:0,borderRadius:ke,"&::after":{position:"absolute",insetInline:q,bottom:0,borderBottom:`${Ir(T)} solid transparent`,transition:`border-color ${I} ${G}`,content:'""'},"&:hover, &-active, &-open":{background:Se,"&::after":{borderBottomWidth:T,borderBottomColor:Ie}},"&-selected":{color:Ie,backgroundColor:Ke,"&:hover":{backgroundColor:Ke},"&::after":{borderBottomWidth:T,borderBottomColor:Ie}}}}),[`&${r}-root`]:{[`&${r}-inline, &${r}-vertical`]:{borderInlineEnd:`${Ir(A)} ${F} ${H}`}},[`&${r}-inline`]:{[`${r}-sub${r}-inline`]:{background:u},[`${r}-item`]:{position:"relative","&::after":{position:"absolute",insetBlock:0,insetInlineEnd:0,borderInlineEnd:`${Ir(M)} solid ${l}`,transform:"scaleY(0.0001)",opacity:0,transition:[`transform ${Z} ${N}`,`opacity ${Z} ${N}`].join(","),content:'""'},[`&${r}-item-danger`]:{"&::after":{borderInlineEndColor:ie}}},[`${r}-selected, ${r}-item-selected`]:{"&::after":{transform:"scaleY(1)",opacity:1,transition:[`transform ${Z} ${G}`,`opacity ${Z} ${G}`].join(",")}}}}}},EC=e=>{const{componentCls:t,itemHeight:r,itemMarginInline:a,padding:l,menuArrowSize:d,marginXS:f,itemMarginBlock:u,itemWidth:S}=e,T=e.calc(d).add(l).add(f).equal();return{[`${t}-item`]:{position:"relative",overflow:"hidden"},[`${t}-item, ${t}-submenu-title`]:{height:r,lineHeight:Ir(r),paddingInline:l,overflow:"hidden",textOverflow:"ellipsis",marginInline:a,marginBlock:u,width:S},[`> ${t}-item,
            > ${t}-submenu > ${t}-submenu-title`]:{height:r,lineHeight:Ir(r)},[`${t}-item-group-list ${t}-submenu-title,
            ${t}-submenu-title`]:{paddingInlineEnd:T}}},HB=e=>{const{componentCls:t,iconCls:r,itemHeight:a,colorTextLightSolid:l,dropdownWidth:d,controlHeightLG:f,motionDurationMid:u,motionEaseOut:S,paddingXL:T,itemMarginInline:M,fontSizeLG:A,motionDurationSlow:I,paddingXS:G,boxShadowSecondary:N,collapsedWidth:q,collapsedIconSize:Z}=e,V={height:a,lineHeight:Ir(a),listStylePosition:"inside",listStyleType:"disc"};return[{[t]:{"&-inline, &-vertical":Object.assign({[`&${t}-root`]:{boxShadow:"none"}},EC(e))},[`${t}-submenu-popup`]:{[`${t}-vertical`]:Object.assign(Object.assign({},EC(e)),{boxShadow:N})}},{[`${t}-submenu-popup ${t}-vertical${t}-sub`]:{minWidth:d,maxHeight:`calc(100vh - ${Ir(e.calc(f).mul(2.5).equal())})`,padding:"0",overflow:"hidden",borderInlineEnd:0,"&:not([class*='-active'])":{overflowX:"hidden",overflowY:"auto"}}},{[`${t}-inline`]:{width:"100%",[`&${t}-root`]:{[`${t}-item, ${t}-submenu-title`]:{display:"flex",alignItems:"center",transition:[`border-color ${I}`,`background ${I}`,`padding ${u} ${S}`,`padding-inline calc(50% - ${Ir(e.calc(A).div(2).equal())} - ${Ir(M)})`].join(","),[`> ${t}-title-content`]:{flex:"auto",minWidth:0,overflow:"hidden",textOverflow:"ellipsis"},"> *":{flex:"none"}}},[`${t}-sub${t}-inline`]:{padding:0,border:0,borderRadius:0,boxShadow:"none",[`& > ${t}-submenu > ${t}-submenu-title`]:V,[`& ${t}-item-group-title`]:{paddingInlineStart:T}},[`${t}-item`]:V}},{[`${t}-inline-collapsed`]:{width:q,[`&${t}-root`]:{[`${t}-item, ${t}-submenu ${t}-submenu-title`]:{[`> ${t}-inline-collapsed-noicon`]:{fontSize:A,textAlign:"center"}}},[`> ${t}-item,
          > ${t}-item-group > ${t}-item-group-list > ${t}-item,
          > ${t}-item-group > ${t}-item-group-list > ${t}-submenu > ${t}-submenu-title,
          > ${t}-submenu > ${t}-submenu-title`]:{insetInlineStart:0,paddingInline:`calc(50% - ${Ir(e.calc(A).div(2).equal())} - ${Ir(M)})`,textOverflow:"clip",[`
            ${t}-submenu-arrow,
            ${t}-submenu-expand-icon
          `]:{opacity:0},[`${t}-item-icon, ${r}`]:{margin:0,fontSize:Z,lineHeight:Ir(a),"+ span":{display:"inline-block",opacity:0}}},[`${t}-item-icon, ${r}`]:{display:"inline-block"},"&-tooltip":{pointerEvents:"none",[`${t}-item-icon, ${r}`]:{display:"none"},"a, a:hover":{color:l}},[`${t}-item-group-title`]:Object.assign(Object.assign({},ED),{paddingInline:G})}}]},TC=e=>{const{componentCls:t,motionDurationSlow:r,motionDurationMid:a,motionEaseInOut:l,motionEaseOut:d,iconCls:f,iconSize:u,iconMarginInlineEnd:S}=e;return{[`${t}-item, ${t}-submenu-title`]:{position:"relative",display:"block",margin:0,whiteSpace:"nowrap",cursor:"pointer",transition:[`border-color ${r}`,`background ${r}`,`padding ${r} ${l}`].join(","),[`${t}-item-icon, ${f}`]:{minWidth:u,fontSize:u,transition:[`font-size ${a} ${d}`,`margin ${r} ${l}`,`color ${r}`].join(","),"+ span":{marginInlineStart:S,opacity:1,transition:[`opacity ${r} ${l}`,`margin ${r}`,`color ${r}`].join(",")}},[`${t}-item-icon`]:Object.assign({},vI()),[`&${t}-item-only-child`]:{[`> ${f}, > ${t}-item-icon`]:{marginInlineEnd:0}}},[`${t}-item-disabled, ${t}-submenu-disabled`]:{background:"none !important",cursor:"not-allowed","&::after":{borderColor:"transparent !important"},a:{color:"inherit !important"},[`> ${t}-submenu-title`]:{color:"inherit !important",cursor:"not-allowed"}}}},PC=e=>{const{componentCls:t,motionDurationSlow:r,motionEaseInOut:a,borderRadius:l,menuArrowSize:d,menuArrowOffset:f}=e;return{[`${t}-submenu`]:{"&-expand-icon, &-arrow":{position:"absolute",top:"50%",insetInlineEnd:e.margin,width:d,color:"currentcolor",transform:"translateY(-50%)",transition:`transform ${r} ${a}, opacity ${r}`},"&-arrow":{"&::before, &::after":{position:"absolute",width:e.calc(d).mul(.6).equal(),height:e.calc(d).mul(.15).equal(),backgroundColor:"currentcolor",borderRadius:l,transition:[`background ${r} ${a}`,`transform ${r} ${a}`,`top ${r} ${a}`,`color ${r} ${a}`].join(","),content:'""'},"&::before":{transform:`rotate(45deg) translateY(${Ir(e.calc(f).mul(-1).equal())})`},"&::after":{transform:`rotate(-45deg) translateY(${Ir(f)})`}}}}},qB=e=>{const{antCls:t,componentCls:r,fontSize:a,motionDurationSlow:l,motionDurationMid:d,motionEaseInOut:f,paddingXS:u,padding:S,colorSplit:T,lineWidth:M,zIndexPopup:A,borderRadiusLG:I,subMenuItemBorderRadius:G,menuArrowSize:N,menuArrowOffset:q,lineType:Z,groupTitleLineHeight:V,groupTitleFontSize:F}=e;return[{"":{[`${r}`]:Object.assign(Object.assign({},IS()),{"&-hidden":{display:"none"}})},[`${r}-submenu-hidden`]:{display:"none"}},{[r]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},yI(e)),IS()),{marginBottom:0,paddingInlineStart:0,fontSize:a,lineHeight:0,listStyle:"none",outline:"none",transition:`width ${l} cubic-bezier(0.2, 0, 0, 1) 0s`,"ul, ol":{margin:0,padding:0,listStyle:"none"},"&-overflow":{display:"flex",[`${r}-item`]:{flex:"none"}},[`${r}-item, ${r}-submenu, ${r}-submenu-title`]:{borderRadius:e.itemBorderRadius},[`${r}-item-group-title`]:{padding:`${Ir(u)} ${Ir(S)}`,fontSize:F,lineHeight:V,transition:`all ${l}`},[`&-horizontal ${r}-submenu`]:{transition:[`border-color ${l} ${f}`,`background ${l} ${f}`].join(",")},[`${r}-submenu, ${r}-submenu-inline`]:{transition:[`border-color ${l} ${f}`,`background ${l} ${f}`,`padding ${d} ${f}`].join(",")},[`${r}-submenu ${r}-sub`]:{cursor:"initial",transition:[`background ${l} ${f}`,`padding ${l} ${f}`].join(",")},[`${r}-title-content`]:{transition:`color ${l}`,[`> ${t}-typography-ellipsis-single-line`]:{display:"inline",verticalAlign:"unset"}},[`${r}-item a`]:{"&::before":{position:"absolute",inset:0,backgroundColor:"transparent",content:'""'}},[`${r}-item-divider`]:{overflow:"hidden",lineHeight:0,borderColor:T,borderStyle:Z,borderWidth:0,borderTopWidth:M,marginBlock:M,padding:0,"&-dashed":{borderStyle:"dashed"}}}),TC(e)),{[`${r}-item-group`]:{[`${r}-item-group-list`]:{margin:0,padding:0,[`${r}-item, ${r}-submenu-title`]:{paddingInline:`${Ir(e.calc(a).mul(2).equal())} ${Ir(S)}`}}},"&-submenu":{"&-popup":{position:"absolute",zIndex:A,borderRadius:I,boxShadow:"none",transformOrigin:"0 0",[`&${r}-submenu`]:{background:"transparent"},"&::before":{position:"absolute",inset:0,zIndex:-1,width:"100%",height:"100%",opacity:0,content:'""'},[`> ${r}`]:Object.assign(Object.assign(Object.assign({borderRadius:I},TC(e)),PC(e)),{[`${r}-item, ${r}-submenu > ${r}-submenu-title`]:{borderRadius:G},[`${r}-submenu-title::after`]:{transition:`transform ${l} ${f}`}})},"\n          &-placement-leftTop,\n          &-placement-bottomRight,\n          ":{transformOrigin:"100% 0"},"\n          &-placement-leftBottom,\n          &-placement-topRight,\n          ":{transformOrigin:"100% 100%"},"\n          &-placement-rightBottom,\n          &-placement-topLeft,\n          ":{transformOrigin:"0 100%"},"\n          &-placement-bottomLeft,\n          &-placement-rightTop,\n          ":{transformOrigin:"0 0"},"\n          &-placement-leftTop,\n          &-placement-leftBottom\n          ":{paddingInlineEnd:e.paddingXS},"\n          &-placement-rightTop,\n          &-placement-rightBottom\n          ":{paddingInlineStart:e.paddingXS},"\n          &-placement-topRight,\n          &-placement-topLeft\n          ":{paddingBottom:e.paddingXS},"\n          &-placement-bottomRight,\n          &-placement-bottomLeft\n          ":{paddingTop:e.paddingXS}}}),PC(e)),{[`&-inline-collapsed ${r}-submenu-arrow,
        &-inline ${r}-submenu-arrow`]:{"&::before":{transform:`rotate(-45deg) translateX(${Ir(q)})`},"&::after":{transform:`rotate(45deg) translateX(${Ir(e.calc(q).mul(-1).equal())})`}},[`${r}-submenu-open${r}-submenu-inline > ${r}-submenu-title > ${r}-submenu-arrow`]:{transform:`translateY(${Ir(e.calc(N).mul(.2).mul(-1).equal())})`,"&::after":{transform:`rotate(-45deg) translateX(${Ir(e.calc(q).mul(-1).equal())})`},"&::before":{transform:`rotate(45deg) translateX(${Ir(q)})`}}})},{[`${t}-layout-header`]:{[r]:{lineHeight:"inherit"}}}]},WB=e=>{var t,r,a;const{colorPrimary:l,colorError:d,colorTextDisabled:f,colorErrorBg:u,colorText:S,colorTextDescription:T,colorBgContainer:M,colorFillAlter:A,colorFillContent:I,lineWidth:G,lineWidthBold:N,controlItemBgActive:q,colorBgTextHover:Z,controlHeightLG:V,lineHeight:F,colorBgElevated:H,marginXXS:Y,padding:ne,fontSize:fe,controlHeightSM:ie,fontSizeLG:_e,colorTextLightSolid:be,colorErrorHover:Pe}=e,ze=(t=e.activeBarWidth)!==null&&t!==void 0?t:0,We=(r=e.activeBarBorderWidth)!==null&&r!==void 0?r:G,Ce=(a=e.itemMarginInline)!==null&&a!==void 0?a:e.marginXXS,Ie=new eo(be).setAlpha(.65).toRgbString();return{dropdownWidth:160,zIndexPopup:e.zIndexPopupBase+50,radiusItem:e.borderRadiusLG,itemBorderRadius:e.borderRadiusLG,radiusSubMenuItem:e.borderRadiusSM,subMenuItemBorderRadius:e.borderRadiusSM,colorItemText:S,itemColor:S,colorItemTextHover:S,itemHoverColor:S,colorItemTextHoverHorizontal:l,horizontalItemHoverColor:l,colorGroupTitle:T,groupTitleColor:T,colorItemTextSelected:l,itemSelectedColor:l,colorItemTextSelectedHorizontal:l,horizontalItemSelectedColor:l,colorItemBg:M,itemBg:M,colorItemBgHover:Z,itemHoverBg:Z,colorItemBgActive:I,itemActiveBg:q,colorSubItemBg:A,subMenuItemBg:A,colorItemBgSelected:q,itemSelectedBg:q,colorItemBgSelectedHorizontal:"transparent",horizontalItemSelectedBg:"transparent",colorActiveBarWidth:0,activeBarWidth:ze,colorActiveBarHeight:N,activeBarHeight:N,colorActiveBarBorderSize:G,activeBarBorderWidth:We,colorItemTextDisabled:f,itemDisabledColor:f,colorDangerItemText:d,dangerItemColor:d,colorDangerItemTextHover:d,dangerItemHoverColor:d,colorDangerItemTextSelected:d,dangerItemSelectedColor:d,colorDangerItemBgActive:u,dangerItemActiveBg:u,colorDangerItemBgSelected:u,dangerItemSelectedBg:u,itemMarginInline:Ce,horizontalItemBorderRadius:0,horizontalItemHoverBg:"transparent",itemHeight:V,groupTitleLineHeight:F,collapsedWidth:V*2,popupBg:H,itemMarginBlock:Y,itemPaddingInline:ne,horizontalLineHeight:`${V*1.15}px`,iconSize:fe,iconMarginInlineEnd:ie-fe,collapsedIconSize:_e,groupTitleFontSize:fe,darkItemDisabledColor:new eo(be).setAlpha(.25).toRgbString(),darkItemColor:Ie,darkDangerItemColor:d,darkItemBg:"#001529",darkPopupBg:"#001529",darkSubMenuItemBg:"#000c17",darkItemSelectedColor:be,darkItemSelectedBg:l,darkDangerItemSelectedBg:d,darkItemHoverBg:"transparent",darkGroupTitleColor:Ie,darkItemHoverColor:be,darkDangerItemHoverColor:Pe,darkDangerItemSelectedColor:be,darkDangerItemActiveBg:d,itemWidth:ze?`calc(100% + ${We}px)`:`calc(100% - ${Ce*2}px)`}},GB=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return Mx("Menu",l=>{const{colorBgElevated:d,controlHeightLG:f,fontSize:u,darkItemColor:S,darkDangerItemColor:T,darkItemBg:M,darkSubMenuItemBg:A,darkItemSelectedColor:I,darkItemSelectedBg:G,darkDangerItemSelectedBg:N,darkItemHoverBg:q,darkGroupTitleColor:Z,darkItemHoverColor:V,darkItemDisabledColor:F,darkDangerItemHoverColor:H,darkDangerItemSelectedColor:Y,darkDangerItemActiveBg:ne,popupBg:fe,darkPopupBg:ie}=l,_e=l.calc(u).div(7).mul(5).equal(),be=Yu(l,{menuArrowSize:_e,menuHorizontalHeight:l.calc(f).mul(1.15).equal(),menuArrowOffset:l.calc(_e).mul(.25).equal(),menuSubMenuBg:d,calc:l.calc,popupBg:fe}),Pe=Yu(be,{itemColor:S,itemHoverColor:V,groupTitleColor:Z,itemSelectedColor:I,itemBg:M,popupBg:ie,subMenuItemBg:A,itemActiveBg:"transparent",itemSelectedBg:G,activeBarHeight:0,activeBarBorderWidth:0,itemHoverBg:q,itemDisabledColor:F,dangerItemColor:T,dangerItemHoverColor:H,dangerItemSelectedColor:Y,dangerItemActiveBg:ne,dangerItemSelectedBg:N,menuSubMenuBg:A,horizontalItemSelectedColor:I,horizontalItemSelectedBg:G});return[qB(be),VB(be),HB(be),CC(be,"light"),CC(Pe,"dark"),UB(be),DO(be),rC(be,"slide-up"),rC(be,"slide-down"),ZI(be,"zoom-big")]},WB,{deprecatedTokens:[["colorGroupTitle","groupTitleColor"],["radiusItem","itemBorderRadius"],["radiusSubMenuItem","subMenuItemBorderRadius"],["colorItemText","itemColor"],["colorItemTextHover","itemHoverColor"],["colorItemTextHoverHorizontal","horizontalItemHoverColor"],["colorItemTextSelected","itemSelectedColor"],["colorItemTextSelectedHorizontal","horizontalItemSelectedColor"],["colorItemTextDisabled","itemDisabledColor"],["colorDangerItemText","dangerItemColor"],["colorDangerItemTextHover","dangerItemHoverColor"],["colorDangerItemTextSelected","dangerItemSelectedColor"],["colorDangerItemBgActive","dangerItemActiveBg"],["colorDangerItemBgSelected","dangerItemSelectedBg"],["colorItemBg","itemBg"],["colorItemBgHover","itemHoverBg"],["colorSubItemBg","subMenuItemBg"],["colorItemBgActive","itemActiveBg"],["colorItemBgSelectedHorizontal","horizontalItemSelectedBg"],["colorActiveBarWidth","activeBarWidth"],["colorActiveBarHeight","activeBarHeight"],["colorActiveBarBorderSize","activeBarBorderWidth"],["colorItemBgSelected","itemSelectedBg"]],injectStyle:r,unitless:{groupTitleLineHeight:!0}})(e,t)},xk=e=>{var t;const{popupClassName:r,icon:a,title:l,theme:d}=e,f=L.useContext(kg),{prefixCls:u,inlineCollapsed:S,theme:T}=f,M=lh();let A;if(!a)A=S&&!M.length&&l&&typeof l=="string"?L.createElement("div",{className:`${u}-inline-collapsed-noicon`},l.charAt(0)):L.createElement("span",{className:`${u}-title-content`},l);else{const N=L.isValidElement(l)&&l.type==="span";A=L.createElement(L.Fragment,null,by(a,{className:Mr(L.isValidElement(a)?(t=a.props)===null||t===void 0?void 0:t.className:"",`${u}-item-icon`)}),N?l:L.createElement("span",{className:`${u}-title-content`},l))}const I=L.useMemo(()=>Object.assign(Object.assign({},f),{firstLevel:!1}),[f]),[G]=OI("Menu");return L.createElement(kg.Provider,{value:I},L.createElement(Cy,Object.assign({},Sc(e,["icon"]),{title:A,popupClassName:Mr(u,r,`${u}-${d||T}`),popupStyle:{zIndex:G}})))};var ZB=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,a=Object.getOwnPropertySymbols(e);l<a.length;l++)t.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(r[a[l]]=e[a[l]]);return r};function x0(e){return e===null||e===!1}const KB={item:_k,submenu:xk,divider:vk},XB=L.forwardRef((e,t)=>{var r;const a=L.useContext(wC),l=a||{},{getPrefixCls:d,getPopupContainer:f,direction:u,menu:S}=L.useContext(Ho),T=d(),{prefixCls:M,className:A,style:I,theme:G="light",expandIcon:N,_internalDisableMenuItemTitleTooltip:q,inlineCollapsed:Z,siderCollapsed:V,rootClassName:F,mode:H,selectable:Y,onClick:ne,overflowedIndicatorPopupClassName:fe}=e,ie=ZB(e,["prefixCls","className","style","theme","expandIcon","_internalDisableMenuItemTitleTooltip","inlineCollapsed","siderCollapsed","rootClassName","mode","selectable","onClick","overflowedIndicatorPopupClassName"]),_e=Sc(ie,["collapsedWidth"]);(r=l.validator)===null||r===void 0||r.call(l,{mode:H});const be=po(function(){var Ze;ne==null||ne.apply(void 0,arguments),(Ze=l.onClick)===null||Ze===void 0||Ze.call(l)}),Pe=l.mode||H,ze=Y??l.selectable,We=L.useMemo(()=>V!==void 0?V:Z,[Z,V]),Ce={horizontal:{motionName:`${T}-slide-up`},inline:EF(T),other:{motionName:`${T}-zoom-big`}},Ie=d("menu",M||l.prefixCls),Ke=bF(Ie),[ke,Se,ge]=GB(Ie,Ke,!a),Fe=Mr(`${Ie}-${G}`,S==null?void 0:S.className,A),Be=L.useMemo(()=>{var Ze,gt;if(typeof N=="function"||x0(N))return N||null;if(typeof l.expandIcon=="function"||x0(l.expandIcon))return l.expandIcon||null;if(typeof(S==null?void 0:S.expandIcon)=="function"||x0(S==null?void 0:S.expandIcon))return(S==null?void 0:S.expandIcon)||null;const st=(Ze=N??(l==null?void 0:l.expandIcon))!==null&&Ze!==void 0?Ze:S==null?void 0:S.expandIcon;return by(st,{className:Mr(`${Ie}-submenu-expand-icon`,L.isValidElement(st)?(gt=st.props)===null||gt===void 0?void 0:gt.className:void 0)})},[N,l==null?void 0:l.expandIcon,S==null?void 0:S.expandIcon,Ie]),Ve=L.useMemo(()=>({prefixCls:Ie,inlineCollapsed:We||!1,direction:u,firstLevel:!0,theme:G,mode:Pe,disableMenuItemTitleTooltip:q}),[Ie,We,u,q,G]);return ke(L.createElement(wC.Provider,{value:null},L.createElement(kg.Provider,{value:Ve},L.createElement(Zf,Object.assign({getPopupContainer:f,overflowedIndicator:L.createElement($B,null),overflowedIndicatorPopupClassName:Mr(Ie,`${Ie}-${G}`,fe),mode:Pe,selectable:ze,onClick:be},_e,{inlineCollapsed:We,style:Object.assign(Object.assign({},S==null?void 0:S.style),I),className:Fe,prefixCls:Ie,direction:u,defaultMotions:Ce,expandIcon:Be,ref:t,rootClassName:Mr(F,Se,l.rootClassName,ge,Ke),_internalComponents:KB})))))}),ho=L.forwardRef((e,t)=>{const r=L.useRef(null),a=L.useContext(Ey);return L.useImperativeHandle(t,()=>({menu:r.current,focus:l=>{var d;(d=r.current)===null||d===void 0||d.focus(l)}})),L.createElement(XB,Object.assign({ref:r},e,a))});ho.Item=_k;ho.SubMenu=xk;ho.Divider=vk;ho.ItemGroup=Nx;function JB(e,t,r){return typeof r=="boolean"?r:e.length?!0:xc(t).some(l=>l.type===yk)}const YB=e=>{const{componentCls:t,bodyBg:r,lightSiderBg:a,lightTriggerBg:l,lightTriggerColor:d}=e;return{[`${t}-sider-light`]:{background:a,[`${t}-sider-trigger`]:{color:d,background:l},[`${t}-sider-zero-width-trigger`]:{color:d,background:l,border:`1px solid ${r}`,borderInlineStart:0}}}},QB=e=>{const{antCls:t,componentCls:r,colorText:a,triggerColor:l,footerBg:d,triggerBg:f,headerHeight:u,headerPadding:S,headerColor:T,footerPadding:M,triggerHeight:A,zeroTriggerHeight:I,zeroTriggerWidth:G,motionDurationMid:N,motionDurationSlow:q,fontSize:Z,borderRadius:V,bodyBg:F,headerBg:H,siderBg:Y}=e;return{[r]:Object.assign(Object.assign({display:"flex",flex:"auto",flexDirection:"column",minHeight:0,background:F,"&, *":{boxSizing:"border-box"},[`&${r}-has-sider`]:{flexDirection:"row",[`> ${r}, > ${r}-content`]:{width:0}},[`${r}-header, &${r}-footer`]:{flex:"0 0 auto"},[`${r}-sider`]:{position:"relative",minWidth:0,background:Y,transition:`all ${N}, background 0s`,"&-children":{height:"100%",marginTop:-.1,paddingTop:.1,[`${t}-menu${t}-menu-inline-collapsed`]:{width:"auto"}},"&-has-trigger":{paddingBottom:A},"&-right":{order:1},"&-trigger":{position:"fixed",bottom:0,zIndex:1,height:A,color:l,lineHeight:Ir(A),textAlign:"center",background:f,cursor:"pointer",transition:`all ${N}`},"&-zero-width":{"> *":{overflow:"hidden"},"&-trigger":{position:"absolute",top:u,insetInlineEnd:e.calc(G).mul(-1).equal(),zIndex:1,width:G,height:I,color:l,fontSize:e.fontSizeXL,display:"flex",alignItems:"center",justifyContent:"center",background:Y,borderStartStartRadius:0,borderStartEndRadius:V,borderEndEndRadius:V,borderEndStartRadius:0,cursor:"pointer",transition:`background ${q} ease`,"&::after":{position:"absolute",inset:0,background:"transparent",transition:`all ${q}`,content:'""'},"&:hover::after":{background:"rgba(255, 255, 255, 0.2)"},"&-right":{insetInlineStart:e.calc(G).mul(-1).equal(),borderStartStartRadius:V,borderStartEndRadius:0,borderEndEndRadius:0,borderEndStartRadius:V}}}}},YB(e)),{"&-rtl":{direction:"rtl"}}),[`${r}-header`]:{height:u,padding:S,color:T,lineHeight:Ir(u),background:H,[`${t}-menu`]:{lineHeight:"inherit"}},[`${r}-footer`]:{padding:M,color:a,fontSize:Z,background:d},[`${r}-content`]:{flex:"auto",color:a,minHeight:0}}},e8=e=>{const{colorBgLayout:t,controlHeight:r,controlHeightLG:a,colorText:l,controlHeightSM:d,marginXXS:f,colorTextLightSolid:u,colorBgContainer:S}=e,T=a*1.25;return{colorBgHeader:"#001529",colorBgBody:t,colorBgTrigger:"#002140",bodyBg:t,headerBg:"#001529",headerHeight:r*2,headerPadding:`0 ${T}px`,headerColor:l,footerPadding:`${d}px ${T}px`,footerBg:t,siderBg:"#001529",triggerHeight:a+f*2,triggerBg:"#002140",triggerColor:u,zeroTriggerWidth:a,zeroTriggerHeight:a,lightSiderBg:S,lightTriggerBg:S,lightTriggerColor:l}},bk=Mx("Layout",e=>[QB(e)],e8,{deprecatedTokens:[["colorBgBody","bodyBg"],["colorBgHeader","headerBg"],["colorBgTrigger","triggerBg"]]});var wk=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,a=Object.getOwnPropertySymbols(e);l<a.length;l++)t.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(r[a[l]]=e[a[l]]);return r};function Ty(e){let{suffixCls:t,tagName:r,displayName:a}=e;return l=>L.forwardRef((f,u)=>L.createElement(l,Object.assign({ref:u,suffixCls:t,tagName:r},f)))}const $x=L.forwardRef((e,t)=>{const{prefixCls:r,suffixCls:a,className:l,tagName:d}=e,f=wk(e,["prefixCls","suffixCls","className","tagName"]),{getPrefixCls:u}=L.useContext(Ho),S=u("layout",r),[T,M,A]=bk(S),I=a?`${S}-${a}`:S;return T(L.createElement(d,Object.assign({className:Mr(r||I,l,M,A),ref:t},f)))}),t8=L.forwardRef((e,t)=>{const{direction:r}=L.useContext(Ho),[a,l]=L.useState([]),{prefixCls:d,className:f,rootClassName:u,children:S,hasSider:T,tagName:M,style:A}=e,I=wk(e,["prefixCls","className","rootClassName","children","hasSider","tagName","style"]),G=Sc(I,["suffixCls"]),{getPrefixCls:N,layout:q}=L.useContext(Ho),Z=N("layout",d),V=JB(a,S,T),[F,H,Y]=bk(Z),ne=Mr(Z,{[`${Z}-has-sider`]:V,[`${Z}-rtl`]:r==="rtl"},q==null?void 0:q.className,f,u,H,Y),fe=L.useMemo(()=>({siderHook:{addSider:ie=>{l(_e=>[].concat(Nt(_e),[ie]))},removeSider:ie=>{l(_e=>_e.filter(be=>be!==ie))}}}),[]);return F(L.createElement(gk.Provider,{value:fe},L.createElement(M,Object.assign({ref:t,className:ne,style:Object.assign(Object.assign({},q==null?void 0:q.style),A)},G),S)))}),r8=Ty({tagName:"div",displayName:"Layout"})(t8),n8=Ty({suffixCls:"header",tagName:"header",displayName:"Header"})($x),i8=Ty({suffixCls:"footer",tagName:"footer",displayName:"Footer"})($x),o8=Ty({suffixCls:"content",tagName:"main",displayName:"Content"})($x),wl=r8;wl.Header=n8;wl.Footer=i8;wl.Content=o8;wl.Sider=yk;wl._InternalSiderContext=Ey;var Sk={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},IC=nn.createContext&&nn.createContext(Sk),a8=["attr","size","title"];function s8(e,t){if(e==null)return{};var r=l8(e,t),a,l;if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(l=0;l<d.length;l++)a=d[l],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function l8(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function Mg(){return Mg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Mg.apply(this,arguments)}function kC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function Ag(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kC(Object(r),!0).forEach(function(a){c8(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kC(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function c8(e,t,r){return t=u8(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u8(e){var t=h8(e,"string");return typeof t=="symbol"?t:t+""}function h8(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ck(e){return e&&e.map((t,r)=>nn.createElement(t.tag,Ag({key:r},t.attr),Ck(t.child)))}function za(e){return t=>nn.createElement(d8,Mg({attr:Ag({},e.attr)},t),Ck(e.child))}function d8(e){var t=r=>{var{attr:a,size:l,title:d}=e,f=s8(e,a8),u=l||r.size||"1em",S;return r.className&&(S=r.className),e.className&&(S=(S?S+" ":"")+e.className),nn.createElement("svg",Mg({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,a,f,{className:S,style:Ag(Ag({color:e.color||r.color},r.style),e.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),d&&nn.createElement("title",null,d),e.children)};return IC!==void 0?nn.createElement(IC.Consumer,null,r=>t(r)):t(Sk)}function f8(e){return za({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M391.17,103.47H352.54v109.7h38.63ZM285,103H246.37V212.75H285ZM120.83,0,24.31,91.42V420.58H140.14V512l96.53-91.42h77.25L487.69,256V0ZM449.07,237.75l-77.22,73.12H294.61l-67.6,64v-64H140.14V36.58H449.07Z"},child:[]}]})(e)}function p8(e){return za({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"},child:[]}]})(e)}function m8(e){return za({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M57.7 193l9.4 16.4c8.3 14.5 21.9 25.2 38 29.8L163 255.7c17.2 4.9 29 20.6 29 38.5v39.9c0 11 6.2 21 16 25.9s16 14.9 16 25.9v39c0 15.6 14.9 26.9 29.9 22.6c16.1-4.6 28.6-17.5 32.7-33.8l2.8-11.2c4.2-16.9 15.2-31.4 30.3-40l8.1-4.6c15-8.5 24.2-24.5 24.2-41.7v-8.3c0-12.7-5.1-24.9-14.1-33.9l-3.9-3.9c-9-9-21.2-14.1-33.9-14.1H257c-11.1 0-22.1-2.9-31.8-8.4l-34.5-19.7c-4.3-2.5-7.6-6.5-9.2-11.2c-3.2-9.6 1.1-20 10.2-24.5l5.9-3c6.6-3.3 14.3-3.9 21.3-1.5l23.2 7.7c8.2 2.7 17.2-.4 21.9-7.5c4.7-7 4.2-16.3-1.2-22.8l-13.6-16.3c-10-12-9.9-29.5 .3-41.3l15.7-18.3c8.8-10.3 10.2-25 3.5-36.7l-2.4-4.2c-3.5-.2-6.9-.3-10.4-.3C163.1 48 84.4 108.9 57.7 193zM464 256c0-36.8-9.6-71.4-26.4-101.5L412 164.8c-15.7 6.3-23.8 23.8-18.5 39.8l16.9 50.7c3.5 10.4 12 18.3 22.6 20.9l29.1 7.3c1.2-9 1.8-18.2 1.8-27.5zM0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256z"},child:[]}]})(e)}function g8(e){return za({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M495.9 166.6c3.2 8.7 .5 18.4-6.4 24.6l-43.3 39.4c1.1 8.3 1.7 16.8 1.7 25.4s-.6 17.1-1.7 25.4l43.3 39.4c6.9 6.2 9.6 15.9 6.4 24.6c-4.4 11.9-9.7 23.3-15.8 34.3l-4.7 8.1c-6.6 11-14 21.4-22.1 31.2c-5.9 7.2-15.7 9.6-24.5 6.8l-55.7-17.7c-13.4 10.3-28.2 18.9-44 25.4l-12.5 57.1c-2 9.1-9 16.3-18.2 17.8c-13.8 2.3-28 3.5-42.5 3.5s-28.7-1.2-42.5-3.5c-9.2-1.5-16.2-8.7-18.2-17.8l-12.5-57.1c-15.8-6.5-30.6-15.1-44-25.4L83.1 425.9c-8.8 2.8-18.6 .3-24.5-6.8c-8.1-9.8-15.5-20.2-22.1-31.2l-4.7-8.1c-6.1-11-11.4-22.4-15.8-34.3c-3.2-8.7-.5-18.4 6.4-24.6l43.3-39.4C64.6 273.1 64 264.6 64 256s.6-17.1 1.7-25.4L22.4 191.2c-6.9-6.2-9.6-15.9-6.4-24.6c4.4-11.9 9.7-23.3 15.8-34.3l4.7-8.1c6.6-11 14-21.4 22.1-31.2c5.9-7.2 15.7-9.6 24.5-6.8l55.7 17.7c13.4-10.3 28.2-18.9 44-25.4l12.5-57.1c2-9.1 9-16.3 18.2-17.8C227.3 1.2 241.5 0 256 0s28.7 1.2 42.5 3.5c9.2 1.5 16.2 8.7 18.2 17.8l12.5 57.1c15.8 6.5 30.6 15.1 44 25.4l55.7-17.7c8.8-2.8 18.6-.3 24.5 6.8c8.1 9.8 15.5 20.2 22.1 31.2l4.7 8.1c6.1 11 11.4 22.4 15.8 34.3zM256 336a80 80 0 1 0 0-160 80 80 0 1 0 0 160z"},child:[]}]})(e)}function y8(e){return za({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M482.3 192c34.2 0 93.7 29 93.7 64c0 36-59.5 64-93.7 64l-116.6 0L265.2 495.9c-5.7 10-16.3 16.1-27.8 16.1l-56.2 0c-10.6 0-18.3-10.2-15.4-20.4l49-171.6L112 320 68.8 377.6c-3 4-7.8 6.4-12.8 6.4l-42 0c-7.8 0-14-6.3-14-14c0-1.3 .2-2.6 .5-3.9L32 256 .5 145.9c-.4-1.3-.5-2.6-.5-3.9c0-7.8 6.3-14 14-14l42 0c5 0 9.8 2.4 12.8 6.4L112 192l102.9 0-49-171.6C162.9 10.2 170.6 0 181.2 0l56.2 0c11.5 0 22.1 6.2 27.8 16.1L365.7 192l116.6 0z"},child:[]}]})(e)}function v8(e){return za({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M377.9 105.9L500.7 228.7c7.2 7.2 11.3 17.1 11.3 27.3s-4.1 20.1-11.3 27.3L377.9 406.1c-6.4 6.4-15 9.9-24 9.9c-18.7 0-33.9-15.2-33.9-33.9l0-62.1-128 0c-17.7 0-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32l128 0 0-62.1c0-18.7 15.2-33.9 33.9-33.9c9 0 17.6 3.6 24 9.9zM160 96L96 96c-17.7 0-32 14.3-32 32l0 256c0 17.7 14.3 32 32 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-64 0c-53 0-96-43-96-96L0 128C0 75 43 32 96 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32z"},child:[]}]})(e)}function _8(e){return za({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M192 32c0-17.7 14.3-32 32-32C383.1 0 512 128.9 512 288c0 17.7-14.3 32-32 32s-32-14.3-32-32C448 164.3 347.7 64 224 64c-17.7 0-32-14.3-32-32zM60.6 220.6L164.7 324.7l28.4-28.4c-.7-2.6-1.1-5.4-1.1-8.3c0-17.7 14.3-32 32-32s32 14.3 32 32s-14.3 32-32 32c-2.9 0-5.6-.4-8.3-1.1l-28.4 28.4L291.4 451.4c14.5 14.5 11.8 38.8-7.3 46.3C260.5 506.9 234.9 512 208 512C93.1 512 0 418.9 0 304c0-26.9 5.1-52.5 14.4-76.1c7.5-19 31.8-21.8 46.3-7.3zM224 96c106 0 192 86 192 192c0 17.7-14.3 32-32 32s-32-14.3-32-32c0-70.7-57.3-128-128-128c-17.7 0-32-14.3-32-32s14.3-32 32-32z"},child:[]}]})(e)}function x8(e){return za({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M64 32C28.7 32 0 60.7 0 96v64c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64zm280 72a24 24 0 1 1 0 48 24 24 0 1 1 0-48zm48 24a24 24 0 1 1 48 0 24 24 0 1 1 -48 0zM64 288c-35.3 0-64 28.7-64 64v64c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V352c0-35.3-28.7-64-64-64H64zm280 72a24 24 0 1 1 0 48 24 24 0 1 1 0-48zm56 24a24 24 0 1 1 48 0 24 24 0 1 1 -48 0z"},child:[]}]})(e)}const b8=({onSelectServer:e,toggleSidebar:t})=>qe.jsxs(ho,{theme:"dark",className:"menu-bar",children:[qe.jsxs(ho.SubMenu,{icon:qe.jsx(x8,{}),title:"Servers",children:[qe.jsx(ho.Item,{onClick:()=>e("casual"),children:"Casual server"},"casual"),qe.jsx(ho.Item,{onClick:()=>e("training"),children:"Training server"},"training"),qe.jsx(ho.Item,{onClick:()=>e("expert"),children:"Expert server"},"expert")]},"server"),qe.jsx(ho.Item,{icon:qe.jsx(m8,{}),onClick:t,children:"Toggle Info"},"toggleinfo"),qe.jsx(ho.Item,{icon:qe.jsx(y8,{}),children:"Pilots"},"pilots"),qe.jsx(ho.Item,{icon:qe.jsx(_8,{}),children:"ATC"},"atc"),qe.jsx(ho.Item,{icon:qe.jsx(g8,{}),children:"Settings"},"setting"),qe.jsx(ho.Item,{icon:qe.jsx(v8,{}),children:"Login"},"login")]});function w8(e,t,r){L.useEffect(()=>{if(!document)return;const a=document.querySelector('script[src="'.concat(e,'"]'));if(a!=null&&a.dataset.loaded){t==null||t();return}const l=a||document.createElement("script");a||(l.src=e);const d=()=>{l.dataset.loaded="1",t==null||t()};return l.addEventListener("load",d),r&&l.addEventListener("error",r),a||document.head.append(l),()=>{l.removeEventListener("load",d),r&&l.removeEventListener("error",r)}},[])}function S8(e){let{chartVersion:t="current",chartPackages:r=["corechart","controls"],chartLanguage:a="en",mapsApiKey:l}=e;const[d,f]=L.useState(null),[u,S]=L.useState(!1);return w8("https://www.gstatic.com/charts/loader.js",()=>{const T=window==null?void 0:window.google;T&&(T.charts.load(t,{packages:r,language:a,mapsApiKey:l}),T.charts.setOnLoadCallback(()=>{f(T)}))},()=>{S(!0)}),[d,u]}function C8(e){let{onLoad:t,onError:r,...a}=e;const[l,d]=S8(a);return L.useEffect(()=>{l&&t&&t(l)},[l]),L.useEffect(()=>{d&&r&&r()},[d]),null}const Ek={legend_toggle:!1,options:{},legendToggle:!1,getChartWrapper:()=>{},spreadSheetQueryParameters:{headers:1,gid:1},rootProps:{},chartWrapperParams:{}};let MC=0;const E8=()=>(MC+=1,"reactgooglegraph-".concat(MC)),T8=["#3366CC","#DC3912","#FF9900","#109618","#990099","#3B3EAC","#0099C6","#DD4477","#66AA00","#B82E2E","#316395","#994499","#22AA99","#AAAA11","#6633CC","#E67300","#8B0707","#329262","#5574A6","#3B3EAC"],P8=async function(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return new Promise((a,l)=>{const d="".concat(r.headers?"headers=".concat(r.headers):"headers=0"),f="".concat(r.query?"&tq=".concat(encodeURIComponent(r.query)):""),u="".concat(r.gid?"&gid=".concat(r.gid):""),S="".concat(r.sheet?"&sheet=".concat(r.sheet):""),T="".concat(r.access_token?"&access_token=".concat(r.access_token):""),M="".concat(d).concat(u).concat(S).concat(f).concat(T),A="".concat(t,"/gviz/tq?").concat(M);new e.visualization.Query(A).send(G=>{G.isError()?l("Error in query:  ".concat(G.getMessage()," ").concat(G.getDetailedMessage())):a(G.getDataTable())})})},{Provider:I8,Consumer:k8}=L.createContext(Ek),M8=e=>{let{children:t,value:r}=e;return L.createElement(I8,{value:r},t)},Tk=e=>{let{render:t}=e;return L.createElement(k8,null,r=>t(r))},A8="#CCCCCC";class z8 extends L.Component{componentDidMount(){this.draw(this.props),window.addEventListener("resize",this.onResize),(this.props.legend_toggle||this.props.legendToggle)&&this.listenToLegendToggle()}componentWillUnmount(){const{google:t,googleChartWrapper:r}=this.props;window.removeEventListener("resize",this.onResize),t.visualization.events.removeAllListeners(r),r.getChartType()==="Timeline"&&r.getChart()&&r.getChart().clearChart()}componentDidUpdate(){this.draw(this.props)}render(){return null}constructor(...t){super(...t),this.state={hiddenColumns:[]},this.listenToLegendToggle=()=>{const{google:r,googleChartWrapper:a}=this.props;r.visualization.events.addListener(a,"select",()=>{const d=a.getChart().getSelection(),f=a.getDataTable();if(d.length===0||d[0].row||!f)return;const u=d[0].column,S=this.getColumnID(f,u);this.state.hiddenColumns.includes(S)?this.setState(T=>({...T,hiddenColumns:[...T.hiddenColumns.filter(M=>M!==S)]})):this.setState(T=>({...T,hiddenColumns:[...T.hiddenColumns,S]}))})},this.applyFormatters=(r,a)=>{const{google:l}=this.props;for(let d of a)switch(d.type){case"ArrowFormat":{new l.visualization.ArrowFormat(d.options).format(r,d.column);break}case"BarFormat":{new l.visualization.BarFormat(d.options).format(r,d.column);break}case"ColorFormat":{const f=new l.visualization.ColorFormat(d.options),{ranges:u}=d;for(let S of u)f.addRange(...S);f.format(r,d.column);break}case"DateFormat":{new l.visualization.DateFormat(d.options).format(r,d.column);break}case"NumberFormat":{new l.visualization.NumberFormat(d.options).format(r,d.column);break}case"PatternFormat":{new l.visualization.PatternFormat(d.options).format(r,d.column);break}}},this.getColumnID=(r,a)=>r.getColumnId(a)||r.getColumnLabel(a),this.draw=async r=>{let{data:a,diffdata:l,rows:d,columns:f,options:u,legend_toggle:S,legendToggle:T,chartType:M,formatters:A,spreadSheetUrl:I,spreadSheetQueryParameters:G}=r;const{google:N,googleChartWrapper:q}=this.props;let Z,V=null;if(l){const Y=N.visualization.arrayToDataTable(l.old),ne=N.visualization.arrayToDataTable(l.new);V=N.visualization[M].prototype.computeDiff(Y,ne)}a!==null?Array.isArray(a)?Z=N.visualization.arrayToDataTable(a):Z=new N.visualization.DataTable(a):d&&f?Z=N.visualization.arrayToDataTable([f,...d]):I?Z=await P8(N,I,G):Z=N.visualization.arrayToDataTable([]);const F=Z.getNumberOfColumns();for(let Y=0;Y<F;Y+=1){const ne=this.getColumnID(Z,Y);if(this.state.hiddenColumns.includes(ne)){const fe=Z.getColumnLabel(Y),ie=Z.getColumnId(Y),_e=Z.getColumnType(Y);Z.removeColumn(Y),Z.addColumn({label:fe,id:ie,type:_e})}}const H=q.getChart();q.getChartType()==="Timeline"&&H&&H.clearChart(),q.setChartType(M),q.setOptions(u||{}),q.setDataTable(Z),q.draw(),this.props.googleChartDashboard!==null&&this.props.googleChartDashboard.draw(Z),V&&(q.setDataTable(V),q.draw()),A&&(this.applyFormatters(Z,A),q.setDataTable(Z),q.draw()),(T===!0||S===!0)&&this.grayOutHiddenColumns({options:u})},this.grayOutHiddenColumns=r=>{let{options:a}=r;const{googleChartWrapper:l}=this.props,d=l.getDataTable();if(!d)return;const f=d.getNumberOfColumns();if(this.state.hiddenColumns.length>0===!1)return;const S=Array.from({length:f-1}).map((T,M)=>{const A=this.getColumnID(d,M+1);return this.state.hiddenColumns.includes(A)?A8:a&&a.colors?a.colors[M]:T8[M]});l.setOptions({...a,colors:S}),l.draw()},this.onResize=()=>{const{googleChartWrapper:r}=this.props;r.draw()}}}class R8 extends L.Component{componentDidMount(){}componentWillUnmount(){}shouldComponentUpdate(){return!1}render(){const{google:t,googleChartWrapper:r,googleChartDashboard:a}=this.props;return L.createElement(Tk,{render:l=>L.createElement(z8,Object.assign({},l,{google:t,googleChartWrapper:r,googleChartDashboard:a}))})}}class L8 extends L.Component{shouldComponentUpdate(){return!1}listenToEvents(t){let{chartEvents:r,google:a,googleChartWrapper:l}=t;if(r){a.visualization.events.removeAllListeners(l);for(let f of r){var d=this;const{eventName:u,callback:S}=f;a.visualization.events.addListener(l,u,function(){for(var T=arguments.length,M=new Array(T),A=0;A<T;A++)M[A]=arguments[A];S({chartWrapper:l,props:d.props,google:a,eventArgs:M})})}}}componentDidMount(){var t;const{google:r,googleChartWrapper:a}=this.props;this.listenToEvents({chartEvents:((t=this.propsFromContext)===null||t===void 0?void 0:t.chartEvents)||null,google:r,googleChartWrapper:a})}render(){return this.props,L.createElement(Tk,{render:t=>(this.propsFromContext=t,null)})}constructor(t){super(t),this.propsFromContext=null}}let AC=0;class D8 extends L.Component{componentDidMount(){const{options:t,google:r,chartType:a,chartWrapperParams:l,toolbarItems:d,getChartEditor:f,getChartWrapper:u}=this.props,S={chartType:a,options:t,containerId:this.getGraphID(),...l},T=new r.visualization.ChartWrapper(S);T.setOptions(t||{}),u&&u(T,r);const M=new r.visualization.Dashboard(this.dashboard_ref),A=this.addControls(T,M);d&&r.visualization.drawToolbar(this.toolbar_ref.current,d);let I=null;f&&(I=new r.visualization.ChartEditor,f({chartEditor:I,chartWrapper:T,google:r})),this.setState({googleChartEditor:I,googleChartControls:A,googleChartDashboard:M,googleChartWrapper:T,isReady:!0})}componentDidUpdate(){if(!this.state.googleChartWrapper||!this.state.googleChartDashboard||!this.state.googleChartControls)return;const{controls:t}=this.props;if(t)for(let r=0;r<t.length;r+=1){const{controlType:a,options:l,controlWrapperParams:d}=t[r];d&&"state"in d&&this.state.googleChartControls[r].control.setState(d.state),this.state.googleChartControls[r].control.setOptions(l),this.state.googleChartControls[r].control.setControlType(a)}}shouldComponentUpdate(t,r){return this.state.isReady!==r.isReady||t.controls!==this.props.controls}render(){const{width:t,height:r,options:a,style:l}=this.props,d={height:r||a&&a.height,width:t||a&&a.width,...l};return this.props.render?L.createElement("div",{ref:this.dashboard_ref,style:d},L.createElement("div",{ref:this.toolbar_ref,id:"toolbar"}),this.props.render({renderChart:this.renderChart,renderControl:this.renderControl,renderToolbar:this.renderToolBar})):L.createElement("div",{ref:this.dashboard_ref,style:d},this.renderControl(f=>{let{controlProp:u}=f;return u.controlPosition!=="bottom"}),this.renderChart(),this.renderControl(f=>{let{controlProp:u}=f;return u.controlPosition==="bottom"}),this.renderToolBar())}constructor(...t){var r;super(...t),r=this,this.state={googleChartWrapper:null,googleChartDashboard:null,googleChartControls:null,googleChartEditor:null,isReady:!1},this.graphID=null,this.dashboard_ref=L.createRef(),this.toolbar_ref=L.createRef(),this.getGraphID=()=>{const{graphID:a,graph_id:l}=this.props;let d;return!a&&!l?this.graphID?d=this.graphID:d=E8():a&&!l?d=a:l&&!a?d=l:d=a,this.graphID=d,this.graphID},this.getControlID=(a,l)=>{AC+=1;let d;return typeof a>"u"?d="googlechart-control-".concat(l,"-").concat(AC):d=a,d},this.addControls=(a,l)=>{const{google:d,controls:f}=this.props,u=f?f.map((T,M)=>{const{controlID:A,controlType:I,options:G,controlWrapperParams:N}=T,q=this.getControlID(A,M);return{controlProp:T,control:new d.visualization.ControlWrapper({containerId:q,controlType:I,options:G,...N})}}):null;if(!u)return null;l.bind(u.map(T=>{let{control:M}=T;return M}),a);for(let T of u){const{control:M,controlProp:A}=T,{controlEvents:I=[]}=A;for(let G of I){var S=this;const{callback:N,eventName:q}=G;d.visualization.events.removeListener(M,q,N),d.visualization.events.addListener(M,q,function(){for(var Z=arguments.length,V=new Array(Z),F=0;F<Z;F++)V[F]=arguments[F];N({chartWrapper:a,controlWrapper:M,props:S.props,google:d,eventArgs:V})})}}return u},this.renderChart=()=>{const{width:a,height:l,options:d,style:f,className:u,rootProps:S,google:T}=this.props,M={height:l||d&&d.height,width:a||d&&d.width,...f};return L.createElement("div",Object.assign({id:this.getGraphID(),style:M,className:u},S),this.state.isReady&&this.state.googleChartWrapper!==null?L.createElement(L.Fragment,null,L.createElement(R8,{googleChartWrapper:this.state.googleChartWrapper,google:T,googleChartDashboard:this.state.googleChartDashboard}),L.createElement(L8,{googleChartWrapper:this.state.googleChartWrapper,google:T})):null)},this.renderControl=function(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:l=>!0;return r.state.isReady&&r.state.googleChartControls!==null?L.createElement(L.Fragment,null,r.state.googleChartControls.filter(l=>{let{controlProp:d,control:f}=l;return a({control:f,controlProp:d})}).map(l=>{let{control:d,controlProp:f}=l;return L.createElement("div",{key:d.getContainerId(),id:d.getContainerId()})})):null},this.renderToolBar=()=>this.props.toolbarItems?L.createElement("div",{ref:this.toolbar_ref}):null}}class Pk extends L.Component{render(){const{chartLanguage:t,chartPackages:r,chartVersion:a,mapsApiKey:l,loader:d,errorElement:f}=this.props;return L.createElement(M8,{value:this.props},this.state.loadingStatus==="ready"&&this.state.google!==null?L.createElement(D8,Object.assign({},this.props,{google:this.state.google})):this.state.loadingStatus==="errored"&&f?f:d,L.createElement(C8,{chartLanguage:t,chartPackages:r,chartVersion:a,mapsApiKey:l,onLoad:this.onLoad,onError:this.onError}))}componentDidMount(){this._isMounted=!0}componentWillUnmount(){this._isMounted=!1}isFullyLoaded(t){const{controls:r,toolbarItems:a,getChartEditor:l}=this.props;return t&&t.visualization&&t.visualization.ChartWrapper&&t.visualization.Dashboard&&(!r||t.visualization.ChartWrapper)&&(!l||t.visualization.ChartEditor)&&(!a||t.visualization.drawToolbar)}constructor(...t){super(...t),this._isMounted=!1,this.state={loadingStatus:"loading",google:null},this.onLoad=r=>{if(this.props.onLoad&&this.props.onLoad(r),this.isFullyLoaded(r))this.onSuccess(r);else{const a=setInterval(()=>{const l=window.google;this._isMounted?l&&this.isFullyLoaded(l)&&(clearInterval(a),this.onSuccess(l)):clearInterval(a)},1e3)}},this.onSuccess=r=>{this.setState({loadingStatus:"ready",google:r})},this.onError=()=>{this.setState({loadingStatus:"errored"})}}}Pk.defaultProps=Ek;var zC;(function(e){e.annotation="annotation",e.annotationText="annotationText",e.certainty="certainty",e.emphasis="emphasis",e.interval="interval",e.scope="scope",e.style="style",e.tooltip="tooltip",e.domain="domain"})(zC||(zC={}));const F8=0,O8=[{id:"81d9ccd4-9c03-493a-811e-8fad3e57bd05",name:"A-10"},{id:"876b428a-3ee2-46cd-9d8c-2c59424dfcb5",name:"C130"},{id:"710c84ae-6fdc-4c4a-ac3b-4031c3036e98",name:"A223"},{id:"982dd974-5be7-4369-90c6-bd92863632ba",name:"A318"},{id:"2c2f162e-a7d9-4ebd-baf4-859aed36165a",name:"A319"},{id:"a266b67f-03e3-4f8c-a2bb-b57cfd4b12f3",name:"A320"},{id:"d7434d84-555a-4d9b-93a7-53c77cf846ea",name:"A321"},{id:"f580ad00-b7c7-4813-9dbc-c4a8c655cc46",name:"A330-200F"},{id:"6af2c9f8-abd8-4872-a9bc-4e79fd84fe77",name:"A333"},{id:"474810ee-503c-44f2-a305-c176ec8cc431",name:"A339"},{id:"8b00fd70-d825-4c30-a52e-3a27a3a1a157",name:"A346"},{id:"230ec095-5e36-4637-ba2f-68831b31e891",name:"A350"},{id:"f11ed126-bce8-46ef-9265-69191c354575",name:"A380"},{id:"341820c8-ed7e-4824-9f53-f7489231fe26",name:"B712"},{id:"4f6fc40d-a5b5-43c5-b5ff-ff0000a878b2",name:"B738M"},{id:"2ec6f8cd-fdb9-464f-87c2-808f778fdb1d",name:"B737"},{id:"f60a537d-5f83-4b68-8f66-b5f76d1e1775",name:"B738"},{id:"64568366-b72c-47bd-8bf6-6fdb81b683f9",name:"B739"},{id:"c82da702-ea61-4399-921c-34f35f3ca5c4",name:"B742"},{id:"de510d3d-04f8-46e0-8d65-55b888f33129",name:"B744"},{id:"9759c19f-8f18-40f5-80d1-03a272f98a3b",name:"B748"},{id:"e94ec915-3368-4bcc-bc78-2c5ad3cfbabb",name:"B74A"},{id:"0d49ce9e-446a-4d12-b651-6983afdeeb40",name:"B74S"},{id:"3ee45d20-1984-4d95-a753-3696e35cdf77",name:"B74S"},{id:"ed29f26b-774e-471e-a23a-ecb9b6f5da74",name:"B752"},{id:"3828d120-d5b9-475b-b368-a94aad264b07",name:"B763"},{id:"bec63a00-a483-4427-a076-0f76dba0ee97",name:"B772"},{id:"8290107b-d728-4fc3-b36e-0224c1780bac",name:"B77L"},{id:"e258f6d4-4503-4dde-b25c-1fb9067061e2",name:"B77W"},{id:"6925c030-a868-49cc-adc8-7025537c51ca",name:"B77F"},{id:"61084cae-8aac-4da4-a7df-396ec6d9c870",name:"B78X"},{id:"c1ae3647-f56a-4dc4-9007-cc8b1a2697a5",name:"B788"},{id:"0c039044-1a57-48db-99c1-7570a6bf2b00",name:"B789"},{id:"3098345e-1152-4441-96ec-40a71179a24f",name:"DH8D"},{id:"7b6e1658-42ab-4fc3-81ec-706445346d46",name:"C130H"},{id:"33d26fc7-ae7d-4c5d-9e0d-d6cba93d4913",name:"C130J"},{id:"e0e1900e-0e63-4700-b508-5e2efe120ce5",name:"C130J-30"},{id:"2b1249c8-11d8-4fa6-9aae-a99eff451225",name:"C17"},{id:"ef677903-f8d3-414f-a190-233b2b855d46",name:"C172"},{id:"206884f9-38a8-4118-a920-a7dcbd166c47",name:"C208"},{id:"8e316ed6-9296-472a-93f8-4b6ab74b9121",name:"CL35"},{id:"e92bc6db-a9e6-4137-a93c-a7423715b799",name:"SR22"},{id:"b3907f6b-c8cf-427b-94fb-1f9365d990df",name:"CRJX"},{id:"24364e52-3788-487f-9f98-00f38b1f459c",name:"CR2"},{id:"8f34680a-a4ad-4f21-91e9-3a932ab03ca4",name:"CR7"},{id:"958486b0-1ef4-4efd-bee0-ea94e96f6c96",name:"CR9"},{id:"8bafde46-7e6e-44c5-800f-917237c49d75",name:"XCub"},{id:"693c3fab-307d-4467-aa40-0a4d569841a9",name:"DC10"},{id:"e59fa7b4-b708-4480-aebd-26659a4f312b",name:"DC10F"},{id:"af055734-aaed-44ad-a2d0-5b9046f29d0d",name:"E175"},{id:"7de22dcf-91dd-4932-b225-533298873df2",name:"E190"},{id:"9bbe741a-6fbe-415b-9eb1-00d45083c7a4",name:"F14"},{id:"7bd8096f-8eae-47b9-8e1a-38dabd2c59c4",name:"F16"},{id:"849366e1-cb11-4d72-9034-78b11cd026b0",name:"F22"},{id:"0a3edb21-d515-4619-8392-aef51b952ac9",name:"F/A-18E"},{id:"b1e726b0-be58-4a9b-88e5-e40bc40a1f9a",name:"MD11"},{id:"3f78766a-30c8-4d65-95ae-ebc2fb758aac",name:"MD11F"},{id:"9769c825-0f89-4faf-abb1-9dd473321ede",name:"P38"},{id:"61bd47dc-e12b-4912-9d91-719e1f9298d7",name:"Space Shuttle"},{id:"8a62f1d0-bca9-494c-bc01-1fb8b7255f76",name:"Spitfire"},{id:"3f17ca35-b384-4391-aa5e-5beececb0612",name:"TBM930"}],Ik={errorCode:F8,result:O8},B8=({sessionName:e,sessionId:t})=>{const[r,a]=L.useState(null),[l,d]=L.useState([]),[f,u]=L.useState([]),[S,T]=L.useState([]);L.useEffect(()=>{(async()=>{try{const G=await vs.getSessionData(t);a(G.userCount)}catch(G){console.error("Error fetching session data:",G)}})()},[t]),L.useEffect(()=>{(async()=>{try{const N=(await vs.getFlightData(t)).reduce((V,F)=>{const{aircraftId:H}=F;return V[H]=(V[H]||0)+1,V},{}),q=Object.entries(N).map(([V,F])=>{const H=Ik.result.find(Y=>Y.id===V);return[H?H.name:"Unknown",F]}).sort((V,F)=>F[1]-V[1]).slice(0,5),Z=[["Aircraft","Count"],...q];d(Z)}catch(G){console.error("Error fetching flight data:",G)}})()},[t]),L.useEffect(()=>{(async()=>{try{const N=(await vs.getAirportData(t)).sort((q,Z)=>Z.inboundFlightsCount-q.inboundFlightsCount).slice(0,5);u(N)}catch(G){console.error("Error fetching airport data:",G)}})()},[t]),L.useEffect(()=>{(async()=>{try{const G=await vs.getAtcData(t);T(G)}catch(G){console.error("Error fetching ATC data:",G)}})()},[t]);const M=I=>["grd","twr","unicom","clr","app","dep","ctr","atis"][I]||"",A=S.reduce((I,G)=>{const{airportName:N,type:q}=G,Z=M(q);return I[N]||(I[N]={grd:!1,twr:!1,app:!1,dep:!1,ctr:!1,atis:!1}),Z&&(I[N][Z]=!0),I},{});return qe.jsxs("div",{className:"session-info-sidebar",children:[qe.jsxs("div",{className:"statistics-header",children:[qe.jsx("h3",{children:"Infinite Monitor Live"}),qe.jsx("p",{children:"1.1.0v Alpha"})]}),qe.jsx("div",{className:"name-session",children:qe.jsx("h4",{children:e})}),qe.jsx("div",{className:"session-count-user",children:r!==null?qe.jsxs("p",{children:[qe.jsx("span",{children:r})," Users Online"]}):qe.jsx("p",{children:"Loading..."})}),qe.jsxs("div",{className:"chart-section",children:[qe.jsx("div",{className:"grafic-header",children:qe.jsx("h4",{children:"5 Popular Aircraft"})}),qe.jsx("div",{className:"chart-container",children:l.length>1?qe.jsx(Pk,{chartType:"PieChart",data:l,options:{pieHole:.4,is3D:!1,backgroundColor:"transparent",legend:{position:"none"},pieSliceText:"label",slices:{0:{color:"#1f15af"},1:{color:"#3f32f3"},2:{color:"#5b5dec"},3:{color:"#6d6cb6"},4:{color:"#9a99cc"}},chartArea:{width:"100%",height:"100%"}},width:"200px",height:"200px"}):qe.jsx("p",{children:"Loading chart..."})})]}),qe.jsxs("div",{className:"statistics-section",children:[qe.jsx("h4",{children:"Most Popular Airports"}),qe.jsxs("div",{className:"airport-table",children:[qe.jsxs("div",{className:"airport-table-header",children:[qe.jsx("span",{className:"labelInbound",children:"Inbound"}),qe.jsx("span",{className:"labelOutbound",children:"Outbound"})]}),f.map(I=>qe.jsxs("div",{className:"airport-stat",children:[qe.jsx("span",{className:"inbound",children:I.inboundFlightsCount}),qe.jsx("span",{className:"airport",children:I.airportIcao}),qe.jsx("span",{className:"outbound",children:I.outboundFlightsCount})]},I.airportIcao))]})]}),qe.jsxs("div",{className:"statistics-section-atc",children:[qe.jsx("h4",{children:"ATC Status"}),qe.jsx("ul",{children:Object.keys(A).map(I=>qe.jsxs("li",{className:"airport-stat",children:[qe.jsx("span",{className:"airport",children:I}),qe.jsxs("span",{className:"atc-status",children:[A[I].grd&&qe.jsx("span",{children:"Grd"}),A[I].twr&&qe.jsx("span",{children:"Twr"}),A[I].app&&qe.jsx("span",{children:"App"}),A[I].dep&&qe.jsx("span",{children:"Dep"})]})]},I))})]})]})},N8=[{id:"",LiveryName:"ovni",image:"https://i.ibb.co/xY27KSy/ovni-1-715x402.png"},{id:"643f687b-9553-4dd1-a98b-7932b6ec0529",LiveryName:"GOL - 2018",modelo:"Boeing 737-800",image:"https://i.ibb.co/R3hrZs5/gol-2018.png"},{id:"0a3b5b5a-e646-42c0-9c9b-540d94715a58",LiveryName:"FedEx",modelo:"Cessna 208",image:"https://i.ibb.co/M7ZvB3c/208-fedex.png"},{id:"f9474e48-f651-4d39-ab5e-4806339afd5c",LiveryName:"Avianca",modelo:"Airbus A320",image:"https://i.ibb.co/Dzd7hgP/avianca.png"},{id:"6cd046f4-ca62-4450-8b51-6cb68dc2f5a0",LiveryName:"GOL+",modelo:"Boeing 737-800",image:"https://i.ibb.co/44rWdX0/gol-mais.png"},{id:"9b8737c3-ee29-43ad-8fa4-7c2fed73ebc6",LiveryName:"ITA Transportes Aéreos",modelo:"Airbus A320",image:"https://i.ibb.co/4dvvssf/ita-transportes-aereos.png"},{id:"8944ff81-f687-4d33-8717-b7252d2ab280",LiveryName:"Azul",modelo:"Airbus A330-900",image:"https://i.ibb.co/hWMD5r0/azul.png"},{id:"8aa8f0e5-2788-4724-95f7-b4b07830a4b3",LiveryName:"Charcoal",modelo:"TBM-930",image:"https://i.ibb.co/z45C5pH/tbm-Charcoal.png"},{id:"52e28897-9067-4a8b-8480-140489936e32",LiveryName:"Sansa",modelo:"Cessna 208",image:"https://i.ibb.co/Nnm1n8g/208-sansa.png"},{id:"af0c5178-49fa-471d-a9b2-5ba4d3da3827",LiveryName:"Azul Cargo",modelo:"Cessna 208",image:"https://i.ibb.co/WGGL985/azul-cargo.png"},{id:"2ddb13a1-157c-4872-9f77-40cc92a4c5a7",LiveryName:"Generic",modelo:"Boeing 737-700",image:"https://i.ibb.co/dcWX9F6/generic.png"},{id:"4ed9d53e-a879-4433-abc2-dd3ed5466617",LiveryName:"Air China",modelo:"Boeing 777-300ER",image:"https://i.ibb.co/hY9vsx6/air-china.png"},{id:"29947d52-a32a-4675-b04d-878fa2ac5476",LiveryName:"Azul",modelo:"Airbus A320",image:"https://i.ibb.co/ckkk34v/azul.png"},{id:"4f2bebb1-1fd8-444e-bf44-b42b88546a98",LiveryName:"Garuda Indonesia",modelo:"Boeing 777-300ER",image:"https://i.ibb.co/fQgyqFZ/garuda-indonesia.png"},{id:"39d0ea03-5bf5-4ab0-8651-37bfe1e07205",LiveryName:"American Airlines",modelo:"Boeing 777-300ER",image:"https://i.ibb.co/Xzr3JP7/american-airlines.png"},{id:"a6b6dfb8-1a54-45d3-8a9a-ea336e49add0",LiveryName:"Avianca",modelo:"Boeing 787-8",image:"https://i.ibb.co/zbZ5xmP/avianca.png"},{id:"e44843cc-dd66-473c-b40b-f0a45380e5f9",LiveryName:"LATAM",modelo:"Airbus A320",image:"https://i.ibb.co/k4Xb07d/latam.png"},{id:"f8db8f7b-35ef-4d6a-9248-2bc5e5008d49",LiveryName:"LATAM",modelo:"Airbus A350",image:"https://i.ibb.co/h7ZQrg7/Latam.png"},{id:"c177f0bf-f407-4322-bb0d-83884bbb0cdc",LiveryName:"United Airlines - 2019",modelo:"Boeing 787-9",image:"https://i.ibb.co/GVxPTL4/united-airlines-2019.png"},{id:"d0074d2e-3394-4775-91d2-7bd634aebdcd",LiveryName:"LATAM",modelo:"Airbus A319",image:"https://i.ibb.co/jVV2rDq/latam.png"},{id:"01c94477-768e-47db-8adc-fb4e0b2d3d52",LiveryName:"LATAM",modelo:"Boeing 777-300ER",image:"https://i.ibb.co/1TfQryD/latam.png"},{id:"32becef6-0e00-4fdd-8e78-98996009ad53",LiveryName:"LATAM",modelo:"Airbus A321",image:"https://i.ibb.co/g4BwXRm/latam.png"},{id:"c0af9dbd-5b75-4da9-a3fb-4766427c342e",LiveryName:"Challenger 350",modelo:"Catreus Aviation",image:"https://i.ibb.co/9wFLZ6R/challenger-350.png"},{id:"43cd322a-8b34-4879-8c62-5dbdcc9dc541",LiveryName:"Emirates - 1999",modelo:"Airbus A380",image:"https://i.ibb.co/2j3zxRR/emirates-1999.png"},{id:"5fa22d06-1d44-46e4-b797-6c254b23cbfc",LiveryName:"TAP",modelo:"Airbus A330-900",image:"https://i.ibb.co/6wHC4wK/tap.png"},{id:"ae39a8c3-e027-41b6-ad43-264a81baaea3",LiveryName:"Air France (2019)",modelo:"Boeing 777-300ER",image:"https://i.ibb.co/vYCTnLp/air-france-2019.png"},{id:"99430457-aa53-407e-adbc-bfba6fc30d2c",LiveryName:"Generic",modelo:"Airbus A320",image:"https://i.ibb.co/stxgyFB/generic.png"},{id:"aafa295c-0584-4683-b880-ac87759785b8",LiveryName:"Qatar Airways",modelo:"Boeing 777-200LR",image:"https://i.ibb.co/9p6scLh/qatar-airline.png"},{id:"19da5b49-4a06-4e19-ac73-6304a0c50c5b",LiveryName:"ExecuJet",modelo:"Challenger 350",image:"https://i.ibb.co/j44X0B6/execujet.png"},{id:"f1122b9b-f4a8-4543-b83f-7d7faef56a3c",LiveryName:"Azul Conecta",modelo:"Cessna 208",image:"https://i.ibb.co/J5V7YTQ/azul-conecta.png"},{id:"762e9d72-94e7-4a16-8c1f-85dcf562598d",LiveryName:"Azul",modelo:"Airbus A350",image:"https://i.ibb.co/WKpKpZj/azul.png"},{id:"e9107e81-6473-4b92-8a8d-b95b5aa782fb",LiveryName:"Gol-2019",modelo:"Boeing 737-700",image:"https://i.ibb.co/fr0XNCv/gol-2019.png"},{id:"959d0b4b-5bef-4f34-a6a0-3cb91ff66181",LiveryName:"Safarilink",modelo:"Cessna 208",image:"https://i.ibb.co/K70x8s4/safarilink.png"},{id:"34488fc3-07f5-495e-89eb-97702b3ace7a",LiveryName:"gol",modelo:"Boeing 737-700",image:"https://i.ibb.co/5c3Qn4r/gol.png"},{id:"7ea21653-200a-4b3d-b1e3-c986cca14929",LiveryName:"Emirates",modelo:"Boeing 777-300ER",image:"https://i.ibb.co/WKkX40d/emirates.png"},{id:"a1a53d68-462a-4a4a-afe2-02361297f048",LiveryName:"Aerolíneas Argentinas",modelo:"Boeing 737-800",image:"https://i.ibb.co/Qddz8Vg/aerolineas-argentinas.png"},{id:"8ee511ab-7111-48e0-bd15-ca166f43be59",LiveryName:"Delta Air Lines",modelo:"Airbus A350",image:"https://i.ibb.co/Zg5NfPN/delta.png"}],$8=[{username:"jay_bee",twitch:"https://www.twitch.tv/user1",youtube:"https://www.youtube.com/user1"},{username:"Lars_Krabbe",twitch:"",youtube:"https://www.youtube.com/user2"},{username:"Mjohn610",twitch:"https://www.twitch.tv/user3",youtube:"https://www.youtube.com/user3"}],j8="/refature_react_liveflight/assets/ovni-B-h96zUl.png";function V8(e){return za({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"Paper_Plane"},child:[{tag:"path",attr:{d:"M21.061,11.077,3.741,4.157a.994.994,0,0,0-1.17.32,1,1,0,0,0-.01,1.22l4.49,6a.525.525,0,0,1-.01.62L2.511,18.3a1.02,1.02,0,0,0,0,1.22,1,1,0,0,0,.8.4,1.021,1.021,0,0,0,.38-.07l17.36-6.9a1.006,1.006,0,0,0,.01-1.87ZM3.371,5.087l16.06,6.42H8.061a1.329,1.329,0,0,0-.21-.41Zm-.06,13.82,4.53-5.98a1.212,1.212,0,0,0,.22-.42h11.38Z"},child:[]}]}]})(e)}function U8(e){return za({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M407.7 224c-3.4 0-14.8.1-18 .3l-64.9 1.7c-.7 0-1.4-.3-1.7-.9L225.8 79.4c-2.9-4.6-8.1-7.4-13.5-7.4h-23.7c-5.6 0-7.5 5.6-5.5 10.8l50.1 142.8c.5 1.3-.4 2.7-1.8 2.7L109 230.1c-2.6.1-5-1.1-6.6-3.1l-37-45c-3-3.9-7.7-6.1-12.6-6.1H36c-2.8 0-4.7 2.7-3.8 5.3l19.9 68.7c1.5 3.8 1.5 8.1 0 11.9l-19.9 68.7c-.9 2.6 1 5.3 3.8 5.3h16.7c4.9 0 9.6-2.3 12.6-6.1L103 284c1.6-2 4.1-3.2 6.6-3.1l121.7 2.7c1.4.1 2.3 1.4 1.8 2.7L183 429.2c-2 5.2-.1 10.8 5.5 10.8h23.7c5.5 0 10.6-2.8 13.5-7.4L323.1 287c.4-.6 1-.9 1.7-.9l64.9 1.7c3.3.2 14.6.3 18 .3 44.3 0 72.3-14.3 72.3-32S452.1 224 407.7 224z"},child:[]}]})(e)}const RC=(e,t,r,a)=>{const d=e*Math.PI/180,f=r*Math.PI/180,u=(r-e)*Math.PI/180,S=(t-a)*Math.PI/180,T=Math.sin(u/2)*Math.sin(u/2)+Math.cos(d)*Math.cos(f)*Math.sin(S/2)*Math.sin(S/2);return 6371e3*(2*Math.atan2(Math.sqrt(T),Math.sqrt(1-T)))/1852},H8=e=>{const t=N8.find(r=>r.id===e);return t?t.image:j8},kk=L.forwardRef(({isVisible:e,flightData:t,sessionId:r},a)=>{const[l,d]=L.useState(null),[f,u]=L.useState("N/A"),[S,T]=L.useState("N/A"),[M,A]=L.useState(null),[I,G]=L.useState(null),[N,q]=L.useState("N/A"),[Z,V]=L.useState("N/A"),[F,H]=L.useState(""),[Y,ne]=L.useState([]),[fe,ie]=L.useState({xp:0,grade:"N/A",flightTime:"0:00"}),[_e,be]=L.useState(0),Pe=Ce=>{const Ie=Math.floor(Ce/60),Ke=Ce%60;return`${String(Ie).padStart(2,"0")}:${String(Ke).padStart(2,"0")}`};L.useEffect(()=>{t&&r&&(async()=>{try{const Ie=await vs.getFlightPlan(r,t.flightId);if(d(Ie),Ie&&Ie.result&&Ie.result.flightPlanItems){const Ke=Ie.result.flightPlanItems;if(Ke.length>0){const ke=Ke[0].location,Se=Ke[Ke.length-1].location,ge=RC(ke.latitude,ke.longitude,Se.latitude,Se.longitude);G(ge);const Fe=RC(t.latitude,t.longitude,Se.latitude,Se.longitude);A(Fe.toFixed(0));const Be=(ge-Fe)/ge*100;be(Be);const Ve=t.speed,Ze=Fe/Ve,gt=new Date(Date.now()+Ze*36e5);q(gt.toISOString().split("T")[1].substring(0,5));const st=gt.getTimezoneOffset()*6e4,St=new Date(gt.getTime()-st);V(St.toISOString().split("T")[1].substring(0,5))}}if(Ie&&Ie.result&&Ie.result.waypoints){const Ke=Ie.result.waypoints;Ke.length>0&&(ne(Ke),u(Ke[0]||"N/A"),T(Ke[Ke.length-1]||"N/A"))}}catch(Ie){console.error("Erro ao buscar o plano de voo:",Ie)}})()},[t,r]),L.useEffect(()=>{const Ce=Ik.result.find(Ie=>Ie.id===t.aircraftId);H(Ce?Ce.name:"Unknown Aircraft")},[t.aircraftId]),L.useEffect(()=>{const Ce=async()=>{const Ie=await vs.userStatus(t.userId);Ie&&ie({xp:Ie.xp||0,grade:Ie.grade||"N/A",flightTime:Pe(Ie.flightTime)||"0:00"})};t.userId&&Ce()},[t.userId]);const ze=Ce=>{Ce.stopPropagation()},We=$8.find(Ce=>Ce.username===t.username);return qe.jsxs("div",{className:`user-info-sidebar ${e?"visible":""}`,ref:a,onClick:ze,children:[qe.jsx("div",{className:"imageLivery",children:qe.jsx("img",{src:H8(t.liveryId),alt:"Livery",className:"livery-image"})}),qe.jsxs("div",{className:"usercallsign",children:[qe.jsxs("span",{className:"circuloIcon",children:[qe.jsx(V8,{})," "]})," ",t.callsign]}),qe.jsx("div",{className:"userroute",children:qe.jsxs("div",{className:"progress-container",children:[qe.jsx("span",{children:f}),qe.jsxs("div",{className:"progress-bar",children:[qe.jsx("div",{className:"progress",style:{width:`${_e}%`}}),qe.jsx(U8,{className:"progress-icon",style:{left:`${_e}%`}})]}),qe.jsx("span",{children:S})]})}),qe.jsxs("div",{className:"col-info-flight-user",children:[qe.jsxs("div",{className:"info-box",children:[qe.jsxs("span",{children:[M," nm"]}),qe.jsx("p",{children:"DISTANCE"})]}),qe.jsxs("div",{className:"info-box",children:[qe.jsx("span",{children:t.altitude.toFixed(0)}),qe.jsx("p",{children:"ALTITUDE"})]}),qe.jsxs("div",{className:"info-box",children:[qe.jsx("span",{children:t.speed.toFixed(0)}),qe.jsx("p",{children:"SPEED"})]})]}),qe.jsxs("div",{className:"col-info-flight-user",children:[qe.jsxs("div",{className:"info-box",children:[qe.jsxs("span",{children:[N," Z"]}),qe.jsx("p",{children:"ETA Zulu"})]}),qe.jsxs("div",{className:"info-box",children:[qe.jsx("span",{children:Z}),qe.jsx("p",{children:"ETA Local"})]}),qe.jsxs("div",{className:"info-box",children:[qe.jsx("span",{children:F}),qe.jsx("p",{children:"AIRCRAFT"})]})]}),qe.jsxs("div",{className:"route-info-user",children:[qe.jsx("span",{children:"ROUTE"}),qe.jsx("div",{className:"waypoints-container",children:Y.map((Ce,Ie)=>qe.jsxs("span",{className:"waypoint",children:[Ce||"Unknown",Ie<Y.length-1?" ":""]},Ie))})]}),qe.jsxs("div",{className:"col-info-flight-user",children:[qe.jsxs("div",{className:"info-box-user",children:[qe.jsx("span",{children:fe.xp}),qe.jsx("p",{children:"XP"})]}),qe.jsxs("div",{className:"info-box-user",children:[qe.jsx("span",{children:fe.grade}),qe.jsx("p",{children:"GRADE"})]}),qe.jsxs("div",{className:"info-box-user",children:[qe.jsx("span",{children:fe.flightTime}),qe.jsx("p",{children:"TIME"})]})]}),qe.jsxs("div",{className:"inforusername",children:[qe.jsx("span",{children:t.username}),We&&qe.jsxs("span",{className:"stream-icons",children:[We.twitch&&qe.jsx("a",{href:We.twitch,target:"_blank",rel:"noopener noreferrer",children:qe.jsx(f8,{className:"stream-icon"})}),We.youtube&&qe.jsx("a",{href:We.youtube,target:"_blank",rel:"noopener noreferrer",children:qe.jsx(p8,{className:"stream-icon"})})]})]})]})});kk.displayName="UserInfoSidebar";function q8(e){return za({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M453.1 32h-312c-38.9 0-76.2 31.2-83.3 69.7L1.2 410.3C-5.9 448.8 19.9 480 58.9 480h312c38.9 0 76.2-31.2 83.3-69.7l56.7-308.5c7-38.6-18.8-69.8-57.8-69.8zm-58.2 347.3l-32 13.5-115.4-110c-14.7 10-29.2 19.5-41.7 27.1l22.1 64.2-17.9 12.7-40.6-61-52.4-48.1 15.7-15.4 58 31.1c9.3-10.5 20.8-22.6 32.8-34.9L203 228.9l-68.8-99.8 18.8-28.9 8.9-4.8L265 207.8l4.9 4.5c19.4-18.8 33.8-32.4 33.8-32.4 7.7-6.5 21.5-2.9 30.7 7.9 9 10.5 10.6 24.7 2.7 31.3-1.8 1.3-15.5 11.4-35.3 25.6l4.5 7.3 94.9 119.4-6.3 7.9z"},child:[]}]})(e)}const W8=()=>qe.jsx("div",{className:"logo",children:qe.jsx("div",{className:"logo-icon",children:qe.jsx(q8,{})})}),{Sider:G8}=wl,Sm={training:{id:"c6b11fef-3aaf-475c-9c17-5bf587438f84",name:"Training Server"},casual:{id:"ef55b332-8847-47eb-8846-e27bdf8a673b",name:"Casual Server"},expert:{id:"99917fd2-bea4-485d-b83e-5094628f33e5",name:"Expert Server"}},Z8=()=>{const[e,t]=L.useState("expert"),[r,a]=L.useState(!0),[l,d]=L.useState(!1),[f,u]=L.useState(null),S=L.useRef(null),T=G=>{t(G)},M=G=>{u(G),d(!0)},A=G=>{S.current&&!S.current.contains(G.target)&&d(!1)},I=()=>{a(!r)};return nn.useEffect(()=>(document.addEventListener("mousedown",A),()=>{document.removeEventListener("mousedown",A)}),[]),qe.jsxs(wl,{children:[qe.jsxs(G8,{className:"sidebar",collapsed:!0,collapsible:!1,children:[qe.jsx(W8,{}),qe.jsx(b8,{onSelectServer:T,toggleSidebar:I})]}),qe.jsx(wl,{children:qe.jsxs("div",{style:{display:"flex",flexGrow:1,position:"relative"},children:[r&&qe.jsx(B8,{sessionName:Sm[e].name,sessionId:Sm[e].id}),qe.jsx(TR,{sessionId:Sm[e].id,onIconClick:M}),l&&f&&qe.jsx(kk,{ref:S,isVisible:l,flightData:f,sessionId:Sm[e].id})]})})]})};function K8(){return qe.jsx(qe.Fragment,{children:qe.jsx(Z8,{})})}b0.createRoot(document.getElementById("root")).render(qe.jsx(nn.StrictMode,{children:qe.jsx(K8,{})}));
